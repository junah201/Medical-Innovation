define("nls/en-us/strings",{OK:"Okay",CANCEL:"Cancel",DELETE:"Delete",BUTTON_YES:"Yes",BUTTON_NO:"No",ERROR:"Error",ALERT_TITLE:"Alert",ALERT_NO_SEARCH_RESULT:"No results found.",ADD_BOOKMARK_TITILE:"Add Bookmark",REMOVE_BOOKMARK_TITILE:"Remove Bookmark",MODIFY_BOOKMARK_TITILE:"Modify Bookmark",ENTER_TEXT:"Enter text",TEXT_INPUT_PLACEHOLDER:"Enter text",ENTER_SEARCH_WORDS_PLACEHOLDER:"Enter search words ...",ENTER_PAGE_NUMBER:"Enter page number ...",ADD_MEMO_TITILE:"Add Memo",MODIFY_MEMO_TITILE:"Modify Memo",EMPTY:"Empty",SELECT_PAGE_TITLE:"Select page",LEFT_PAGE_TITLE:"Left Page",RIGHT_PAGE_TITLE:"Right Page",NO_PAGE_SELECTED:"No pages selected.",REMOVE_ALL_MY_STORAGE:"Are you sure you want to delete all of your library?",ERROR_NOT_VALID_PAGE_NUMBER:"{0} page is not a valid page number.",MOVE_PAGE_TITLE:"Move Page",PREPARE_PRINTING:"Preparing print ...",START_SLIDESHOW:"Start Slideshow",STOP_SLIDESHOW:"Stop Slideshow",SLIDESHOW:"Slideshow",FULL_SCREEN:"Full Screen",ALL_FILES:"All Files",DEFAULT_FOLDER:"Default Folder",MASTER_FOLDER:"Master Folder",MY_STORAGE:"My Storage",TOC:"Table of Contents",TOC_LIST:"Table of Contents",ZOOM_IN_OUT:"Zoom In/Out",ZOOM_IN:"Zoom In",ZOOM_OUT:"Zoom Out",PRINT:"Print",MEMO:"Memo",SEARCH:"Search",BOOKMARK:"Bookmark",THUMBNAIL:"Thumbnail",ENTER_SEARCH_WORDS:"Enter search words ...",FIRST_PAGE:"First Page",PREVIOUS_PAGE:"Previous Page",NEXT_PAGE:"Next Page",GO_TO_PAGE:"Go To Page",NEXT:"Next",PREVIOUS:"Previous",CURRENT_PAGE:"Current Page",LAST_PAGE:"Last Page",TOGGLE_DOUBLE_PAGE:"Single/Double Toggle",DOUBLE_PAGE:"Double Page",SINGLE_PAGE:"Single Page",STARTMENU:"Start Menu",PLAY_BACKGROUND_MUSIC:"Play Background Music",STOP_BACKGROUND_MUSIC:"Stop Background Music",BACKGROUND_MUSIC:"Background Music",PDF_DOWNLOAD:"PDF Download",SEARCH_RESULTS:"Search Results",PAGE:"Page",DRAG_MODE:"Drag mode",FIT_TO_SCREEN_WIDTH:"Fit to screen width",FIT_TO_SCREEN_HEIGHT:"Fit to screen height",PRINT_MANAGER:"Print Manager",PRINT_TOTAL_PAGE:"Total pages",ALL:"All",PRINT_RANGE_EXAMPLE:"ex) 1-3, 5, 8-11",TARGET_PAGES:"Current Page",PAGER_ORIENTATION:"Orientation of Paper",PORTRAIT:"Portrait",LANDSCAPE:"Landscape",SHARE:"Share",KAKAOTALK:"kakaotalk",KAKAOSTORY:"kakaostory",FACEBOOK:"facebook",TWITTER:"twitter",GOOGLEPLUS:"google+",URL:"url",COPY_URL:"Copy Url",LONG_TAP_COPY_URL:"※ Long press. You can copy.",COPY_URL_SUCCESS_ALERT:"Web link address copied.\nPlease paste it where you want.",ZOOM_FUNCTION_CAN_NOT_BE_USED_DURING_PAGE_LOADING:"The page is loading. The zoom function can not be used during page loading.",ALERT_PAGE_ALREADY_OPEN:"The page is already open.",ALERT_FIRST_PAGE:"The current page is the first page.",ALERT_LAST_PAGE:"The current page is the last page.",EXIT_ZOOM_MODE:"Exit Zoom mode",MOVE_UP:"Move up\n(keyboard shortcut : Up)",MOVE_DOWN:"Move down\n(keyboard shortcut : Down)",MOVE_LEFT:"Move to the left\n(keyboard shortcut : Left)",MOVE_RIGHT:"Move to the right\n(keyboard shortcut : Right)",HELP:"Help",SETTINGS:"Settings",PAGE_SCREEN_FIT_SETTING:"Select screen-fit-state when starting",FIT_SCREEN_WIDTH:"Fit screen width",FIT_SCREEN_HEIGHT:"Fit screen height",OPEN:"Open",CLOSE:"Close",SHOW_MENU_BAR:"Open menu",ORIGINAL_SIZE:"Original size",RESET:"Reset",SUCCESS:"Success",FAILURE:"Failure",START:"Start",PLAY:"Stop",PLAY_AGAIN:"Play again",STOP_AND_PLAY:"Stop and play",PLAY_FILE:"PlayFile",REPEAT_PLAYBACK:"Repeat playback",PAUSE:"Pause",STOP:"Stop",TOGGLE:"Toggle",END:"End",FINISH:"Finish",EXIT:"Exit",MUTE:"Mute",CHECK:"Check",UNCHECK:"Uncheck",RIGHT_ANSWER:"RightAnswer",WRONG_ANSWER:"WrongAnswer",NORMAL:"Normal",PLAYBACK_RATE:"Playback Rate",SHOW:"Show",HIDE:"Hide",VISIBLE:"Visible",HIDDEN:"Hidden",ERROR_PREVIEW_IFRAME:"There is a limit to the use of external content in preview.",ERROR_PREVIEW_RELATIVE_PATH:"The use of relative path is restricted in preview.",ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES:"You can not move the page until playback finishes.",ERROR_NOT_VIEWABLE_PAGE_NUMBER:"{0} page is not a viewable page.",CLOSE_WINDOW_ACTION_DEFAULT_CONFIRM_MESSAGE:"Close the window.",LOGIN_DIALOG_TITLE:"User authentication",LOGIN:"Login",LOGOUT:"Logout",ALERT_LOGOUT:"You are logged out.",USER_ID:"ID",EMAIL:"Email",USER_PASSWORD:"Password",ENTER_USER_ID:"Enter ID",ENTER_USER_ID2:"Please enter your ID.",ERROR_INCORRECT_USER_ID:"The ID is incorrect.",ERROR_INCORRECT_ID_OR_PASSWORD:"The ID or password is incorrect.",CONFIRM_RESTORE_SESSION:"Would you like to restore previous session?",PASSWORD:"Password",PASSWORD_CHECK_LABEL:"Confirm Password",ENTER_USER_PASSWORD:"Enter password",ENTER_USER_PASSWORD2:"Please enter a password.",ERROR_INCORRECT_PASSWORD:"password is incorrect.",LOCK_ALERT:"The period of use has expired and cannot be viewed.",USER_REGIST:"User registration",ALERT_USER_DOES_NOT_EXIST:"User information does not exist.",ALERT_ALREADY_REGISTERED_ID:"This is an already registered ID.",ALERT_PASSWORDS_NOT_MATCH:"The passwords you entered do not match.",ALERT_USER_AUTH_FAILED:"User authentication failed.",ALERT_NOT_PASS_MIN_LEAN_TIME:"The minimum learning time({0} seconds) for this page has not passed. Please study.",ALERT_LEARN_NOT_COMPLETE:"Learning is not complete. Please complete the study.",ALERT_SCROLL_TIP_TEXT:"Scroll to read more.",PEN:"Pen",HIGHLIGHTER:"Highlighter",STRAIGHT:"Straight",ARROW:"Arrow",SQUARE:"Square",ELLIPSE:"Ellipse",TRIANGLE:"Triangle",SHAPE_SELECTION:"Shape Selection",ERASER:"Eraser",CLEAR_ALL:"Clear All",DELETE_SELECTED_SHAPE:"Delete selected shapes",COLOR:"Color",OPACITY:"Opacity",THICKNESS:"Thickness",CONFIRM_CLEAR_ALL:"Do you really want to delete all?"}),define("nls/ja/strings",{OK:"はい",CANCEL:"キャンセル",DELETE:"削除",BUTTON_YES:"はい",BUTTON_NO:"いいえ",ERROR:"エラ-",ALERT_TITLE:"通知",ALERT_NO_SEARCH_RESULT:"検索結果がありません.",ADD_BOOKMARK_TITILE:"ブックマ-クを追加",REMOVE_BOOKMARK_TITILE:"ブックマ-クを削除",MODIFY_BOOKMARK_TITILE:"ブックマ-クの変更",ENTER_TEXT:"コンテンツを入力してください",TEXT_INPUT_PLACEHOLDER:"テキストを入力してください",ENTER_SEARCH_WORDS_PLACEHOLDER:"検索キ-ワ-ドを入力してください...",ENTER_PAGE_NUMBER:"ペ-ジ番号を入力してください...",ADD_MEMO_TITILE:"メモの追加",MODIFY_MEMO_TITILE:"メモ修正",EMPTY:"空",SELECT_PAGE_TITLE:"ペ-ジの選択",LEFT_PAGE_TITLE:"左ペ-ジ",RIGHT_PAGE_TITLE:"右ペ-ジ",NO_PAGE_SELECTED:"選択したペ-ジがありません.",REMOVE_ALL_MY_STORAGE:"ライブラリをすべて削除しますか？",ERROR_NOT_VALID_PAGE_NUMBER:"{0} ペ-ジは、有効なペ-ジ番号がありません.",MOVE_PAGE_TITLE:"ペ-ジに移動",PREPARE_PRINTING:"印刷準備中です。しばらくお待ちください...",START_SLIDESHOW:"スライドショ-の開始",STOP_SLIDESHOW:"スライドショ-停止",SLIDESHOW:"スライドショ-",FULL_SCREEN:"フルスクリ-ン",ALL_FILES:"全ファイル",DEFAULT_FOLDER:"デフォルトのフォルダ",MASTER_FOLDER:"管理者フォルダ",MY_STORAGE:"ライブラリ",TOC:"目次",TOC_LIST:"目次リスト",ZOOM_IN_OUT:"拡大/縮小",ZOOM_IN:"拡大",ZOOM_OUT:"縮小",PRINT:"印刷",MEMO:"メモ",SEARCH:"検索",BOOKMARK:"ブックマ-ク",THUMBNAIL:"全体表示",ENTER_SEARCH_WORDS:"検索キ-ワ-ドを入力してください...",FIRST_PAGE:"最初のペ-ジ",PREVIOUS_PAGE:"前のペ-ジ",NEXT_PAGE:"次のペ-ジ",GO_TO_PAGE:"ペ-ジに移動",NEXT:"次",PREVIOUS:"前",CURRENT_PAGE:"現在のペ-ジ",LAST_PAGE:"最後のペ-ジ",TOGGLE_DOUBLE_PAGE:"片面/両面表示切り替え",DOUBLE_PAGE:"見開きペ-ジ",SINGLE_PAGE:"片面ペ-ジ",STARTMENU:"メニュ-",PLAY_BACKGROUND_MUSIC:"バックグラウンド音楽再生",STOP_BACKGROUND_MUSIC:"バックグラウンドミュ-ジック停止",BACKGROUND_MUSIC:"バックグラウンドミュージック",PDF_DOWNLOAD:"PDFダウンロ-ド",SEARCH_RESULTS:"検索リスト",PAGE:"ペ-ジ",DRAG_MODE:"ドラッグモ-ド",FIT_TO_SCREEN_WIDTH:"画面の幅に合わせ",FIT_TO_SCREEN_HEIGHT:"画面の高さに合わせる",PRINT_MANAGER:"印刷管理",PRINT_TOTAL_PAGE:"全ペ-ジ",ALL:"全体",PRINT_RANGE_EXAMPLE:"例）1-3、5、8-11",TARGET_PAGES:"対象ペ-ジ",PAGER_ORIENTATION:"用紙の向き",PORTRAIT:"縦方向",LANDSCAPE:"横方向",SHARE:"共有する",KAKAOTALK:"kakaotalk",KAKAOSTORY:"kakaostory",FACEBOOK:"Facebook",TWITTER:"ツイッタ-",GOOGLEPLUS:"グ-グルプラス",URL:"アドレス",COPY_URL:"アドレスをコピ-",LONG_TAP_COPY_URL:"※ URLを長く押しコピ-することができます.",COPY_URL_SUCCESS_ALERT:"アドレスがコピ-されました。\nご希望のブログや掲示板に貼り付けてください.",ZOOM_FUNCTION_CAN_NOT_BE_USED_DURING_PAGE_LOADING:"ペ-ジがロ-ド中です。拡大/縮小機能は、ペ-ジの読み込み中に使用することができません.",ALERT_PAGE_ALREADY_OPEN:"現在のペ-ジです.",ALERT_FIRST_PAGE:"現在のペ-ジは、最初のペ-ジです.",ALERT_LAST_PAGE:"現在のペ-ジは、最後のペ-ジです.",EXIT_ZOOM_MODE:"拡大/縮小モ-ドを終了するには、タブし.",MOVE_UP:"上（ショ-トカット：Up）",MOVE_DOWN:"下（ショ-トカット：Down)",MOVE_LEFT:"左（ショ-トカット：Left)",MOVE_RIGHT:"右（ショ-トカット：Right)",HELP:"ヘルプ",SETTINGS:"設定",PAGE_SCREEN_FIT_SETTING:"閲覧時の画面の設定",FIT_SCREEN_WIDTH:"横幅合わせ",FIT_SCREEN_HEIGHT:"全表示",OPEN:"開ける",CLOSE:"閉じる",SHOW_MENU_BAR:"メニュ-バ-を開く",ORIGINAL_SIZE:"元のサイズ",RESET:"リセット",SUCCESS:"Success",FAILURE:"Failure",START:"Start",PLAY:"Stop",PLAY_FILE:"PlayFile",PAUSE:"Pause",STOP:"Stop",END:"End",FINISH:"Finish",MUTE:"Mute",CHECK:"Check",UNCHECK:"Uncheck",RIGHT_ANSWER:"RightAnswer",WRONG_ANSWER:"WrongAnswer",NORMAL:"通常",PLAYBACK_RATE:"再生率",SHOW:"Show",HIDE:"Hide",VISIBLE:"Visible",HIDDEN:"Hidden",ERROR_PREVIEW_IFRAME:"プレビューでは、外部コンテンツ利用に制限があります。",ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES:"再生完了時までのページに移動することができません。",ERROR_NOT_VIEWABLE_PAGE_NUMBER:"{0}ページは閲覧可能なページがありません。",LOGIN_DIALOG_TITLE:"ユーザー認証",LOGIN:"ログイン",LOGOUT:"ログアウト",ALERT_LOGOUT:"ログアウトしました。",USER_ID:"ユーザ名",EMAIL:"メール",USER_PASSWORD:"パスワード",ENTER_USER_ID:"ユーザ名を入力",ENTER_USER_ID2:"IDを入力してください。",ERROR_INCORRECT_USER_ID:"ユーザ名が正しくありません。",ERROR_INCORRECT_ID_OR_PASSWORD:"ユーザー名、またはパスワードが正しくありません。",PASSWORD:"パスワード",PASSWORD_CHECK_LABEL:"パスワードの確認",ENTER_USER_PASSWORD:"パスワード入力",ENTER_USER_PASSWORD2:"パスワードを入力してください。",ERROR_INCORRECT_PASSWORD:"パスワードが正しくありません。",LOCK_ALERT:"使用期間が満了されて閲覧することができません。",USER_REGIST:"ユーザー登録",ALERT_USER_DOES_NOT_EXIST:"ユーザー情報が存在しません。",ALERT_ALREADY_REGISTERED_ID:"すでに使用されているユーザ名です。",ALERT_PASSWORDS_NOT_MATCH:"入力したパスワードが一致しません。",ALERT_USER_AUTH_FAILED:"ユーザー認証に失敗しました。",ALERT_SCROLL_TIP_TEXT:"スクロールしてお読みください。",PEN:"ペン",HIGHLIGHTER:"蛍光ペン",STRAIGHT:"直線",ARROW:"矢印",SQUARE:"長方形",ELLIPSE:"楕円",TRIANGLE:"三角形",SHAPE_SELECTION:"図形を選択",ERASER:"消しゴム",CLEAR_ALL:"完全消去",DELETE_SELECTED_SHAPE:"選択図形の削除",COLOR:"色",OPACITY:"不透明度",THICKNESS:"太さ",CONFIRM_CLEAR_ALL:"すべて削除しますか？"}),define("nls/root/strings",{OK:"확인",CANCEL:"취소",DELETE:"삭제",BUTTON_YES:"예",BUTTON_NO:"아니오",ERROR:"에러",ALERT_TITLE:"알림",ALERT_NO_SEARCH_RESULT:"검색 결과가 없습니다.",ADD_BOOKMARK_TITILE:"북마크 추가",REMOVE_BOOKMARK_TITILE:"북마크 제거",MODIFY_BOOKMARK_TITILE:"북마크 수정",ENTER_TEXT:"내용을 입력하세요",TEXT_INPUT_PLACEHOLDER:"텍스트를 입력하세요",ENTER_SEARCH_WORDS_PLACEHOLDER:"검색어를 입력하세요...",ENTER_PAGE_NUMBER:"페이지 번호를 입력하세요...",ADD_MEMO_TITILE:"메모 추가",MODIFY_MEMO_TITILE:"메모 수정",EMPTY:"비어 있음",SELECT_PAGE_TITLE:"페이지 선택",LEFT_PAGE_TITLE:"왼쪽 페이지",RIGHT_PAGE_TITLE:"오른쪽 페이지",NO_PAGE_SELECTED:"선택한 페이지가 없습니다.",REMOVE_ALL_MY_STORAGE:"보관함을 전부 삭제 하시겠습니까?",ERROR_NOT_VALID_PAGE_NUMBER:"{0} 페이지는 유효한 페이지 번호가 아닙니다.",MOVE_PAGE_TITLE:"페이지 이동",PREPARE_PRINTING:"인쇄 준비 중입니다. 잠시만 기다려 주세요 ...",START_SLIDESHOW:"슬라이드쇼 시작",STOP_SLIDESHOW:"슬라이드쇼 정지",SLIDESHOW:"슬라이드쇼",FULL_SCREEN:"전체화면",START_FULL_SCREEN:"전체화면 시작",STOP_FULL_SCREEN:"전체화면 종료",ALL_FILES:"전체파일",DEFAULT_FOLDER:"기본폴더",MASTER_FOLDER:"관리자 폴더",MY_STORAGE:"보관함",TOC:"목차",TOC_LIST:"목차 리스트",ZOOM_IN_OUT:"확대/축소",ZOOM_IN:"확대",ZOOM_OUT:"축소",PRINT:"인쇄",MEMO:"메모",SEARCH:"검색",BOOKMARK:"북마크",THUMBNAIL:"전체보기",ENTER_SEARCH_WORDS:"검색어를 입력하세요...",FIRST_PAGE:"첫 페이지",PREVIOUS_PAGE:"이전 페이지",NEXT_PAGE:"다음 페이지",GO_TO_PAGE:"페이지 이동",NEXT:"다음",PREVIOUS:"이전",CURRENT_PAGE:"현재 페이지",LAST_PAGE:"마지막 페이지",TOGGLE_DOUBLE_PAGE:"단면/양면 보기 토글",DOUBLE_PAGE:"양면 페이지",SINGLE_PAGE:"단면 페이지",STARTMENU:"메뉴",PLAY_BACKGROUND_MUSIC:"배경음악 재생",STOP_BACKGROUND_MUSIC:"배경음악 정지",BACKGROUND_MUSIC:"배경음악",PDF_DOWNLOAD:"PDF 다운로드",SEARCH_RESULTS:"검색 리스트",PAGE:"페이지",DRAG_MODE:"드래그 모드",FIT_TO_SCREEN_WIDTH:"화면 너비에 맞춤",FIT_TO_SCREEN_HEIGHT:"화면 높이에 맞춤",PRINT_MANAGER:"인쇄 관리자",PRINT_TOTAL_PAGE:"전체 페이지",ALL:"전체",PRINT_RANGE_EXAMPLE:"예) 1-3, 5, 8-11",TARGET_PAGES:"대상 페이지",PAGER_ORIENTATION:"용지 방향",PORTRAIT:"세로 방향",LANDSCAPE:"가로 방향",SHARE:"공유하기",KAKAOTALK:"카카오톡",KAKAOSTORY:"카카오스토리",FACEBOOK:"페이스북",TWITTER:"트위터",GOOGLEPLUS:"구글플러스",URL:"주소",COPY_URL:"주소복사",LONG_TAP_COPY_URL:"※ URL를 길게 누르시면 복사하실 수 있습니다.",COPY_URL_SUCCESS_ALERT:"주소가 복사되었습니다.\n원하시는 블로그나 게시판에 붙여넣기 하세요.",ZOOM_FUNCTION_CAN_NOT_BE_USED_DURING_PAGE_LOADING:"페이지가 로딩 중입니다. 확대/축소 기능은 페이지 로딩 중에 사용할 수 없습니다.",ALERT_PAGE_ALREADY_OPEN:"현재 페이지 입니다.",ALERT_FIRST_PAGE:"현재 페이지는 첫 페이지 입니다.",ALERT_LAST_PAGE:"현재 페이지는 마지막 페이지 입니다.",EXIT_ZOOM_MODE:"확대/축소 모드를 종료 하려면 탭하세요",MOVE_UP:"위로(단축키 : Up)",MOVE_DOWN:"아래로(단축키 : Down)",MOVE_LEFT:"왼쪽으로(단축키 : Left)",MOVE_RIGHT:"오른쪽으로(단축키 : Right)",HELP:"도움말",SETTINGS:"설정",PAGE_SCREEN_FIT_SETTING:"열람시 화면설정",FIT_SCREEN_WIDTH:"가로 너비 맞춤",FIT_SCREEN_HEIGHT:"전체 보기",OPEN:"열기",CLOSE:"닫기",SHOW_MENU_BAR:"메뉴바 열기",ORIGINAL_SIZE:"원본크기",RESET:"재 설정",SUCCESS:"성공",FAILURE:"실패",START:"시작",PLAY:"재생",PLAY_AGAIN:"처음부터 다시 재생",PLAY_FILE:"파일 재생",REPEAT_PLAYBACK:"반복 재생",PAUSE:"일시정지",STOP:"정지",TOGGLE:"토글",END:"완료",FINISH:"완료",EXIT:"종료",MUTE:"음소거",CHECK:"선택",UNCHECK:"해제",RIGHT_ANSWER:"정답",WRONG_ANSWER:"오답",NORMAL:"보통",PLAYBACK_RATE:"재생 속도",SHOW:"보이기",HIDE:"숨기기",VISIBLE:"보이기",HIDDEN:"숨기기",ERROR_PREVIEW_IFRAME:"미리보기에서는 외부컨텐츠 이용에 제한이 있습니다.",ERROR_PREVIEW_RELATIVE_PATH:"미리보기에서는 상대경로 사용이 제한됩니다.",ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES:"재생 완료시까지 페이지 이동을 할 수 없습니다.",ERROR_NOT_VIEWABLE_PAGE_NUMBER:"{0} 페이지는 열람 가능한 페이지가 아닙니다.",CLOSE_WINDOW_ACTION_DEFAULT_CONFIRM_MESSAGE:"윈도우 창을 닫습니다.",LOGIN_DIALOG_TITLE:"사용자 인증",LOGIN:"로그인",LOGOUT:"로그아웃",ALERT_LOGOUT:"로그아웃 되었습니다.",USER_ID:"아이디",EMAIL:"이메일",USER_PASSWORD:"비밀번호",ENTER_USER_ID:"아이디 입력",ENTER_USER_ID2:"아이디를 입력하세요.",ERROR_INCORRECT_USER_ID:"아이디가 올바르지 않습니다.",ERROR_INCORRECT_ID_OR_PASSWORD:"아이디 또는 비밀번호가 올바르지 않습니다.",CONFIRM_RESTORE_SESSION:"이전 세션을 복원 하시겠습니까?",PASSWORD:"비밀번호",PASSWORD_CHECK_LABEL:"비밀번호 확인",ENTER_USER_PASSWORD:"비밀번호 입력",ENTER_USER_PASSWORD2:"비밀번호를 입력하세요.",ERROR_INCORRECT_PASSWORD:"비밀번호가 올바르지 않습니다.",LOCK_ALERT:"사용기간이 만료되어 열람할 수 없습니다.",USER_REGIST:"사용자 등록",ALERT_USER_DOES_NOT_EXIST:"사용자 정보가 존재하지 않습니다.",ALERT_ALREADY_REGISTERED_ID:"이미 사용 중인 아이디입니다.",ALERT_PASSWORDS_NOT_MATCH:"입력한 비밀번호가 일치하지 않습니다.",ALERT_USER_AUTH_FAILED:"사용자 인증에 실패 하였습니다.",ALERT_NOT_PASS_MIN_LEAN_TIME:"본 페이지 최소 학습시간({0}초)이 지나지 않았습니다. 학습을 진행해 주시기 바랍니다.",ALERT_LEARN_NOT_COMPLETE:"학습이 모두 완료되지 않았습니다. 학습을 완료해 주시기 바랍니다.",ALERT_SCROLL_TIP_TEXT:"스크롤 하여 자세히 읽어 보세요.",PEN:"펜",HIGHLIGHTER:"형광 펜",STRAIGHT:"직선",ARROW:"화살표",SQUARE:"사각형",ELLIPSE:"타원",TRIANGLE:"삼각형",SHAPE_SELECTION:"도형 선택",ERASER:"지우개",CLEAR_ALL:"전체 지우기",DELETE_SELECTED_SHAPE:"선택 도형 삭제",COLOR:"색상",OPACITY:"불투명도",THICKNESS:"굵기",CONFIRM_CLEAR_ALL:"전체 삭제 하시겠습니까?"}),define("nls/zh-cn/strings",{OK:"确认",CANCEL:"取消",DELETE:"删除",BUTTON_YES:"是",BUTTON_NO:"没有",ERROR:"错误",ALERT_TITLE:"通知",ALERT_NO_SEARCH_RESULT:"没有找到结果。",ADD_BOOKMARK_TITILE:"添加书签",REMOVE_BOOKMARK_TITILE:"删除书签",MODIFY_BOOKMARK_TITILE:"编辑书签",ENTER_TEXT:"输入文字",TEXT_INPUT_PLACEHOLDER:"输入文字",ENTER_SEARCH_WORDS_PLACEHOLDER:"输入搜索字词...",ENTER_PAGE_NUMBER:"请输入页码...",ADD_MEMO_TITILE:"添加备注",MODIFY_MEMO_TITILE:"编辑备注",EMPTY:"空的",SELECT_PAGE_TITLE:"选择页面",LEFT_PAGE_TITLE:"左页",RIGHT_PAGE_TITLE:"右页",NO_PAGE_SELECTED:"您没有选择页面。",REMOVE_ALL_MY_STORAGE:"您确定要删除所有档案吗？",ERROR_NOT_VALID_PAGE_NUMBER:"这不是有效的页码。",MOVE_PAGE_TITLE:"转到页面",PREPARE_PRINTING:"印刷正在准备中。 请稍候...",START_SLIDESHOW:"开始幻灯片放映",STOP_SLIDESHOW:"停止幻灯片放映",SLIDESHOW:"幻灯片",FULL_SCREEN:"全屏",START_FULL_SCREEN:"全屏启动",STOP_FULL_SCREEN:"退出全屏",ALL_FILES:"所有文件",DEFAULT_FOLDER:"默认文件夹",MASTER_FOLDER:"管理员文件夹",MY_STORAGE:"我的存储空间",TOC:"目录",TOC_LIST:"目录",ZOOM_IN_OUT:"放大/缩小",ZOOM_IN:"放大",ZOOM_OUT:"缩小",PRINT:"打印",MEMO:"备忘录",SEARCH:"搜索",BOOKMARK:"书签",THUMBNAIL:"全部查看",ENTER_SEARCH_WORDS:"输入搜索字词...",FIRST_PAGE:"第一页",PREVIOUS_PAGE:"上一页",NEXT_PAGE:"下一页",GO_TO_PAGE:"转到页面",NEXT:"下一个",PREVIOUS:"前",CURRENT_PAGE:"当前页",LAST_PAGE:"最后一页",TOGGLE_DOUBLE_PAGE:"单/双视图",DOUBLE_PAGE:"双面页面",SINGLE_PAGE:"单页",STARTMENU:"菜单",PLAY_BACKGROUND_MUSIC:"播放背景音乐",STOP_BACKGROUND_MUSIC:"停止背景音乐",BACKGROUND_MUSIC:"背景音乐",PDF_DOWNLOAD:"下载PDF",SEARCH_RESULTS:"搜索列表",PAGE:"页码",DRAG_MODE:"拖动",FIT_TO_SCREEN_WIDTH:"调整以适应屏幕宽度",FIT_TO_SCREEN_HEIGHT:"调整到屏幕高度",PRINT_MANAGER:"打印经理",PRINT_TOTAL_PAGE:"总页数",ALL:"整体",PRINT_RANGE_EXAMPLE:"ex) 1-3, 5, 8-11",TARGET_PAGES:"目标页面",PAGER_ORIENTATION:"方向",PORTRAIT:"纵向方向",LANDSCAPE:"景观方向",SHARE:"分享",KAKAOTALK:"KakaoTalk",KAKAOSTORY:"kakaostory",FACEBOOK:"Facebook的",TWITTER:"叽叽喳喳",GOOGLEPLUS:"Google+的",URL:"网址",COPY_URL:"复制网址",LONG_TAP_COPY_URL:"长按要复制的URL。",COPY_URL_SUCCESS_ALERT:"Web链接地址复制。\n粘贴到你想要的地方。",ZOOM_FUNCTION_CAN_NOT_BE_USED_DURING_PAGE_LOADING:"该页面正在加载。 页面加载时缩放功能不可用。",EXIT_ZOOM_MODE:"退出缩放模式",MOVE_UP:"向上移动\n(键盘快捷键 : Up)",MOVE_DOWN:"下移\n(键盘快捷键 : Down)",MOVE_LEFT:"向左移动\n(键盘快捷键 : Left)",MOVE_RIGHT:"向右移动\n(键盘快捷键 : Right)",HELP:"帮助",SETTINGS:"设置",PAGE_SCREEN_FIT_SETTING:"打开时设置页面适合状态",FIT_SCREEN_WIDTH:"适合屏幕宽度",FIT_SCREEN_HEIGHT:"适合屏幕高度",OPEN:"打开",CLOSE:"关",SHOW_MENU_BAR:"打开菜单",ORIGINAL_SIZE:"原始尺寸",RESET:"重置",SUCCESS:"Success",FAILURE:"Failure",START:"Start",PLAY:"Stop",PLAY_AGAIN:"Play again",PLAY_FILE:"PlayFile",REPEAT_PLAYBACK:"Repeat playback",PAUSE:"Pause",STOP:"Stop",TOGGLE:"Toggle",END:"End",FINISH:"Finish",EXIT:"Exit",MUTE:"Mute",CHECK:"Check",UNCHECK:"Uncheck",RIGHT_ANSWER:"RightAnswer",WRONG_ANSWER:"WrongAnswer",NORMAL:"通常",PLAYBACK_RATE:"播放率",SHOW:"显示",HIDE:"隐藏",VISIBLE:"显示",HIDDEN:"隐藏",ERROR_PREVIEW_IFRAME:"预览中使用外部内容是有限制的。",ERROR_PREVIEW_RELATIVE_PATH:"预览中限制了相对路径的使用。",ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES:"在播放完成之前，您无法移动页面。",ERROR_NOT_VIEWABLE_PAGE_NUMBER:"第{0}页不是可查看的页面。",CLOSE_WINDOW_ACTION_DEFAULT_CONFIRM_MESSAGE:"关上窗户。",LOGIN_DIALOG_TITLE:"用户验证",LOGIN:"Login",LOGOUT:"Logout",ALERT_LOGOUT:"你已经退出了。",USER_ID:"用户ID",EMAIL:"电子邮件",USER_PASSWORD:"密码",ENTER_USER_ID:"输入用户ID",ENTER_USER_ID2:"请输入您的ID。",ERROR_INCORRECT_USER_ID:"ID不正确。",ERROR_INCORRECT_ID_OR_PASSWORD:"ID或密码不正确。",PASSWORD:"密码",PASSWORD_CHECK_LABEL:"确认密码",ENTER_USER_PASSWORD:"输入密码",ENTER_USER_PASSWORD2:"请输入密码。",ERROR_INCORRECT_PASSWORD:"密码错误。",LOCK_ALERT:"使用期限已到期，无法查看。",USER_REGIST:"用户注册",ALERT_USER_DOES_NOT_EXIST:"用户信息不存在。",ALERT_ALREADY_REGISTERED_ID:"此ID已被使用。",ALERT_PASSWORDS_NOT_MATCH:"您输入的密码不匹配。",ALERT_USER_AUTH_FAILED:"用户身份验证失败。",ALERT_SCROLL_TIP_TEXT:"滚动阅读更多内容。",PEN:"钢笔",HIGHLIGHTER:"荧光笔",STRAIGHT:"直行",ARROW:"箭头",SQUARE:"广场",ELLIPSE:"椭圆",TRIANGLE:"三角形",SHAPE_SELECTION:"形状选择",ERASER:"橡皮",CLEAR_ALL:"全部清除",DELETE_SELECTED_SHAPE:"删除选定的形状",COLOR:"颜色",OPACITY:"不透明度",THICKNESS:"厚度",CONFIRM_CLEAR_ALL:"您确定要删除所有内容吗？"}),define("nls/strings",["require","exports","module"],function(t,e,i){"use strict";i.exports={root:!0,"en-us":!0,"zh-cn":!0,ja:!0}}),define("strings",["i18n!nls/strings"],function(t){"use strict";return t}),define("toast/events/KeyEvent",{DOM_VK_CANCEL:3,DOM_VK_HELP:6,DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_CLEAR:12,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_SHIFT:16,DOM_VK_CONTROL:17,DOM_VK_ALT:18,DOM_VK_PAUSE:19,DOM_VK_CAPS_LOCK:20,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_PAGE_UP:33,DOM_VK_PAGE_DOWN:34,DOM_VK_END:35,DOM_VK_HOME:36,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40,DOM_VK_PRINTSCREEN:44,DOM_VK_INSERT:45,DOM_VK_DELETE:46,DOM_VK_0:48,DOM_VK_1:49,DOM_VK_2:50,DOM_VK_3:51,DOM_VK_4:52,DOM_VK_5:53,DOM_VK_6:54,DOM_VK_7:55,DOM_VK_8:56,DOM_VK_9:57,DOM_VK_A:65,DOM_VK_B:66,DOM_VK_C:67,DOM_VK_D:68,DOM_VK_E:69,DOM_VK_F:70,DOM_VK_G:71,DOM_VK_H:72,DOM_VK_I:73,DOM_VK_J:74,DOM_VK_K:75,DOM_VK_L:76,DOM_VK_M:77,DOM_VK_N:78,DOM_VK_O:79,DOM_VK_P:80,DOM_VK_Q:81,DOM_VK_R:82,DOM_VK_S:83,DOM_VK_T:84,DOM_VK_U:85,DOM_VK_V:86,DOM_VK_W:87,DOM_VK_X:88,DOM_VK_Y:89,DOM_VK_Z:90,DOM_VK_CONTEXT_MENU:93,DOM_VK_NUMPAD0:96,DOM_VK_NUMPAD1:97,DOM_VK_NUMPAD2:98,DOM_VK_NUMPAD3:99,DOM_VK_NUMPAD4:100,DOM_VK_NUMPAD5:101,DOM_VK_NUMPAD6:102,DOM_VK_NUMPAD7:103,DOM_VK_NUMPAD8:104,DOM_VK_NUMPAD9:105,DOM_VK_MULTIPLY:106,DOM_VK_ADD:107,DOM_VK_SEPARATOR:108,DOM_VK_SUBTRACT:109,DOM_VK_DECIMAL:110,DOM_VK_DIVIDE:111,DOM_VK_F1:112,DOM_VK_F2:113,DOM_VK_F3:114,DOM_VK_F4:115,DOM_VK_F5:116,DOM_VK_F6:117,DOM_VK_F7:118,DOM_VK_F8:119,DOM_VK_F9:120,DOM_VK_F10:121,DOM_VK_F11:122,DOM_VK_F12:123,DOM_VK_F13:124,DOM_VK_F14:125,DOM_VK_F15:126,DOM_VK_F16:127,DOM_VK_F17:128,DOM_VK_F18:129,DOM_VK_F19:130,DOM_VK_F20:131,DOM_VK_F21:132,DOM_VK_F22:133,DOM_VK_F23:134,DOM_VK_F24:135,DOM_VK_NUM_LOCK:144,DOM_VK_SCROLL_LOCK:145,DOM_VK_SEMICOLON:186,DOM_VK_EQUALS:187,DOM_VK_COMMA:188,DOM_VK_DASH:189,DOM_VK_PERIOD:190,DOM_VK_SLASH:191,DOM_VK_BACK_QUOTE:192,DOM_VK_OPEN_BRACKET:219,DOM_VK_BACK_SLASH:220,DOM_VK_CLOSE_BRACKET:221,DOM_VK_QUOTE:222,DOM_VK_META:224}),define("toast/events/Events",["exports"],function(t){"use strict";t.READY_BOOK="tt_bookReady",t.BOOK_READY="tt_bookReady",t.BOOK_HTML_READY="tt_bookHtmlReady",t.PAGE_DID_LOAD="tt_pageDidLoad",t.PAGE_DID_UNLOAD="tt_pageDidUnLoad",t.WILL_DISPLAY_PAGE="tt_willDisplayPage",t.WILL_MOVE_PAGE="tt_willMovePage",t.PAGE_DID_CHANGE="tt_pageDidChange",t.SHOW_PAGE="tt_showPage",t.SHOWN_PAGE="tt_shownPage",t.HIDE_PAGE="tt_hidePage",t.HIDDEN_PAGE="tt_hiddenPage",t.BEFORE_SHOW_DROPDOWN_MENU="tt_beforeShowDropdownMenu",t.MEMO_DID_CHANGE="tt_memoDidChange",t.SLIDE_DID_LOAD_COMPLETE="tt_slideDidLoadComplete",t.BOOKMARK_DID_CHANGE="tt_bookmarkDidChanged",t.ZOOM_MODE_DID_CHANGE="tt_zoomModeDidChanged",t.ZOOM_SCALE_DID_CHANGE="tt_zoomScaleDidChanged",t.ZOOM_VIEW_POSITION_AND_SIZE_DID_CHANGE="tt_zoomViewPositionAndSizeDidChanged",t.AUTOSLIDE_DID_RESUME="tt_autoSlideDidResume",t.AUTOSLIDE_DID_PAUSE="tt_autoSlideDidPause",t.ORIENTATION_DID_CHANGE="tt_orientationDidChange",t.START_MENU_DID_LOAD="tt_startmenuDidLoad",t.READY_AUTOPLAY_FOR_MOBILE="tt_readyAutoplayForMobile",t.DOUBLEPAGE_DID_CHANGE="tt_doublePageDidChange",t.STOP_ALL_SOUND="tt_stopAllSound",t.FULLSCREEN_DID_CHANGE="tt_fullscreenDidChange",t.FLIP_CORNER_START_ANIMATE="tt_flipCornerStartAnimate",t.TRANSITION_START="tt_transitionStart",t.TRANSITION_PRESSED="tt_transitionPressed",t.TRANSITION_END="tt_transitionEnd",t.IMAGEVIEWER_SHOW="tt_imageViewerShow",t.IMAGEVIEWER_SHOWN="tt_imageViewerShown",t.IMAGEVIEWER_VIEWED="tt_imageViewerViewed",t.IMAGEVIEWER_RESET="tt_imageViewerReset",t.IMAGEVIEWER_RESIZED="tt_imageViewerResized",t.IMAGEVIEWER_HIDE="tt_imageViewerHide",t.IMAGEVIEWER_HIDDEN="tt_imageViewerHidden",t.IMAGEVIEWER_ZOOM_TO="tt_imageViewerZoomTo",t.SHOW_DILAOG="show.tt.dialog",t.HIDE_DILAOG="hide.tt.dialog",t.SHOWN_DILAOG="shown.tt.dialog",t.HIDDEN_DILAOG="hidden.tt.dialog",t.SHOWN_HELP="shown.help",t.HIDDEN_HELP="hidden.help"}),define("toast/events/EventDispatcher",["exports"],function(t){"use strict";function r(t){var e=t.indexOf(".");return-1===e?{eventName:t}:{eventName:t.substring(0,e),ns:t.substring(e)}}function n(t,e){var i,n=t.split(/\s+/).map(r);if(this._deprecatedEvents)for(i=0;i<n.length;i++){var o,s=this._deprecatedEvents[n[i].eventName];s&&(o="Registering for deprecated event '"+n[i].eventName+"'.","string"==typeof s&&(o+=" Instead, use "+s+"."),console.warn(o,(new Error).stack))}for(i=0;i<n.length;i++){var a=n[i].eventName;this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[a]||(this._eventHandlers[a]=[]),n[i].handler=e,this._eventHandlers[a].push(n[i])}return this}function e(t,s){if(this._eventHandlers)for(var e=t.split(/\s+/).map(r),n=function(t,e){var i,n,o=this._eventHandlers[e];if(o){for(i=o.length-1;0<=i;i--)t.ns&&t.ns!==o[i].ns||(n=o[i].handler,s&&s!==n&&s._eventOnceWrapper!==n)||o.splice(i,1);o.length||delete this._eventHandlers[e]}}.bind(this),i=function(i){i.eventName?n(i,i.eventName):_.forEach(this._eventHandlers,function(t,e){n(i,e)})}.bind(this),o=0;o<e.length;o++)i(e[o]);return this}function i(t,e){return e._eventOnceWrapper||(e._eventOnceWrapper=function(t){t.target.off(t.type,e._eventOnceWrapper),e.apply(this,arguments)}),this.on(t,e._eventOnceWrapper)}function o(e){var t,i={type:e,target:this};if(n=this._eventHandlers&&this._eventHandlers[e]){var n=n.slice(),o=Array.prototype.slice.call(arguments,1);for(o.unshift(i),t=0;t<n.length;t++)try{n[t].handler.apply(null,o)}catch(t){console.error("Exception in '"+e+"' listener on",this,String(t),t.stack),console.assert()}}}t.makeEventDispatcher=function(t){$.extend(t,{on:n,off:e,one:i,trigger:o,_EventDispatcher:!0})},t.triggerWithArray=function(t,e,i){e=[e].concat(i),t.trigger.apply(t,e)},t.on_duringInit=function(t,e,i){n.call(t,e,i)},t.markDeprecated=function(t,e,i){t._deprecatedEvents||(t._deprecatedEvents={}),t._deprecatedEvents[e]=i||!0}}),define("toast/events/Commands",["exports"],function(t){"use strict";t.TOC="toc",t.THUMBNAIL="thumbnail",t.TOGGLE_ZOOM="toggleZoom",t.ZOOM_IN="zoomIn",t.ZOOM_OUT="zoomOut",t.SEARCH="search",t.TOGGLE_BOOKMARK="toggleBookmark",t.ADD_MEMO="addmemo",t.MY_STORAGE="mystorage",t.FIRST_PAGE="firstPage",t.PREVIOUS_PAGE="previousPage",t.NEXT_PAGE="nextPage",t.LAST_PAGE="lastPage",t.MOVE_TO_USER_INPUT_PAGE="moveToUserInputPage",t.FULLSCREEN="fullscreen",t.TOGGLE_AUTO_SLIDE="toggleAutoSlide",t.START_AUTO_SLIDE="startAutoSlide",t.STOP_AUTO_SLIDE="stopAutoSlide",t.DOUBLEPAGE="doublepage",t.TOGGLE_DOUBLEPAGE="toggleDoublePage",t.PRINT="print",t.HELP="help",t.CONFIG="config",t.TOGGLE_BGSOUND="toggleBgSound",t.PLAY_BGSOUND="playBgSound",t.PAUSE_BGSOUND="pauseBgSound",t.PDF_DOWNLOAD="pdfDownload",t.SHARE="share",t.SEND_FACEBOOK="sendFacebook",t.SEND_TWITTER="sendTwitter",t.SEND_GOOGLEPLUS="sendGoogleplus",t.SEND_KAKAOTALK="sendKakaotalk",t.SEND_KAKAOSTORY="sendKakaostory",t.CLOSE_POPUP_WINDOW="closePopupWindow",t.SHOW_INTRO="showIntro"}),define("toast/events/CommandManager",["exports","./EventDispatcher"],function(o,t){"use strict";var s={},a={};function r(t,e,i){this._name=t,this._id=e,this._commandFn=i,this._checked=void 0,this._enabled=!0}function i(t,e,i){return s[t]?(Toast.debug&&console.log("Attempting to register an already-registered command: "+t),null):t&&e?(e=new r(null,t,e),i&&(e.userKeyBinding=!0),s[t]=e,o.trigger("commandRegistered",e),e):(Toast.debug&&console.error("Attempting to register an internal command with a missing id, or command function: "+t),null)}function n(t){s[t]&&(delete s[t],s[t]=null)}t.makeEventDispatcher(r.prototype),r.prototype.getID=function(){return this._id},r.prototype.execute=function(){return this._enabled?this._commandFn.apply(this,arguments)||(new $.Deferred).resolve().promise():(new $.Deferred).reject().promise()},r.prototype.getEnabled=function(){return this._enabled},r.prototype.setEnabled=function(t){var e=this._enabled!==t;this._enabled=t,e&&this.trigger("enabledStateChange")},r.prototype.setChecked=function(t){var e=this._checked!==t;this._checked=t,e&&this.trigger("checkedStateChange")},r.prototype.getChecked=function(){return this._checked},r.prototype.setName=function(t){var e=this._name!==t;this._name=t,e&&this.trigger("nameChange")},r.prototype.getName=function(){return this._name},t.makeEventDispatcher(o),o.register=function(t,e,i,n){return s[e]?(Toast.debug&&console.log("Attempting to register an already-registered command: "+e),null):t&&e&&i?(i=new r(t,e,i),n&&(i.userKeyBinding=!0),s[e]=i,o.trigger("commandRegistered",i),i):(Toast.debug&&console.error("Attempting to register a command with a missing name, id, or command function:"+t+" "+e),null)},o.registerInternal=i,o.registerGroup=function(t,e){a[t]||(a[t]=[]);var i,n=!0;_.any(a[t],function(t){if(t._commandFn===e)return!(n=!1)}),n&&(i=new r(null,t,e),a[t].push(i))},o.inject=function(t,e){return s[t]&&n(t),i(t,e)},o.remove=n,o.execute=function(t){var e=s[t];if(e){Toast.debug&&console.log("execute : "+t);try{o.trigger("beforeExecuteCommand",t)}catch(t){Toast.debug&&console.error(t)}return e.execute.apply(e,Array.prototype.slice.call(arguments,1))}return(new $.Deferred).reject().promise()},o.executeGroup=function(t){var e=a[t];if(e){Toast.debug&&console.log("execute : "+t);try{o.trigger("beforeExecuteCommand",t)}catch(t){Toast.debug&&console.error(t)}var i=arguments,n=new $.Deferred;return Toast.Async.doInParallel(e,function(t){return t.execute.apply(t,Array.prototype.slice.call(i,1))}).done(function(){n.resolve()}).fail(function(){n.reject()}),n.promise()}return(new $.Deferred).reject().promise()},o.get=function(t){return a[t]||s[t]},o.getAll=function(){return Object.keys(s)}}),define("toast/events",["./events/KeyEvent","./events/Events","./events/EventDispatcher","./events/Commands","./events/CommandManager"],function(t,e,i,n,o){Toast.KeyEvent=t,Toast.Events=e,Toast.EventDispatcher=i,Toast.Commands=n,Toast.CommandManager=o}),!function(o,R,h){"use strict";var N=["","webkit","Moz","MS","ms","o"],B=R.createElement("div"),U="function",s=Math.round,d=Math.abs,z=Date.now;function F(t,e,i){return setTimeout(G(t,i),e)}function i(t,e,i){return Array.isArray(t)&&(a(t,i[e],i),1)}function a(t,e,i){if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==h)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(var n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function H(i,t,e){var n="DEPRECATED METHOD: "+t+"\n"+e+" AT \n";return function(){var t=new Error("get-stack-trace"),t=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",e=o.console&&(o.console.warn||o.console.log);return e&&e.call(o.console,n,t),i.apply(this,arguments)}}var r="function"!=typeof Object.assign?function(t){if(t===h||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==h&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign,W=H(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)i&&t[n[o]]!==h||(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),V=H(function(t,e){return W(t,e,!0)},"merge","Use `assign`.");function t(t,e,i){var e=e.prototype,n=t.prototype=Object.create(e);n.constructor=t,n._super=e,i&&r(n,i)}function G(t,e){return function(){return t.apply(e,arguments)}}function j(t,e){return typeof t==U?t.apply(e&&e[0]||h,e):t}function Y(t,e){return t===h?e:t}function e(e,t,i){a(c(t),function(t){e.addEventListener(t,i,!1)})}function n(e,t,i){a(c(t),function(t){e.removeEventListener(t,i,!1)})}function X(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function l(t,e){return-1<t.indexOf(e)}function c(t){return t.trim().split(/\s+/g)}function u(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function p(t){return Array.prototype.slice.call(t,0)}function K(t,i,e){for(var n=[],o=[],s=0;s<t.length;){var a=i?t[s][i]:t[s];u(o,a)<0&&n.push(t[s]),o[s]=a,s++}return n=e?i?n.sort(function(t,e){return t[i]>e[i]}):n.sort():n}function f(t,e){for(var i,n=e[0].toUpperCase()+e.slice(1),o=0;o<N.length;){if((i=(i=N[o])?i+n:e)in t)return i;o++}return h}var Z=1;function q(t){t=t.ownerDocument||t;return t.defaultView||t.parentWindow||o}var J="ontouchstart"in o,Q=(f(o,"PointerEvent"),J&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)),g="touch",tt="mouse",et=25,m=1,_=4,v=8,y=1,w=2,b=4,S=8,T=16,E=w|b,C=S|T,it=E|C,nt=["x","y"],x=["clientX","clientY"];function $(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){j(e.options.enable,[e])&&i.handler(t)},this.init()}function ot(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,s=e&m&&n-o==0,n=e&(_|v)&&n-o==0,o=(i.isFirst=!!s,i.isFinal=!!n,s&&(t.session={}),i.eventType=e,t),n=i,s=o.session,e=n.pointers,a=e.length,a=(s.firstInput||(s.firstInput=st(n)),1<a&&!s.firstMultiple?s.firstMultiple=st(n):1===a&&(s.firstMultiple=!1),s.firstInput),r=s.firstMultiple,l=(r||a).center,c=n.center=at(e),a=(n.timeStamp=z(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=ct(l,c),n.distance=A(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},s=t.prevInput||{};e.eventType!==m&&s.eventType!==_||(o=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}(s,n),n.offsetDirection=lt(n.deltaX,n.deltaY),rt(n.deltaTime,n.deltaX,n.deltaY)),l=(n.overallVelocityX=a.x,n.overallVelocityY=a.y,n.overallVelocity=d(a.x)>d(a.y)?a.x:a.y,n.scale=r?function(t,e){return A(e[0],e[1],x)/A(t[0],t[1],x)}(r.pointers,e):1,n.rotation=r?function(t,e){return ct(e[1],e[0],x)+ct(t[1],t[0],x)}(r.pointers,e):0,n.maxPointers=!s.prevInput||n.pointers.length>s.prevInput.maxPointers?n.pointers.length:s.prevInput.maxPointers,function(t,e){var i,n,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;{var r,l;e.eventType!=v&&(et<a||s.velocity===h)?(r=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,a=rt(a,r,l),n=a.x,o=a.y,i=d(a.x)>d(a.y)?a.x:a.y,r=lt(r,l),t.lastInterval=e):(i=s.velocity,n=s.velocityX,o=s.velocityY,r=s.direction)}e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=r}(s,n),o.element);X(n.srcEvent.target,l)&&(l=n.srcEvent.target),n.target=l,t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function st(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:s(t.pointers[i].clientX),clientY:s(t.pointers[i].clientY)},i++;return{timeStamp:z(),pointers:e,center:at(e),deltaX:t.deltaX,deltaY:t.deltaY}}function at(t){var e=t.length;if(1===e)return{x:s(t[0].clientX),y:s(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:s(i/e),y:s(n/e)}}function rt(t,e,i){return{x:e/t||0,y:i/t||0}}function lt(t,e){return t===e?y:d(t)>=d(e)?t<0?w:b:e<0?S:T}function A(t,e,i){var n=e[(i=i||nt)[0]]-t[i[0]],e=e[i[1]]-t[i[1]];return Math.sqrt(n*n+e*e)}function ct(t,e,i){var n=e[(i=i||nt)[0]]-t[i[0]],e=e[i[1]]-t[i[1]];return 180*Math.atan2(e,n)/Math.PI}$.prototype={handler:function(){},init:function(){this.evEl&&e(this.element,this.evEl,this.domHandler),this.evTarget&&e(this.target,this.evTarget,this.domHandler),this.evWin&&e(q(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(q(this.element),this.evWin,this.domHandler)}};var ht={mousedown:m,mousemove:2,mouseup:_};function I(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,$.apply(this,arguments)}t(I,$,{handler:function(t){var e=ht[t.type];e&m&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=_),this.pressed&&(e&_&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:tt,srcEvent:t}))}});var dt={pointerdown:m,pointermove:2,pointerup:_,pointercancel:v,pointerout:v},ut={2:g,3:"pen",4:tt,5:"kinect"},pt="pointerdown",ft="pointermove pointerup pointercancel";function gt(){this.evEl=pt,this.evWin=ft,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(pt="MSPointerDown",ft="MSPointerMove MSPointerUp MSPointerCancel"),t(gt,$,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),n=dt[n],o=ut[t.pointerType]||t.pointerType,s=o==g,a=u(e,t.pointerId,"pointerId");n&m&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):n&(_|v)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var mt={touchstart:m,touchmove:2,touchend:_,touchcancel:v};function _t(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,$.apply(this,arguments)}t(_t,$,{handler:function(t){var e,i=mt[t.type];i===m&&(this.started=!0),this.started&&(e=function(t,e){var i=p(t.touches),t=p(t.changedTouches);e&(_|v)&&(i=K(i.concat(t),"identifier",!0));return[i,t]}.call(this,t,i),i&(_|v)&&e[0].length-e[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:g,srcEvent:t}))}});var vt={touchstart:m,touchmove:2,touchend:_,touchcancel:v};function yt(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},$.apply(this,arguments)}t(yt,$,{handler:function(t){var e=vt[t.type],i=function(t,e){var i=p(t.touches),n=this.targetIds;if(e&(2|m)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,s,a=p(t.changedTouches),r=[],l=this.target;if(s=i.filter(function(t){return X(t.target,l)}),e===m)for(o=0;o<s.length;)n[s[o].identifier]=!0,o++;o=0;for(;o<a.length;)n[a[o].identifier]&&r.push(a[o]),e&(_|v)&&delete n[a[o].identifier],o++;if(r.length)return[K(s.concat(r),"identifier",!0),r]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:g,srcEvent:t})}});var wt=2500;function bt(){$.apply(this,arguments);var t=G(this.handler,this);this.touch=new yt(this.manager,t),this.mouse=new I(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function St(t){var e,i,t=t.changedPointers[0];t.identifier===this.primaryTouch&&(e={x:t.clientX,y:t.clientY},this.lastTouches.push(e),i=this.lastTouches,setTimeout(function(){var t=i.indexOf(e);-1<t&&i.splice(t,1)},wt))}t(bt,$,{handler:function(t,e,i){var n=i.pointerType==g,o=i.pointerType==tt;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)!function(t,e){t&m?(this.primaryTouch=e.changedPointers[0].identifier,St.call(this,e)):t&(_|v)&&St.call(this,e)}.call(this,e,i);else if(o&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],s=Math.abs(e-o.x),o=Math.abs(i-o.y);if(s<=25&&o<=25)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Tt,Et,Ct=f(B.style,"touchAction"),xt=Ct!==h,$t="compute",At="manipulation",k="none",D="pan-x",P="pan-y",It=xt&&(Tt={},Et=o.CSS&&o.CSS.supports,["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){Tt[t]=!Et||o.CSS.supports("touch-action",t)}),Tt);function kt(t,e){this.manager=t,this.set(e)}kt.prototype={set:function(t){t==$t&&(t=this.compute()),xt&&this.manager.element.style&&It[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t,e,i=[],n=(a(this.manager.recognizers,function(t){j(t.options.enable,[t])&&(i=i.concat(t.getTouchAction()))}),i.join(" "));return l(n,k)||(t=l(n,D),e=l(n,P),t&&e)?k:t||e?t?D:P:l(n,At)?At:"auto"},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,o=l(n,k)&&!It[k],s=l(n,P)&&!It[P],n=l(n,D)&&!It[D];if(o){var a=1===t.pointers.length,r=t.distance<2,t=t.deltaTime<250;if(a&&r&&t)return}return n&&s?void 0:o||s&&i&E||n&&i&C?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function O(t){this.options=r({},this.defaults,t||{}),this.id=Z++,this.manager=null,this.options.enable=Y(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Dt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Pt(t){return t==T?"down":t==S?"up":t==w?"left":t==b?"right":""}function Ot(t,e){e=e.manager;return e?e.get(t):t}function M(){O.apply(this,arguments)}function Mt(){M.apply(this,arguments),this.pX=null,this.pY=null}function Lt(){M.apply(this,arguments)}function Rt(){O.apply(this,arguments),this._timer=null,this._input=null}function Nt(){M.apply(this,arguments)}function Bt(){M.apply(this,arguments)}function Ut(){O.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function L(t,e){return(e=e||{}).recognizers=Y(e.recognizers,L.defaults.preset),new zt(t,e)}O.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){var e;return i(t,"recognizeWith",this)||(e=this.simultaneous)[(t=Ot(t,this)).id]||(e[t.id]=t).recognizeWith(this),this},dropRecognizeWith:function(t){return i(t,"dropRecognizeWith",this)||(t=Ot(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){var e;return i(t,"requireFailure",this)||-1===u(e=this.requireFail,t=Ot(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){return i(t,"dropRequireFailure",this)||(t=Ot(t,this),-1<(t=u(this.requireFail,t))&&this.requireFail.splice(t,1)),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(e){var i=this,t=this.state;function n(t){i.manager.emit(t,e)}t<8&&n(i.options.event+Dt(t)),n(i.options.event),e.additionalEvent&&n(e.additionalEvent),8<=t&&n(i.options.event+Dt(t))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){t=r({},t);j(this.options.enable,[this,t])?(56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)):(this.reset(),this.state=32)},process:function(t){},getTouchAction:function(){},reset:function(){}},t(M,O,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,t=this.attrTest(t);return n&&(i&v||!t)?16|e:n||t?i&_?8|e:2&e?4|e:2:32}}),t(Mt,M,{defaults:{event:"pan",threshold:10,pointers:1,direction:it},getTouchAction:function(){var t=this.options.direction,e=[];return t&E&&e.push(P),t&C&&e.push(D),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,s=t.deltaX,a=t.deltaY;return o&e.direction||(n=e.direction&E?(o=0===s?y:s<0?w:b,i=s!=this.pX,Math.abs(t.deltaX)):(o=0===a?y:a<0?S:T,i=a!=this.pY,Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return M.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Pt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),t(Lt,M,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[k]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){var e;1!==t.scale&&(e=t.scale<1?"in":"out",t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),t(Rt,O,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(_|v)&&!o)this.reset();else if(t.eventType&m)this.reset(),this._timer=F(function(){this.state=8,this.tryEmit()},e.time,this);else if(t.eventType&_)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&_?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=z(),this.manager.emit(this.options.event,this._input)))}}),t(Nt,M,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[k]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),t(Bt,M,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:E|C,pointers:1},getTouchAction:function(){return Mt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(E|C)?e=t.overallVelocity:i&E?e=t.overallVelocityX:i&C&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&_},emit:function(t){var e=Pt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),t(Ut,O,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[At]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&m&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=_)return this.failTimeout();n=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||A(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&n?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=F(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=F(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),L.VERSION="2.0.7",L.defaults={domEvents:!1,touchAction:$t,enable:!0,inputTarget:null,inputClass:null,preset:[[Nt,{enable:!1}],[Lt,{enable:!1},["rotate"]],[Bt,{direction:E}],[Mt,{direction:E},["swipe"]],[Ut],[Ut,{event:"doubletap",taps:2},["tap"]],[Rt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function zt(t,e){this.options=r({},L.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((e=this).options.inputClass||(Q?yt:J?bt:I))(e,ot),this.touchAction=new kt(this,this.options.touchAction),Ft(this,!0),a(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Ft(i,n){var o,s=i.element;s.style&&(a(i.options.cssProps,function(t,e){o=f(s.style,e),n?(i.oldCssProps[o]=s.style[o],s.style[o]=t):s.style[o]=i.oldCssProps[o]||""}),n||(i.oldCssProps={}))}zt.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);for(var i,n=this.recognizers,o=e.curRecognizer,s=((!o||8&o.state)&&(o=e.curRecognizer=null),0);s<n.length;)i=n[s],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&14&i.state&&(o=e.curRecognizer=i),s++}},get:function(t){if(t instanceof O)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){var e;return i(t,"add",this)?this:((e=this.get(t.options.event))&&this.remove(e),this.recognizers.push(t),(t.manager=this).touchAction.update(),t)},remove:function(t){var e;return i(t,"remove",this)||(t=this.get(t))&&-1!==(t=u(e=this.recognizers,t))&&(e.splice(t,1),this.touchAction.update()),this},on:function(t,e){var i;if(t!==h&&e!==h)return i=this.handlers,a(c(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i;if(t!==h)return i=this.handlers,a(c(t),function(t){e?i[t]&&i[t].splice(u(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&(i=t,n=e,(o=R.createEvent("Event")).initEvent(i,!0,!0),(o.gesture=n).target.dispatchEvent(o));var i,n,o,s=this.handlers[t]&&this.handlers[t].slice();if(s&&s.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](e),a++}},destroy:function(){this.element&&Ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(L,{INPUT_START:m,INPUT_MOVE:2,INPUT_END:_,INPUT_CANCEL:v,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:y,DIRECTION_LEFT:w,DIRECTION_RIGHT:b,DIRECTION_UP:S,DIRECTION_DOWN:T,DIRECTION_HORIZONTAL:E,DIRECTION_VERTICAL:C,DIRECTION_ALL:it,Manager:zt,Input:$,TouchAction:kt,TouchInput:yt,MouseInput:I,PointerEventInput:gt,TouchMouseInput:bt,SingleTouchInput:_t,Recognizer:O,AttrRecognizer:M,Tap:Ut,Pan:Mt,Swipe:Bt,Pinch:Lt,Rotate:Nt,Press:Rt,on:e,off:n,each:a,merge:V,extend:W,assign:r,inherit:t,bindFn:G,prefixed:f}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=L,"function"==typeof define&&define.amd?define("toast/libs/hammer",[],function(){return L}):"undefined"!=typeof module&&module.exports?module.exports=L:o.Hammer=L}(window,document),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("toast/libs/ImageViewer",e):(t=t||self).Viewer=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function H(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?F(Object(o),!0).forEach(function(t){var e,i;e=n,i=o[t=t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):F(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var W={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,loading:!0,loop:!1,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.3,minZoomRatio:.5,maxZoomRatio:100,extractFit:!1,url:"src",backgroundColor:"transparent",toolbarColor:"transparent",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,zoom:null,zoomed:null},t="undefined"!=typeof window&&void 0!==window.document,e=t?window:{},a=t&&"ontouchstart"in e.document.documentElement,i=t&&"PointerEvent"in e,p="viewer",c="move",h="zoom",f="".concat(p,"-active"),V="".concat(p,"-close"),g="".concat(p,"-fade"),m="".concat(p,"-fixed"),G="".concat(p,"-fullscreen"),j="".concat(p,"-fullscreen-exit"),v="".concat(p,"-hide"),o="".concat(p,"-hide-md-down"),Y="".concat(p,"-hide-sm-down"),X="".concat(p,"-hide-xs-down"),d="".concat(p,"-in"),y="".concat(p,"-invisible"),w="".concat(p,"-loading"),K=("".concat(p,"-move"),"".concat(p,"-open")),u="".concat(p,"-show"),b="".concat(p,"-transition"),l="click",r="dblclick",Z="dragstart",q="keydown",S="load",J=i?"pointerdown":a?"touchstart":"mousedown",Q=i?"pointermove":a?"touchmove":"mousemove",tt=i?"pointerup pointercancel":a?"touchend touchcancel":"mouseup",T="transitionend",E="viewed",et="".concat(p,"Action"),it=/\s\s*/;function C(t){return"string"==typeof t}var nt=Number.isNaN||e.isNaN;function x(t){return"number"==typeof t&&!nt(t)}function ot(t){return void 0===t}function s(t){return"object"===n(t)&&null!==t}var st=Object.prototype.hasOwnProperty;function at(t){if(!s(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&st.call(i,"isPrototypeOf")}catch(t){return!1}}function A(t){return"function"==typeof t}function I(e,i){if(e&&A(i))if(Array.isArray(e)||x(e.length))for(var t=e.length,n=0;n<t&&!1!==i.call(e,e[n],n,e);n+=1);else s(e)&&Object.keys(e).forEach(function(t){i.call(e,e[t],t,e)})}var k=Object.assign||function(i){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return s(i)&&0<e.length&&e.forEach(function(e){s(e)&&Object.keys(e).forEach(function(t){i[t]=e[t]})}),i},rt=/^(?:width|height|left|top|marginLeft|marginTop)$/;function D(t,e){var i=t.style;I(e,function(t,e){rt.test(e)&&x(t)&&(t+="px"),i[e]=t})}function lt(t,e){return t&&e&&(t.classList?t.classList.contains(e):-1<t.className.indexOf(e))}function P(t,e){var i;t&&e&&(x(t.length)?I(t,function(t){P(t,e)}):t.classList?t.classList.add(e):(i=t.className.trim())?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e)}function O(t,e){t&&e&&(x(t.length)?I(t,function(t){O(t,e)}):t.classList?t.classList.remove(e):0<=t.className.indexOf(e)&&(t.className=t.className.replace(e,"")))}function ct(t,e,i){e&&(x(t.length)?I(t,function(t){ct(t,e,i)}):(i?P:O)(t,e))}var ht=/([a-z\d])([A-Z])/g;function dt(t){return t.replace(ht,"$1-$2").toLowerCase()}function M(t,e){return s(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(dt(e)))}pt=!1,t&&(ut=!1,i=function(){},t=Object.defineProperty({},"once",{get:function(){return pt=!0,ut},set:function(t){ut=t}}),e.addEventListener("test",i,t),e.removeEventListener("test",i,t));var ut,pt,ft=pt;function L(i,t,n,e){var o=3<arguments.length&&void 0!==e?e:{},s=n;t.trim().split(it).forEach(function(t){var e;ft||(e=i.listeners)&&e[t]&&e[t][n]&&(s=e[t][n],delete e[t][n],0===Object.keys(e[t]).length&&delete e[t],0===Object.keys(e).length)&&delete i.listeners,i.removeEventListener(t,s,o)})}function R(s,t,a,e){var r=3<arguments.length&&void 0!==e?e:{},l=a;t.trim().split(it).forEach(function(n){var t,o;r.once&&!ft&&(t=s.listeners,l=function(){delete o[n][a],s.removeEventListener(n,l,r);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.apply(s,e)},(o=void 0===t?{}:t)[n]||(o[n]={}),o[n][a]&&s.removeEventListener(n,o[n][a],r),o[n][a]=l,s.listeners=o),s.addEventListener(n,l,r)})}function N(t,e,i){var n;return A(Event)&&A(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function B(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,o=t.translateX,t=t.translateY,s=[],o=(x(o)&&0!==o&&s.push("translateX(".concat(o,"px)")),x(t)&&0!==t&&s.push("translateY(".concat(t,"px)")),x(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),x(i)&&1!==i&&s.push("scaleX(".concat(i,")")),x(n)&&1!==n&&s.push("scaleY(".concat(n,")")),s.length?s.join(" "):"none");return{WebkitTransform:o,msTransform:o,transform:o}}var gt=e.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(e.navigator.userAgent);function mt(t,e){var i,n=document.createElement("img");return t.naturalWidth&&!gt?e(t.naturalWidth,t.naturalHeight):(i=document.body||document.documentElement,n.onload=function(){e(n.width,n.height),gt||i.removeChild(n)},n.src=t.src,gt||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(n))),n}function _t(t){switch(t){case 2:return X;case 3:return Y;case 4:return o;default:return""}}function U(t,e){var i=t.pageX,t=t.pageY,n={endX:i,endY:t};return e?n:H({timeStamp:Date.now(),startX:i,startY:t},n)}var i={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var t,e=this.options,i=this.parent;e.inline&&(t={width:Math.max(i.offsetWidth,e.minWidth),height:Math.max(i.offsetHeight,e.minHeight)},this.parentData=t),!this.fulled&&t||(t=this.containerData),this.viewerData=k({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&D(this.viewer,this.viewerData)},initCanvas:function(){this.viewerCanvasData={width:window.innerWidth,height:window.innerHeight-this.footer.offsetHeight}},renderCanvas:function(){D(this.canvasContainer,this.viewerCanvasData)},initList:function(){var a=this,t=this.element,r=this.options,l=this.list,c=[];l.innerHTML="",I(this.images,function(t,e){var i,n=t.src,o=t.alt||(C(o=n)?decodeURIComponent(o.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""),s=r.url;C(s)?s=t.getAttribute(s):A(s)&&(s=s.call(a,t)),(n||s)&&(t=document.createElement("li"),(i=document.createElement("img")).src=n||s,i.alt=o,i.setAttribute("data-index",e),i.setAttribute("data-original-url",s||n),i.setAttribute("data-viewer-action","view"),i.setAttribute("role","button"),t.appendChild(i),l.appendChild(t),c.push(t))}),I(this.items=c,function(e){var t,i,n,o=e.firstElementChild;t=o,i="filled",s(n=!0)?t[i]=n:t.dataset?t.dataset[i]=n:t.setAttribute("data-".concat(dt(i)),n),r.loading&&P(e,w),R(o,S,function(t){r.loading&&O(e,w),a.loadImage(t)},{once:!0})}),r.transition&&R(t,E,function(){P(l,b)},{once:!0})},renderList:function(t){var t=t||this.index,e=this.items[t].offsetWidth||30,i=e+1;D(this.list,k({width:i*this.length},B({translateX:(this.viewerData.width-e)/2-i*t})))},resetList:function(){var t=this.list;t.innerHTML="",O(t,b),D(t,B({translateX:0}))},initImage:function(a){var t,r=this,l=this.options,e=this.image,i=this.viewerData,n=this.footer.offsetHeight,c=i.width,h=Math.max(i.height-n,n),d=this.imageData||{};this.imageInitializing={abort:function(){t.onload=null}},this.initCanvas(),this.renderCanvas(),t=mt(e,function(t,e){var i=t/e,n=c,o=h,s=(r.imageInitializing=!1,c<h*i?o=c/i:n=h*i,Math.min(r.viewerCanvasData.width/t,r.viewerCanvasData.height/e)),n=parseInt(t*s),o=parseInt(e*s),s=(!0!==l.extractFit&&(n=Math.min(n,t),o=Math.min(o,e)),l.minZoomRatio=Math.min(r.viewerCanvasData.width/t,r.viewerCanvasData.height/e),{naturalWidth:t,naturalHeight:e,aspectRatio:i,ratio:n/e,width:n,height:o,left:(c-n)/2,top:(h-o)/2}),t=k({},s);l.rotatable&&(s.rotate=d.rotate||0,t.rotate=0),l.scalable&&(s.scaleX=d.scaleX||1,s.scaleY=d.scaleY||1,t.scaleX=1,t.scaleY=1),r.imageData=s,r.initialImageData=t,a&&a()})},renderImage:function(t){var e,i=this,n=this.image,o=this.index,s=this.imageData;D(n,k({width:s.width,height:s.height,marginLeft:s.left,marginTop:s.top},B(s))),Toast.send(Toast.Events.IMAGEVIEWER_VIEWED,{originalImage:this.images[o],index:o,image:n}),t&&((this.viewing||this.zooming)&&this.options.transition?(e=function(){i.imageRendering=!1,t()},this.imageRendering={abort:function(){L(n,T,e)}},R(n,T,e,{once:!0})):t())},resetImage:function(){var t;(this.viewing||this.viewed)&&(t=this.image,this.viewing&&this.viewing.abort(),t.parentNode.removeChild(t),this.image=null)}},t={bind:function(){var t=this.options,e=this.viewer,i=this.canvas,n=this.element.ownerDocument;R(e,l,this.onClick=this.click.bind(this)),R(e,Z,this.onDragStart=this.dragstart.bind(this)),R(i,J,this.onPointerDown=this.pointerdown.bind(this)),R(n,Q,this.onPointerMove=this.pointermove.bind(this)),R(n,tt,this.onPointerUp=this.pointerup.bind(this)),R(n,q,this.onKeyDown=this.keydown.bind(this)),R(window,"resize",this.onResize=this.resize.bind(this)),t.zoomable&&t.zoomOnWheel&&R(e,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleOnDblclick&&R(i,r,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var t=this.options,e=this.viewer,i=this.canvas,n=this.element.ownerDocument;L(e,l,this.onClick),L(e,Z,this.onDragStart),L(i,J,this.onPointerDown),L(n,Q,this.onPointerMove),L(n,tt,this.onPointerUp),L(n,q,this.onKeyDown),L(window,"resize",this.onResize),t.zoomable&&t.zoomOnWheel&&L(e,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleOnDblclick&&L(i,r,this.onDblclick)}},vt={click:function(t){var e,i=t.target,n=this.options,o=this.imageData,s=M(i,et);switch(s||0!==(e=$(i).parents("[data-viewer-action]")).length&&(s=e.attr("data-viewer-action")),s&&t.preventDefault(),a&&t.isTrusted&&i===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(M(i,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.zoomTo(1,!0);break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-o.scaleX||-1);break;case"flip-vertical":this.scaleY(-o.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(t){t.preventDefault(),this.viewed&&t.target===this.image&&(a&&t.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(t))},load:function(){var i=this,n=(this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),this.element),o=this.options,s=this.image,a=this.index,t=this.viewerData;O(s,y),o.loading&&O(this.canvas,w),P(s,g),s.style.cssText="height:0;"+"margin-left:".concat(t.width/2,"px;")+"margin-top:".concat(t.height/2,"px;")+"max-width:none!important;position:absolute;width:0;",this.initImage(function(){var t,e;O(s,g),P(s,d),t=i.viewer.querySelectorAll(".btn-side-previous"),e=i.viewer.querySelectorAll(".btn-side-next"),$(t).children().attr("data-action","prev"),$(e).children().attr("data-action","next"),a<=0?($(t).hide(),$(i.prevBtn).tt_disable()):($(t).show(),$(i.prevBtn).tt_enable()),a+1>=i.length?($(e).hide(),$(i.nextBtn).tt_disable()):($(e).show(),$(i.nextBtn).tt_enable()),i.renderImage(function(){i.viewed=!0,i.viewing=!1,A(o.viewed)&&R(n,E,o.viewed,{once:!0}),N(n,E,{originalImage:i.images[a],index:a,image:s}),o.transition&&P(s,b,o.transition)})})},loadImage:function(t){var n=t.target,t=n.parentNode,o=t.offsetWidth||30,s=t.offsetHeight||50,a=!!M(n,"filled");mt(n,function(t,e){var t=t/e,e=o,i=s;o<s*t?a?e=s*t:i=o/t:a?i=o/t:e=s*t,D(n,k({width:e,height:i},B({translateX:(o-e)/2,translateY:(s-i)/2})))})},keydown:function(t){var e=this.options;if(this.fulled&&e.keyboard)switch(t.keyCode||t.which||t.charCode){case 27:this.played?this.stop():e.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(e.loop);break;case 38:t.preventDefault(),this.zoom(e.zoomRatio,!0);break;case 39:this.next(e.loop);break;case 40:t.preventDefault(),this.zoom(-e.zoomRatio,!0);break;case 48:case 49:t.ctrlKey&&(t.preventDefault(),this.toggle())}},dragstart:function(t){"img"===t.target.tagName.toLowerCase()&&t.preventDefault()},pointerdown:function(t){var e=this.options,i=this.pointers,n=t.buttons,o=t.button;!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(x(n)&&1!==n||x(o)&&0!==o||t.ctrlKey)||(t.preventDefault(),t.changedTouches?I(t.changedTouches,function(t){i[t.identifier]=U(t)}):i[t.pointerId||0]=U(t),n=!!e.movable&&c,e.zoomOnTouch&&e.zoomable&&1<Object.keys(i).length?n=h:e.slideOnTouch&&("touch"===t.pointerType||"touchstart"===t.type)&&this.isSwitchable()&&(n="switch"),!e.transition||n!==c&&n!==h||O(this.image,b),this.action=n)},pointermove:function(t){var e=this.pointers,i=this.action;this.viewed&&i&&(t.preventDefault(),t.changedTouches?I(t.changedTouches,function(t){k(e[t.identifier]||{},U(t,!0))}):k(e[t.pointerId||0]||{},U(t,!0)),this.change(t))},pointerup:function(t){var e,i=this,n=this.options,o=this.action,s=this.pointers;t.changedTouches?I(t.changedTouches,function(t){e=s[t.identifier],delete s[t.identifier]}):(e=s[t.pointerId||0],delete s[t.pointerId||0]),o&&(t.preventDefault(),!n.transition||o!==c&&o!==h||P(this.image,b),this.action=!1,a)&&o!==h&&e&&Date.now()-e.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){N(i.image,r)},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){i.imageClicked=!1},500)):(this.imageClicked=!1,n.backdrop&&"static"!==n.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){N(i.canvas,l)},50))))},resize:function(){this._refreshTimeout=this._refreshTimeout={},Toast.isMobileDevice?Toast.lazyOnce(function(){this.layout(),Toast.lazyOnce(function(){this.layout()},500,this._refreshTimeout,this)},150,this._refreshTimeout,this):this.layout()},layout:function(){var e=this;this.isShown&&!this.hiding&&(this.initContainer(),this.initViewer(),this.initCanvas(),this.renderViewer(),this.renderCanvas(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(),Toast.lazy(function(){Toast.send(Toast.Events.IMAGEVIEWER_RESIZED)},300)}),this.played)&&(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?this.stop():I(this.player.getElementsByTagName("img"),function(t){R(t,S,e.loadImage.bind(e),{once:!0}),N(t,S)}))},wheel:function(t){var e,i,n=this;this.viewed&&(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e=Number(this.options.zoomRatio)||.1,i=1,t.deltaY?i=0<t.deltaY?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=0<t.detail?1:-1),this.zoom(-i*e,!0,t)))}},yt={show:function(){var t,e,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this.element,o=this.options;return o.inline||this.showing||this.isShown||this.showing||(this.ready?(A(o.show)&&R(n,"show",o.show,{once:!0}),!1!==N(n,"show")&&this.ready&&(this.hiding&&this.transitioning.abort(),this.showing=!0,this.open(),O(t=this.viewer,v),Toast.send(Toast.Events.IMAGEVIEWER_SHOW),o.transition&&!i&&(e=this.shown.bind(this),this.transitioning={abort:function(){L(t,T,e),O(t,d)}},P(t,b),t.initialOffsetWidth=t.offsetWidth,R(t,T,null,{once:!0})),P(t,d),this.shown())):(this.build(),this.ready&&this.show(i))),this},hide:function(){var t,e,i,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],o=this.element,s=this.options;return s.inline||this.hiding||!this.isShown&&!this.showing||(A(s.hide)&&R(o,"hide",s.hide,{once:!0}),!1!==N(o,"hide")&&(this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort(),Toast.send(Toast.Events.IMAGEVIEWER_HIDE),t=this.viewer,s.transition&&!n?(e=this.hidden.bind(this),i=function(){setTimeout(function(){R(t,T,e,{once:!0}),O(t,d),e()},0)},this.transitioning={abort:function(){this.viewed?L(this.image,T,i):L(t,T,e)}},this.viewed&&lt(this.image,b)?(R(t,T,i,{once:!0}),O(t,d)):i()):(O(t,d),this.hidden()))),this},view:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex,e=Number(e)||0;if(!(this.hiding||this.played||e<0||e>=this.length||this.viewed&&e===this.index)){if(!this.isShown)return this.index=e,this.show();this.viewing&&this.viewing.abort();var i,n,o=this.element,s=this.options,a=this.title,r=this.description,l=this.canvas,c=this.items[e],h=c.querySelector("img"),d=M(h,"originalUrl"),h=h.getAttribute("alt"),u=document.createElement("img");u.src=d,u.alt=h,A(s.view)&&R(o,"view",s.view,{once:!0}),!1===N(o,"view",{originalImage:this.images[e],index:e,image:u})||!this.isShown||this.hiding||this.played||(this.image=u,O(this.items[this.index],f),P(c,f),this.viewed=!1,this.index=e,this.imageData={},P(u,y),s.loading&&P(l,w),l.innerHTML="",l.appendChild(u),this.initCanvas(),this.renderCanvas(),this.renderList(),a.innerHTML="",$(a).html(s.title),$(r).html(s.description),R(o,E,i=function(){t.imageData,Array.isArray(s.title)?s.title[1]:s.title},{once:!0}),this.viewing={abort:function(){L(o,E,i),u.complete?this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort():(u.src="",L(u,S,n),this.timeout&&clearTimeout(this.timeout))}},u.complete?this.load():(R(u,S,n=this.load.bind(this),{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){O(u,y),t.timeout=!1},1e3)))}return this},prev:function(){var t=this.index-1;return t<0&&(t=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.length-1:0),this.view(t),this},next:function(){var t=this.length-1,e=this.index+1;return this.view(e=t<e?0<arguments.length&&void 0!==arguments[0]&&arguments[0]?0:t:e),this},move:function(t,e){var i=this.imageData;return this.moveTo(ot(t)?t:i.left+Number(t),ot(e)?e:i.top+Number(e)),this},limit:function(){var t=this.imageData,e=t.width,i=t.height,n=$(this.canvas).width(),o=$(this.canvas).height();n<e?(e=e-Math.abs(t.left)<n?n-e:Math.min(0,t.left),t.left=e):t.left=(n-t.width)/2,o<i?(e=i-Math.abs(t.top)<o?o-i:Math.min(0,t.top),t.top=e):t.top=(o-t.height)/2},moveTo:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData;return t=Number(t),i=Number(i),this.viewed&&!this.played&&this.options.movable&&(e=!1,x(t)&&(n.left=t,e=!0),x(i)&&(n.top=i,e=!0),e)&&(this.limit(),this.renderImage()),this},zoom:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=this.imageData;return t=Number(t),this.zoomTo(n.width*(t=t<0?1/(1-t):1+t)/n.naturalWidth,e,i),this},zoomTo:function(t){var i,n,o,e=this,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],l=this.element,c=this.options,h=this.pointers,d=this.imageData,u=d.width,p=d.height,f=d.left,g=d.top,m=d.naturalWidth,_=d.naturalHeight;if(x(t=Math.max(0,t))&&this.viewed&&!this.played&&(r||c.zoomable)){r||(v=Math.max(.01,c.minZoomRatio),y=Math.min(100,c.maxZoomRatio),t=Math.min(Math.max(t,v),y));var v,y,r=m*(t=a&&.95<t&&t<1.05?1:t),_=_*t,w=r-u,b=_-p,S=u/m;if(A(c.zoom)&&R(l,"zoom",c.zoom,{once:!0}),Toast.send(Toast.Events.IMAGEVIEWER_ZOOM_TO,t,v,y),!1===N(l,"zoom",{ratio:t,oldRatio:S,originalEvent:a}))return this;this.zooming=!0,a?(v={left:(m=(m=this.viewer).getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:m.top+(window.pageYOffset-document.documentElement.clientTop)},y=h&&Object.keys(h).length?(o=n=i=0,I(h,function(t){var e=t.startX,t=t.startY;i+=e,n+=t,o+=1}),{pageX:i/=o,pageY:n/=o}):{pageX:a.pageX,pageY:a.pageY},d.left-=(y.pageX-v.left-f)/u*w,d.top-=(y.pageY-v.top-g)/p*b):(d.left-=w/2,d.top-=b/2),d.width=r,d.height=_,d.ratio=t,this.limit(),this.renderImage(function(){e.zooming=!1,A(c.zoomed)&&R(l,"zoomed",c.zoomed,{once:!0}),N(l,"zoomed",{ratio:t,oldRatio:S,originalEvent:a})}),s&&this.tooltip()}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var e=this.imageData;return x(t=Number(t))&&this.viewed&&!this.played&&this.options.rotatable&&(e.rotate=t,this.renderImage()),this},scaleX:function(t){return this.scale(t,this.imageData.scaleY),this},scaleY:function(t){return this.scale(this.imageData.scaleX,t),this},scale:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData;return t=Number(t),i=Number(i),this.viewed&&!this.played&&this.options.scalable&&(e=!1,x(t)&&(n.scaleX=t,e=!0),x(i)&&(n.scaleY=i,e=!0),e)&&this.renderImage(),this},play:function(){var o,s,a,r,l,c,e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.isShown&&!this.played&&(o=this.options,s=this.player,a=this.loadImage.bind(this),r=[],c=l=0,this.played=!0,this.onLoadWhenPlay=a,t&&Toast.requestFullScreen(),P(s,u),I(this.items,function(t,e){var i=t.querySelector("img"),n=document.createElement("img");n.src=M(i,"originalUrl"),n.alt=i.getAttribute("alt"),l+=1,P(n,g),ct(n,b,o.transition),lt(t,f)&&(P(n,d),c=e),r.push(n),R(n,S,a,{once:!0}),s.appendChild(n)}),x(o.interval)&&0<o.interval&&1<l)&&function t(){e.playing=setTimeout(function(){O(r[c],d),P(r[c=(c+=1)<l?c:0],d),t()},o.interval)}(),this},stop:function(){var t,e=this;return this.played&&(t=this.player,this.played=!1,clearTimeout(this.playing),I(t.getElementsByTagName("img"),function(t){L(t,S,e.onLoadWhenPlay)}),O(t,u),t.innerHTML="",Toast.exitFullScreen()),this},full:function(){var t=this,e=this.options,i=this.viewer,n=this.image,o=this.list;return this.isShown&&!this.played&&!this.fulled&&e.inline&&(this.fulled=!0,this.open(),P(this.button,j),e.transition&&(O(o,b),this.viewed)&&O(n,b),P(i,m),i.setAttribute("style",""),D(i,{zIndex:e.zIndex}),this.initContainer(),this.viewerData=k({},this.containerData),this.renderList(),this.viewed)&&this.initImage(function(){t.renderImage(function(){e.transition&&setTimeout(function(){P(n,b),P(o,b)},0)})}),this},exit:function(){var t=this,e=this.options,i=this.viewer,n=this.image,o=this.list;return this.isShown&&!this.played&&this.fulled&&e.inline&&(this.fulled=!1,this.close(),O(this.button,j),e.transition&&(O(o,b),this.viewed)&&O(n,b),O(i,m),D(i,{zIndex:e.zIndexInline}),this.viewerData=k({},this.parentData),this.renderViewer(),this.renderList(),this.viewed)&&this.initImage(function(){t.renderImage(function(){e.transition&&setTimeout(function(){P(n,b),P(o,b)},0)})}),this},tooltip:function(){var t=this,e=this.options,i=this.tooltipBox,n=this.imageData;return this.viewed&&!this.played&&e.tooltip&&(i.textContent="".concat(Math.round(100*n.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):e.transition?(this.fading&&N(i,T),P(i,u),P(i,g),P(i,b),i.initialOffsetWidth=i.offsetWidth,P(i,d)):P(i,u),this.tooltipping=setTimeout(function(){e.transition?(R(i,T,function(){O(i,u),O(i,g),O(i,b),t.fading=!1},{once:!0}),O(i,d),t.fading=!0):O(i,u),t.tooltipping=!1},1e3)),this},toggle:function(t){return 1===this.imageData.ratio?this.zoomTo(this.initialImageData.ratio,!0,t):this.zoomTo(1,!0,t),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=k({},this.initialImageData),this.renderImage(),Toast.send(Toast.Events.IMAGEVIEWER_RESET)),this},update:function(){var n,o,t=this.element,e=this.options,i=this.isImg;return i&&!t.parentNode?this.destroy():(n=[],I(i?[t]:t.querySelectorAll("img"),function(t){(!e.filter||e.filter(t))&&n.push(t)}),n.length&&(this.images=n,this.length=n.length,this.ready?(o=[],I(this.items,function(t,e){var t=t.querySelector("img"),i=n[e];i&&t&&i.src===t.src||o.push(e)}),D(this.list,{width:"auto"}),this.initList(),this.isShown&&(this.length?this.viewed&&(0<=(i=o.indexOf(this.index))?(this.viewed=!1,this.view(Math.max(this.index-(i+1),0))):P(this.items[this.index],f)):(this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""))):this.build()),this)},destroy:function(){var t=this.element,e=this.options;return t[p]&&(this.destroyed=!0,this.ready?(this.played&&this.stop(),e.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):e.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),e.inline||L(t,l,this.onStart),t[p]=void 0),this}},wt={open:function(){var t=this.body;P(t,K),t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyPaddingRight)||0),"px")},close:function(){var t=this.body;O(t,K),t.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var t=this.element,e=this.options;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,A(e.shown)&&R(t,"shown",e.shown,{once:!0}),!1!==N(t,"shown")&&this.ready&&this.isShown&&!this.hiding&&(this.view(this.index),Toast.send(Toast.Events.IMAGEVIEWER_SHOWN,this))},hidden:function(){var t=this.element,e=this.options;this.close(),this.unbind(),P(this.viewer,v),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(A(e.hidden)&&R(t,"hidden",e.hidden,{once:!0}),N(t,"hidden"),Toast.send(Toast.Events.IMAGEVIEWER_HIDDEN),this.viewer.parentNode.removeChild(this.viewer))},requestFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&((t=t.documentElement).requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen())},exitFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},change:function(t){var e,s,i=this.options,n=this.pointers,o=n[Object.keys(n)[0]],a=o.endX-o.startX,r=o.endY-o.startY;switch(this.action){case c:this.move(a,r);break;case h:this.zoom((e=H({},l=n),s=[],I(l,function(o,t){delete e[t],I(e,function(t){var e=Math.abs(o.startX-t.startX),i=Math.abs(o.startY-t.startY),n=Math.abs(o.endX-t.endX),t=Math.abs(o.endY-t.endY),e=Math.sqrt(e*e+i*i),i=Math.sqrt(n*n+t*t);s.push((i-e)/e)})}),s.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),s[0]),!1,t);break;case"switch":this.action="switched";var l=Math.abs(a);1<l&&l>Math.abs(r)&&(this.pointers={},1<a?this.prev(i.loop):a<-1&&this.next(i.loop))}I(n,function(t){t.startX=t.endX,t.startY=t.endY})},isSwitchable:function(){var t=this.imageData,e=this.viewerData;return 1<this.length&&0<=t.left&&0<=t.top&&t.width<=e.width&&t.height<=e.height}},bt=e.Viewer,e=function(){function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this,n=o;if(!(i instanceof n))throw new TypeError("Cannot call a class as a function");if(!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.options=k({},W,at(e)&&e),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.init()}var t,e,i;return t=o,i=[{key:"noConflict",value:function(){return window.Viewer=bt,o}},{key:"setDefaults",value:function(t){k(W,at(t)&&t)}}],(e=[{key:"init",value:function(){var e,t,i,n,o,s=this,a=this.element,r=this.options;a[p]||(a[p]=this,t="img"===a.tagName.toLowerCase(),e=[],I(t?[a]:a.querySelectorAll("img"),function(t){(!A(r.filter)||r.filter.call(s,t))&&e.push(t)}),this.isImg=t,this.length=e.length,this.images=e,i=(t=a.ownerDocument).body||t.documentElement,this.body=i,this.scrollbarWidth=window.innerWidth-t.documentElement.clientWidth,this.initialBodyPaddingRight=window.getComputedStyle(i).paddingRight,ot(document.createElement(p).style.transition)&&(r.transition=!1),r.inline?(n=0,o=function(){var t;(n+=1)===s.length&&(s.initializing=!1,s.delaying={abort:function(){clearTimeout(t)}},t=setTimeout(function(){s.delaying=!1,s.build()},0))},this.initializing={abort:function(){I(e,function(t){t.complete||L(t,S,o)})}},I(e,function(t){t.complete?o():R(t,S,o,{once:!0})})):R(a,l,this.onStart=function(t){t=t.target;"img"!==t.tagName.toLowerCase()||A(r.filter)&&!r.filter.call(s,t)||s.view(s.images.indexOf(t))}))}},{key:"build",value:function(){var t,e,i,n,o,s,a,r,l,c,h,d,u;this.ready||(t=this.element,e=this.options,i=t.parentNode,(l=document.createElement("div")).innerHTML=Mustache.render(Toast.HtmlLoader.ImageViewer,{Strings:Toast.Strings}),d=(n=l.querySelector(".".concat(p,"-container"))).querySelector(".".concat(p,"-title")),u=n.querySelector(".".concat(p,"-description")),o=n.querySelector(".".concat(p,"-toolbar")),s=n.querySelector(".".concat(p,"-navbar")),a=n.querySelector(".".concat(p,"-button")),l=l.querySelector(".".concat(p,"-canvas-container")),c=n.querySelector(".".concat(p,"-canvas")),r=n.querySelector(".side-navigate-buttons"),this.parent=i,this.viewer=n,this.canvasContainer=l,this.title=d,this.description=u,this.toolbar=o,this.navbar=s,this.button=a,this.canvas=c,this.sideNavigateButtons=r,this.footer=n.querySelector(".".concat(p,"-footer")),this.tooltipBox=n.querySelector(".".concat(p,"-tooltip")),this.player=n.querySelector(".".concat(p,"-player")),this.list=n.querySelector(".".concat(p,"-list")),this.prevBtn=n.querySelector(".".concat(p,"-prev")),this.nextBtn=n.querySelector(".".concat(p,"-next")),P(d,e.title?_t(Array.isArray(e.title)?e.title[0]:e.title):v),P(u,e.description?_t(e.description):v),P(s,e.navbar?_t(e.navbar):v),e.zoomable||P(o,"hide-zoom"),ct(a,v,!e.button),e.backdrop&&P(n,"".concat(p,"-backdrop")),C(e.className)&&e.className&&e.className.split(it).forEach(function(t){P(n,t)}),e.toolbar||P(o,v),1===this.images.length?(l=n.querySelector(".viewer-prev"),h=n.querySelector(".viewer-play"),c=n.querySelector(".viewer-next"),P(l,v),P(h,v),P(c,v),P(r,v),P(o,"viewer-one-image"),P(n,"viewer-one-image")):Toast._msieVersion&&Toast._msieVersion<11&&(P(h=n.querySelector(".viewer-play"),v),P(o,"viewer-play-hide")),e.rotatable||(P(d=o.querySelectorAll('li[class*="rotate"]'),y),I(d,function(t){o.appendChild(t)})),e.inline?(P(a,G),D(n,{zIndex:e.zIndexInline}),"static"===window.getComputedStyle(i).position&&D(i,{position:"relative"}),i.insertBefore(n,t.nextSibling)):(P(a,V),P(n,m),P(n,g),P(n,v),D(n,{zIndex:e.zIndex}),(u=(u=C(u=e.container)?t.ownerDocument.querySelector(u):u)||this.body).appendChild(n)),_.isEmpty(e.backgroundColor)||D(n,{backgroundColor:e.backgroundColor}),_.isEmpty(e.toolbarColor)||D(this.footer,{backgroundColor:e.toolbarColor}),e.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,A(e.ready)&&R(t,"ready",e.ready,{once:!0}),!1===N(t,"ready")?this.ready=!1:this.ready&&e.inline&&this.view(this.index))}}])&&z(t.prototype,e),i&&z(t,i),o}();return k(e.prototype,i,t,vt,yt,wt),e}),!function(t,e){"function"==typeof define&&define.amd?define("toast/libs/dragdealer",e):t.Dragdealer=e()}(this,function(){"use strict";function t(t,e){this.options=this.applyDefaults(e||{}),this.bindMethods(),this.wrapper=this.getWrapperElement(t),this.wrapper&&(this.handle=this.getHandleElement(this.wrapper,this.options.handleClass),this.handle)&&(this.init(),this.bindEventListeners())}t.prototype={defaults:{disabled:!1,horizontal:!0,vertical:!1,slide:!0,steps:0,snap:!1,loose:!1,speed:.1,xPrecision:0,yPrecision:0,handleClass:"handle-drag",css3:!0,activeClass:"active",tapping:!0},init:function(){var t;this.options.css3&&(t=this.handle,l.backfaceVisibility)&&l.perspective&&(t.style[l.perspective]="1000px",t.style[l.backfaceVisibility]="hidden"),this.value={prev:[-1,-1],current:[this.options.x||0,this.options.y||0],target:[this.options.x||0,this.options.y||0]},this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]},this.change=[0,0],this.stepRatios=this.calculateStepRatios(),this.activity=!1,this.dragging=!1,this.tapping=!1,this.reflow(),this.options.disabled&&this.disable()},applyDefaults:function(t){for(var e in this.defaults)t.hasOwnProperty(e)||(t[e]=this.defaults[e]);return t},getWrapperElement:function(t){return"string"==typeof t?document.getElementById(t):t},getHandleElement:function(t,e){var i,n,o;if(t.getElementsByClassName){if(0<(i=t.getElementsByClassName(e)).length)return i[0]}else for(n=new RegExp("(^|\\s)"+e+"(\\s|$)"),i=t.getElementsByTagName("*"),o=0;o<i.length;o++)if(n.test(i[o].className))return i[o]},calculateStepRatios:function(){var t=[];if(1<=this.options.steps)for(var e=0;e<=this.options.steps-1;e++)1<this.options.steps?t[e]=e/(this.options.steps-1):t[e]=0;return t},setWrapperOffset:function(){this.offset.wrapper=r.get(this.wrapper)},calculateBounds:function(){var t={top:this.options.top||0,bottom:-(this.options.bottom||0)+this.wrapper.offsetHeight,left:this.options.left||0,right:-(this.options.right||0)+this.wrapper.offsetWidth};return t.availWidth=t.right-t.left-this.handle.offsetWidth,t.availHeight=t.bottom-t.top-this.handle.offsetHeight,t},calculateValuePrecision:function(){var t=this.options.xPrecision||Math.abs(this.bounds.availWidth),e=this.options.yPrecision||Math.abs(this.bounds.availHeight);return[t?1/t:0,e?1/e:0]},bindMethods:function(){"function"==typeof this.options.customRequestAnimationFrame?this.requestAnimationFrame=e(this.options.customRequestAnimationFrame,window):this.requestAnimationFrame=e(d,window),"function"==typeof this.options.customCancelAnimationFrame?this.cancelAnimationFrame=e(this.options.customCancelAnimationFrame,window):this.cancelAnimationFrame=e(u,window),this.animateWithRequestAnimationFrame=e(this.animateWithRequestAnimationFrame,this),this.animate=e(this.animate,this),this.onHandleMouseDown=e(this.onHandleMouseDown,this),this.onHandleTouchStart=e(this.onHandleTouchStart,this),this.onDocumentMouseMove=e(this.onDocumentMouseMove,this),this.onWrapperTouchMove=e(this.onWrapperTouchMove,this),this.onWrapperMouseDown=e(this.onWrapperMouseDown,this),this.onWrapperTouchStart=e(this.onWrapperTouchStart,this),this.onDocumentMouseUp=e(this.onDocumentMouseUp,this),this.onDocumentTouchEnd=e(this.onDocumentTouchEnd,this),this.onHandleClick=e(this.onHandleClick,this),this.onWindowResize=e(this.onWindowResize,this)},bindEventListeners:function(){i(this.handle,"mousedown",this.onHandleMouseDown),i(this.handle,"touchstart",this.onHandleTouchStart),i(document,"mousemove",this.onDocumentMouseMove),i(this.wrapper,"touchmove",this.onWrapperTouchMove),i(this.wrapper,"mousedown",this.onWrapperMouseDown),i(this.wrapper,"touchstart",this.onWrapperTouchStart),i(document,"mouseup",this.onDocumentMouseUp),i(document,"touchend",this.onDocumentTouchEnd),i(this.handle,"click",this.onHandleClick),i(window,"resize",this.onWindowResize),this.animate(!1,!0),this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},unbindEventListeners:function(){n(this.handle,"mousedown",this.onHandleMouseDown),n(this.handle,"touchstart",this.onHandleTouchStart),n(document,"mousemove",this.onDocumentMouseMove),n(this.wrapper,"touchmove",this.onWrapperTouchMove),n(this.wrapper,"mousedown",this.onWrapperMouseDown),n(this.wrapper,"touchstart",this.onWrapperTouchStart),n(document,"mouseup",this.onDocumentMouseUp),n(document,"touchend",this.onDocumentTouchEnd),n(this.handle,"click",this.onHandleClick),n(window,"resize",this.onWindowResize),this.cancelAnimationFrame(this.interval)},onHandleMouseDown:function(t){a.refresh(t),o(t),s(t),this.activity=!1,this.startDrag()},onHandleTouchStart:function(t){a.refresh(t),s(t),this.activity=!1,this.startDrag()},onDocumentMouseMove:function(t){a.refresh(t),this.dragging&&(this.activity=!0,o(t))},onWrapperTouchMove:function(t){a.refresh(t),!this.activity&&this.draggingOnDisabledAxis()?this.dragging&&this.stopDrag():(o(t),this.activity=!0)},onWrapperMouseDown:function(t){a.refresh(t),o(t),this.startTap()},onWrapperTouchStart:function(t){a.refresh(t),o(t),this.startTap()},onDocumentMouseUp:function(t){this.stopDrag(),this.stopTap()},onDocumentTouchEnd:function(t){this.stopDrag(),this.stopTap()},onHandleClick:function(t){this.activity&&(o(t),s(t))},onWindowResize:function(t){this.reflow()},enable:function(){this.disabled=!1,this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0,this.handle.className+=" disabled"},reflow:function(){this.setWrapperOffset(),this.bounds=this.calculateBounds(),this.valuePrecision=this.calculateValuePrecision(),this.updateOffsetFromValue()},getStep:function(){return[this.getStepNumber(this.value.target[0]),this.getStepNumber(this.value.target[1])]},getValue:function(){return this.value.target},setStep:function(t,e,i){this.setValue(this.options.steps&&1<t?(t-1)/(this.options.steps-1):0,this.options.steps&&1<e?(e-1)/(this.options.steps-1):0,i)},setValue:function(t,e,i){this.setTargetValue([t,e||0]),i&&(this.groupCopy(this.value.current,this.value.target),this.updateOffsetFromValue(),this.callAnimationCallback())},startTap:function(){!this.disabled&&this.options.tapping&&(this.tapping=!0,this.setWrapperOffset(),this.setTargetValueByOffset([a.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,a.y-this.offset.wrapper[1]-this.handle.offsetHeight/2]))},stopTap:function(){!this.disabled&&this.tapping&&(this.tapping=!1,this.setTargetValue(this.value.current))},startDrag:function(){this.disabled||(this.dragging=!0,this.setWrapperOffset(),this.offset.mouse=[a.x-r.get(this.handle)[0],a.y-r.get(this.handle)[1]],this.wrapper.className.match(this.options.activeClass)||(this.wrapper.className+=" "+this.options.activeClass),this.callDragStartCallback())},stopDrag:function(){var t,e;!this.disabled&&this.dragging&&(this.dragging=!1,t=this.groupClone(this.value.current),this.options.slide&&(e=this.change,t[0]+=4*e[0],t[1]+=4*e[1]),this.setTargetValue(t),this.wrapper.className=this.wrapper.className.replace(" "+this.options.activeClass,""),this.callDragStopCallback())},callAnimationCallback:function(){var t=this.value.current;this.options.snap&&1<this.options.steps&&(t=this.getClosestSteps(t)),this.groupCompare(t,this.value.prev)||("function"==typeof this.options.animationCallback&&this.options.animationCallback.call(this,t[0],t[1]),this.groupCopy(this.value.prev,t))},callTargetCallback:function(){"function"==typeof this.options.callback&&this.options.callback.call(this,this.value.target[0],this.value.target[1])},callDragStartCallback:function(){"function"==typeof this.options.dragStartCallback&&this.options.dragStartCallback.call(this,this.value.target[0],this.value.target[1])},callDragStopCallback:function(){"function"==typeof this.options.dragStopCallback&&this.options.dragStopCallback.call(this,this.value.target[0],this.value.target[1])},animateWithRequestAnimationFrame:function(t){t?(this.timeOffset=this.timeStamp?t-this.timeStamp:0,this.timeStamp=t):this.timeOffset=25,this.animate(!0,!0),this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},animate:function(t,e){var i;(!t||this.dragging)&&(this.dragging&&(t=this.groupClone(this.value.target),i=[a.x-this.offset.wrapper[0]-this.offset.mouse[0],a.y-this.offset.wrapper[1]-this.offset.mouse[1]],this.setTargetValueByOffset(i,this.options.loose),this.change=[this.value.target[0]-t[0],this.value.target[1]-t[1]]),(this.dragging||e)&&this.groupCopy(this.value.current,this.value.target),this.dragging||this.glide()||e)&&(this.updateOffsetFromValue(),this.callAnimationCallback())},glide:function(){var t=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];return!(!t[0]&&!t[1]||(Math.abs(t[0])>this.valuePrecision[0]||Math.abs(t[1])>this.valuePrecision[1]?(this.value.current[0]+=t[0]*Math.min(this.options.speed*this.timeOffset/25,1),this.value.current[1]+=t[1]*Math.min(this.options.speed*this.timeOffset/25,1)):this.groupCopy(this.value.current,this.value.target),0))},updateOffsetFromValue:function(){this.options.snap?this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current)):this.offset.current=this.getOffsetsByRatios(this.value.current),this.groupCompare(this.offset.current,this.offset.prev)||(this.renderHandlePosition(),this.groupCopy(this.offset.prev,this.offset.current))},renderHandlePosition:function(){var t="";this.options.css3&&l.transform?(this.options.horizontal&&(t+="translateX("+this.offset.current[0]+"px)"),this.options.vertical&&(t+=" translateY("+this.offset.current[1]+"px)"),this.handle.style[l.transform]=t):(this.options.horizontal&&(this.handle.style.left=this.offset.current[0]+"px"),this.options.vertical&&(this.handle.style.top=this.offset.current[1]+"px"))},setTargetValue:function(t,e){e=e?this.getLooseValue(t):this.getProperValue(t);this.groupCopy(this.value.target,e),this.offset.target=this.getOffsetsByRatios(e),this.callTargetCallback()},setTargetValueByOffset:function(t,e){t=this.getRatiosByOffsets(t),e=e?this.getLooseValue(t):this.getProperValue(t);this.groupCopy(this.value.target,e),this.offset.target=this.getOffsetsByRatios(e)},getLooseValue:function(t){var e=this.getProperValue(t);return[e[0]+(t[0]-e[0])/4,e[1]+(t[1]-e[1])/4]},getProperValue:function(t){t=this.groupClone(t);return t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0),t[0]=Math.min(t[0],1),t[1]=Math.min(t[1],1),t=(!this.dragging&&!this.tapping||this.options.snap)&&1<this.options.steps?this.getClosestSteps(t):t},getRatiosByOffsets:function(t){return[this.getRatioByOffset(t[0],this.bounds.availWidth,this.bounds.left),this.getRatioByOffset(t[1],this.bounds.availHeight,this.bounds.top)]},getRatioByOffset:function(t,e,i){return e?(t-i)/e:0},getOffsetsByRatios:function(t){return[this.getOffsetByRatio(t[0],this.bounds.availWidth,this.bounds.left),this.getOffsetByRatio(t[1],this.bounds.availHeight,this.bounds.top)]},getOffsetByRatio:function(t,e,i){return Math.round(t*e)+i},getStepNumber:function(t){return this.getClosestStep(t)*(this.options.steps-1)+1},getClosestSteps:function(t){return[this.getClosestStep(t[0]),this.getClosestStep(t[1])]},getClosestStep:function(t){for(var e=0,i=1,n=0;n<=this.options.steps-1;n++)Math.abs(this.stepRatios[n]-t)<i&&(i=Math.abs(this.stepRatios[n]-t),e=n);return this.stepRatios[e]},groupCompare:function(t,e){return t[0]==e[0]&&t[1]==e[1]},groupCopy:function(t,e){t[0]=e[0],t[1]=e[1]},groupClone:function(t){return[t[0],t[1]]},draggingOnDisabledAxis:function(){return!this.options.horizontal&&a.xDiff>a.yDiff||!this.options.vertical&&a.yDiff>a.xDiff}};var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},n=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},o=function(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1},s=function(t){(t=t||window.event).stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},a={x:0,y:0,xDiff:0,yDiff:0,refresh:function(t){"mousemove"==(t=t||window.event).type?this.set(t):t.touches&&this.set(t.touches[0])},set:function(t){var e=this.x,i=this.y;t.clientX||t.clientY?(this.x=t.clientX,this.y=t.clientY):(t.pageX||t.pageY)&&(this.x=t.pageX-document.body.scrollLeft-document.documentElement.scrollLeft,this.y=t.pageY-document.body.scrollTop-document.documentElement.scrollTop),this.xDiff=Math.abs(this.x-e),this.yDiff=Math.abs(this.y-i)}},r={get:function(t){var e={left:0,top:0};return[(e=void 0!==t.getBoundingClientRect?t.getBoundingClientRect():e).left,e.top]}},l={transform:c("transform"),perspective:c("perspective"),backfaceVisibility:c("backfaceVisibility")};function c(t){var e="Webkit Moz ms O".split(" "),i=document.documentElement.style;if(void 0!==i[t])return t;t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<e.length;n++)if(void 0!==i[e[n]+t])return e[n]+t}for(var h=["webkit","moz"],d=window.requestAnimationFrame,u=window.cancelAnimationFrame,p=0;p<h.length&&!d;++p)d=window[h[p]+"RequestAnimationFrame"],u=window[h[p]+"CancelAnimationFrame"]||window[h[p]+"CancelRequestAnimationFrame"];return d=function(t){return setTimeout(t,100)},u=clearTimeout,t}),!function(t,e){"object"==typeof exports?module.exports=exports=e():"function"==typeof define&&define.amd?define("toast/libs/crypto",[],e):t.CryptoJS=e()}(this,function(){var L,R,N,h,t,B,U,z,F,H,W,V,G,j,Y,X,K,Z,q,J,Q,tt,e,it,nt,ot,st,o,a,r,s,l,c,d,at,rt,lt,ct,i,ht,u,dt,ut,pt,n=function(c){var n;if(!(n=!(n=!(n="undefined"!=typeof window&&window.crypto?window.crypto:n)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:n)&&"undefined"!=typeof global&&global.crypto?global.crypto:n)&&"function"==typeof require)try{n=require("crypto")}catch(n){}var i=Object.create||function(t){return e.prototype=t,t=new e,e.prototype=null,t};function e(){}var t={},o=t.lib={},s=o.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},h=o.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||r).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes,o=t.sigBytes;if(this.clamp(),n%4)for(var s=0;s<o;s++){var a=i[s>>>2]>>>24-s%4*8&255;e[n+s>>>2]|=a<<24-(n+s)%4*8}else for(s=0;s<o;s+=4)e[n+s>>>2]=i[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=c.ceil(e/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new h.init(e,t)}}),a=t.enc={},r=a.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],o=0;o<i;o++){var s=e[o>>>2]>>>24-o%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new h.init(i,e/2)}},l=a.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],o=0;o<i;o++){var s=e[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new h.init(i,e)}},d=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},u=o.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e,i=this._data,n=i.words,o=i.sigBytes,s=this.blockSize,a=o/(4*s),r=(t?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*s,t=c.min(4*r,o);if(r){for(var l=0;l<r;l+=s)this._doProcessBlock(n,l);e=n.splice(0,r),i.sigBytes-=t}return new h.init(e,t)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(o.Hasher=u.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(t,e){return new i.init(e).finalize(t)}},_createHmacHelper:function(i){return function(t,e){return new p.HMAC.init(i,e).finalize(t)}}}),t.algo={});return t}(Math);function ft(t,e,i){return t&e|~t&i}function gt(t,e,i){return t&i|e&~i}function mt(t,e){return t<<e|t>>>32-e}function _t(t,e,i,n){var o,s=this._iv;s?(o=s.slice(0),this._iv=void 0):o=this._prevBlock,n.encryptBlock(o,0);for(var a=0;a<i;a++)t[e+a]^=o[a]}function vt(t){var e,i,n;return 255==(t>>24&255)?(i=t>>8&255,n=255&t,255===(e=t>>16&255)?(e=0,255===i?(i=0,255===n?n=0:++n):++i):++e,t=0,t=(t+=e<<16)+(i<<8)+n):t+=1<<24,t}function yt(){for(var t=this._X,e=this._C,i=0;i<8;i++)a[i]=e[i];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var n=t[i]+e[i],o=65535&n,s=n>>>16;r[i]=((o*o>>>17)+o*s>>>15)+s*s^((4294901760&n)*n|0)+((65535&n)*n|0)}t[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,t[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,t[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,t[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,t[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,t[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,t[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,t[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}function wt(){for(var t=this._X,e=this._C,i=0;i<8;i++)l[i]=e[i];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<l[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<l[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<l[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<l[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<l[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<l[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<l[6]>>>0?1:0)|0,this._b=e[7]>>>0<l[7]>>>0?1:0,i=0;i<8;i++){var n=t[i]+e[i],o=65535&n,s=n>>>16;c[i]=((o*o>>>17)+o*s>>>15)+s*s^((4294901760&n)*n|0)+((65535&n)*n|0)}t[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,t[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,t[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,t[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,t[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,t[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,t[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,t[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}L=n.lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp();for(var o=[],s=0;s<i;s+=3)for(var a=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,r=0;r<4&&s+.75*r<i;r++)o.push(n.charAt(a>>>6*(3-r)&63));var l=n.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(t){var e=t.length,i=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],o=0;o<i.length;o++)n[i.charCodeAt(o)]=o;for(var s,a,r=i.charAt(64),l=(r&&-1!==(r=t.indexOf(r))&&(e=r),t),c=e,h=n,d=[],u=0,p=0;p<c;p++)p%4&&(s=h[l.charCodeAt(p-1)]<<p%4*2,a=h[l.charCodeAt(p)]>>>6-p%4*2,d[u>>>2]|=(s|a)<<24-u%4*8,u++);return L.create(d,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};for(var bt=Math,p=n,St=(f=p.lib).WordArray,Tt=f.Hasher,f=p.algo,x=[],Et=0;Et<64;Et++)x[Et]=4294967296*bt.abs(bt.sin(Et+1))|0;function $(t,e,i,n,o,s,a){t=t+(e&i|~e&n)+o+a;return(t<<s|t>>>32-s)+e}function A(t,e,i,n,o,s,a){t=t+(e&n|i&~n)+o+a;return(t<<s|t>>>32-s)+e}function I(t,e,i,n,o,s,a){t=t+(e^i^n)+o+a;return(t<<s|t>>>32-s)+e}function k(t,e,i,n,o,s,a){t=t+(i^(e|~n))+o+a;return(t<<s|t>>>32-s)+e}f=f.MD5=Tt.extend({_doReset:function(){this._hash=new St.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var i=0;i<16;i++){var n=e+i,o=t[n];t[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var s=this._hash.words,a=t[e+0],r=t[e+1],l=t[e+2],c=t[e+3],h=t[e+4],d=t[e+5],u=t[e+6],p=t[e+7],f=t[e+8],g=t[e+9],m=t[e+10],_=t[e+11],v=t[e+12],y=t[e+13],w=t[e+14],b=t[e+15],S=$(s[0],C=s[1],E=s[2],T=s[3],a,7,x[0]),T=$(T,S,C,E,r,12,x[1]),E=$(E,T,S,C,l,17,x[2]),C=$(C,E,T,S,c,22,x[3]);S=$(S,C,E,T,h,7,x[4]),T=$(T,S,C,E,d,12,x[5]),E=$(E,T,S,C,u,17,x[6]),C=$(C,E,T,S,p,22,x[7]),S=$(S,C,E,T,f,7,x[8]),T=$(T,S,C,E,g,12,x[9]),E=$(E,T,S,C,m,17,x[10]),C=$(C,E,T,S,_,22,x[11]),S=$(S,C,E,T,v,7,x[12]),T=$(T,S,C,E,y,12,x[13]),E=$(E,T,S,C,w,17,x[14]),S=A(S,C=$(C,E,T,S,b,22,x[15]),E,T,r,5,x[16]),T=A(T,S,C,E,u,9,x[17]),E=A(E,T,S,C,_,14,x[18]),C=A(C,E,T,S,a,20,x[19]),S=A(S,C,E,T,d,5,x[20]),T=A(T,S,C,E,m,9,x[21]),E=A(E,T,S,C,b,14,x[22]),C=A(C,E,T,S,h,20,x[23]),S=A(S,C,E,T,g,5,x[24]),T=A(T,S,C,E,w,9,x[25]),E=A(E,T,S,C,c,14,x[26]),C=A(C,E,T,S,f,20,x[27]),S=A(S,C,E,T,y,5,x[28]),T=A(T,S,C,E,l,9,x[29]),E=A(E,T,S,C,p,14,x[30]),S=I(S,C=A(C,E,T,S,v,20,x[31]),E,T,d,4,x[32]),T=I(T,S,C,E,f,11,x[33]),E=I(E,T,S,C,_,16,x[34]),C=I(C,E,T,S,w,23,x[35]),S=I(S,C,E,T,r,4,x[36]),T=I(T,S,C,E,h,11,x[37]),E=I(E,T,S,C,p,16,x[38]),C=I(C,E,T,S,m,23,x[39]),S=I(S,C,E,T,y,4,x[40]),T=I(T,S,C,E,a,11,x[41]),E=I(E,T,S,C,c,16,x[42]),C=I(C,E,T,S,u,23,x[43]),S=I(S,C,E,T,g,4,x[44]),T=I(T,S,C,E,v,11,x[45]),E=I(E,T,S,C,b,16,x[46]),S=k(S,C=I(C,E,T,S,l,23,x[47]),E,T,a,6,x[48]),T=k(T,S,C,E,p,10,x[49]),E=k(E,T,S,C,w,15,x[50]),C=k(C,E,T,S,d,21,x[51]),S=k(S,C,E,T,v,6,x[52]),T=k(T,S,C,E,c,10,x[53]),E=k(E,T,S,C,m,15,x[54]),C=k(C,E,T,S,r,21,x[55]),S=k(S,C,E,T,f,6,x[56]),T=k(T,S,C,E,b,10,x[57]),E=k(E,T,S,C,u,15,x[58]),C=k(C,E,T,S,y,21,x[59]),S=k(S,C,E,T,h,6,x[60]),T=k(T,S,C,E,_,10,x[61]),E=k(E,T,S,C,l,15,x[62]),C=k(C,E,T,S,g,21,x[63]),s[0]=s[0]+S|0,s[1]=s[1]+C|0,s[2]=s[2]+E|0,s[3]=s[3]+T|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes,o=(e[n>>>5]|=128<<24-n%32,bt.floor(i/4294967296));e[15+(64+n>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e[14+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(e.length+1),this._process();for(var o=this._hash,s=o.words,a=0;a<4;a++){var r=s[a];s[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return o},clone:function(){var t=Tt.clone.call(this);return t._hash=this._hash.clone(),t}}),p.MD5=Tt._createHelper(f),p.HmacMD5=Tt._createHmacHelper(f),f=(p=n).lib,R=f.WordArray,N=f.Hasher,f=p.algo,h=[],f=f.SHA1=N.extend({_doReset:function(){this._hash=new R.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],o=i[1],s=i[2],a=i[3],r=i[4],l=0;l<80;l++){l<16?h[l]=0|t[e+l]:(c=h[l-3]^h[l-8]^h[l-14]^h[l-16],h[l]=c<<1|c>>>31);var c=(n<<5|n>>>27)+r+h[l];c+=l<20?1518500249+(o&s|~o&a):l<40?1859775393+(o^s^a):l<60?(o&s|o&a|s&a)-1894007588:(o^s^a)-899497514,r=a,a=s,s=o<<30|o>>>2,o=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+r|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(64+n>>>9<<4)]=Math.floor(i/4294967296),e[15+(64+n>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=N.clone.call(this);return t._hash=this._hash.clone(),t}}),p.SHA1=N._createHelper(f),p.HmacSHA1=N._createHmacHelper(f);var Ct=Math,p=n,xt=(f=p.lib).WordArray,$t=f.Hasher,f=p.algo,At=[],It=[];function kt(t){return 4294967296*(t-(0|t))|0}for(var Dt=2,Pt=0;Pt<64;)!function(t){for(var e=Ct.sqrt(t),i=2;i<=e;i++)if(!(t%i))return;return 1}(Dt)||(Pt<8&&(At[Pt]=kt(Ct.pow(Dt,.5))),It[Pt]=kt(Ct.pow(Dt,1/3)),Pt++),Dt++;for(var g=[],f=f.SHA256=$t.extend({_doReset:function(){this._hash=new xt.init(At.slice(0))},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],o=i[1],s=i[2],a=i[3],r=i[4],l=i[5],c=i[6],h=i[7],d=0;d<64;d++){g[d]=d<16?0|t[e+d]:(((u=g[d-15])<<25|u>>>7)^(u<<14|u>>>18)^u>>>3)+g[d-7]+(((u=g[d-2])<<15|u>>>17)^(u<<13|u>>>19)^u>>>10)+g[d-16];var u=n&o^n&s^o&s,p=h+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&l^~r&c)+It[d]+g[d],h=c,c=l,l=r,r=a+p|0,a=s,s=o,o=n,n=p+(((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+u)|0}i[0]=i[0]+n|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+r|0,i[5]=i[5]+l|0,i[6]=i[6]+c|0,i[7]=i[7]+h|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(64+n>>>9<<4)]=Ct.floor(i/4294967296),e[15+(64+n>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=$t.clone.call(this);return t._hash=this._hash.clone(),t}}),Ot=(p.SHA256=$t._createHelper(f),p.HmacSHA256=$t._createHmacHelper(f),pt=n.lib.WordArray,(p=n.enc).Utf16=p.Utf16BE={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],o=0;o<i;o+=2){var s=e[o>>>2]>>>16-o%4*8&65535;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>1]|=t.charCodeAt(n)<<16-n%2*16;return pt.create(i,2*e)}},p.Utf16LE={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],o=0;o<i;o+=2){var s=Ce(e[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>1]|=Ce(t.charCodeAt(n)<<16-n%2*16);return pt.create(i,2*e)}},"function"==typeof ArrayBuffer&&(f=n.lib.WordArray,ut=f.init,(f.init=function(t){if((t=(t=t instanceof ArrayBuffer?new Uint8Array(t):t)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t)instanceof Uint8Array){for(var e=t.byteLength,i=[],n=0;n<e;n++)i[n>>>2]|=t[n]<<24-n%4*8;ut.call(this,i,e)}else ut.apply(this,arguments)}).prototype=f),Math,f=(p=n).lib,t=f.WordArray,B=f.Hasher,f=p.algo,U=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),z=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),F=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),H=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),W=t.create([0,1518500249,1859775393,2400959708,2840853838]),V=t.create([1352829926,1548603684,1836072691,2053994217,0]),f=f.RIPEMD160=B.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=0;i<16;i++){var n=e+i,o=t[n];t[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var s,a,r,l,c,h,d=this._hash.words,u=W.words,p=V.words,f=U.words,g=z.words,m=F.words,_=H.words,v=s=d[0],y=a=d[1],w=r=d[2],b=l=d[3],S=c=d[4],i=0;i<80;i+=1)h=(h=mt(h=(h=s+t[e+f[i]]|0)+(i<16?(a^r^l)+u[0]:i<32?ft(a,r,l)+u[1]:i<48?((a|~r)^l)+u[2]:i<64?gt(a,r,l)+u[3]:(a^(r|~l))+u[4])|0,m[i]))+c|0,s=c,c=l,l=mt(r,10),r=a,a=h,h=(h=mt(h=(h=v+t[e+g[i]]|0)+(i<16?(y^(w|~b))+p[0]:i<32?gt(y,w,b)+p[1]:i<48?((y|~w)^b)+p[2]:i<64?ft(y,w,b)+p[3]:(y^w^b)+p[4])|0,_[i]))+S|0,v=S,S=b,b=mt(w,10),w=y,y=h;h=d[1]+r+b|0,d[1]=d[2]+l+S|0,d[2]=d[3]+c+v|0,d[3]=d[4]+s+y|0,d[4]=d[0]+a+w|0,d[0]=h},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[14+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(e.length+1),this._process();for(var n=this._hash,o=n.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return n},clone:function(){var t=B.clone.call(this);return t._hash=this._hash.clone(),t}}),p.RIPEMD160=B._createHelper(f),p.HmacRIPEMD160=B._createHmacHelper(f),p=n.lib.Base,G=n.enc.Utf8,n.algo.HMAC=p.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=G.parse(e));var i=t.blockSize,n=4*i;(e=e.sigBytes>n?t.finalize(e):e).clamp();for(var t=this._oKey=e.clone(),e=this._iKey=e.clone(),o=t.words,s=e.words,a=0;a<i;a++)o[a]^=1549556828,s[a]^=909522486;t.sigBytes=e.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,t=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(t))}}),m=(p=(f=n).lib).Base,j=p.WordArray,w=(p=f.algo).SHA1,Y=p.HMAC,X=p.PBKDF2=m.extend({cfg:m.extend({keySize:4,hasher:w,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=this.cfg,n=Y.create(i.hasher,t),o=j.create(),s=j.create([1]),a=o.words,r=s.words,l=i.keySize,c=i.iterations;a.length<l;){var h=n.update(e).finalize(s);n.reset();for(var d=h.words,u=d.length,p=h,f=1;f<c;f++){p=n.finalize(p),n.reset();for(var g=p.words,m=0;m<u;m++)d[m]^=g[m]}o.concat(h),r[0]++}return o.sigBytes=4*l,o}}),f.PBKDF2=function(t,e,i){return X.create(i).compute(t,e)},w=(m=(p=n).lib).Base,K=m.WordArray,m=(f=p.algo).MD5,Z=f.EvpKDF=w.extend({cfg:w.extend({keySize:4,hasher:m,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i,n=this.cfg,o=n.hasher.create(),s=K.create(),a=s.words,r=n.keySize,l=n.iterations;a.length<r;){i&&o.update(i),i=o.update(t).finalize(e),o.reset();for(var c=1;c<l;c++)i=o.finalize(i),o.reset();s.concat(i)}return s.sigBytes=4*r,s}}),p.EvpKDF=function(t,e,i){return Z.create(i).compute(t,e)},q=(f=n).lib.WordArray,w=f.algo,J=w.SHA256,m=w.SHA224=J.extend({_doReset:function(){this._hash=new q.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=J._doFinalize.call(this);return t.sigBytes-=4,t}}),f.SHA224=J._createHelper(m),f.HmacSHA224=J._createHmacHelper(m),p=n.lib,Q=p.Base,tt=p.WordArray,(w=n.x64={}).Word=Q.extend({init:function(t,e){this.high=t,this.low=e}}),w.WordArray=Q.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,i=[],n=0;n<e;n++){var o=t[n];i.push(o.high),i.push(o.low)}return tt.create(i,this.sigBytes)},clone:function(){for(var t=Q.clone.call(this),e=t.words=this.words.slice(0),i=e.length,n=0;n<i;n++)e[n]=e[n].clone();return t}}),Math),f=n,Mt=(m=f.lib).WordArray,Lt=m.Hasher,Rt=f.x64.Word,m=f.algo,Nt=[],Bt=[],Ut=[],_=1,v=0,zt=0;zt<24;zt++){Nt[_+5*v]=(zt+1)*(zt+2)/2%64;var Ft=(2*_+3*v)%5,_=v%5,v=Ft}for(_=0;_<5;_++)for(v=0;v<5;v++)Bt[_+5*v]=v+(2*_+3*v)%5*5;for(var Ht=1,Wt=0;Wt<24;Wt++){for(var Vt,Gt=0,jt=0,Yt=0;Yt<7;Yt++)1&Ht&&((Vt=(1<<Yt)-1)<32?jt^=1<<Vt:Gt^=1<<Vt-32),128&Ht?Ht=Ht<<1^113:Ht<<=1;Ut[Wt]=Rt.create(Gt,jt)}for(var D=[],Xt=0;Xt<25;Xt++)D[Xt]=Rt.create();m=m.SHA3=Lt.extend({cfg:Lt.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new Rt.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var i=this._state,n=this.blockSize/2,o=0;o<n;o++){var s=t[e+2*o],a=t[e+2*o+1],s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);(S=i[o]).high^=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),S.low^=s}for(var r=0;r<24;r++){for(var l=0;l<5;l++){for(var c=0,h=0,d=0;d<5;d++)c^=(S=i[l+5*d]).high,h^=S.low;var u=D[l];u.high=c,u.low=h}for(l=0;l<5;l++)for(var p=D[(l+4)%5],f=D[(l+1)%5],g=f.high,f=f.low,c=p.high^(g<<1|f>>>31),h=p.low^(f<<1|g>>>31),d=0;d<5;d++)(S=i[l+5*d]).high^=c,S.low^=h;for(var m=1;m<25;m++){var _=(S=i[m]).high,v=S.low,y=Nt[m],_=(h=y<32?(c=_<<y|v>>>32-y,v<<y|_>>>32-y):(c=v<<y-32|_>>>64-y,_<<y-32|v>>>64-y),D[Bt[m]]);_.high=c,_.low=h}var w=D[0],b=i[0];for(w.high=b.high,w.low=b.low,l=0;l<5;l++)for(d=0;d<5;d++){var S=i[m=l+5*d],T=D[m],E=D[(l+1)%5+5*d],C=D[(l+2)%5+5*d];S.high=T.high^~E.high&C.high,S.low=T.low^~E.low&C.low}S=i[0],w=Ut[r];S.high^=w.high,S.low^=w.low}},_doFinalize:function(){var t=this._data,e=t.words,i=(this._nDataBytes,8*t.sigBytes),n=32*this.blockSize;e[i>>>5]|=1<<24-i%32,e[(Ot.ceil((1+i)/n)*n>>>5)-1]|=128,t.sigBytes=4*e.length,this._process();for(var o=this._state,i=this.cfg.outputLength/8,s=i/8,a=[],r=0;r<s;r++){var l=o[r],c=l.high,l=l.low,c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);a.push(16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)),a.push(c)}return new Mt.init(a,i)},clone:function(){for(var t=Lt.clone.call(this),e=t._state=this._state.slice(0),i=0;i<25;i++)e[i]=e[i].clone();return t}}),f.SHA3=Lt._createHelper(m),f.HmacSHA3=Lt._createHmacHelper(m);var p=n,Kt=p.lib.Hasher,y=(w=p.x64).Word,Zt=w.WordArray,w=p.algo;function b(){return y.create.apply(y,arguments)}for(var qt=[b(1116352408,3609767458),b(1899447441,602891725),b(3049323471,3964484399),b(3921009573,2173295548),b(961987163,4081628472),b(1508970993,3053834265),b(2453635748,2937671579),b(2870763221,3664609560),b(3624381080,2734883394),b(310598401,1164996542),b(607225278,1323610764),b(1426881987,3590304994),b(1925078388,4068182383),b(2162078206,991336113),b(2614888103,633803317),b(3248222580,3479774868),b(3835390401,2666613458),b(4022224774,944711139),b(264347078,2341262773),b(604807628,2007800933),b(770255983,1495990901),b(1249150122,1856431235),b(1555081692,3175218132),b(1996064986,2198950837),b(2554220882,3999719339),b(2821834349,766784016),b(2952996808,2566594879),b(3210313671,3203337956),b(3336571891,1034457026),b(3584528711,2466948901),b(113926993,3758326383),b(338241895,168717936),b(666307205,1188179964),b(773529912,1546045734),b(1294757372,1522805485),b(1396182291,2643833823),b(1695183700,2343527390),b(1986661051,1014477480),b(2177026350,1206759142),b(2456956037,344077627),b(2730485921,1290863460),b(2820302411,3158454273),b(3259730800,3505952657),b(3345764771,106217008),b(3516065817,3606008344),b(3600352804,1432725776),b(4094571909,1467031594),b(275423344,851169720),b(430227734,3100823752),b(506948616,1363258195),b(659060556,3750685593),b(883997877,3785050280),b(958139571,3318307427),b(1322822218,3812723403),b(1537002063,2003034995),b(1747873779,3602036899),b(1955562222,1575990012),b(2024104815,1125592928),b(2227730452,2716904306),b(2361852424,442776044),b(2428436474,593698344),b(2756734187,3733110249),b(3204031479,2999351573),b(3329325298,3815920427),b(3391569614,3928383900),b(3515267271,566280711),b(3940187606,3454069534),b(4118630271,4000239992),b(116418474,1914138554),b(174292421,2731055270),b(289380356,3203993006),b(460393269,320620315),b(685471733,587496836),b(852142971,1086792851),b(1017036298,365543100),b(1126000580,2618297676),b(1288033470,3409855158),b(1501505948,4234509866),b(1607167915,987167468),b(1816402316,1246189591)],et=[],Jt=0;Jt<80;Jt++)et[Jt]=b();w=w.SHA512=Kt.extend({_doReset:function(){this._hash=new Zt.init([new y.init(1779033703,4089235720),new y.init(3144134277,2227873595),new y.init(1013904242,4271175723),new y.init(2773480762,1595750129),new y.init(1359893119,2917565137),new y.init(2600822924,725511199),new y.init(528734635,4215389547),new y.init(1541459225,327033209)])},_doProcessBlock:function(R,N){for(var t=this._hash.words,e=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],r=t[6],t=t[7],B=e.high,l=e.low,U=i.high,c=i.low,z=n.high,h=n.low,F=o.high,d=o.low,H=s.high,u=s.low,W=a.high,p=a.low,V=r.high,f=r.low,G=t.high,g=t.low,m=B,_=l,v=U,y=c,w=z,b=h,j=F,S=d,T=H,E=u,Y=W,C=p,X=V,K=f,Z=G,q=g,x=0;x<80;x++){var $,A,I=et[x];x<16?(A=I.high=0|R[N+2*x],$=I.low=0|R[N+2*x+1]):(O=(L=et[x-15]).high,L=L.low,P=(D=et[x-2]).high,D=D.low,A=(A=(A=((O>>>1|L<<31)^(O>>>8|L<<24)^O>>>7)+(M=et[x-7]).high+(($=(L=(L>>>1|O<<31)^(L>>>8|O<<24)^(L>>>7|O<<25))+M.low)>>>0<L>>>0?1:0))+((P>>>19|D<<13)^(P<<3|D>>>29)^P>>>6)+(($+=O=(D>>>19|P<<13)^(D<<3|P>>>29)^(D>>>6|P<<26))>>>0<O>>>0?1:0))+(M=et[x-16]).high+(($+=L=M.low)>>>0<L>>>0?1:0),I.high=A,I.low=$);var k,D=T&Y^~T&X,P=E&C^~E&K,O=m&v^m&w^v&w,M=(_>>>28|m<<4)^(_<<30|m>>>2)^(_<<25|m>>>7),L=qt[x],I=L.high,J=L.low,Q=Z+((T>>>14|E<<18)^(T>>>18|E<<14)^(T<<23|E>>>9))+((k=q+((E>>>14|T<<18)^(E>>>18|T<<14)^(E<<23|T>>>9)))>>>0<q>>>0?1:0),tt=M+(_&y^_&b^y&b),Z=X,q=K,X=Y,K=C,Y=T,C=E,T=j+(Q=Q+D+((k+=P)>>>0<P>>>0?1:0)+I+((k+=J)>>>0<J>>>0?1:0)+A+((k+=$)>>>0<$>>>0?1:0))+((E=S+k|0)>>>0<S>>>0?1:0)|0,j=w,S=b,w=v,b=y,v=m,y=_,m=Q+(((m>>>28|_<<4)^(m<<30|_>>>2)^(m<<25|_>>>7))+O+(tt>>>0<M>>>0?1:0))+((_=k+tt|0)>>>0<k>>>0?1:0)|0}l=e.low=l+_,e.high=B+m+(l>>>0<_>>>0?1:0),c=i.low=c+y,i.high=U+v+(c>>>0<y>>>0?1:0),h=n.low=h+b,n.high=z+w+(h>>>0<b>>>0?1:0),d=o.low=d+S,o.high=F+j+(d>>>0<S>>>0?1:0),u=s.low=u+E,s.high=H+T+(u>>>0<E>>>0?1:0),p=a.low=p+C,a.high=W+Y+(p>>>0<C>>>0?1:0),f=r.low=f+K,r.high=V+X+(f>>>0<K>>>0?1:0),g=t.low=g+q,t.high=G+Z+(g>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(128+n>>>10<<5)]=Math.floor(i/4294967296),e[31+(128+n>>>10<<5)]=i,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=Kt.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),p.SHA512=Kt._createHelper(w),p.HmacSHA512=Kt._createHmacHelper(w),m=(f=n).x64,e=m.Word,it=m.WordArray,p=f.algo,nt=p.SHA512,w=p.SHA384=nt.extend({_doReset:function(){this._hash=new it.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=nt._doFinalize.call(this);return t.sigBytes-=16,t}}),f.SHA384=nt._createHelper(w),f.HmacSHA384=nt._createHmacHelper(w),n.lib.Cipher||(p=(m=n).lib,f=p.Base,d=p.WordArray,at=p.BufferedBlockAlgorithm,(w=m.enc).Utf8,rt=w.Base64,lt=m.algo.EvpKDF,ct=p.Cipher=at.extend({cfg:f.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){at.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(t,e,i){return Te(e).encrypt(n,t,e,i)},decrypt:function(t,e,i){return Te(e).decrypt(n,t,e,i)}}}}),p.StreamCipher=ct.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),w=m.mode={},i=p.BlockCipherMode=f.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),i=w.CBC=((w=i.extend()).Encryptor=w.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;Ee.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),w.Decryptor=w.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,o=t.slice(e,e+n);i.decryptBlock(t,e),Ee.call(this,t,e,n),this._prevBlock=o}}),w),w=(m.pad={}).Pkcs7={pad:function(t,e){for(var e=4*e,i=e-t.sigBytes%e,n=i<<24|i<<16|i<<8|i,o=[],s=0;s<i;s+=4)o.push(n);e=d.create(o,i);t.concat(e)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},p.BlockCipher=ct.extend({cfg:ct.cfg.extend({mode:i,padding:w}),reset:function(){ct.reset.call(this);var t,e=this.cfg,i=e.iv,e=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=e.createEncryptor:(t=e.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,i&&i.words):(this._mode=t.call(e,this,i&&i.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),ht=p.CipherParams=f.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),i=(m.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,t=t.salt;return(t?d.create([1398893684,1701076831]).concat(t).concat(e):e).toString(rt)},parse:function(t){var e,t=rt.parse(t),i=t.words;return 1398893684==i[0]&&1701076831==i[1]&&(e=d.create(i.slice(2,4)),i.splice(0,4),t.sigBytes-=16),ht.create({ciphertext:t,salt:e})}},u=p.SerializableCipher=f.extend({cfg:f.extend({format:i}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var o=t.createEncryptor(i,n),e=o.finalize(e),o=o.cfg;return ht.create({ciphertext:e,key:i,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(i,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),w=(m.kdf={}).OpenSSL={execute:function(t,e,i,n){n=n||d.random(8);t=lt.create({keySize:e+i}).compute(t,n),i=d.create(t.words.slice(e),4*i);return t.sigBytes=4*e,ht.create({key:t,iv:i,salt:n})}},dt=p.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:w}),encrypt:function(t,e,i,n){i=(n=this.cfg.extend(n)).kdf.execute(i,t.keySize,t.ivSize),n.iv=i.iv,t=u.encrypt.call(this,t,e,i.key,n);return t.mixIn(i),t},decrypt:function(t,e,i,n){n=this.cfg.extend(n),e=this._parse(e,n.format);i=n.kdf.execute(i,t.keySize,t.ivSize,e.salt);return n.iv=i.iv,u.decrypt.call(this,t,e,i.key,n)}})),n.mode.CFB=((f=n.lib.BlockCipherMode.extend()).Encryptor=f.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;_t.call(this,t,e,n,i),this._prevBlock=t.slice(e,e+n)}}),f.Decryptor=f.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,o=t.slice(e,e+n);_t.call(this,t,e,n,i),this._prevBlock=o}}),f),n.mode.ECB=((i=n.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),i.Decryptor=i.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),i),n.pad.AnsiX923={pad:function(t,e){var i=t.sigBytes,e=4*e,e=e-i%e,i=i+e-1;t.clamp(),t.words[i>>>2]|=e<<24-i%4*8,t.sigBytes+=e},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Iso10126={pad:function(t,e){e*=4,e-=t.sigBytes%e;t.concat(n.lib.WordArray.random(e-1)).concat(n.lib.WordArray.create([e<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.pad.Iso97971={pad:function(t,e){t.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(t,e)},unpad:function(t){n.pad.ZeroPadding.unpad(t),t.sigBytes--}},n.mode.OFB=(p=(m=n.lib.BlockCipherMode.extend()).Encryptor=m.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,o=this._iv,s=this._keystream;o&&(s=this._keystream=o.slice(0),this._iv=void 0),i.encryptBlock(s,0);for(var a=0;a<n;a++)t[e+a]^=s[a]}}),m.Decryptor=p,m),n.pad.NoPadding={pad:function(){},unpad:function(){}},ot=n.lib.CipherParams,st=n.enc.Hex,n.format.Hex={stringify:function(t){return t.ciphertext.toString(st)},parse:function(t){t=st.parse(t);return ot.create({ciphertext:t})}};for(var w=n,f=w.lib.BlockCipher,p=w.algo,S=[],Qt=[],te=[],ee=[],ie=[],ne=[],oe=[],se=[],ae=[],re=[],T=[],E=0;E<256;E++)T[E]=E<128?E<<1:E<<1^283;for(var C=0,P=0,E=0;E<256;E++){var O=P^P<<1^P<<2^P<<3^P<<4,le=T[Qt[S[C]=O=O>>>8^255&O^99]=C],ce=T[le],he=T[ce],M=257*T[O]^16843008*O;te[C]=M<<24|M>>>8,ee[C]=M<<16|M>>>16,ie[C]=M<<8|M>>>24,ne[C]=M,oe[O]=(M=16843009*he^65537*ce^257*le^16843008*C)<<24|M>>>8,se[O]=M<<16|M>>>16,ae[O]=M<<8|M>>>24,re[O]=M,C?(C=le^T[T[T[he^le]]],P^=T[T[P]]):C=P=1}var de=[0,1,2,4,8,16,32,64,128,27,54],p=p.AES=f.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,i=t.sigBytes/4,n=4*(1+(this._nRounds=6+i)),o=this._keySchedule=[],s=0;s<n;s++)s<i?o[s]=e[s]:(l=o[s-1],s%i?6<i&&s%i==4&&(l=S[l>>>24]<<24|S[l>>>16&255]<<16|S[l>>>8&255]<<8|S[255&l]):(l=S[(l=l<<8|l>>>24)>>>24]<<24|S[l>>>16&255]<<16|S[l>>>8&255]<<8|S[255&l],l^=de[s/i|0]<<24),o[s]=o[s-i]^l);for(var a=this._invKeySchedule=[],r=0;r<n;r++){var s=n-r,l=r%4?o[s]:o[s-4];a[r]=r<4||s<=4?l:oe[S[l>>>24]]^se[S[l>>>16&255]]^ae[S[l>>>8&255]]^re[S[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,te,ee,ie,ne,S)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this._doCryptBlock(t,e,this._invKeySchedule,oe,se,ae,re,Qt),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},_doCryptBlock:function(t,e,i,n,o,s,a,r){for(var l=this._nRounds,c=t[e]^i[0],h=t[e+1]^i[1],d=t[e+2]^i[2],u=t[e+3]^i[3],p=4,f=1;f<l;f++)var g=n[c>>>24]^o[h>>>16&255]^s[d>>>8&255]^a[255&u]^i[p++],m=n[h>>>24]^o[d>>>16&255]^s[u>>>8&255]^a[255&c]^i[p++],_=n[d>>>24]^o[u>>>16&255]^s[c>>>8&255]^a[255&h]^i[p++],v=n[u>>>24]^o[c>>>16&255]^s[h>>>8&255]^a[255&d]^i[p++],c=g,h=m,d=_,u=v;g=(r[c>>>24]<<24|r[h>>>16&255]<<16|r[d>>>8&255]<<8|r[255&u])^i[p++],m=(r[h>>>24]<<24|r[d>>>16&255]<<16|r[u>>>8&255]<<8|r[255&c])^i[p++],_=(r[d>>>24]<<24|r[u>>>16&255]<<16|r[c>>>8&255]<<8|r[255&h])^i[p++],v=(r[u>>>24]<<24|r[c>>>16&255]<<16|r[h>>>8&255]<<8|r[255&d])^i[p++],t[e]=g,t[e+1]=m,t[e+2]=_,t[e+3]=v},keySize:8}),m=(w.AES=f._createHelper(p),n),ue=(w=m.lib).WordArray,w=w.BlockCipher,f=m.algo,pe=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],fe=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],ge=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],me=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],_e=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],ve=f.DES=w.extend({_doReset:function(){for(var t=this._key.words,e=[],i=0;i<56;i++){var n=pe[i]-1;e[i]=t[n>>>5]>>>31-n%32&1}for(var o=this._subKeys=[],s=0;s<16;s++){for(var a=o[s]=[],r=ge[s],i=0;i<24;i++)a[i/6|0]|=e[(fe[i]-1+r)%28]<<31-i%6,a[4+(i/6|0)]|=e[28+(fe[i+24]-1+r)%28]<<31-i%6;for(a[0]=a[0]<<1|a[0]>>>31,i=1;i<7;i++)a[i]=a[i]>>>4*(i-1)+3;a[7]=a[7]<<5|a[7]>>>27}var l=this._invSubKeys=[];for(i=0;i<16;i++)l[i]=o[15-i]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,i){this._lBlock=t[e],this._rBlock=t[e+1],ye.call(this,4,252645135),ye.call(this,16,65535),we.call(this,2,858993459),we.call(this,8,16711935),ye.call(this,1,1431655765);for(var n=0;n<16;n++){for(var o=i[n],s=this._lBlock,a=this._rBlock,r=0,l=0;l<8;l++)r|=me[l][((a^o[l])&_e[l])>>>0];this._lBlock=a,this._rBlock=s^r}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,ye.call(this,1,1431655765),we.call(this,8,16711935),we.call(this,2,858993459),ye.call(this,16,65535),ye.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function ye(t,e){e=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=e,this._lBlock^=e<<t}function we(t,e){e=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=e,this._rBlock^=e<<t}m.DES=w._createHelper(ve),f=f.TripleDES=w.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),i=t.length<4?t.slice(0,2):t.slice(2,4),t=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=ve.createEncryptor(ue.create(e)),this._des2=ve.createEncryptor(ue.create(i)),this._des3=ve.createEncryptor(ue.create(t))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),m.TripleDES=w._createHelper(f);var p=n,m=p.lib.StreamCipher,w=p.algo,be=w.RC4=m.extend({_doReset:function(){for(var t=this._key,e=t.words,i=t.sigBytes,n=this._S=[],o=0;o<256;o++)n[o]=o;for(var o=0,s=0;o<256;o++){var a=o%i,a=e[a>>>2]>>>24-a%4*8&255,s=(s+n[o]+a)%256,a=n[o];n[o]=n[s],n[s]=a}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=Se.call(this)},keySize:8,ivSize:0});function Se(){for(var t=this._S,e=this._i,i=this._j,n=0,o=0;o<4;o++){var i=(i+t[e=(e+1)%256])%256,s=t[e];t[e]=t[i],t[i]=s,n|=t[(t[e]+t[i])%256]<<24-8*o}return this._i=e,this._j=i,n}return p.RC4=m._createHelper(be),w=w.RC4Drop=be.extend({cfg:be.cfg.extend({drop:192}),_doReset:function(){be._doReset.call(this);for(var t=this.cfg.drop;0<t;t--)Se.call(this)}}),p.RC4Drop=m._createHelper(w),n.mode.CTRGladman=(p=(f=n.lib.BlockCipherMode.extend()).Encryptor=f.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,o=this._iv,s=this._counter,a=(o&&(s=this._counter=o.slice(0),this._iv=void 0),0===((o=s)[0]=vt(o[0]))&&(o[1]=vt(o[1])),s.slice(0));i.encryptBlock(a,0);for(var r=0;r<n;r++)t[e+r]^=a[r]}}),f.Decryptor=p,f),w=(m=n).lib.StreamCipher,p=m.algo,o=[],a=[],r=[],f=p.Rabbit=w.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,i=0;i<4;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);for(var n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]],i=this._b=0;i<4;i++)yt.call(this);for(i=0;i<8;i++)o[i]^=n[i+4&7];if(e){var e=e.words,s=e[0],e=e[1],s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),a=s>>>16|4294901760&e,r=e<<16|65535&s;for(o[0]^=s,o[1]^=a,o[2]^=e,o[3]^=r,o[4]^=s,o[5]^=a,o[6]^=e,o[7]^=r,i=0;i<4;i++)yt.call(this)}},_doProcessBlock:function(t,e){var i=this._X;yt.call(this),o[0]=i[0]^i[5]>>>16^i[3]<<16,o[1]=i[2]^i[7]>>>16^i[5]<<16,o[2]=i[4]^i[1]>>>16^i[7]<<16,o[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8),t[e+n]^=o[n]},blockSize:4,ivSize:2}),m.Rabbit=w._createHelper(f),n.mode.CTR=(m=(p=n.lib.BlockCipherMode.extend()).Encryptor=p.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,o=this._iv,s=this._counter,a=(o&&(s=this._counter=o.slice(0),this._iv=void 0),s.slice(0));i.encryptBlock(a,0),s[n-1]=s[n-1]+1|0;for(var r=0;r<n;r++)t[e+r]^=a[r]}}),p.Decryptor=m,p),f=(w=n).lib.StreamCipher,m=w.algo,s=[],l=[],c=[],p=m.RabbitLegacy=f.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]],o=this._b=0;o<4;o++)wt.call(this);for(o=0;o<8;o++)n[o]^=i[o+4&7];if(e){var t=e.words,e=t[0],t=t[1],e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),s=e>>>16|4294901760&t,a=t<<16|65535&e;for(n[0]^=e,n[1]^=s,n[2]^=t,n[3]^=a,n[4]^=e,n[5]^=s,n[6]^=t,n[7]^=a,o=0;o<4;o++)wt.call(this)}},_doProcessBlock:function(t,e){var i=this._X;wt.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var n=0;n<4;n++)s[n]=16711935&(s[n]<<8|s[n]>>>24)|4278255360&(s[n]<<24|s[n]>>>8),t[e+n]^=s[n]},blockSize:4,ivSize:2}),w.RabbitLegacy=f._createHelper(p),n.pad.ZeroPadding={pad:function(t,e){e*=4;t.clamp(),t.sigBytes+=e-(t.sigBytes%e||e)},unpad:function(t){for(var e=t.words,i=t.sigBytes-1,i=t.sigBytes-1;0<=i;i--)if(e[i>>>2]>>>24-i%4*8&255){t.sigBytes=i+1;break}}},n;function Te(t){return"string"==typeof t?dt:u}function Ee(t,e,i){var n,o=this._iv;o?(n=o,this._iv=void 0):n=this._prevBlock;for(var s=0;s<i;s++)t[e+s]^=n[s]}function Ce(t){return t<<8&4278255360|t>>>8&16711935}}),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("toast/libs/perfect-scrollbar",e):(t=t||self).PerfectScrollbar=e()}(this,function(){"use strict";function p(t){return getComputedStyle(t)}function c(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n}}function h(t){var e=document.createElement("div");return e.className=t,e}var i="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function r(t,e){if(i)return i.call(t,e);throw new Error("No element matching method supported")}function a(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function l(t,e){return Array.prototype.filter.call(t.children,function(t){return r(t,e)})}var v={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},n={x:null,y:null};function y(t,e){var t=t.element.classList,i=v.state.scrolling(e);t.contains(i)?clearTimeout(n[e]):t.add(i)}function w(t,e){n[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(v.state.scrolling(e))},t.settings.scrollingThreshold)}function o(t){this.element=t,this.handlers={}}function d(){this.eventElements=[]}var t={isEmpty:{configurable:!0}};o.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},o.prototype.unbind=function(e,i){var n=this;this.handlers[e]=this.handlers[e].filter(function(t){return!(!i||t===i)||(n.element.removeEventListener(e,t,!1),!1)})},o.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},t.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(o.prototype,t);function u(t){var e;return"function"==typeof window.CustomEvent?new CustomEvent(t):((e=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),e)}function e(t,e,i,n,o){var s;if(void 0===n&&(n=!0),void 0===o&&(o=!1),"top"===e)s=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");s=["contentWidth","containerWidth","scrollLeft","x","left","right"]}var e=t,t=i,i=n,n=o,a=(o=s)[0],r=o[1],l=o[2],c=o[3],h=o[4],o=o[5],d=(void 0===i&&(i=!0),void 0===n&&(n=!1),e.element);e.reach[c]=null,d[l]<1&&(e.reach[c]="start"),d[l]>e[a]-e[r]-1&&(e.reach[c]="end"),t&&(d.dispatchEvent(u("ps-scroll-"+c)),t<0?d.dispatchEvent(u("ps-scroll-"+h)):0<t&&d.dispatchEvent(u("ps-scroll-"+o)),i)&&(y(l=e,a=c),w(l,a));e.reach[c]&&(t||n)&&d.dispatchEvent(u("ps-"+c+"-reach-"+e.reach[c]))}function f(t){return parseInt(t,10)||0}d.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new o(e),this.eventElements.push(t)),t},d.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},d.prototype.unbind=function(t,e,i){t=this.eventElement(t);t.unbind(e,i),t.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(t),1)},d.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]},d.prototype.once=function(t,e,i){var n=this.eventElement(t),o=function(t){n.unbind(e,o),i(t)};n.bind(e,o)};var g={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&0<window.navigator.maxTouchPoints||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function b(t){var e=t.element,i=Math.floor(e.scrollTop),n=e.getBoundingClientRect(),o=t._scale||1,n=(t.containerWidth=Math.round(n.width/o),t.containerHeight=Math.round(n.height/o),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(l(e,v.element.rail("x")).forEach(a),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(l(e,v.element.rail("y")).forEach(a),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=m(t,f(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=f((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=m(t,f(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=f(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),e),o=t,i={width:o.railXWidth},s=Math.floor(n.scrollTop);o.isRtl?i.left=o.negativeScrollAdjustment+n.scrollLeft+o.containerWidth-o.contentWidth:i.left=n.scrollLeft,o.isScrollbarXUsingBottom?i.bottom=o.scrollbarXBottom-s:i.top=o.scrollbarXTop+s,c(o.scrollbarXRail,i),i={top:s,height:o.railYHeight},o.isScrollbarYUsingRight?o.isRtl?i.right=o.contentWidth-(o.negativeScrollAdjustment+n.scrollLeft)-o.scrollbarYRight-o.scrollbarYOuterWidth-9:i.right=o.scrollbarYRight-n.scrollLeft:o.isRtl?i.left=o.negativeScrollAdjustment+n.scrollLeft+2*o.containerWidth-o.contentWidth-o.scrollbarYLeft-o.scrollbarYOuterWidth:i.left=o.scrollbarYLeft+n.scrollLeft,c(o.scrollbarYRail,i),c(o.scrollbarX,{left:o.scrollbarXLeft,width:o.scrollbarXWidth-o.railBorderXWidth}),c(o.scrollbarY,{top:o.scrollbarYTop,height:o.scrollbarYHeight-o.railBorderYWidth}),t.scrollbarXActive?e.classList.add(v.state.active("x")):(e.classList.remove(v.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?e.classList.add(v.state.active("y")):(e.classList.remove(v.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function m(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),e=t.settings.maxScrollbarLength?Math.min(e,t.settings.maxScrollbarLength):e}function s(i,t){var n=t[0],o=t[1],s=t[2],a=t[3],e=t[4],r=t[5],l=t[6],c=t[7],h=t[8],d=i.element,u=null,p=null,f=null;function g(t){var e=i._scale||1;t.touches&&t.touches[0]&&(t[s]=t.touches[0].pageY),d[l]=u+f*(t[s]-p)/e,y(i,c),b(i),t.stopPropagation(),t.preventDefault()}function m(){w(i,c),i[h].classList.remove(v.state.clicking),i.event.unbind(i.ownerDocument,"mousemove",g)}function _(t,e){u=d[l],e&&t.touches&&(t[s]=t.touches[0].pageY),p=t[s],f=(i[o]-i[n])/(i[a]-i[r]),e?i.event.bind(i.ownerDocument,"touchmove",g):(i.event.bind(i.ownerDocument,"mousemove",g),i.event.once(i.ownerDocument,"mouseup",m),t.preventDefault()),i[h].classList.add(v.state.clicking),t.stopPropagation()}i.event.bind(i[e],"mousedown",function(t){_(t)}),i.event.bind(i[e],"touchstart",function(t){_(t,!0)})}function _(t,e){var i,n=this;if(void 0===e&&(e={}),!(t="string"==typeof t?document.querySelector(t):t)||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(i in(this.element=t).classList.add(v.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1,theme:"",resize:!0},e)this.settings[i]=e[i];function o(){t.classList.add(v.state.focus),n.update()}function s(){return t.classList.remove(v.state.focus)}this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,this.isRtl="rtl"===p(t).direction,!0===this.isRtl&&t.classList.add(v.rtl),this.isNegativeScroll=(a=t.scrollLeft,t.scrollLeft=-1,r=t.scrollLeft<0,t.scrollLeft=a,r),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new d,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=h(v.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=h(v.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",o),this.event.bind(this.scrollbarX,"blur",s),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var a=p(this.scrollbarXRail),r=(this.scrollbarXBottom=parseInt(a.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=f(a.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=f(a.borderLeftWidth)+f(a.borderRightWidth),c(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=f(a.marginLeft)+f(a.marginRight),c(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=h(v.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=h(v.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",o),this.event.bind(this.scrollbarY,"blur",s),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,p(this.scrollbarYRail)),l=(this.scrollbarYRight=parseInt(r.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=f(r.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?f((a=p(a=this.scrollbarY)).width)+f(a.paddingLeft)+f(a.paddingRight)+f(a.borderLeftWidth)+f(a.borderRightWidth):null,this.railBorderYWidth=f(r.borderTopWidth)+f(r.borderBottomWidth),c(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=f(r.marginTop)+f(r.marginBottom),c(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return S[t](n)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"click",function(t){n._clickTimeout&&clearTimeout(n._clickTimeout),n.update(),n._clickTimeout=setTimeout(function(){n.update(),n._clickTimeout=null},250)}),this.event.bind(this.element,"scroll",function(t){return n.onScroll(t)}),this.settings.resize&&this.event.bind(window,"resize",function(t){n.updateItr&&clearTimeout(n.updateItr),n.updateItr=setTimeout(function(){n.update()},50)}),this.settings.theme);switch(l){case"dark":case"black":this.element.classList.add("ps-"+l)}this.settings.size&&this.element.classList.add("ps-"+this.settings.size),b(this)}var S={"click-rail":function(i){i.element,i.event.bind(i.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),i.event.bind(i.scrollbarYRail,"mousedown",function(t){var e=t.pageY-window.pageYOffset-i.scrollbarYRail.getBoundingClientRect().top>i.scrollbarYTop?1:-1;i.element.scrollTop+=e*i.containerHeight,b(i),t.stopPropagation()}),i.event.bind(i.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),i.event.bind(i.scrollbarXRail,"mousedown",function(t){var e=t.pageX-window.pageXOffset-i.scrollbarXRail.getBoundingClientRect().left>i.scrollbarXLeft?1:-1;i.element.scrollLeft+=e*i.containerWidth,b(i),t.stopPropagation()})},"drag-thumb":function(t){s(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),s(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(s){var a=s.element;s.event.bind(s.ownerDocument,"keydown",function(t){if(!(t.isDefaultPrevented&&t.isDefaultPrevented()||t.defaultPrevented)&&(r(a,":hover")||r(s.scrollbarX,":focus")||r(s.scrollbarY,":focus"))){var e,i=document.activeElement||s.ownerDocument.activeElement;if(i){if("IFRAME"===i.tagName)i=i.contentDocument.activeElement;else for(;i.shadowRoot;)i=i.shadowRoot.activeElement;if(r(e=i,"input,[contenteditable]")||r(e,"select,[contenteditable]")||r(e,"textarea,[contenteditable]")||r(e,"button,[contenteditable]"))return}var n=0,o=0;switch(t.which){case 37:n=t.metaKey?-s.contentWidth:t.altKey?-s.containerWidth:-30;break;case 38:o=t.metaKey?s.contentHeight:t.altKey?s.containerHeight:30;break;case 39:n=t.metaKey?s.contentWidth:t.altKey?s.containerWidth:30;break;case 40:o=t.metaKey?-s.contentHeight:t.altKey?-s.containerHeight:-30;break;case 32:o=t.shiftKey?s.containerHeight:-s.containerHeight;break;case 33:o=s.containerHeight;break;case 34:o=-s.containerHeight;break;case 36:o=s.contentHeight;break;case 35:o=-s.contentHeight;break;default:return}s.settings.suppressScrollX&&0!==n||s.settings.suppressScrollY&&0!==o||(a.scrollTop-=o,a.scrollLeft+=n,b(s),!function(t,e){var i=Math.floor(a.scrollTop);if(0===t){if(!s.scrollbarYActive)return;if(0===i&&0<e||i>=s.contentHeight-s.containerHeight&&e<0)return!s.settings.wheelPropagation}if(i=a.scrollLeft,0===e){if(!s.scrollbarXActive)return;if(0===i&&t<0||i>=s.contentWidth-s.containerWidth&&0<t)return!s.settings.wheelPropagation}return 1}(n,o))||t.preventDefault()}})},wheel:function(l){var c=l.element;function t(t){a=(s=t).deltaX,r=-1*s.deltaY,void 0!==a&&void 0!==r||(a=-1*s.wheelDeltaX/6,r=s.wheelDeltaY/6),s.deltaMode&&1===s.deltaMode&&(a*=10,r*=10),a!=a&&r!=r&&(a=0,r=s.wheelDelta);var e,i,n,o,s=s.shiftKey?[-r,-a]:[a,r],a=s[0],r=s[1];!function(t,e,i){if(!g.isWebKit&&c.querySelector("select:focus"))return 1;if(c.contains(t))for(var n=t;n&&n!==c;){if(n.classList.contains(v.element.consuming))return 1;var o=p(n);if(i&&o.overflowY.match(/(scroll|auto)/)){var s=n.scrollHeight-n.clientHeight;if(0<s&&(0<n.scrollTop&&i<0||n.scrollTop<s&&0<i))return 1}if(e&&o.overflowX.match(/(scroll|auto)/)){s=n.scrollWidth-n.clientWidth;if(0<s&&(0<n.scrollLeft&&e<0||n.scrollLeft<s&&0<e))return 1}n=n.parentNode}}(t.target,a,r)&&(s=!1,l.settings.useBothWheelAxes?l.scrollbarYActive&&!l.scrollbarXActive?(r?c.scrollTop-=r*l.settings.wheelSpeed:c.scrollTop+=a*l.settings.wheelSpeed,s=!0):l.scrollbarXActive&&!l.scrollbarYActive&&(a?c.scrollLeft+=a*l.settings.wheelSpeed:c.scrollLeft-=r*l.settings.wheelSpeed,s=!0):(c.scrollTop-=r*l.settings.wheelSpeed,c.scrollLeft+=a*l.settings.wheelSpeed),b(l),s=s||(a=a,r=r,e=Math.floor(c.scrollTop),i=0===c.scrollTop,e=e+c.offsetHeight===c.scrollHeight,n=0===c.scrollLeft,o=c.scrollLeft+c.offsetWidth===c.scrollWidth,!(r=Math.abs(r)>Math.abs(a)?i||e:n||o))||!l.settings.wheelPropagation)&&!t.ctrlKey&&(t.stopPropagation(),t.preventDefault())}void 0!==window.onwheel?l.event.bind(c,"wheel",t):void 0!==window.onmousewheel&&l.event.bind(c,"mousewheel",t)},touch:function(a){var r,s,l,c,e;function h(t,e){r.scrollTop-=e,r.scrollLeft-=t,b(a)}function d(t){return t.targetTouches?t.targetTouches[0]:t}function u(t){return(!t.pointerType||"pen"!==t.pointerType||0!==t.buttons)&&(t.targetTouches&&1===t.targetTouches.length||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function t(t){u(t)&&(t=d(t),s.pageX=t.pageX,s.pageY=t.pageY,l=(new Date).getTime(),null!==e)&&clearInterval(e)}function i(t){var e,i,n,o;u(t)&&(e=(n={pageX:(n=d(t)).pageX,pageY:n.pageY}).pageX-s.pageX,i=n.pageY-s.pageY,!function(t,e,i){if(r.contains(t))for(var n=t;n&&n!==r;){if(n.classList.contains(v.element.consuming))return 1;var o=p(n);if(i&&o.overflowY.match(/(scroll|auto)/)){var s=n.scrollHeight-n.clientHeight;if(0<s&&(0<n.scrollTop&&i<0||n.scrollTop<s&&0<i))return 1}if(e&&o.overflowX.match(/(scroll|auto)/)){s=n.scrollWidth-n.clientWidth;if(0<s&&(0<n.scrollLeft&&e<0||n.scrollLeft<s&&0<e))return 1}n=n.parentNode}}(t.target,e,i))&&(h(e,i),s=n,0<(o=(n=(new Date).getTime())-l)&&(c.x=e/o,c.y=i/o,l=n),function(t,e){var i=Math.floor(r.scrollTop),n=r.scrollLeft,o=Math.abs(t),s=Math.abs(e);if(o<s){if(e<0&&i===a.contentHeight-a.containerHeight||0<e&&0===i)return 0===window.scrollY&&0<e&&g.isChrome}else if(s<o&&(t<0&&n===a.contentWidth-a.containerWidth||0<t&&0===n));return 1}(e,i))&&t.preventDefault()}function n(){a.settings.swipeEasing&&(clearInterval(e),e=setInterval(function(){a.isInitialized||!c.x&&!c.y||Math.abs(c.x)<.01&&Math.abs(c.y)<.01?clearInterval(e):(h(30*c.x,30*c.y),c.x*=.8,c.y*=.8)},10))}(g.supportsTouch||g.supportsIePointer)&&(r=a.element,s={},l=0,c={},e=null,g.supportsTouch?(a.event.bind(r,"touchstart",t),a.event.bind(r,"touchmove",i),a.event.bind(r,"touchend",n)):g.supportsIePointer&&(window.PointerEvent?(a.event.bind(r,"pointerdown",t),a.event.bind(r,"pointermove",i),a.event.bind(r,"pointerup",n)):window.MSPointerEvent&&(a.event.bind(r,"MSPointerDown",t),a.event.bind(r,"MSPointerMove",i),a.event.bind(r,"MSPointerUp",n))))}};return _.prototype.scale=function(t){if(!arguments.length)return this._scale;this._scale=t,this.update()},_.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,c(this.scrollbarXRail,{display:"block"}),c(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=f(p(this.scrollbarXRail).marginLeft)+f(p(this.scrollbarXRail).marginRight),this.railYMarginHeight=f(p(this.scrollbarYRail).marginTop)+f(p(this.scrollbarYRail).marginBottom),c(this.scrollbarXRail,{display:"none"}),c(this.scrollbarYRail,{display:"none"}),b(this),e(this,"top",0,!1,!0),e(this,"left",0,!1,!0),c(this.scrollbarXRail,{display:""}),c(this.scrollbarYRail,{display:""}))},_.prototype.onScroll=function(t){this.isAlive&&(b(this),e(this,"top",this.element.scrollTop-this.lastScrollTop),e(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},_.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),a(this.scrollbarX),a(this.scrollbarY),a(this.scrollbarXRail),a(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},_.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")},_}),!function(){"use strict";!function(Nt,Bt){"use strict";var n={beforeShow:t,move:t,change:t,show:t,hide:t,color:false,flat:false,showInput:true,allowEmpty:false,showButtons:false,clickoutFiresChange:false,showInitial:true,showPalette:true,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:"hex",className:"",containerClassName:"",replacerClassName:"",showAlpha:true,theme:"sp-light",palette:[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]],selectionPalette:[],disabled:false,offset:null},Ut=[],zt=!!/msie/i.exec(window.navigator.userAgent),Ft=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div");var i=e.style;i.cssText="background-color:rgba(0,0,0,.5)";return t(i.backgroundColor,"rgba")||t(i.backgroundColor,"hsla")}(),Ht=function(){var t=Nt("<input type='color' value='!' />")[0];return t.type==="color"&&t.value!=="!"}(),Wt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<span class='caret'></span>","</div>"].join(""),Vt=function(){var t="";if(zt)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function Gt(t,e,i,n){var o=[];for(var s=0;s<t.length;s++){var a=t[s];if(a){var r=tinycolor(a);var l=r.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(e,a)?" sp-thumb-active":"";var c=r.toString(n.preferredFormat||"rgb");var h=Ft?"background-color:"+r.toRgbString():"filter:"+r.toFilter();o.push('<span title="'+c+'" data-color="'+r.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{var d="sp-clear-display";o.push(Nt("<div />").append(Nt('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",n.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+o.join("")+"</div>"}function jt(){for(var t=0;t<Ut.length;t++)if(Ut[t])Ut[t].hide()}function Yt(t,e){var i=Nt.extend({},n,t);i.callbacks={move:o(i.move,e),change:o(i.change,e),show:o(i.show,e),hide:o(i.hide,e),beforeShow:o(i.beforeShow,e)};return i}function s(t,R){var c=Yt(R,t),n=c.flat,N=c.showSelectionPalette,i=c.localStorageKey===false?"spectrum-"+t.id:c.localStorageKey,B=c.theme,o=c.callbacks,U=qt(L,10),e=false,l=0,h=0,a=0,r=0,z=0,F=0,H=0,W=0,d=0,u=0,p=0,f=1,V=[],s=[],G={},g=c.selectionPalette.slice(0),j=c.maxSelectionSize,Y="sp-dragging",m=null;var X=t.ownerDocument,K=X.body,_=Nt(t),Z=false,v=Nt(Vt,X).addClass(B),q=v.find(".sp-picker-container"),J=v.find(".sp-color"),Q=v.find(".sp-dragger"),tt=v.find(".sp-hue"),et=v.find(".sp-slider"),y=v.find(".sp-alpha-inner"),it=v.find(".sp-alpha"),nt=v.find(".sp-alpha-handle"),w=v.find(".sp-input"),ot=v.find(".sp-palette"),st=v.find(".sp-initial"),at=v.find(".sp-cancel"),rt=v.find(".sp-clear"),lt=v.find(".sp-choose"),ct=v.find(".sp-palette-toggle"),ht=_.is("input"),dt=ht&&Ht&&_.attr("type")==="color",ut=ht&&!n,b=ut?Nt(Wt).addClass(B).addClass(c.className).addClass(c.replacerClassName):Nt([]),S=ut?b:_,T=b.find(".sp-preview-inner"),E=c.color||ht&&_.val(),C=false,pt=c.preferredFormat,x=pt,ft=!c.showButtons||c.clickoutFiresChange,$=!E,A=c.allowEmpty&&!dt;function gt(){if(c.showPaletteOnly)c.showPalette=true;ct.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText);if(c.palette){V=c.palette.slice(0);s=Nt.isArray(V[0])?V:[V];G={};for(var t=0;t<s.length;t++)for(var e=0;e<s[t].length;e++){var i=tinycolor(s[t][e]).toRgbString();G[i]=true}}v.toggleClass("sp-flat",n);v.toggleClass("sp-input-disabled",!c.showInput);v.toggleClass("sp-alpha-enabled",c.showAlpha);v.toggleClass("sp-clear-enabled",A);v.toggleClass("sp-buttons-disabled",!c.showButtons);v.toggleClass("sp-palette-buttons-disabled",!c.togglePaletteOnly);v.toggleClass("sp-palette-disabled",!c.showPalette);v.toggleClass("sp-palette-only",c.showPaletteOnly);v.toggleClass("sp-initial-disabled",!c.showInitial);v.addClass(c.className).addClass(c.containerClassName);L()}function mt(){if(zt)v.find("*:not(input)").attr("unselectable","on");gt();if(ut)_.after(b).hide();if(!A)rt.hide();if(n)_.after(v).hide();else{var t=c.appendTo==="parent"?_.parent():Nt(c.appendTo);if(t.length!==1)t=Nt("body");t.append(v)}_t();S.bind("click.spectrum touchstart.spectrum",function(t){if(!Z)Ct();t.stopPropagation();if(!Nt(t.target).is("input"))t.preventDefault()});if(_.is(":disabled")||c.disabled===true)Mt();v.click(Zt);w.change(Et);w.bind("paste",function(){setTimeout(Et,1)});w.keydown(function(t){if(t.keyCode==13)Et()});at.text(c.cancelText);at.bind("click.spectrum",function(t){t.stopPropagation();t.preventDefault();At();I()});rt.attr("title",c.clearText);rt.bind("click.spectrum",function(t){t.stopPropagation();t.preventDefault();$=true;P();if(n)M(true)});lt.text(c.chooseText);lt.bind("click.spectrum",function(t){t.stopPropagation();t.preventDefault();if(It()){M(true);I()}});ct.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText);ct.bind("click.spectrum",function(t){t.stopPropagation();t.preventDefault();c.showPaletteOnly=!c.showPaletteOnly;if(!c.showPaletteOnly&&!n)v.css("left","-="+(q.outerWidth(true)+5));gt()});Kt(it,function(t,e,i){f=t/F;$=false;if(i.shiftKey)f=Math.round(f*10)/10;P()},St,Tt);Kt(tt,function(t,e){d=parseFloat(e/r);$=false;if(!c.showAlpha)f=1;P()},St,Tt);Kt(J,function(t,e,i){if(!i.shiftKey)m=null;else if(!m){var n=u*l;var o=h-p*h;var s=Math.abs(t-n)>Math.abs(e-o);m=s?"x":"y"}var a=!m||m==="x";var r=!m||m==="y";if(a)u=parseFloat(t/l);if(r)p=parseFloat((h-e)/h);$=false;if(!c.showAlpha)f=1;P()},St,Tt);if(!!E){k(E);O();x=pt||tinycolor(E).format;vt(E)}else O();if(n)xt();function e(t){if(t.data&&t.data.ignore){k(Nt(t.target).closest(".sp-thumb-el").data("color"));P()}else{k(Nt(t.target).closest(".sp-thumb-el").data("color"));P();M(true);if(c.hideAfterPaletteSelect)I()}return false}var i=zt?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ot.delegate(".sp-thumb-el",i,e);st.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:true},e)}function _t(){if(i&&window.localStorage){try{var t=window.localStorage[i].split(",#");if(t.length>1){delete window.localStorage[i];Nt.each(t,function(t,e){vt(e)})}}catch(t){}try{g=window.localStorage[i].split(";")}catch(t){}}}function vt(t){if(N){var e=tinycolor(t).toRgbString();if(!G[e]&&Nt.inArray(e,g)===-1){g.push(e);while(g.length>j)g.shift()}if(i&&window.localStorage)try{window.localStorage[i]=g.join(";")}catch(t){}}}function yt(){var t=[];if(c.showPalette)for(var e=0;e<g.length;e++){var i=tinycolor(g[e]).toRgbString();if(!G[i])t.push(g[e])}return t.reverse().slice(0,c.maxSelectionSize)}function wt(){var i=D();var t=Nt.map(s,function(t,e){return Gt(t,i,"sp-palette-row sp-palette-row-"+e,c)});_t();if(g)t.push(Gt(yt(),i,"sp-palette-row sp-palette-row-selection",c));ot.html(t.join(""))}function bt(){if(c.showInitial){var t=C;var e=D();st.html(Gt([t,e],e,"sp-palette-row-initial",c))}}function St(){if(h<=0||l<=0||r<=0)L();v.addClass(Y);m=null;_.trigger("dragstart.spectrum",[D()])}function Tt(){v.removeClass(Y);_.trigger("dragstop.spectrum",[D()])}function Et(){var t=w.val();if((t===null||t==="")&&A){k(null);M(true)}else{var e=tinycolor(t);if(e.isValid()){k(e);M(true)}else w.addClass("sp-validation-error")}}function Ct(){if(e)I();else xt()}function xt(){var t=Nt.Event("beforeShow.spectrum");if(e){L();return}_.trigger(t,[D()]);if(o.beforeShow(D())===false||t.isDefaultPrevented())return;jt();e=true;Nt(X).bind("click.spectrum",$t);Nt(window).bind("resize.spectrum",U);b.addClass("sp-active");v.removeClass("sp-hidden");L();O();C=D();bt();o.show(C);_.trigger("show.spectrum",[C])}function $t(t){if(t.button==2)return;if(ft)M(true);else At();I()}function I(){if(!e||n)return;e=false;Nt(X).unbind("click.spectrum",$t);Nt(window).unbind("resize.spectrum",U);b.removeClass("sp-active");v.addClass("sp-hidden");o.hide(D());_.trigger("hide.spectrum",[D()])}function At(){k(C,true)}function k(t,e){if(tinycolor.equals(t,D())){O();return}var i,n;if(!t&&A)$=true;else{$=false;i=tinycolor(t);n=i.toHsv();d=n.h%360/360;u=n.s;p=n.v;f=n.a}O();if(i&&i.isValid()&&!e)x=pt||i.getFormat()}function D(t){t=t||{};if(A&&$)return null;return tinycolor.fromRatio({h:d,s:u,v:p,a:Math.round(f*100)/100},{format:t.format||x})}function It(){return!w.hasClass("sp-validation-error")}function P(){O();o.move(D());_.trigger("move.spectrum",[D()])}function O(){w.removeClass("sp-validation-error");kt();var t=tinycolor.fromRatio({h:d,s:1,v:1});J.css("background-color",t.toHexString());var e=x;if(f<1&&!(f===0&&e==="name"))if(e==="hex"||e==="hex3"||e==="hex6"||e==="name")e="rgb";var i=D({format:e}),n="";T.removeClass("sp-clear-display");T.css("background-color","transparent");if(!i&&A)T.addClass("sp-clear-display");else{var o=i.toHexString(),s=i.toRgbString();if(Ft||i.alpha===1)T.css("background-color",s);else{T.css("background-color","transparent");T.css("filter",i.toFilter())}if(c.showAlpha){var a=i.toRgb();a.a=0;var r=tinycolor(a).toRgbString();var l="linear-gradient(left, "+r+", "+o+")";if(zt)y.css("filter",tinycolor(r).toFilter({gradientType:1},o));else{y.css("background","-webkit-"+l);y.css("background","-moz-"+l);y.css("background","-ms-"+l);y.css("background","linear-gradient(to right, "+r+", "+o+")")}}n=i.toString(e)}if(c.showInput)w.val(n);if(c.showPalette)wt();bt()}function kt(){var t=u;var e=p;if(A&&$){nt.hide();et.hide();Q.hide()}else{nt.show();et.show();Q.show();var i=t*l;var n=h-e*h;i=Math.max(-a,Math.min(l-a,i-a));n=Math.max(-a,Math.min(h-a,n-a));Q.css({top:n+"px",left:i+"px"});var o=f*F;nt.css({left:o-H/2+"px"});var s=d*r;et.css({top:s-W+"px"})}}function M(t){var e=D(),i="",n=!tinycolor.equals(e,C);if(e){i=e.toString(x);vt(e)}if(ht)_.val(i);if(t&&n){o.change(e);_.trigger("change",[e])}}function L(){l=J.width();h=J.height();a=Q.height();z=tt.width();r=tt.height();W=et.height();F=it.width();H=nt.width();if(!n){v.css("position","absolute");if(c.offset)v.offset(c.offset);else v.offset(Xt(v,S))}kt();if(c.showPalette)wt();_.trigger("reflow.spectrum")}function Dt(){_.show();S.unbind("click.spectrum touchstart.spectrum");v.remove();b.remove();Ut[Rt.id]=null}function Pt(t,e){if(t===Bt)return Nt.extend({},c);if(e===Bt)return c[t];c[t]=e;gt()}function Ot(){Z=false;_.attr("disabled",false);S.removeClass("sp-disabled")}function Mt(){I();Z=true;_.attr("disabled",true);S.addClass("sp-disabled")}function Lt(t){c.offset=t;L()}mt();var Rt={show:xt,hide:I,toggle:Ct,reflow:L,option:Pt,enable:Ot,disable:Mt,offset:Lt,set:function(t){k(t);M()},get:D,destroy:Dt,container:v};Rt.id=Ut.push(Rt)-1;return Rt}function Xt(t,e){var i=0;var n=t.outerWidth();var o=t.outerHeight();var s=e.outerHeight();var a=t[0].ownerDocument;var r=a.documentElement;var l=r.clientWidth+Nt(a).scrollLeft();var c=r.clientHeight+Nt(a).scrollTop();var h=e.offset();h.top+=s;h.left-=Math.min(h.left,h.left+n>l&&l>n?Math.abs(h.left+n-l):0);h.top-=Math.min(h.top,h.top+o>c&&c>o?Math.abs(o+s-i):i);return h}function t(){}function Zt(t){t.stopPropagation()}function o(t,e){var i=Array.prototype.slice;var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function Kt(a,r,i,t){r=r||function(){};i=i||function(){};t=t||function(){};var l=document;var c=false;var h={};var d=0;var u=0;var p="ontouchstart"in window;var n={};n["selectstart"]=f;n["dragstart"]=f;n["touchmove mousemove"]=o;n["touchend mouseup"]=g;function f(t){if(t.stopPropagation)t.stopPropagation();if(t.preventDefault)t.preventDefault();t.returnValue=false}function o(t){if(c){if(zt&&l.documentMode<9&&!t.button)return g();var e=t.originalEvent&&t.originalEvent.touches;var i=e?e[0].pageX:t.pageX;var n=e?e[0].pageY:t.pageY;var o=Math.max(0,Math.min(i-h.left,u));var s=Math.max(0,Math.min(n-h.top,d));if(p)f(t);r.apply(a,[o,s,t])}}function e(t){var e=t.which?t.which==3:t.button==2;if(!e&&!c)if(i.apply(a,arguments)!==false){c=true;d=Nt(a).height();u=Nt(a).width();h=Nt(a).offset();Nt(l).bind(n);Nt(l.body).addClass("sp-dragging");if(!p)o(t);f(t)}}function g(){if(c){Nt(l).unbind(n);Nt(l.body).removeClass("sp-dragging");t.apply(a,arguments)}c=false}Nt(a).bind("touchstart mousedown",e)}function qt(n,o,s){var a;return function(){var t=this,e=arguments;var i=function(){a=null;n.apply(t,e)};if(s)clearTimeout(a);if(s||!a)a=setTimeout(i,o)}}var a="spectrum.id",T=(Nt.fn.spectrum=function(i,t){if(typeof i=="string"){var n=this;var o=Array.prototype.slice.call(arguments,1);this.each(function(){var t=Ut[Nt(this).data(a)];if(t){var e=t[i];if(!e)throw new Error("Spectrum: no such method: '"+i+"'");if(i=="get")n=t.get();else if(i=="container")n=t.container;else if(i=="option")n=t.option.apply(t,o);else if(i=="destroy"){t.destroy();Nt(this).removeData(a)}else e.apply(t,o)}});return n}return this.spectrum("destroy").each(function(){var t=Nt.extend({},i,Nt(this).data());var e=s(this,t);Nt(this).data(a,e.id)})},Nt.fn.spectrum.load=true,Nt.fn.spectrum.loadOpts={},Nt.fn.spectrum.draggable=Kt,Nt.fn.spectrum.defaults=n,Nt.spectrum={},Nt.spectrum.localization={},Nt.spectrum.palettes={},Nt.fn.spectrum.processNativeColorInputs=function(){if(!Ht)Nt("input[type=color]").spectrum({preferredFormat:"hex6"})},/^[\s,#]+/),E=/\s+$/,C=0,u=Math,r=u.round,c=u.min,h=u.max,e=u.random,d=function t(e,i){e=e?e:"";i=i||{};if(e instanceof t)return e;if(!(this instanceof t))return new t(e,i);var n=x(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=r(100*this._a)/100,this._format=i.format||n.format;this._gradientType=i.gradientType;if(this._r<1)this._r=r(this._r);if(this._g<1)this._g=r(this._g);if(this._b<1)this._b=r(this._b);this._ok=n.ok;this._tc_id=C++};function x(t){var e={r:0,g:0,b:0};var i=1;var n=false;var o=false;if(typeof t=="string")t=K(t);if(typeof t=="object"){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")){e=$(t.r,t.g,t.b);n=true;o=String(t.r).substr(-1)==="%"?"prgb":"rgb"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")){t.s=b(t.s);t.v=b(t.v);e=I(t.h,t.s,t.v);n=true;o="hsv"}else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")){t.s=b(t.s);t.l=b(t.l);e=A(t.h,t.s,t.l);n=true;o="hsl"}if(t.hasOwnProperty("a"))i=t.a}i=m(i);return{ok:n,format:t.format||o,r:c(255,h(e.r,0)),g:c(255,h(e.g,0)),b:c(255,h(e.b,0)),a:i}}function $(t,e,i){return{r:_(t,255)*255,g:_(e,255)*255,b:_(i,255)*255}}function l(t,e,i){t=_(t,255);e=_(e,255);i=_(i,255);var n=h(t,e,i),o=c(t,e,i);var s,a,r=(n+o)/2;if(n==o)s=a=0;else{var l=n-o;a=r>.5?l/(2-n-o):l/(n+o);switch(n){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,l:r}}function A(t,e,i){var n,o,s;t=_(t,360);e=_(e,100);i=_(i,100);function a(t,e,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return t+(e-t)*6*i;if(i<1/2)return e;if(i<2/3)return t+(e-t)*(2/3-i)*6;return t}if(e===0)n=o=s=i;else{var r=i<.5?i*(1+e):i+e-i*e;var l=2*i-r;n=a(l,r,t+1/3);o=a(l,r,t);s=a(l,r,t-1/3)}return{r:n*255,g:o*255,b:s*255}}function p(t,e,i){t=_(t,255);e=_(e,255);i=_(i,255);var n=h(t,e,i),o=c(t,e,i);var s,a,r=n;var l=n-o;a=n===0?0:l/n;if(n==o)s=0;else{switch(n){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,v:r}}function I(t,e,i){t=_(t,360)*6;e=_(e,100);i=_(i,100);var n=u.floor(t),o=t-n,s=i*(1-e),a=i*(1-o*e),r=i*(1-(1-o)*e),l=n%6,c=[i,a,s,s,r,i][l],h=[r,i,i,a,s,s][l],d=[s,s,r,i,i,a][l];return{r:c*255,g:h*255,b:d*255}}function i(t,e,i,n){var o=[w(r(t).toString(16)),w(r(e).toString(16)),w(r(i).toString(16))];if(n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0);return o.join("")}function f(t,e,i,n){var o=[w(Y(n)),w(r(t).toString(16)),w(r(e).toString(16)),w(r(i).toString(16))];return o.join("")}function k(t,e){e=e===0?0:e||10;var i=d(t).toHsl();i.s-=e/100;i.s=v(i.s);return d(i)}function D(t,e){e=e===0?0:e||10;var i=d(t).toHsl();i.s+=e/100;i.s=v(i.s);return d(i)}function P(t){return d(t).desaturate(100)}function O(t,e){e=e===0?0:e||10;var i=d(t).toHsl();i.l+=e/100;i.l=v(i.l);return d(i)}function M(t,e){e=e===0?0:e||10;var i=d(t).toRgb();i.r=h(0,c(255,i.r-r(255*-(e/100))));i.g=h(0,c(255,i.g-r(255*-(e/100))));i.b=h(0,c(255,i.b-r(255*-(e/100))));return d(i)}function L(t,e){e=e===0?0:e||10;var i=d(t).toHsl();i.l-=e/100;i.l=v(i.l);return d(i)}function R(t,e){var i=d(t).toHsl();var n=(r(i.h)+e)%360;i.h=n<0?360+n:n;return d(i)}function N(t){var e=d(t).toHsl();e.h=(e.h+180)%360;return d(e)}function B(t){var e=d(t).toHsl();var i=e.h;return[d(t),d({h:(i+120)%360,s:e.s,l:e.l}),d({h:(i+240)%360,s:e.s,l:e.l})]}function U(t){var e=d(t).toHsl();var i=e.h;return[d(t),d({h:(i+90)%360,s:e.s,l:e.l}),d({h:(i+180)%360,s:e.s,l:e.l}),d({h:(i+270)%360,s:e.s,l:e.l})]}function z(t){var e=d(t).toHsl();var i=e.h;return[d(t),d({h:(i+72)%360,s:e.s,l:e.l}),d({h:(i+216)%360,s:e.s,l:e.l})]}function F(t,e,i){e=e||6;i=i||30;var n=d(t).toHsl();var o=360/i;var s=[d(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;){n.h=(n.h+o)%360;s.push(d(n))}return s}function H(t,e){e=e||6;var i=d(t).toHsv();var n=i.h,o=i.s,s=i.v;var a=[];var r=1/e;while(e--){a.push(d({h:n,s:o,v:s}));s=(s+r)%1}return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},setAlpha:function(t){this._a=m(t);this._roundA=r(100*this._a)/100;return this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b);var e=r(t.h*360),i=r(t.s*100),n=r(t.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=l(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=l(this._r,this._g,this._b);var e=r(t.h*360),i=r(t.s*100),n=r(t.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return i(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return f(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(_(this._r,255)*100)+"%",g:r(_(this._g,255)*100)+"%",b:r(_(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+r(_(this._r,255)*100)+"%, "+r(_(this._g,255)*100)+"%, "+r(_(this._b,255)*100)+"%)":"rgba("+r(_(this._r,255)*100)+"%, "+r(_(this._g,255)*100)+"%, "+r(_(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0)return"transparent";if(this._a<1)return false;return W[i(this._r,this._g,this._b,true)]||false},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a);var i=e;var n=this._gradientType?"GradientType = 1, ":"";if(t){var o=d(t);i=o.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=false;var n=this._a<1&&this._a>=0;var o=!e&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="name");if(o){if(t==="name"&&this._a===0)return this.toName();return this.toRgbString()}if(t==="rgb")i=this.toRgbString();if(t==="prgb")i=this.toPercentageRgbString();if(t==="hex"||t==="hex6")i=this.toHexString();if(t==="hex3")i=this.toHexString(true);if(t==="hex8")i=this.toHex8String();if(t==="name")i=this.toName();if(t==="hsl")i=this.toHslString();if(t==="hsv")i=this.toHsvString();return i||this.toHexString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));this._r=i._r;this._g=i._g;this._b=i._b;this.setAlpha(i._a);return this},lighten:function(){return this._applyModification(O,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(k,arguments)},saturate:function(){return this._applyModification(D,arguments)},greyscale:function(){return this._applyModification(P,arguments)},spin:function(){return this._applyModification(R,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(N,arguments)},monochromatic:function(){return this._applyCombination(H,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(B,arguments)},tetrad:function(){return this._applyCombination(U,arguments)}},d.fromRatio=function(t,e){if(typeof t=="object"){var i={};for(var n in t)if(t.hasOwnProperty(n))if(n==="a")i[n]=t[n];else i[n]=b(t[n]);t=i}return d(t,e)},d.equals=function(t,e){if(!t||!e)return false;return d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:e(),g:e(),b:e()})},d.mix=function(t,e,i){i=i===0?0:i||50;var n=d(t).toRgb();var o=d(e).toRgb();var s=i/100;var a=s*2-1;var r=o.a-n.a;var l;if(a*r==-1)l=a;else l=(a+r)/(1+a*r);l=(l+1)/2;var c=1-l;var h={r:o.r*l+n.r*c,g:o.g*l+n.g*c,b:o.b*l+n.b*c,a:o.a*s+n.a*(1-s)};return d(h)},d.readability=function(t,e){var i=d(t);var n=d(e);var o=i.toRgb();var s=n.toRgb();var a=i.getBrightness();var r=n.getBrightness();var l=Math.max(o.r,s.r)-Math.min(o.r,s.r)+Math.max(o.g,s.g)-Math.min(o.g,s.g)+Math.max(o.b,s.b)-Math.min(o.b,s.b);return{brightness:Math.abs(a-r),color:l}},d.isReadable=function(t,e){var i=d.readability(t,e);return i.brightness>125&&i.color>500},d.mostReadable=function(t,e){var i=null;var n=0;var o=false;for(var s=0;s<e.length;s++){var a=d.readability(t,e[s]);var r=a.brightness>125&&a.color>500;var l=3*(a.brightness/125)+a.color/500;if(r&&!o||r&&o&&l>n||!r&&!o&&l>n){o=r;n=l;i=d(e[s])}}return i};var g=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},W=d.hexNames=V(g);function V(t){var e={};for(var i in t)if(t.hasOwnProperty(i))e[t[i]]=i;return e}function m(t){t=parseFloat(t);if(isNaN(t)||t<0||t>1)t=1;return t}function _(t,e){if(G(t))t="100%";var i=j(t);t=c(e,h(0,parseFloat(t)));if(i)t=parseInt(t*e,10)/100;if(u.abs(t-e)<1e-6)return 1;return t%e/parseFloat(e)}function v(t){return c(1,h(0,t))}function y(t){return parseInt(t,16)}function G(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function j(t){return typeof t==="string"&&t.indexOf("%")!=-1}function w(t){return t.length==1?"0"+t:""+t}function b(t){if(t<=1)t=t*100+"%";return t}function Y(t){return Math.round(parseFloat(t)*255).toString(16)}function X(t){return y(t)/255}var S=function(){var t="[-\\+]?\\d+%?";var e="[-\\+]?\\d*\\.\\d+%?";var i="(?:"+e+")|(?:"+t+")";var n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";var o="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+o),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function K(t){t=t.replace(T,"").replace(E,"").toLowerCase();var e=false;if(g[t]){t=g[t];e=true}else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;if(i=S.rgb.exec(t))return{r:i[1],g:i[2],b:i[3]};if(i=S.rgba.exec(t))return{r:i[1],g:i[2],b:i[3],a:i[4]};if(i=S.hsl.exec(t))return{h:i[1],s:i[2],l:i[3]};if(i=S.hsla.exec(t))return{h:i[1],s:i[2],l:i[3],a:i[4]};if(i=S.hsv.exec(t))return{h:i[1],s:i[2],v:i[3]};if(i=S.hsva.exec(t))return{h:i[1],s:i[2],v:i[3],a:i[4]};if(i=S.hex8.exec(t))return{a:X(i[1]),r:y(i[2]),g:y(i[3]),b:y(i[4]),format:e?"name":"hex8"};if(i=S.hex6.exec(t))return{r:y(i[1]),g:y(i[2]),b:y(i[3]),format:e?"name":"hex"};if(i=S.hex3.exec(t))return{r:y(i[1]+""+i[1]),g:y(i[2]+""+i[2]),b:y(i[3]+""+i[3]),format:e?"name":"hex"};return false}window.tinycolor=d,Nt(function(){if(Nt.fn.spectrum.load)Nt.fn.spectrum.processNativeColorInputs()})}(jQuery)}(),define("toast/libs/spectrum",function(){}),!function(t){"function"==typeof define&&define.amd?define("toast/libs/Drag",t):t(jQuery)}(function(){"use strict";$.fn.drag=function(t,e,i){var n="string"==typeof t?t:"",o=$.isFunction(t)?t:$.isFunction(e)?e:null;return 0!==n.indexOf("drag")&&(n="drag"+n),i=(t==o?e:i)||{},o?this.bind(n,i,o):this.trigger(n)};var u=$.event,n=u.special,p=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!1,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var i=$.data(this,p.datakey),n=t.data||{};i.related+=1,$.each(p.defaults,function(t,e){void 0!==n[t]&&(i[t]=n[t])})},remove:function(){--$.data(this,p.datakey).related},setup:function(){var t;$.data(this,p.datakey)||(t=$.extend({related:0},p.defaults),$.data(this,p.datakey,t),u.add(this,"touchstart mousedown",p.init,t),this.attachEvent&&this.attachEvent("ondragstart",p.dontstart))},teardown:function(){($.data(this,p.datakey)||{}).related||($.removeData(this,p.datakey),u.remove(this,"touchstart mousedown",p.init),p.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",p.dontstart))},init:function(t){if(!p.touched){var e,i=t.data;if(!(0!=t.which&&0<i.which&&t.which!=i.which)&&!$(t.target).is(i.not)&&(!i.handle||$(t.target).closest(i.handle,t.currentTarget).length)&&(p.touched="touchstart"==t.type?this:null,i.propagates=1,i.mousedown=this,i.interactions=[p.interaction(this,i)],i.target=t.target,i.pageX=t.pageX,i.pageY=t.pageY,i.dragging=null,e=p.hijack(t,"draginit",i),i.propagates))return(e=p.flatten(e))&&e.length&&(i.interactions=[],$.each(e,function(){i.interactions.push(p.interaction(this,i))})),i.propagates=i.interactions.length,!1!==i.drop&&n.drop&&n.drop.handler(t,i),p.textselect(!1),p.touched?u.add(p.touched,"touchmove touchend",p.handler,i):u.add(document,"mousemove mouseup",p.handler,i),!(!p.touched||i.live)&&void 0}},interaction:function(t,e){e=$(t)[e.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new p.callback,droppable:[],offset:e}},handler:function(t){var e=t.data;switch(t.type){case!e.dragging&&"touchmove":t.preventDefault();case!e.dragging&&"mousemove":if(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2)<Math.pow(e.distance,2))break;t.target=e.target,p.hijack(t,"dragstart",e),e.propagates&&(e.dragging=!0);case"touchmove":t.preventDefault();case"mousemove":if(e.dragging){if(p.hijack(t,"drag",e),e.propagates){!1!==e.drop&&n.drop&&n.drop.handler(t,e);break}t.type="mouseup"}default:p.touched?u.remove(p.touched,"touchmove touchend",p.handler):u.remove(document,"mousemove mouseup",p.handler),e.dragging&&(!1!==e.drop&&n.drop&&n.drop.handler(t,e),p.hijack(t,"dragend",e)),p.textselect(!0),!1===e.click&&e.dragging&&$.data(e.mousedown,"suppress.click",(new Date).getTime()+5),e.dragging=p.touched=!1}},hijack:function(i,n,o,t,e){if(o){var s,a,r,l={event:i.originalEvent,type:i.type},c=n.indexOf("drop")?"drag":"drop",h=t||0,d=isNaN(t)?o.interactions.length:t;i.type=n,i.originalEvent=null,o.results=[];do{if(a=o.interactions[h]){if("dragend"!==n&&a.cancelled)continue;r=p.properties(i,o,a),a.results=[],$(e||a[c]||o.droppable).each(function(t,e){if(r.target=e,!(i.isPropagationStopped=function(){return!1})===(s=e?u.dispatch.call(e,i,r):null)?("drag"==c&&(a.cancelled=!0,--o.propagates),"drop"==n&&(a[c][t]=null)):"dropinit"==n&&a.droppable.push(p.element(s)||e),"dragstart"==n&&(a.proxy=$(p.element(s)||a.drag)[0]),a.results.push(s),delete i.result,"dropinit"!==n)return s}),o.results[h]=p.flatten(a.results),"dropinit"==n&&(a.droppable=p.flatten(a.droppable)),"dragstart"!=n||a.cancelled||r.update()}}while(++h<d);return i.type=l.type,i.originalEvent=l.event,p.flatten(o.results)}},properties:function(t,e,i){var n=i.callback;return n.drag=i.drag,n.proxy=i.proxy||i.drag,n.startX=e.pageX,n.startY=e.pageY,n.deltaX=t.pageX-e.pageX,n.deltaY=t.pageY-e.pageY,n.originalX=i.offset.left,n.originalY=i.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=p.flatten((i.drop||[]).slice()),n.available=p.flatten((i.droppable||[]).slice()),n},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(t){return $.map(t,function(t){return t&&t.jquery?$.makeArray(t):t&&t.length?p.flatten(t):t})},textselect:function(t){$(document)[t?"unbind":"bind"]("selectstart",p.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}},e=(p.callback.prototype={update:function(){n.drop&&this.available.length&&$.each(this.available,function(t){n.drop.locate(this,t)})}},u.dispatch),o=(u.dispatch=function(t){if(!(0<$.data(this,"suppress."+t.type)-(new Date).getTime()))return e.apply(this,arguments);$.removeData(this,"suppress."+t.type)},u.fixHooks.touchstart=u.fixHooks.touchmove=u.fixHooks.touchend=u.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(i,t){var n;return t&&(n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||null)&&$.each(o.props,function(t,e){i[e]=n[e]}),i}});n.draginit=n.dragstart=n.dragend=p}),!function(t){"function"==typeof define&&define.amd?define("toast/libs/Drop",t):t(jQuery)}(function(){"use strict";$.fn.drop=function(t,e,i){var n="string"==typeof t?t:"",o=$.isFunction(t)?t:$.isFunction(e)?e:null;return 0!==n.indexOf("drop")&&(n="drop"+n),i=(t==o?e:i)||{},o?this.bind(n,i,o):this.trigger(n)},$.drop=function(t){p.multi=!0===(t=t||{}).multi?1/0:!1===t.multi?1:(isNaN(t.multi)?p:t).multi,p.delay=t.delay||p.delay,p.tolerance=$.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:p.tolerance,p.mode=t.mode||p.mode||"intersect",t.page&&(p.page=t.page)};var u=$.event.special,p=$.event.special._drop={page:null,multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){$.data(this,p.datakey).related+=1},remove:function(){--$.data(this,p.datakey).related},setup:function(){$.data(this,p.datakey)||($.data(this,p.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),p.targets.push(this))},teardown:function(){var e;($.data(this,p.datakey)||{}).related||($.removeData(this,p.datakey),e=this,p.targets=$.grep(p.targets,function(t){return t!==e}))},handler:function(t,e){var i;if(e)switch(t.type){case"mousedown":case"touchstart":i=$(p.targets),(i="string"==typeof e.drop?i.filter(e.drop):i).each(function(){var t=$.data(this,p.datakey);t.active=[],t.anyactive=0,t.winner=0}),e.droppable=i,u.drag.hijack(t,"dropinit",e);break;case"mousemove":case"touchmove":p.event=t,p.timer||p.tolerate(e);break;case"mouseup":case"touchend":p.timer=clearTimeout(p.timer),e.propagates&&(u.drag.hijack(t,"drop",e),u.drag.hijack(t,"dropend",e))}},locate:function(t,e){var i=$.data(t,p.datakey),n=$(t),o=n.offset()||{},s=n.outerHeight(),n=n.outerWidth(),n={elem:t,width:n,height:s,top:o.top,left:o.left,right:o.left+n,bottom:o.top+s};return i&&(i.location=n,i.index=e,i.elem=t),n},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,i){return this.contains(i,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,i){return e=$(e.elem)[0].getBoundingClientRect(),i=$(i.elem)[0].getBoundingClientRect(),Math.max(0,Math.min(i.bottom,e.bottom)-Math.max(i.top,e.top))*Math.max(0,Math.min(i.right,e.right)-Math.max(i.left,e.left))},fit:function(t,e,i){return this.contains(i,e)?1:0},middle:function(t,e,i){return this.contains(i,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(t){var e,i,n,o,s,a,r,l=0,c=t.interactions.length,h=[p.event.pageX,p.event.pageY],d=p.tolerance||p.modes[p.mode];do{if(r=t.interactions[l]){if(!r)return;r.drop=[],o=[],s=r.droppable.length,d&&(i=p.locate(r.proxy)),e=0;do{if(a=r.droppable[e]){if(!(a=(n=$.data(a,p.datakey)).location))continue;n.winner=d?d.call(p,p.event,i,a):p.contains(a,h)?1:0,o.push(n)}}while(++e<s);for(o.sort(p.sort),e=0;(n=o[e])&&(n.winner&&r.drop.length<p.multi?(n.active[l]||n.anyactive||(!1!==u.drag.hijack(p.event,"dropstart",t,l,n.elem)[0]?(n.active[l]=1,n.anyactive+=1):n.winner=0),n.winner&&r.drop.push(n.elem)):n.active[l]&&1==n.anyactive&&(u.drag.hijack(p.event,"dropend",t,l,n.elem),n.active[l]=0,--n.anyactive)),++e<s;);}}while(++l<c);p.last&&h[0]==p.last.pageX&&h[1]==p.last.pageY?delete p.timer:p.timer=setTimeout(function(){p.tolerate(t)},p.delay),p.last=p.event}};"object"!=typeof brackets&&($.event.special.drop=$.event.special._drop),u.dropinit=u.dropstart=u.dropend=p}),"undefined"==typeof gj&&(gj={}),gj.widget=function(){this.xhr=null,this.generateGUID=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},this.mouseX=function(t){if(t){if((t=tt.isMobile?t.originalEvent.touches[0]:t).pageX)return t.pageX;if(t.clientX)return t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)}return null},this.mouseY=function(t){if(t){if((t=tt.isMobile?t.originalEvent.touches[0]:t).pageY)return t.pageY;if(t.clientY)return t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}return null}},gj.widget.prototype.init=function(t,e){var i,n,o=$.extend(!0,{},this.getHTMLConfig()||{});for(i in $.extend(!0,o,t||{}),n=this.getConfig(o,e),this.attr("data-guid",n.guid),this.data(n),n)gj[e].events.hasOwnProperty(i)&&(this.on(i,n[i]),delete n[i]);for(plugin in gj[e].plugins)gj[e].plugins.hasOwnProperty(plugin)&&gj[e].plugins[plugin].configure(this,n,o);return this},gj.widget.prototype.getConfig=function(t,e){var i,n=$.extend(!0,{},gj[e].config.base),o=t.uiLibrary||n.uiLibrary;for(i in gj[e].config[o]&&$.extend(!0,n,gj[e].config[o]),gj[e].plugins)gj[e].plugins.hasOwnProperty(i)&&($.extend(!0,n,gj[e].plugins[i].config.base),gj[e].plugins[i].config[o])&&$.extend(!0,n,gj[e].plugins[i].config[o]);return $.extend(!0,n,t),n.guid||(n.guid=this.generateGUID()),n},gj.widget.prototype.getHTMLConfig=function(){var t=this.data(),e=this[0].attributes;return e.width&&(t.width=e.width.nodeValue),e.height&&(t.height=e.height.nodeValue),e.align&&(t.align=e.align.nodeValue),t&&t.source&&(t.dataSource=t.source,delete t.source),t},gj.widget.prototype.createDoneHandler=function(){var e=this;return function(t){"string"==typeof t&&JSON&&(t=JSON.parse(t)),gj[e.data("type")].methods.render(e,t)}},gj.widget.prototype.createErrorHandler=function(){return function(t){t&&t.statusText&&"abort"!==t.statusText&&alert(t)}},gj.widget.prototype.reload=function(t){var e,i=this.data();return void 0===i.dataSource&&gj[this.data("type")].methods.useHtmlDataSource(this,i),$.extend(i.params,t),$.isArray(i.dataSource)?(t=gj[this.data("type")].methods.filter(this),gj[this.data("type")].methods.render(this,t)):"string"==typeof i.dataSource?(e={url:i.dataSource,data:i.params},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(e).done(this.createDoneHandler()).fail(this.createErrorHandler())):"object"==typeof i.dataSource&&(i.dataSource.data||(i.dataSource.data={}),$.extend(i.dataSource.data,i.params),"json"===(e=$.extend(!0,{},i.dataSource)).dataType&&"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),e.success||(e.success=this.createDoneHandler()),e.error||(e.error=this.createErrorHandler()),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(e)),this},gj.documentManager={events:{},subscribeForEvent:function(t,e,i){if(gj.documentManager.events[t]&&0!==gj.documentManager.events[t].length){if(gj.documentManager.events[t][e])throw"Event "+t+" for widget with guid='"+e+"' is already attached.";gj.documentManager.events[t].push({widgetId:e,callback:i})}else gj.documentManager.events[t]=[{widgetId:e,callback:i}],$(document).on(t,gj.documentManager.executeCallbacks)},executeCallbacks:function(t){var e=gj.documentManager.events[t.type];if(e)for(var i=0;i<e.length;i++)e[i].callback(t)},unsubscribeForEvent:function(t,e){var i=!1,n=gj.documentManager.events[t];if(n){for(var o=0;o<n.length;o++)n[o].widgetId===e&&($(document).off(t,n[o].callback),n.splice(o,1),i=!0);0===n.length&&delete gj.documentManager.events[t]}if(!i)throw'The "'+t+'" for widget with guid="'+e+"\" can't be removed."}},void 0===gj.dialog&&(gj.dialog={plugins:{},messages:[]}),gj.dialog.messages["en-us"]={Close:"Close",DefaultTitle:"Dialog"},gj.dialog.config={base:{autoOpen:!0,closeOnEscape:!0,closeButtonInHeader:!0,draggable:!0,height:"auto",locale:"en-us",minHeight:void 0,maxHeight:void 0,width:300,minWidth:void 0,maxWidth:void 0,modal:!1,resizable:!1,title:void 0,uiLibrary:void 0,style:{modal:"gj-modal",content:"gj-content",header:"gj-header",headerTitle:"gj-title gj-unselectable",headerCloseButton:"gj-close",body:"gj-body",footer:"gj-dialog-footer gj-footer"}},bootstrap:{style:{modal:"modal",content:"modal-content",header:"modal-header",headerTitle:"modal-title",headerCloseButton:"close",body:"modal-body",footer:"gj-dialog-footer modal-footer"}},jqueryui:{style:{modal:"gj-modal",content:"ui-widget ui-widget-content gj-dialog-content",header:"gj-dialog-ui-header ui-widget-header",headerTitle:"gj-dialog-ui-title",headerCloseButton:"gj-dialog-ui-close ui-button ui-widget ui-state-default ui-corner-all",body:"gj-dialog-ui-body",footer:"gj-dialog-footer"}},foundation:{style:{modal:"reveal-modal-bg",content:"reveal-modal gj-dialog-fd-content",header:"",headerTitle:"gj-dialog-fd-title gj-unselectable",headerCloseButton:"close-reveal-modal right gj-dialog-fd-close",body:"gj-dialog-fd-body",footer:"gj-dialog-footer gj-dialog-fd-footer"}},materialdesign:{style:{modal:"gj-modal",content:"mdl-dialog gj-dialog-mdl-content",header:"",headerTitle:"mdl-dialog__title gj-unselectable",headerCloseButton:"gj-dialog-mdl-close",body:"mdl-dialog__content",footer:"gj-dialog-footer"}}},gj.dialog.events={initialized:function(t){t.trigger("initialized")},opening:function(t){t.trigger("opening")},opened:function(t){t.trigger("opened")},closing:function(t){t.trigger("closing")},closed:function(t){t.trigger("closed")},drag:function(t){t.trigger("drag")},dragStart:function(t){t.trigger("dragStart")},dragStop:function(t){t.trigger("dragStop")},resize:function(t){t.trigger("resize")},resizeStart:function(t){t.trigger("resizeStart")},resizeStop:function(t){t.trigger("resizeStop")}},gj.dialog.methods={init:function(t){return this.attr("data-type","dialog"),gj.widget.prototype.init.call(this,t,"dialog"),gj.dialog.methods.localization(this),gj.dialog.methods.initialize(this),gj.dialog.events.initialized(this),this},localization:function(t){t=t.data();void 0===t.title&&(t.title=gj.dialog.messages[t.locale].DefaultTitle)},getHTMLConfig:function(){var t=gj.widget.prototype.getHTMLConfig.call(this),e=this[0].attributes;return e.title&&(t.title=e.title.nodeValue),t},initialize:function(e){var t,i=e.data();e.addClass(i.style.content),gj.dialog.methods.setSize(e),i.closeOnEscape&&$(document).keyup(function(t){27===t.keyCode&&e.close()}),0===(t=e.children('div[data-role="body"]')).length?(t=$('<div data-role="body"/>').addClass(i.style.body),e.wrapInner(t)):t.addClass(i.style.body),t=gj.dialog.methods.renderHeader(e),e.children('div[data-role="footer"]').addClass(i.style.footer),e.find('[data-role="close"]').on("click",function(){e.close()}),i.draggable&&$.fn.draggable&&gj.dialog.methods.draggable(e,t),i.resizable&&$.fn.draggable&&gj.dialog.methods.resizable(e),gj.dialog.methods.setPosition(e),i.modal&&e.wrapAll('<div data-role="modal" class="'+i.style.modal+'"/>'),i.autoOpen&&e.open()},setSize:function(t){var e=t.data();e.width&&t.css("width",e.width),e.height&&t.css("height",e.height)},renderHeader:function(t){var e=t.data(),i=t.children('div[data-role="header"]');return 0===i.length&&(i=$('<div data-role="header" />'),t.prepend(i)),i.addClass(e.style.header),0===(t=i.find('[data-role="title"]')).length&&(t=$('<h4 data-role="title">'+e.title+"</h4>"),i.append(t)),t.addClass(e.style.headerTitle),0===(t=i.find('[data-role="close"]')).length&&e.closeButtonInHeader?((t=$('<button type="button" data-role="close" title="'+gj.dialog.messages[e.locale].Close+'"><span>×</span></button>')).addClass(e.style.headerCloseButton),i.prepend(t)):0<t.length&&!1===e.closeButtonInHeader&&t.hide(),i},setPosition:function(t){var e=$(window).width()/2-t.width()/2,i=$(window).height()/2-t.height()/2;t.css("position","absolute"),t.css("left",0<e?e:0),t.css("top",0<i?i:0)},draggable:function(t,e){t.appendTo("body"),e.addClass("gj-draggable"),t.draggable({handle:e,start:function(){t.addClass("gj-unselectable"),gj.dialog.events.dragStart(t)},stop:function(){t.removeClass("gj-unselectable"),gj.dialog.events.dragStop(t)}})},resizable:function(t){var e={drag:gj.dialog.methods.resize,start:function(){t.addClass("gj-unselectable"),gj.dialog.events.resizeStart(t)},stop:function(){this.removeAttribute("style"),t.removeClass("gj-unselectable"),gj.dialog.events.resizeStop(t)}};t.append($('<div class="gj-resizable-handle gj-resizable-n"></div>').draggable($.extend(!0,{horizontal:!1},e))),t.append($('<div class="gj-resizable-handle gj-resizable-e"></div>').draggable($.extend(!0,{vertical:!1},e))),t.append($('<div class="gj-resizable-handle gj-resizable-s"></div>').draggable($.extend(!0,{horizontal:!1},e))),t.append($('<div class="gj-resizable-handle gj-resizable-w"></div>').draggable($.extend(!0,{vertical:!1},e))),t.append($('<div class="gj-resizable-handle gj-resizable-ne"></div>').draggable($.extend(!0,{},e))),t.append($('<div class="gj-resizable-handle gj-resizable-nw"></div>').draggable($.extend(!0,{},e))),t.append($('<div class="gj-resizable-handle gj-resizable-sw"></div>').draggable($.extend(!0,{},e))),t.append($('<div class="gj-resizable-handle gj-resizable-se"></div>').draggable($.extend(!0,{},e)))},resize:function(t,e){var i,n,o,s,a=!1,r=$(this),l=r.parent(),c=l.data();return r.hasClass("gj-resizable-n")?(i=l.height()-e.top,o=l.offset().top+e.top):r.hasClass("gj-resizable-e")?n=l.width()+e.left:r.hasClass("gj-resizable-s")?i=l.height()+e.top:r.hasClass("gj-resizable-w")?(n=l.width()-e.left,s=l.offset().left+e.left):r.hasClass("gj-resizable-ne")?(i=l.height()-e.top,o=l.offset().top+e.top,n=l.width()+e.left):r.hasClass("gj-resizable-nw")?(i=l.height()-e.top,o=l.offset().top+e.top,n=l.width()-e.left,s=l.offset().left+e.left):r.hasClass("gj-resizable-se")?(i=l.height()+e.top,n=l.width()+e.left):r.hasClass("gj-resizable-sw")&&(i=l.height()+e.top,n=l.width()-e.left,s=l.offset().left+e.left),i&&(!c.minHeight||i>=c.minHeight)&&(!c.maxHeight||i<=c.maxHeight)&&(l.height(i),o&&l.css("top",o),a=!0),n&&(!c.minWidth||n>=c.minWidth)&&(!c.maxWidth||n<=c.maxWidth)&&(l.width(n),s&&l.css("left",s),a=!0),a&&gj.dialog.events.resize(l),!1},open:function(t){var e;return gj.dialog.events.opening(t),t.css("display","block"),t.closest('div[data-role="modal"]').css("display","block"),(e=t.children('div[data-role="footer"]')).length&&e.outerHeight()&&t.children('div[data-role="body"]').css("margin-bottom",e.outerHeight()),gj.dialog.events.opened(t),t},close:function(t){return t.is(":visible")&&(gj.dialog.events.closing(t),t.css("display","none"),t.closest('div[data-role="modal"]').css("display","none"),gj.dialog.events.closed(t)),t},isOpen:function(t){return t.is(":visible")}},gj.dialog.widget=function(t,arguments){var e=gj.dialog.methods;return this.open=function(){return e.open(this)},this.close=function(){return e.close(this)},this.isOpen=function(){return e.isOpen(this)},$.extend(t,this),"dialog"!==t.attr("data-type")&&e.init.apply(t,arguments),t},gj.dialog.widget.prototype=new gj.widget,gj.dialog.widget.constructor=gj.dialog.widget,gj.dialog.widget.prototype.getHTMLConfig=gj.dialog.methods.getHTMLConfig,jQuery.fn.dialog=function(t){var e;if(this&&this.length){if("object"!=typeof t&&t){if((e=new gj.dialog.widget(this,null))[t])return e[t].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+t+" does not exist."}return new gj.dialog.widget(this,arguments)}},define("toast/libs/dialog",function(){}),"undefined"==typeof gj&&(gj={}),gj.widget=function(){this.xhr=null,this.generateGUID=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},this.mouseX=function(t){if(t){if((t=tt.isMobile?t.originalEvent.touches[0]:t).pageX)return t.pageX;if(t.clientX)return t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)}return null},this.mouseY=function(t){if(t){if((t=tt.isMobile?t.originalEvent.touches[0]:t).pageY)return t.pageY;if(t.clientY)return t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}return null}},gj.widget.prototype.init=function(t,e){var i,n,o=$.extend(!0,{},this.getHTMLConfig()||{});for(i in $.extend(!0,o,t||{}),n=this.getConfig(o,e),this.attr("data-guid",n.guid),this.data(n),n)gj[e].events.hasOwnProperty(i)&&(this.on(i,n[i]),delete n[i]);for(plugin in gj[e].plugins)gj[e].plugins.hasOwnProperty(plugin)&&gj[e].plugins[plugin].configure(this,n,o);return this},gj.widget.prototype.getConfig=function(t,e){var i,n=$.extend(!0,{},gj[e].config.base),o=t.uiLibrary||n.uiLibrary;for(i in gj[e].config[o]&&$.extend(!0,n,gj[e].config[o]),gj[e].plugins)gj[e].plugins.hasOwnProperty(i)&&($.extend(!0,n,gj[e].plugins[i].config.base),gj[e].plugins[i].config[o])&&$.extend(!0,n,gj[e].plugins[i].config[o]);return $.extend(!0,n,t),n.guid||(n.guid=this.generateGUID()),n},gj.widget.prototype.getHTMLConfig=function(){var t=this.data(),e=this[0].attributes;return e.width&&(t.width=e.width.nodeValue),e.height&&(t.height=e.height.nodeValue),e.align&&(t.align=e.align.nodeValue),t&&t.source&&(t.dataSource=t.source,delete t.source),t},gj.widget.prototype.createDoneHandler=function(){var e=this;return function(t){"string"==typeof t&&JSON&&(t=JSON.parse(t)),gj[e.data("type")].methods.render(e,t)}},gj.widget.prototype.createErrorHandler=function(){return function(t){t&&t.statusText&&"abort"!==t.statusText&&alert(t)}},gj.widget.prototype.reload=function(t){var e,i=this.data();return void 0===i.dataSource&&gj[this.data("type")].methods.useHtmlDataSource(this,i),$.extend(i.params,t),$.isArray(i.dataSource)?(t=gj[this.data("type")].methods.filter(this),gj[this.data("type")].methods.render(this,t)):"string"==typeof i.dataSource?(e={url:i.dataSource,data:i.params},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(e).done(this.createDoneHandler()).fail(this.createErrorHandler())):"object"==typeof i.dataSource&&(i.dataSource.data||(i.dataSource.data={}),$.extend(i.dataSource.data,i.params),"json"===(e=$.extend(!0,{},i.dataSource)).dataType&&"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),e.success||(e.success=this.createDoneHandler()),e.error||(e.error=this.createErrorHandler()),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(e)),this},gj.documentManager={events:{},subscribeForEvent:function(t,e,i){if(gj.documentManager.events[t]&&0!==gj.documentManager.events[t].length){if(gj.documentManager.events[t][e])throw"Event "+t+" for widget with guid='"+e+"' is already attached.";gj.documentManager.events[t].push({widgetId:e,callback:i})}else gj.documentManager.events[t]=[{widgetId:e,callback:i}],$(document).on(t,gj.documentManager.executeCallbacks)},executeCallbacks:function(t){var e=gj.documentManager.events[t.type];if(e)for(var i=0;i<e.length;i++)e[i].callback(t)},unsubscribeForEvent:function(t,e){var i=!1,n=gj.documentManager.events[t];if(n){for(var o=0;o<n.length;o++)n[o].widgetId===e&&($(document).off(t,n[o].callback),n.splice(o,1),i=!0);0===n.length&&delete gj.documentManager.events[t]}if(!i)throw'The "'+t+'" for widget with guid="'+e+"\" can't be removed."}},void 0===gj.draggable&&(gj.draggable={}),gj.draggable.config={base:{handle:void 0,vertical:!0,horizontal:!0}},gj.draggable.methods={init:function(t){var e=this;return gj.widget.prototype.init.call(this,t,"draggable"),e.attr("data-draggable","true"),gj.draggable.methods.getHandleElement(e).on(gj.draggable.events.types.start,function(t){$(t.target).hasClass(".close")||0!==$(t.target).parents(".close").length||(t.originalEvent.preventDefault(),e.attr("data-draggable-dragging",!0),e.removeAttr("data-draggable-x"),e.removeAttr("data-draggable-y"),e.css("position","absolute"))}),gj.documentManager.subscribeForEvent(gj.draggable.events.types.move,e.data("guid"),gj.draggable.methods.createMouseMoveHandler(e)),gj.documentManager.subscribeForEvent(gj.draggable.events.types.end,e.data("guid"),gj.draggable.methods.createMouseUpHandler(e)),e},getHandleElement:function(t){var e=t.data("handle");return e&&e.length?e:t},createMouseUpHandler:function(e){return function(t){"true"===e.attr("data-draggable-dragging")&&(e.attr("data-draggable-dragging",!1),gj.draggable.events.stop(e,{left:e.mouseX(t),top:e.mouseY(t)}))}},createMouseMoveHandler:function(o){return function(t){var e,i,n;"true"===o.attr("data-draggable-dragging")&&(e=o.mouseX(t),t=o.mouseY(t),i=o.attr("data-draggable-x"),n=o.attr("data-draggable-y"),i&&n?(i=o.data("horizontal")?e-parseInt(i,10):0,n=o.data("vertical")?t-parseInt(n,10):0,!1!==gj.draggable.events.drag(o,i,n,e,t)&&gj.draggable.methods.move(o,i,n)):gj.draggable.events.start(o),o.attr("data-draggable-x",e),o.attr("data-draggable-y",t))}},move:function(t,e,i){var n=t.get(0),o=n.style.top?parseInt(n.style.top):t.position().top,t=n.style.left?parseInt(n.style.left):t.position().left;n.style.top=o+i+"px",n.style.left=t+e+"px"},destroy:function(t){return"true"===t.attr("data-draggable")&&(gj.documentManager.unsubscribeForEvent(gj.draggable.events.types.end,t.data("guid")),gj.documentManager.unsubscribeForEvent(gj.draggable.events.types.move,t.data("guid")),t.removeData(),t.removeAttr("data-guid"),t.removeAttr("data-draggable"),t.off("drag").off("start").off("stop"),gj.draggable.methods.getHandleElement(t).off(gj.draggable.events.types.start)),t}},gj.draggable.events={types:"ontouchstart"in window?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},drag:function(t,e,i,n,o){return t.triggerHandler("drag",[{top:i,left:e},{top:o,left:n}])},start:function(t){t.triggerHandler("start")},stop:function(t,e){t.triggerHandler("stop",[e])}},gj.draggable.widget=function(t,arguments){var e=gj.draggable.methods;return this.destroy=function(){return e.destroy(this)},$.extend(t,this),"true"!==t.attr("data-draggable")&&e.init.apply(t,arguments),t},gj.draggable.widget.prototype=new gj.widget,gj.draggable.widget.constructor=gj.draggable.widget,jQuery.fn.draggable=function(t){var e;if(this&&this.length){if("object"!=typeof t&&t){if((e=new gj.draggable.widget(this,null))[t])return e[t].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+t+" does not exist."}return new gj.draggable.widget(this,arguments)}},define("toast/libs/draggable",function(){}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("toast/libs/Sketchpad",e):t.Spinner=e()}(this,function(){function t(t){for(var e in this.constructor.prototype)this[e]=this[e].bind(this);t.hasOwnProperty("element")?("string"==typeof t.element?this.element=$(t.element):this.element=t.element,this.penModes={draw:0,eraser:1},this._width=t.width||this.element.attr("data-width")||0,this._height=t.height||this.element.attr("data-height")||0,this.color=t.color||this.element.attr("data-color")||"#000000",this.penSize=t.penSize||this.element.attr("data-penSize")||5,this.penMode=t.penMode||this.element.attr("data-penMode")||this.penModes.draw,this.scale=1,this.readOnly=t.readOnly||this.element.attr("data-readOnly")||!1,this.readOnly||this.element.css({cursor:"crosshair"}),this.strokes=t.strokes||[],this._currentStroke={color:null,size:null,penMode:this.penMode,lines:[]},this.undoHistory=t.undoHistory||[],this.animateIds=[],this._sketching=!1,this._isModified=!1,this.reset()):console.error("SKETCHPAD ERROR: No element selected")}return t.prototype._cursorPosition=function(t){return{x:(t.pageX-$(this.canvas).offset().left)/this.scale,y:(t.pageY-$(this.canvas).offset().top)/this.scale}},t.prototype._draw=function(t,e,i,n){Toast.IS_PINCHING||this._stroke(t,e,i,n,"source-over")},t.prototype._erase=function(t,e,i,n){Toast.IS_PINCHING||this._stroke(t,e,i,n,"destination-out")},t.prototype._stroke=function(t,e,i,n,o){this.context.save(),this.context.lineJoin="round",this.context.lineCap="round",this.context.strokeStyle=i,this.context.lineWidth=n,this.context.globalCompositeOperation=o,this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(e.x,e.y),this.context.closePath(),this.context.stroke(),this.context.restore()},t.prototype._mouseDown=function(t){this._lastPosition=this._cursorPosition(t),this._currentStroke.color=this.color,this._currentStroke.size=this.penSize,this._currentStroke.penMode=this.penMode,this._currentStroke.lines=[],Toast.IS_DRAWING=this._sketching=!0,this._isModified=!0,document.addEventListener("mousemove",this._mouseMove)},t.prototype._mouseUp=function(t){this._sketching&&(this.strokes.push($.extend(!0,{},this._currentStroke)),Toast.IS_DRAWING=this._sketching=!1),document.removeEventListener("mousemove",this._mouseMove)},t.prototype._mouseMove=function(t){t=this._cursorPosition(t);this.penMode===this.penModes.draw?this._draw(this._lastPosition,t,this.color,this.penSize):this._erase(this._lastPosition,t,this.color,this.penSize),this._currentStroke.lines.push({start:$.extend(!0,{},this._lastPosition),end:$.extend(!0,{},t)}),this._lastPosition=t},t.prototype._touchStart=function(t){this._sketching||(t.preventDefault(),this._lastPosition=this._cursorPosition(t.changedTouches[0]),this._currentStroke.color=this.color,this._currentStroke.size=this.penSize,this._currentStroke.penMode=this.penMode,this._currentStroke.lines=[],Toast.IS_DRAWING=this._sketching=!0,this._isModified=!0,document.addEventListener("touchmove",this._touchMove,!1))},t.prototype._touchEnd=function(t){this._sketching&&(t.preventDefault(),this.strokes.push($.extend(!0,{},this._currentStroke)),Toast.IS_DRAWING=this._sketching=!1),document.removeEventListener("touchmove",this._touchMove)},t.prototype._touchCancel=function(t){this._sketching&&(t.preventDefault(),this.strokes.push($.extend(!0,{},this._currentStroke)),Toast.IS_DRAWING=this._sketching=!1),document.removeEventListener("touchmove",this._touchMove)},t.prototype._touchLeave=function(t){t.preventDefault(),this._sketching&&(this.strokes.push($.extend(!0,{},this._currentStroke)),Toast.IS_DRAWING=this._sketching=!1),document.removeEventListener("touchmove",this._touchMove)},t.prototype._touchMove=function(t){t.preventDefault();t=this._cursorPosition(t.changedTouches[0]);this.penMode===this.penModes.draw?this._draw(this._lastPosition,t,this.color,this.penSize):this._erase(this._lastPosition,t,this.color,this.penSize),this._currentStroke.lines.push({start:$.extend(!0,{},this._lastPosition),end:$.extend(!0,{},t)}),this._lastPosition=t},t.prototype.reset=function(){this.canvas=this.element[0],this.canvas.width=this._width,this.canvas.height=this._height,this.context=this.canvas.getContext("2d"),this.redraw(this.strokes),this.readOnly||(this.canvas.addEventListener("mousedown",this._mouseDown),document.addEventListener("mouseup",this._mouseUp),this.canvas.addEventListener("touchstart",this._touchStart),document.addEventListener("touchend",this._touchEnd))},t.prototype.drawStroke=function(t){for(var e=0;e<t.lines.length;e++){var i=t.lines[e];t.penMode&&t.penMode===this.penModes.eraser?this._erase(i.start,i.end,t.color,t.size):this._draw(i.start,i.end,t.color,t.size)}},t.prototype.redraw=function(t){this.strokes=[],this._isModified=!1;for(var e=0;e<t.length;e++)this.strokes.push($.extend(!0,{},t[e])),this.drawStroke(t[e])},t.prototype.toObject=function(){return{width:this.canvas.width,height:this.canvas.height,strokes:this.strokes,undoHistory:this.undoHistory}},t.prototype.isEmpty=function(){return!this.strokes.length},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.animate=function(t,e,i){this.clear();for(var n=t,o=null,s=0;s<this.strokes.length;s++)for(var a=this.strokes[s],r=0;r<a.lines.length;r++){var l=a.lines[r],o=this._draw.bind(this,l.start,l.end,a.color,a.size);this.animateIds.push(setTimeout(o,n)),n+=t}e&&(o=this.animate.bind(this,t,e,i=i||0),this.animateIds.push(setTimeout(o,n+i)))},t.prototype.cancelAnimation=function(){for(var t=0;t<this.animateIds.length;t++)clearTimeout(this.animateIds[t])},t.prototype.clear=function(t){t=t||{},this.context.clearRect(0,0,this.canvas.width,this.canvas.height),t.force&&(this.strokes.length&&(this._isModified=!0),this.strokes=[],this.undoHistory=[])},t.prototype.undo=function(){this.clear();var t=this.strokes.pop();t&&(this.undoHistory.push(t),this.redraw(this.strokes))},t.prototype.redo=function(){var t=this.undoHistory.pop();t&&(this.strokes.push(t),this.drawStroke(t))},t.prototype.isModified=function(){return this._isModified},t}),!function(v){"use strict";var t;t=function(){function t(t,e){return isNaN(t)?e||0:Number(t)}function h(t){return t.data("plugin_"+o)}function d(){for(var t=null,e=0;e<u.length;e++)(t=h(u[e]))&&t.hide(!0);c.trigger("hiddenAll."+a),f?c.off("touchstart.popover"):(c.off("keyup.popover"),c.off("click.popover")),c.off("touchend.popover"),i&&i(),p=!1}var i,o="popover",s="popover",a="toast.popover",n={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",selector:!1,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:!1,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",direction:"",animation:null,template:'<div class="popover"><div class="popover-arrow"></div><div class="popover-inner"><a href="#" class="close"></a><h3 class="popover-title"></h3><div class="popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:!1,className:null},r=s+"-rtl",u=[],l=$('<div class="popover-backdrop"></div>'),e=0,p=!1,_=-2e3,c=$(v),f="ontouchstart"in v.documentElement&&/Mobi/.test(navigator.userAgent);function g(t,e){return this.$element=$(t),!e||"string"!==$.type(e.delay)&&"number"!==$.type(e.delay)||(e.delay={show:e.delay,hide:e.delay}),this.options=$.extend({},n,e),this._defaults=n,this._name=o,this._targetclick=!1,this.init(),u.push(this.$element),this}g.prototype={init:function(){if(this.$element[0]instanceof v.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");"manual"!==this.getTrigger()&&(f?this.$element.off("touchend",this.options.selector).on("touchend",this.options.selector,$.proxy(this.toggle,this)):"click"===this.getTrigger()?this.$element.off("click",this.options.selector).on("click",this.options.selector,$.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,$.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,$.proxy(this.mouseleaveHandler,this))),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=e,this.id=o+this._idSeed,this.options.container=$(this.options.container||v.body).first(),this.options.backdrop&&l.appendTo(this.options.container).hide(),e++,"sticky"===this.getTrigger()&&this.show(),this.options.selector&&(this._options=$.extend({},this.options,{selector:""}))},destroy:function(){for(var t=-1,e=0;e<u.length;e++)if(u[e]===this.$element){t=e;break}u.splice(t,1),this.hide(),this.$element.data("plugin_"+o,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},getDelegateOptions:function(){var i={};return this._options&&$.each(this._options,function(t,e){n[t]!==e&&(i[t]=e)}),i},hide:function(t,e){var i;(t||"sticky"!==this.getTrigger())&&this._opened&&(e&&(e.preventDefault(),e.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null),t=$.Event("hide."+a),this.$element.trigger(t,[this.$target]),this.$target&&(this.$target.removeClass("in").addClass(this.getHideAnimation()),i=this,setTimeout(function(){i.$target.hide(),i.getCache()||i.$target.remove()},i.getHideDelay())),this.options.backdrop&&l.hide(),this._opened=!1,this.$element.trigger("hidden."+a,[this.$target]),this.options.onHide)&&this.options.onHide(this.$target)},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},delegate:function(t){var e=$(t).data("plugin_"+o);return e||(e=new g(t,this.getDelegateOptions()),$(t).data("plugin_"+o,e)),e},toggle:function(t){var e=this;(e=t&&(t.preventDefault(),t.stopPropagation(),this.options.selector)?this.delegate(t.currentTarget):e)[e.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){d()},hideOthers:function(){for(var t=this,e=null,i=0;i<u.length;i++)(e=h(u[i]))&&e.id!==t.id&&e.hide(!0);c.trigger("hiddenAll."+a)},show:function(){if(!this._opened){var t=this.getTarget().removeClass().addClass(s).addClass(this._customTargetClass);if(this.options.className&&t.addClass(this.options.className),this.options.multi||this.hideOthers(),!this.getCache()||!this._poped||""===this.content){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),this.canEmptyHide()&&""===this.content)return;t.show()}this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&l.show(),this._opened=!0,this.resetAutoHide()}},displayContent:function(){var t=this.getElementPosition(),e=this.getTarget().removeClass().addClass(s).addClass(this._customTargetClass),i=this.getContentElement(),n=(e[0].offsetWidth,e[0].offsetHeight,$.Event("show."+a));if(this.options.className&&e.addClass(this.options.className),this.canEmptyHide()){var o=i.children().html();if(null!==o&&0===o.trim().length)return}this.$element.trigger(n,[e]);var o=this.$element.data("width")||this.options.width,n=("auto"!==(o=""===o?this._defaults.width:o)&&e.width(o),this.$element.data("height")||this.options.height),t=("auto"!==(n=""===n?this._defaults.height:n)&&i.height(n),this.options.style&&this.$target.addClass(s+"-"+this.options.style),"rtl"!==this.options.direction||i.hasClass(r)||i.addClass(r),this.options.arrow||e.find(".popover-arrow").remove(),e.detach().css({top:_,left:_,display:"block"}),this.getAnimation()&&e.addClass(this.getAnimation()),e.appendTo(this.options.container),o=this.getPlacement(t),this.$element.trigger("added."+a),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&i.css("height",i.outerHeight()),this.$target.addClass("popover-no-padding")),this.options.maxHeight&&i.css("maxHeight",this.options.maxHeight),this.options.maxWidth&&i.css("maxWidth",this.options.maxWidth),n=e[0].offsetWidth,i=e[0].offsetHeight,this.getTargetPositin(t,o,n,i));this.$target.css(t.position).addClass(o).addClass("in"),"iframe"===this.options.type&&(n=e.find("iframe"),i=e.width(),e=n.parent().height(),""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(i=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(e=this.options.iframeOptions.height),n.width(i).height(e)),this.options.arrow||this.$target.css({margin:0}),this.options.arrow&&((n=this.$target.find(".popover-arrow")).removeAttr("style"),"left"===o||"right"===o?n.css({top:this.$target.height()/2}):"top"!==o&&"bottom"!==o||n.css({left:this.$target.width()/2}),t.arrowOffset)&&(-1===t.arrowOffset.left||-1===t.arrowOffset.top?n.hide():n.css(t.arrowOffset)),this._poped=!0,this.$element.trigger("shown."+a,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){var t;return this.$target||(t=o+this._idSeed,this.$target=$(this.options.template).attr("id",t),this._customTargetClass=this.$target.attr("class")!==s?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)),this.$target.data("trigger-element")||this.$target.data("trigger-element",this.getTriggerElement()),this.$target},removeTarget:function(){this.$target.remove(),this.$target=null,this.$contentElement=null},getTitleElement:function(){return this.getTarget().find("."+s+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+s+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return t(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return t(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if(void 0!==t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return void 0!==t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return void 0!==t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?("rtl"!==this.options.direction||e.hasClass(r)||e.addClass(r),e.html(t)):e.remove()},hasContent:function(){return this.getContent()},canEmptyHide:function(){return this.options.hideEmpty&&"html"===this.options.type},getIframe:function(){var e=$("<iframe></iframe>").attr("src",this.getUrl()),i=this;return $.each(this._defaults.iframeOptions,function(t){void 0!==i.options.iframeOptions[t]&&e.attr(t,i.options.iframeOptions[t])}),e},getContent:function(){var t;if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=$(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(t){throw new Error("Unable to get popover content. Invalid selector specified.")}}else this.content||(t="",t=$.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,this.content)||(t=this.$element.next())&&t.hasClass(s+"-content")&&(this.content=t);return this.content},setContent:function(t){var e=this.getTarget(),i=this.getContentElement();"string"==typeof t?i.html(t):t instanceof $&&(i.html(""),(this.options.cache?t:t.clone(!0,!0)).removeClass(s+"-content").appendTo(i)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(e){var i=this;this.xhr||(this.xhr=$.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(t,e){i.options.async.before&&i.options.async.before(i,t,e)},success:function(t){i.bindBodyEvents(),e&&$.isFunction(e)?i.content=e.apply(i.$element[0],[t]):i.content=t,i.setContent(i.content),i.getContentElement().removeAttr("style"),i.displayContent(),i.options.async.success&&i.options.async.success(i,t)},complete:function(){i.xhr=null},error:function(t,e){i.options.async.error&&i.options.async.error(i,t,e)}}))},bindBodyEvents:function(){p||(this.options.dismissible?f?c.off("touchstart.popover").on("touchstart.popover",$.proxy(this.bodyTouchStartHandler,this)):(c.off("keyup.popover").on("keyup.popover",$.proxy(this.escapeHandler,this)),c.off("click.popover").on("click.popover",$.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&c.off("touchend.popover").on("touchend.popover",$.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(t){var e=this;(e=t&&this.options.selector?this.delegate(t.currentTarget):e)._timeout&&clearTimeout(e._timeout),e._enterTimeout=setTimeout(function(){e.getTarget().is(":visible")||e.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyTouchStartHandler:function(t){var e=this,i=$(t.currentTarget);i.on("touchend",function(t){e.bodyClickHandler(t),i.off("touchend")}),i.on("touchmove",function(){i.off("touchend")})},bodyClickHandler:function(t){for(var e,i,n=p=!0,o=0;o<u.length;o++){var s=h(u[o]);if(s&&s._opened){var a=s.getTarget().offset(),r=a.left,l=a.top,c=a.left+s.getTarget().width(),a=a.top+s.getTarget().height();if(s=void 0,i={x:0,y:0},"touchstart"===(e=t).type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(s=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],i.x=s.pageX,i.y=s.pageY):"mousedown"!==e.type&&"mouseup"!==e.type&&"click"!==e.type||(i.x=e.pageX,i.y=e.pageY),r<=i.x&&i.x<=c&&l<=i.y&&i.y<=a){n=!1;break}}}n&&d()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",$.proxy(this.mouseenterHandler,this)).on("mouseleave",$.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",$.proxy(this.hide,this,!0))},getPlacement:function(t){var e=this.options.container,i=e.innerWidth(),n=e.innerHeight(),o=e.scrollTop(),e=e.scrollLeft(),e=Math.max(0,t.left-e),t=Math.max(0,t.top-o),o="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement,s="horizontal"===o,a="vertical"===o;return"auto"===o||s||a?o=e<i/3?t<n/3?s?"right-bottom":"bottom-right":t<2*n/3?a?t<=n/2?"bottom-right":"top-right":"right":s?"right-top":"top-right":e<2*i/3?t<n/3?s?e<=i/2?"right-bottom":"left-bottom":"bottom":t<2*n/3?s?e<=i/2?"right":"left":t<=n/2?"bottom":"top":s?e<=i/2?"right-top":"left-top":"top":t<n/3?s?"left-bottom":"bottom-left":t<2*n/3?a?t<=n/2?"bottom-left":"top-left":"left":s?"left-top":"top-left":"auto-top"===o?o=e<i/3?"top-right":e<2*i/3?"top":"top-left":"auto-bottom"===o?o=e<i/3?"bottom-right":e<2*i/3?"bottom":"bottom-left":"auto-left"===o?o=t<n/3?"left-top":t<2*n/3?"left":"left-bottom":"auto-right"===o&&(o=t<n/3?"right-bottom":t<2*n/3?"right":"right-top"),o},getElementPosition:function(){var t,e=this.$element[0].getBoundingClientRect(),i=this.options.container,n=i.css("position");return i.is(v.body)||"static"===n?$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||e.width,height:this.$element[0].offsetHeight||e.height}):"fixed"===n?(t=i[0].getBoundingClientRect(),{top:e.top-t.top+i.scrollTop(),left:e.left-t.left+i.scrollLeft(),width:e.width,height:e.height}):"relative"===n?{top:this.$element.offset().top-i.offset().top,left:this.$element.offset().left-i.offset().left,width:this.$element[0].offsetWidth||e.width,height:this.$element[0].offsetHeight||e.height}:void 0},getTargetPositin:function(t,e,i,n){var o=t,t=this.options.container,s=this.$element.outerWidth(),a=this.$element.outerHeight(),r=v.documentElement.scrollTop+t.scrollTop(),t=v.documentElement.scrollLeft+t.scrollLeft(),l={},c=null,h=this.options.arrow?20:0,d=s<10+h?h:0,u=a<10+h?h:0,h=v.documentElement.clientHeight+r,r=v.documentElement.clientWidth+t,p=0<o.left+o.width/2-d,f=o.left+o.width/2+d<r,g=0<o.top+o.height/2-u,m=o.top+o.height/2+u<h;switch(e){case"bottom":l={top:o.top+o.height,left:o.left+o.width/2-i/2};break;case"top":l={top:o.top-n,left:o.left+o.width/2-i/2};break;case"left":l={top:o.top+o.height/2-n/2,left:o.left-i};break;case"right":l={top:o.top+o.height/2-n/2,left:o.left+o.width};break;case"top-right":l={top:o.top-n,left:p?o.left-d:10},c={left:p?Math.min(s,i)/2+d:_};break;case"top-left":l={top:o.top-n,left:o.left-i+o.width+(f?d:-10)},c={left:f?i-Math.min(s,i)/2-d:_};break;case"bottom-right":l={top:o.top+o.height,left:p?o.left-d:10},c={left:p?Math.min(s,i)/2+d:_};break;case"bottom-left":l={top:o.top+o.height,left:o.left-i+o.width+(f?d:-10)},c={left:f?i-Math.min(s,i)/2-d:_};break;case"right-top":l={top:o.top-n+o.height+(m?u:-10),left:o.left+o.width},c={top:m?n-Math.min(a,n)/2-u:_};break;case"right-bottom":l={top:g?o.top-u:10,left:o.left+o.width},c={top:g?Math.min(a,n)/2+u:_};break;case"left-top":l={top:o.top-n+o.height+(m?u:-10),left:o.left-i},c={top:m?n-Math.min(a,n)/2-u:_};break;case"left-bottom":l={top:g?o.top-u:10,left:o.left-i},c={top:g?Math.min(a,n)/2+u:_}}return l.top+=this.getOffsetTop(),l.left+=this.getOffsetLeft(),{position:l,arrowOffset:c}}},$.fn[o]=function(e,i){var n=[],t=this.each(function(){var t=$.data(this,"plugin_"+o);t?"destroy"===e?t.destroy():"string"==typeof e&&n.push(t[e]()):(e?"string"==typeof e?"destroy"===e||i||(t=new g(this,null),n.push(t[e]())):"object"==typeof e&&(t=new g(this,e)):t=new g(this,null),$.data(this,"plugin_"+o,t))});return n.length?n:t},Toast.Popovers={show:function(t,e){(e?$(t).popover(e):$(t)).popover("show")},hide:function(t){$(t).popover("hide")},create:function(t,e){e=e||{},$(t).popover(e)},isCreated:function(t){var i=!0;return $(t).each(function(t,e){i=i&&void 0!==$(e).data("plugin_"+o)}),i},hideAll:function(){d()},onHideAll:function(t){i=t},updateContent:function(t,e){var i,t=$(t).data("plugin_"+o);t&&(i=t.getCache(),t.options.cache=!1,t.options.content=e,t._opened?(t._opened=!1,t.show()):t.isAsync()?t.setContentASync(e):t.setContent(e),t.options.cache=i)},updateContentAsync:function(t,e){var i,n,t=$(t).data("plugin_"+o);t&&(i=t.getCache(),n=t.options.type,t.options.cache=!1,t.options.url=e,t._opened?(t._opened=!1,t.show()):(t.options.type="async",t.setContentASync(t.content)),t.options.cache=i,t.options.type=n)},setDefaultOptions:function(t){n=$.extend({},n,t)}}},"function"==typeof define&&define.amd?define("toast/libs/popover",t):"object"==typeof exports?module.exports=t():t()}((window,document)),!function(t){"use strict";"function"==typeof define&&define.amd?define("toast/libs/rangeslider",t):"object"==typeof exports?module.exports=t(require()):t()}(function(){"use strict";Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t};var t,s="rangeslider",a=0,r=((t=document.createElement("input")).setAttribute("type","range"),"text"!==t.type),l={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},c={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function i(t,e){var i=function(t){for(var e,i=[],n=t.parentNode;(e=n)&&(0===e.offsetWidth||0===e.offsetHeight||!1===e.open);)i.push(n),n=n.parentNode;return i}(t),n=i.length,o=[],s=t[e];function a(t){void 0!==t.open&&(t.open=!t.open)}if(n){for(var r=0;r<n;r++)o[r]=i[r].style.cssText,i[r].style.setProperty?i[r].style.setProperty("display","block","important"):i[r].style.cssText+=";display: block !important",i[r].style.height="0",i[r].style.overflow="hidden",i[r].style.visibility="hidden",a(i[r]);for(var s=t[e],l=0;l<n;l++)i[l].style.cssText=o[l],a(i[l])}return s}function n(t,e){t=parseFloat(t);return Number.isNaN(t)?e:t}function o(t){return t.charAt(0).toUpperCase()+t.substr(1)}function h(t,e){if(this.$window=$(window),this.$document=$(document),this.$element=$(t),this.options=$.extend({},l,e),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.onHandleDown=this.options.onHandleDown,this.onHandleMove=this.options.onHandleMove,this.DIMENSION=c.orientation[this.orientation].dimension,this.DIRECTION=c.orientation[this.orientation].direction,this.DIRECTION_STYLE=c.orientation[this.orientation].directionStyle,this.COORDINATE=c.orientation[this.orientation].coordinate,this.polyfill&&r)return!1;this.identifier="js-"+s+"-"+a++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=$('<div class="'+this.options.fillClass+'" />'),this.$handle=$('<div class="'+this.options.handleClass+'" />'),this.$range=$('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=$.proxy(this.handleDown,this),this.handleMove=$.proxy(this.handleMove,this),this.handleEnd=$.proxy(this.handleEnd,this),this.init();var i,n,o=this;this.$window.on("resize."+this.identifier,(i=function(){!function(t,e){var i=Array.prototype.slice.call(arguments,2);setTimeout(function(){return t.apply(null,i)},e)}(function(){o.update(!1,!1)},300)},n=(n=20)||100,function(){var t;return i.debouncing||(t=Array.prototype.slice.apply(arguments),i.lastReturnVal=i.apply(window,t),i.debouncing=!0),clearTimeout(i.debounceTimeout),i.debounceTimeout=setTimeout(function(){i.debouncing=!1},n),i.lastReturnVal})),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(t,e){e&&e.origin===o.identifier||(e=t.target.value,t=o.getPositionFromValue(e),o.setPosition(t))})}return h.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},h.prototype.update=function(t,e){this.$handle&&this.$range&&this.$element&&((t=t||!1)&&(this.min=n(this.$element[0].getAttribute("min"),0),this.max=n(this.$element[0].getAttribute("max"),100),this.value=n(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=n(this.$element[0].getAttribute("step"),1)),this._contentScale=this.$element.attr("data-content-scale"),this._contentScale||(this._contentScale=1),this.handleDimension=i(this.$handle[0],"offset"+o(this.DIMENSION)),this.rangeDimension=i(this.$range[0],"offset"+o(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension*this._contentScale/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,e))},h.prototype.handleDown=function(t){var e,i;t.preventDefault(),t.button&&0!==t.button||(this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),this._contentScale=this.$element.attr("data-content-scale"),this._contentScale||(this._contentScale=1),(" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass),t=this.getRelativePosition(t),e=this.$range[0].getBoundingClientRect()[this.DIRECTION],e=this.getPositionFromNode(this.$handle[0])-e,i="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos,i/=this._contentScale,this.setPosition(i),e<=t&&t<e+this.handleDimension&&(this.grabPos=t-e),this.onHandleDown&&"function"==typeof this.onHandleDown&&this.onHandleDown(this.value))},h.prototype.handleMove=function(t){t.preventDefault();t=this.getRelativePosition(t),t="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;t/=this._contentScale,this.setPosition(t),this.onHandleMove&&"function"==typeof this.onHandleMove&&this.onHandleMove(this.value)},h.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(t,e,i){return t<e?e:i<t?i:t},h.prototype.setPosition=function(t,e){var i;void 0===e&&(e=!0),t=this.getValueFromPosition(this.cap(t,0,this.maxHandlePos)),i=this.getPositionFromValue(t),this.$fill[0].style[this.DIMENSION]=i+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=i+"px",this.setValue(t),this.position=i,this.value=t,e&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,t)},h.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},h.prototype.getRelativePosition=function(t){var e=o(this.COORDINATE),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],n=0;return void 0!==t.originalEvent["client"+e]?n=t.originalEvent["client"+e]:t.originalEvent.touches&&t.originalEvent.touches[0]&&void 0!==t.originalEvent.touches[0]["client"+e]?n=t.originalEvent.touches[0]["client"+e]:t.currentPoint&&void 0!==t.currentPoint[this.COORDINATE]&&(n=t.currentPoint[this.COORDINATE]),n-i},h.prototype.getPositionFromValue=function(t){t=(t-this.min)/(this.max-this.min);return Number.isNaN(t)?0:t*this.maxHandlePos},h.prototype.getValueFromPosition=function(t){t/=this.maxHandlePos||1,t=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min;return Number(t.toFixed(this.toFixed))},h.prototype.setValue=function(t){t===this.value&&""!==this.$element[0].value||this.$element.val(t).trigger("input",{origin:this.identifier})},h.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+s),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),this.$element.remove()},$.fn[s]=function(i){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=$(this),e=t.data("plugin_"+s);e||t.data("plugin_"+s,e=new h(this,i)),"string"==typeof i&&e[i].apply(e,n)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"}),define("toast/libs",["./libs/hammer","./libs/ImageViewer","./libs/dragdealer","./libs/crypto","./libs/perfect-scrollbar","./libs/spectrum","./libs/Drag","./libs/Drop","./libs/dialog","./libs/draggable","./libs/Sketchpad","./libs/popover","./libs/rangeslider"],function(t,e,i,n,o){Toast.Hammer=t,Toast.ImageViewer=e,Toast.Dragdealer=i,Toast.CryptoJS=n,Toast.PerfectScrollbar=o}),define("toast/core",["exports","strings","./events","./libs"],function(t,e){return Toast.version="5.9.445",Toast.setdev=function(t,e){Toast.dev=t,Toast.debug=Toast.dev,Toast.debug?$(document.body).removeAttr("oncontextmenu"):$(document.body).attr("oncontextmenu","return false;"),!0===Toast.debug&&window.console&&window.console.log?Toast._msieVersion&&Toast._msieVersion<10?Toast.log=Function.prototype.bind.call(console.log,console):Toast.log=console.log.bind(console):Toast.log=function(){},t&&"object"==typeof brackets&&brackets.app.showDeveloperTools()},Toast.Strings=e,Toast.getModule=require,Toast.load=require,void 0===window.isMobileDevice&&void 0===window.isMobile||(Toast.isMobile=Toast.isMobileDevice=window.isMobileDevice||window.isMobile,Toast.isMobileDevice&&(Toast.isMobileDevice=!0)),void 0!==window.isTablet&&(Toast.isTablet=window.isTablet),void 0!==window.isAndroid&&(Toast.isAndroid=window.isAndroid,Toast.isAndroid)&&(Toast.isAndroid=!0),Toast}),define("toast/core/Model",["../core"],function(t){"use strict";var e=Backbone.Model.extend({initialize:function(t){for(var e in this.attributes)e!=this.idAttribute&&this.defineProperty(e)},moveUp:function(t){t=this.__children__.indexOf(t);return-1!=t?(this.__children__.splice(t-1,0,this.__children__.splice(t,1)[0]),t-1):-1},moveFirst:function(t){return this.moveAtIndex(t,0)},moveDown:function(t){t=this.__children__.indexOf(t);return-1!=t?(this.__children__.splice(t+1,0,this.__children__.splice(t,1)[0]),t+1):-1},moveLast:function(t){return this.moveAtIndex(t,this.__children__.length-1)},moveAtIndex:function(t,e){t=this.__children__.indexOf(t);return-1!=t?(this.__children__.splice(e,0,this.__children__.splice(t,1)[0]),e):-1},remove:function(t){var e=this.__children__.indexOf(t);-1!=e&&(t.__children__=[],this.__children__.splice(e,1))},childIndexOf:function(t){return this.__children__.indexOf(t)},hasChildren:function(){return this.__children__&&0<this.__children__.length},topParent:function(){for(var t=this;t.__parent__;)t=t.__parent__;return t},rect:function(){return{left:this.get("left"),top:this.get("top"),width:this.get("width"),height:this.get("height")}},isDraggable:function(){return!this.get("locked")&&!this.get("hidden")&&this.get("draggable")},isRemovable:function(){return!(this.get("locked")||this.get("hidden")||this.get("readonly")||!this.get("removable"))},copyAttrs:function(t){this.set("locked",t.get("locked")),this.set("hidden",t.get("hidden")),this.set("selected",t.get("selected")),this.set("draggable",!0),this.set("isModified",!1),this.set("copyable",t.get("copyable")),this.set("removable",t.get("removable")),this.set("droppable",t.get("droppable"))},cleanAttrs:function(t){delete t.__parent__,delete t.__children__,delete t.selected,delete t.draggable,delete t.isModified,t.copyable&&delete t.copyable,t.removable&&delete t.removable,t.droppable&&delete t.droppable,t.thumbUrl&&delete t.thumbUrl,t.orgid&&delete t.orgid},output:function(t){var e=_.clone(this.attributes);return e.children=[],this.cleanAttrs(e),e.subpages&&(e.subpages=JSON.parse(JSON.stringify(e.subpages))),this.__children__&&0<this.__children__.length&&this._output(this,e),e},_output:function(t,i){_.each(t.__children__,function(t){var e=_.clone(t.attributes);e.children=[],this.cleanAttrs(e),i.children.push(e),0<t.__children__.length&&this._output(t,e)},this)}});return t.Model=e}),define("toast/core/Collection",["../core","./Model"],function(t,e){"use strict";var i=Backbone.Collection.extend({attributes:{},initialize:function(t){for(var e in t=t||{},1<arguments.length&&(t=arguments[1]),this.attributes=_.extend({},t.attributes),this.attributes)this.hasOwnProperty(e)||this.defineProperty(e)},attr:function(t){if(2!=arguments.length)return this.attributes[t];this.attributes[t]=arguments[1]},moveUp:function(t){var e=this.indexOf(t);return 1<e?(this.remove(t,{silent:!0}),this.add(t,{at:e-1,silent:!0}),e-1):-1},moveFirst:function(t){return this.moveAtIndex(t,0)},moveDown:function(t){var e=this.indexOf(t);return e<this.models.length?(this.remove(t,{silent:!0}),this.add(t,{at:e+1,silent:!0}),e+1):-1},moveLast:function(t){return this.moveAtIndex(t,this.length-1)},moveAtIndex:function(t,e){return e<this.models.length?(this.remove(t,{silent:!1}),this.add(t,{at:e,silent:!1}),e):-1},remove:function(t,e){if(_.isArray(t))for(var i=0,n=t.length;i<n;i++){var o=t[i],s=this.indexOf(o);o.modelIndex=s}else{s=this.indexOf(t);t.modelIndex=s}Backbone.Collection.prototype.remove.call(this,t,e)},load:function(t,e){},createWithAttrs:function(t,e){e=e||{},t=$.extend(!0,{},t);var i=new this.model(t);return this.createChildren(i,t),i.unset("children",{silent:!0}),this.add(i,e),i},createChildren:function(i,t){t=t.children;_.each(t,function(t){t=$.extend(!0,{},t);var e=new this.model(t);(e.__parent__=i).__children__||(i.__children__=[]),i.__children__.push(e),t.children&&this.createChildren(e,t)},this)},isEmpty:function(){if(!this.length)return!0;if(1===this.length&&this.at(0).__attributes__)return!0;return!1},isFirst:function(t){t=this.indexOf(t);return!!(this.at(0).__attributes__&&1===t||0===t)},isLast:function(t){return this.indexOf(t)+1===this.length},output:function(e){return this.map(function(t){return t.output(e)})}});return i.Attributes=Backbone.Model.extend({initialize:function(t){for(var e in this.__attributes__=!0,this.attributes)e!=this.idAttribute&&this.defineProperty(e)},hasChildren:function(){return!1},output:function(t){return this.toJSON()}}),t.Collection=i}),define("toast/core/Contents",["../core","./Collection","./Model"],function(t,s,e){"use strict";s.prototype;var i=s.extend();return _.extend(i.prototype,{load:function(t,i){this.reset(),"string"==typeof t&&(t=JSON.parse(t));var e,n=$.extend(!0,{},t.contents),o=(t.contents&&delete t.contents,this.attributes);for(e in this.attributes=_.extend(o,t),this.attributes)this.hasOwnProperty(e)||this.defineProperty(e);(o=new s.Attributes(_.merge({},this.attributes))).view=this.view,this.view._model=o,this.add(o,{silent:!0}),_.each(n,function(t){var e=new this.model(t);this.createChildren(e,t),e.unset("children",{silent:!0}),this.add(e,i)},this)},moveAtIndex:function(t,e){return e<this.models.length?(e=Math.max(1,e),this.remove(t,{silent:!0}),this.add(t,{at:e,silent:!0}),e):-1}}),t.Contents=i}),define("toast/actions/Action",["../core"],function(Toast){"use strict";var Action=Toast.Action=function(t,e,i){e=e||{},i=i||{},this.id=Toast.UUID4().prefix("a"),this.view=t,this.properties=e,this.options=i,this.initialize.apply(this,arguments)};return _.extend(Action.prototype,Backbone.Events,{initialize:function(t,e,i){},execute:function(){}}),_.extend(Action,{create:function(view,action,options){var Action=eval("Toast.Action."+action.name),instance;return Action?(instance=new Action(view,action.properties,options),instance):null}}),Action.extend=Toast.extend,Toast.Action=Action}),define("toast/actions/LinkUrl",["../core","./Action"],function(a,t){"use strict";var r=a.Strings,n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){var t,e;if(this.properties.file)t=a.FileAssets.url(this.properties.file);else{if(t=this.properties.url,_.isEmpty(t))return;if(7<t.length&&"mailto:"===t.substr(0,7).toLowerCase())return void(window.location.href=t);if(4<t.length&&"tel:"===t.substr(0,4).toLowerCase())return void(window.location.href=t);(e="/"!==t.substr(0,1)&&"./"!==t.substr(0,2)&&"../"!==t.substr(0,3)?e:!0)||"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.properties.url)}if(!_.isEmpty(t))if(a.urlParams.get("preview")&&e)alert(r.ERROR_PREVIEW_RELATIVE_PATH);else{var i,n,o=t.getFileExtension().toLowerCase(),s=_.find(a.FileAssets.fileTypes,function(t){if(t.toLowerCase()===o)return!0});if(e&&"undefined"!=typeof app&&app.shell){switch(o){case"exe":case"com":case"bat":return void app.shell.exec(t)}if(-1!==t.lastIndexOf(".exe")||-1!==t.lastIndexOf(".com"))return void app.shell.exec(t);if(!o&&!s)return void app.shell.openDir(t)}if(s){if("undefined"!=typeof app&&app.shell)return void app.shell.saveAs(t);if(a.PathUtils.isSameDomain(t,location.href))return void a.saveToDisk(t)}"undefined"!=typeof app&&app.shell?app.shell.openWindow(t):_.isEmpty(this.properties.formData)?this.properties.openWindow?window.open(t):window.location.href=t:(i=$("<form />",{name:"linkPopupForm"}),_.each(this.properties.formData,function(t){_.isEmpty(t.name)||_.isEmpty(t.value)||(t=$("<input />",{type:"hidden",name:t.name}),i.append(t))}),$(document.body).append(i),window.open("","linkUrlPopup_"+this.id),(n=document.linkPopupForm).action=t,n.method=this.properties.formMethod,n.target="linkUrlPopup_"+this.id,_.each(this.properties.formData,function(t){_.isEmpty(t.name)||_.isEmpty(t.value)||(n[t.name].value=t.value)}),n.submit(),i.remove())}}}),a.Action.LinkUrl=t}),define("toast/actions/GotoPage",["../core","./Action"],function(e,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){var t;_.isUndefined(this.properties.pageLabel)?_.isEmpty(this.properties.selectPage)?_.isUndefined(this.properties.pageNumber)||(e.BookZoom._off(),e.Book.move(this.properties.pageNumber,{isLogical:!0,silent:!1}),e.lazy(function(){e.BookZoom._on()},300)):(e.BookZoom._off(),"firstPage"===this.properties.selectPage?e.Book.moveToFirst():"previousPage"===this.properties.selectPage?e.Book.previous():"back"===this.properties.selectPage?e.Book.back():"nextPage"===this.properties.selectPage?e.Book.next():"lastPage"===this.properties.selectPage&&e.Book.moveToLast(),e.lazy(function(){e.BookZoom._on()},300)):(t=e.project.findPage({name:"label",value:this.properties.pageLabel}))&&(e.BookZoom._off(),e.Book.move(t.index+1),e.lazy(function(){e.BookZoom._on()},300))}}),e.Action.GotoPage=t}),define("toast/actions/Visible",["../core","./Action"],function(i,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i),_.isUndefined(this.properties.visible)&&(this.properties.visible="toggle"),_.isEmpty(this.properties.targets)&&(this.properties.targets=[t.model.id])},execute:function(){var e;_.each(this.properties.targets,function(t){t=i.Book.find({id:t});t&&("toggle"===this.properties.visible?(t.properties.visible=!t.properties.visible,t.view.toggle()):"visible"===this.properties.visible?(t.properties.visible=!0,t.view.show()):(t.properties.visible=!1,t.view.hide()),t.block)&&(e=t)},this),e&&e.view.viewController.topParentViewController().responsiveLayout()}}),i.Action.Visible=t}),define("toast/actions/StopAllSound",["../core","./Action"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i),this.options.excludes||(this.options.excludes=[])},execute:function(){var t=$("audio");_.each(t,function(t){var e=$(t);if(e.parent(".audio-player").length)return!0;var i=e.closest(".toast-object");if(0!==i.length){var n=this.view.viewController._find({id:i.attr("id")});if(n&&n.view&&!this._skip(i)&&"function"==typeof n.view.stop)return n.view.stop(),!0}0===t.readyState||this._skip(e)||"tt-bgsound"===e.attr("id")||(t.pause(),!0!==this.options.reset)||_.isUndefined(t.currentTime)||(t.currentTime=0)},this)},_skip:function(e){var i;return _.any(this.options.excludes,function(t){if(t===e.attr("id"))return i=!0}),i}}),t.Action.StopAllSound=e}),define("toast/actions/ToggleSound",["../core","./Action","./StopAllSound"],function(n,t,e){"use strict";var o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i),this._asset=n.AudioAssets.get(this.properties.asset),_.isEmpty(this._asset)||(_.isEmpty(this._asset.id)?_.isEmpty(this.properties.url)||(this._assetid=this.properties.url.getBaseName().getFilenameWithoutExtension()):this._assetid=this._asset.id,this._assetid&&(this._$audio=this.view.viewController.$el.children("#"+this._assetid),_.isUndefined(this._$audio[0]))&&(this._$audio=$("<audio />"),this._$audio.attr({id:this._assetid,src:this._getUrl()}),this._$audio.hide(),this.view.viewController.$el.append(this._$audio),this.view.__on__(n.Events.PAGE_DID_CHANGE,this._onPageDidChange,this)))},execute:function(){_.isEmpty(this._assetid)||(this._stopAllSoundOnce(),this._playAndPause())},_getUrl:function(){var t;return this._asset.url?t=this._asset.url:this.properties.url&&-1===(t=this.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.properties.url),t=t&&n.StringUtils.replaceTemplate(t).encodeFilePath()},_stopAllSoundOnce:function(){new e(this.view,this.properties,{excludes:[this._asset.id],reset:!0}).execute()},_playAndPause:function(){this._$audio[0].paused?this._$audio[0].play():this._$audio[0].pause()},_onPageDidChange:function(t,e){_.isUndefined(this._$audio[0])||0===this._$audio[0].readyState||this.view.viewController.current()||(this._$audio[0].pause(),_.isUndefined(this._$audio[0].currentTime))||(this._$audio[0].currentTime=0)},_onEnded:function(t){this._ended=!0}}),n.Action.ToggleSound=t}),define("toast/actions/PlaySound",["../core","./Action","./StopAllSound"],function(n,t,e){"use strict";var o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i),this._audioPlayer=this.properties.audioPlayer,this._audioPlayer||(this._asset=n.AudioAssets.get(this.properties.asset),_.isEmpty(this._asset))||(_.isEmpty(this._asset.id)?_.isEmpty(this.properties.url)||(this._assetid=this.properties.url.getBaseName().getFilenameWithoutExtension()):this._assetid=this._asset.id,this._assetid&&(this._$audio=this.view.viewController.$el.children("#"+this._assetid),_.isUndefined(this._$audio[0]))&&(this._$audio=$("<audio />"),this._$audio.attr({id:this._assetid,src:this._getUrl()}),this._$audio.hide(),this.view.viewController.$el.append(this._$audio),this.view.__on__(n.Events.PAGE_DID_CHANGE,this._onPageDidChange,this)))},execute:function(){var t;this._audioPlayer?(t=n.Book.find({id:this._audioPlayer[0]}))&&t.view&&(_.isEmpty(this.properties.asset)&&_.isEmpty(this.properties.url)||t.view.playFile(this.properties.asset,this.properties.url,{replay:this.properties.replay})):_.isEmpty(this._assetid)||(this._stopAllSoundOnce(),this._play())},_getUrl:function(){var t;return this._asset.url?t=this._asset.url:this.properties.url&&-1===(t=this.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.properties.url),t=t&&n.StringUtils.replaceTemplate(t).encodeFilePath()},_stopAllSoundOnce:function(){new e(this.view,this.properties,{excludes:[this._asset.id],reset:!0}).execute()},_play:function(){0!==this._$audio[0].readyState&&(this._$audio[0].pause(),this.properties.replay&&!_.isUndefined(this._$audio[0].currentTime)&&(this._$audio[0].currentTime=0),this._$audio[0].play())},_stop:function(){_.isUndefined(this._$audio[0])||0===this._$audio[0].readyState||(this._$audio[0].pause(),_.isUndefined(this._$audio[0].currentTime))||(this._$audio[0].currentTime=0)},_onPageDidChange:function(t,e){this.view.viewController.current()||this._stop()}}),n.Action.PlaySound=t}),define("toast/actions/ToggleAudioPlayer",["../core","./Action"],function(e,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){_.each(this.properties.targets,function(t){t=e.Book.find({id:t});t&&(t.view.isVisible()?(t.view.hide(),t.view.pause()):(t.view.show(),!0===this.properties.autoplay&&t.view.play()))},this)}}),e.Action.ToggleAudioPlayer=t}),define("toast/actions/StopSound",["../core","./Action"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){var t=$("audio");_.each(t,function(e){var i=$(e);_.any(this.properties.assets,function(t){return t===i.attr("id")?(0!==e.readyState&&(e.pause(),!0!==this.properties.reset||_.isUndefined(e.currentTime)||(e.currentTime=0)),!0):t===i.attr("data-audio-id")?(0!==e.readyState&&e.pause(),i.parents(".audioplayer").removeClass("audioplayer-playing"),!0!==this.properties.reset||_.isUndefined(e.currentTime)||(e.currentTime=0),i.trigger("timeupdate"),!0):void 0},this)},this)}}),t.Action.StopSound=e}),define("toast/utils/StringUtils",["../core"],function(e){"use strict";_.extend(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")},repeat:function(){return new Array(1+n).join(this)},isNumeric:function(){return!jQuery.isArray(this)&&0<=this-parseFloat(this)+1},encodeFilePath:function(){var t;return"file:"!==window.document.location.href.substr(0,5)?this:(t=this.split("/").map(function(t){return encodeURIComponent(t)}).join("/"),e.isBrackets&&"win"===e.platform?"file:///"+t:t)},protocol:function(){return this.substr(0,5)},camelCase:function(){return this.replace(/(?:^|\s)\w/g,function(t){return t.toUpperCase()})},pascalCase:function(t,e){return arguments.length<2&&(e=""),this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0==e?t.toUpperCase():t.toLowerCase()}).replace(/\-/g,e)},isTag:function(){var t;return!!this.length&&"<"===(t=this.trim()).substr(0,1)&&">"===t.substr(t.length-1,1)},url:function(){if(this.isTag(this)){var t=this.match(/\bhttps?:\/\/\S+/gi);if(t)return t[0]}return this},removeTags:function(i){i=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return this.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(t,e){return-1<i.indexOf("<"+e.toLowerCase()+">")?t:""})},getBaseName:function(){var t=this.lastIndexOf("/");return t===this.length-1?this.slice(this.lastIndexOf("/",this.length-2)+1,-1):-1!==t?this.slice(t+1):-1!==(t=this.lastIndexOf("}"))?this.slice(t+1):this},getDirectoryPath:function(){return this.substr(0,this.lastIndexOf("/")+1)},getParentPath:function(){return"/"===this?"":this.substring(0,this.lastIndexOf("/",this.length-2)+1)},getFileExtension:function(){var t=this.lastIndexOf(".");return-1===t||"/"===this.charAt(t+1)||"\\"===this.charAt(t+1)?"":this.substr(t+1)},getFilenameWithoutExtension:function(){var t=this.lastIndexOf(".");return-1===t?this:this.slice(0,t)},prefix:function(t){return t+this},suffix:function(t){return this+t},namespace:function(t,e){for(var i=this.split(e||"."),n=window,o="",s=0,a=i.length;s<a;s++)n[o=i[s]]=n[o]||{},n=n[o];return t&&(n[o]=t),n},isMultibyte:function(){for(var t=0,e=this.length;t<e;t++)if(255<this.charCodeAt(t))return!0;return!1},replaceAll:function(t,e){return this.split(t).join(e)},secondsToTime:function(){var t=this.timeToSeconds(),e=Math.floor(t/3600),i=Math.floor(t%3600/60),t=Math.ceil(t%3600%60);return(0==e?"":(0<e&&e.toString().length,e+":"))+(i.toString().length,i)+":"+(t.toString().length<2?"0"+t:t)},timeToSeconds:function(){var t=this.split(":"),e=0,i=0,n=0;return 3<=t.length?(e=Number(t[0].trim()),i=Number(t[1].trim()),n=Number(t[2].trim())):2==t.length?(i=Number(t[0].trim()),n=Number(t[1].trim())):t.length<2&&(n=Number(t[0].trim())),360*e+60*i+n},zeropad:function(t){var e=this+"";return t<=e.length?e:new Array(t-e.length+1).join("0")+e}});var t=e.StringUtils={templateStrings:{}};return _.extend(t,{trim:function(t){return t.replace(/^\s+|\s+$/g,"")},repeat:function(t){return new Array(1+n).join(t)},isNumeric:function(t){return!jQuery.isArray(t)&&0<=t-parseFloat(t)+1},encodeFilePath:function(t){return"file:"===window.document.location.href.substr(0,5)&&(t=t.split("/").map(function(t){return encodeURIComponent(t)}).join("/"),e.isBrackets)&&"win"===e.platform?"file:///"+t:t},format:function(t){var i=[].slice.call(arguments,1);return t.replace(/\{(\d+)\}/g,function(t,e){return void 0!==i[e]?i[e]:t})},replaceTemplate:function(t,e,i){var n;return 1==arguments.length?_.isEmpty(t)?"":(n=t,_.any(this.templateStrings,function(t,e){if(-1!==n.indexOf("{"+e+"}"))return n=n.replace(new RegExp("{"+e+"}","g"),t),!0}),n):t.replace(new RegExp("{"+e+"}","g"),i)},regexEscape:function(t){return t.replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},jQueryIdEscape:function(t){return t.replace(/\./g,"\\.")},getLines:function(t){return t.split("\n")},offsetToLineNum:function(t,e){if(!Array.isArray(t))return t.substr(0,e).split("\n").length-1;for(var i=t,n=0,o=0;o<i.length;o++){if(!(n<e))return n===e?o:o-1;n+=i[o].length+1}return e<=n?o-1:void 0},endsWith:function(t,e){return-1!==t.indexOf(e,t.length-e.length)},urlSort:function(t,e){var i;function n(t){return t.lastIndexOf("/")+1<t.length}return t="win"===Sunshine.platform?(i=(n(t)?"1":"0")+t.toLowerCase(),(n(e)?"1":"0")+e.toLowerCase()):(i=t.toLowerCase(),e.toLowerCase()),i===t?0:t<i?1:-1},breakableUrl:function(t){return _.escape(t).replace(new RegExp(this.regexEscape("/"),"g"),"/&#8203;")},prettyPrintBytes:function(t,e){var i=1073741824,n=1024*i,o=t;if(0<=t&&t<1024)o=t+" B";else if(t<1048576)o=(t/1024).toFixed(e)+" KB";else if(t<i)o=(t/1048576).toFixed(e)+" MB";else if(t<n)o=(t/i).toFixed(e)+" GB";else if(n<=t)return(t/n).toFixed(e)+" TB";return o},truncate:function(t,e){var i;if(t.length>e)return(i=(t=t.substr(0,e)).lastIndexOf(" "))<e&&-1<i?t.substr(0,i):t},prettyXml:function(t){for(var e="",i=(t=t.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),n=0,o="other",s={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},a=0;a<i.length;a++){var r=i[a];if(r.match(/\s*<\?xml/))e+=r+"\n";else{var l=Boolean(r.match(/<.+\/>/)),c=Boolean(r.match(/<\/.+>/)),h=Boolean(r.match(/<[^!].*>/)),l=l?"single":c?"closing":h?"opening":"other",c=o+"->"+l,o=l,d="";n+=s[c];for(var u=0;u<n;u++)d+="\t";"opening->closing"==c?e=e.substr(0,e.length-1)+r+"\n":e+=d+r+"\n"}}return e},naturalCompare:function(t,e){var n,i,o=1,s=0,a=0,r=String.alphabet;function l(t,e,i){if(i){for(n=e;(i=l(t,n))<76&&65<i;)++n;return+t.slice(e-1,n)}return-1<(i=r&&r.indexOf(t.charAt(e)))?i+76:(i=t.charCodeAt(e)||0)<45||127<i?i:i<46?65:i<48?i-1:i<58?i+18:i<65?i-11:i<91?i+11:i<97?i-37:i<123?i+5:i-63}if((t+="")!=(e+=""))for(;o;)if(i=l(t,s++),o=l(e,a++),i<76&&o<76&&66<i&&66<o&&(i=l(t,s,s),o=l(e,a,s=n),a=n),i!=o)return i<o?-1:1;return 0}}),t}),define("toast/actions/PopupActionBase",["../core","./Action"],function(o,t){"use strict";var s,a=t.prototype,t=t.extend();return _.extend(t.prototype,a,{initialize:function(t,e,i){s=o.HtmlLoader.Popup,a.initialize.call(this,t,e,i),this.properties.scaleMode||(this.properties.scaleMode="showAll");var n={};switch(this.properties.scaleMode){case"fitWidth":n.fitWidth=!0;break;case"noScale":n.noScale=!0;break;default:n.showAll=!0}this.scaleMode=n},size:function(){return{width:this.properties.width,height:this.properties.height}},templateVars:function(){return{modalDialogMaxWidth:this.properties.width}},execute:function(){var t=Mustache.render(s,this.templateVars());this.$el=$(t),this.$el.attr("scale-mode",this.properties.scaleMode),$(document.body).append(this.$el),o.showLoading(!0,{el:this.$el.find(".modal-body")}),this.$container=$("<div />",{class:"popup-container"}),_.isEmpty(this.size().width)||this.$container.css("width",this.size().width+"px"),_.isEmpty(this.size().height)||this.$container.css("height",this.size().height+"px"),this.$container.append(this._$render=this._render()),!0===this.properties.scrollbarHidden?(this.$container.css("overflow","hidden"),"IFRAME"===this._$render[0].tagName&&this._$render.attr("scrolling","no")):TT.isMobileDevice&&(this.$container.css({"overflow-y":"auto","-webkit-overflow-scrolling":"touch"}),this.$container.css("width","auto")),this._$render.hide(),this.$modal=this.$el.find(".modal"),this.$modaDialog=this.$el.find(".modal-dialog"),this.$modalContent=this.$el.find(".modal-content"),this.$modalBody=this.$el.find(".modal-body"),this.$modalBody.append(this.$container),this.$el.find(".close").on("click",$.proxy(this._dismiss,this)),this.$el.on("click",$.proxy(this._modalClicked,this)),$(window).on("resize",$.proxy(this._updateView,this)),this._updateView(),"IFRAME"===this._$render[0].tagName?TT.lazy(function(){this._$render.on("load",$.proxy(this._didLoadContent,this)),this._didPopupMount()},0,this):this._didPopupMount()},_render:function(){return $("<div />")},_didPopupMount:function(){},_beforeDestroy:function(){},_destroy:function(){$(document.body).find(".popup-modal-wrapper").last().show()},_didLoadContent:function(){this._$render.show(),o.showLoading(!1,{el:this.$el.find(".modal-body")}),this._updateView()},_updateView:function(){var t,e,i,n=window.innerWidth,o=window.innerHeight;0!==this.$el.find(".modal-body").children(".close").length&&(n-=50),_.isUndefined(this._$render)||(o-=t=parseInt(this.$modaDialog.css("marginTop")),e=this.size(),o=Math.max(e.width/n,e.height/o),o=this.scaleMode.fitWidth?n<e.width?(o=e.width/n,i=e.width/o,e.height/o):(i=e.width,e.height):this.scaleMode.showAll?(i=e.width/o,e.height/o):(i=e.width,e.height),this.$container.css({width:i+"px",height:o+"px"}),this.$modalContent.css({width:this.$container.width()+"px",marginLeft:-Math.min(this.$container.width(),n)/2+"px"}),o+2*t>innerHeight?this.$el.addClass("scroll-acitivated"):this.$el.removeClass("scroll-acitivated"))},_modalClicked:function(t){$(t.target).closest(".modal-content").length||this._dismiss()},_dismiss:function(t){$(window).off("resize",$.proxy(this._updateView,this)),"IFRAME"===this._$render[0].tagName&&this._$render.off("load",$.proxy(this._didLoadContent,this)),this._beforeDestroy(),this.$el.remove(),this._destroy(),this.$el=null}}),t}),define("toast/actions/PopupMovie",["../core","../utils/StringUtils","./PopupActionBase"],function(n,t,e){"use strict";var o=e.prototype,e=e.extend();return _.extend(e.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i),_.isUndefined(this.properties.scrollbarHidden)&&(this.properties.scrollbarHidden=!0)},execute:function(){o.execute.call(this)},_render:function(){return"youtube"==this.properties.playerType?this._renderYoutube():this._renderDefaltVideo()},_renderDefaltVideo:function(){var t=$('<video controls preload="auto" />').css({margin:0,padding:0});return this.properties.autoplay&&t.attr("autoplay","autoplay"),t},_renderYoutube:function(){return $("<iframe />",{frameborder:0,allowfullscreen:""})},_didPopupMount:function(){var t,e,i=1===n.project.parsedVersion.VERSION_MAJOR&&n.project.parsedVersion.VERSION_MINOR<9?this.properties.openWindow:this.properties.playerType;"youtube"==i?t=this.properties.url:this.properties.asset?t=n.MovieAssets.url(this.properties.asset):this.properties.url&&(t=n.StringUtils.replaceTemplate(this.properties.url).encodeFilePath()),"youtube"==this.properties.playerType?(-1!=t.substring(1,7).indexOf("iframe")&&(e=$(t).attr("src")),-1==t.indexOf("/embed/")&&(e=t.replace("youtu.be/","www.youtube.com/embed/")),this.properties.autoplay&&(e+="?autoplay=1"),this._$render.attr("src",e)):((i=$("<source >")).attr("type","video/mp4"),i.attr("src",t),this._$render.append(i),this._$render.on("loadeddata",$.proxy(this._didLoadContent,this)),this._$render.load()),this._$render.on("click",$.proxy(this._videoClicked,this))},_didLoadContent:function(){o._didLoadContent.call(this)},_updateView:function(){this.$modaDialog.css("marginTop",0),o._updateView.call(this),this._$render.css({width:parseFloat(this.$container.css("width"))+"px",height:parseFloat(this.$container.css("height"))+"px"})},_dismiss:function(t){"default"===this.properties.playerType&&this._$render[0].removeEventListener("loadeddata",$.proxy(this._videoDidLoaded,this),!1),o._dismiss.call(this,t)},_videoClicked:function(t){t.stopPropagation()}}),n.Action.PopupMovie=e}),define("toast/actions/PopupImage",["../core","./Action"],function(a,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i=i||{start:0}),_.isUndefined(this.properties.startNo)||(this.options.start=this.properties.startNo-1),_.isUndefined(this.options.start)&&(this.options.start=0)},execute:function(){var e,t,i,n,o,s=this.properties.assets;_.isUndefined(s)||0==s.length||((e=$("<ul />",{class:"iviewer-ul"})).hide(),_.each(s,function(t){t=a.ImageAssets.url(t);e.append('<li><img src="'+t+'" data-title="'+this.properties.title+'"></li>')},this),$(document.body).append(e),i=!(s=!1),o=!(n=1),_.isUndefined(a.config.iviewer)||_.isUndefined(a.config.iviewer.zoomable)?_.isUndefined(this.properties.zoomable)||(s=this.properties.zoomable):s=a.config.iviewer.zoomable,t=s,_.isUndefined(a.config.iviewer)||_.isUndefined(a.config.iviewer.thumbnail)?_.isUndefined(this.properties.thumbnail)||(i=this.properties.thumbnail):i=a.config.iviewer.thumbnail,_.isUndefined(a.config.iviewer)||_.isUndefined(a.config.iviewer.defaultMaxZoomRatio)?_.isNumber(this.properties.maxZoomRatio)&&(n=Number(this.properties.maxZoomRatio)/100):n=a.config.iviewer.defaultMaxZoomRatio/100,_.isUndefined(a.config.iviewer)||_.isUndefined(a.config.iviewer.extractFit)||(o=a.config.iviewer.extractFit),s={sender:this,url:"data-original",zoomable:s,movable:t,title:this.properties.title,description:this.properties.description,backgroundColor:this.properties.backgroundColor,toolbarColor:this.properties.toolbarColor,number:!!_.isUndefined(this.properties.number)||this.properties.number,maxZoomRatio:n,extractFit:o,navbar:i,zIndex:99991,initialViewIndex:this.options.start,hidden:function(t){e.remove(),a.Book.enableAction(!0)}},this.__iviewer__=new a.ImageViewer(e[0],s),this.__iviewer__.show())}}),a.Action.PopupImage=t}),define("toast/actions/PopupFlash",["../core","./PopupActionBase"],function(i,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i),_.isUndefined(this.properties.scrollbarHidden)&&(this.properties.scrollbarHidden=!0)},execute:function(){i.isMobileDevice||n.execute.call(this)},_render:function(){return $("<div />",{id:this.id+"-flash"}).css({margin:0,padding:0,width:this.properties.width+"px",height:this.properties.height+"px"})},_didPopupMount:function(){_.isUndefined(this.properties.asset)||_.isEmpty(this.properties.asset)?_.isUndefined(this.properties.url)||_.isEmpty(this.properties.url)||-1===(t=this.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.properties.url):t=i.FlashAssets.url(this.properties.asset);var t,e={scale:"exactFit",allowScriptAccess:"always"};_.isEmpty(this.properties.bgcolor)?e.wmode="transparent":e.bgcolor=this._rgb2hex(this.properties.bgcolor),swfobject.embedSWF(t,this.id+"-flash","100%","100%","10",!1,{},e,{},$.proxy(this._swfLoadEvent,this))},_didLoadContent:function(){this._$render=this.$el.find("#"+this.id+"-flash"),n._didLoadContent.call(this)},_swfLoadEvent:function(e){if(!e.success||!e.ref)return!1;var i=this,n=setInterval(function(){var t;void 0!==e.ref.PercentLoaded&&e.ref.PercentLoaded()&&(clearInterval(n),t=setInterval(function(){100===e.ref.PercentLoaded()&&(i._didLoadContent(),clearInterval(t))},5))},5)},_rgb2hex:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}}),i.Action.PopupFlash=t}),define("toast/actions/PopupLayer",["../core","../utils/StringUtils","./PopupActionBase"],function(i,n,t){"use strict";var o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i),_.isUndefined(this.properties.extractFit)&&(this.properties.extractFit=!1)},_render:function(){return $("<iframe />",{allowTransparency:!0}).css({margin:0,padding:0,width:"100%",height:"100%",border:0,display:"none"})},_didPopupMount:function(){var t,e;_.isUndefined(this.properties.url)||_.isEmpty(this.properties.url)?_.isUndefined(this.properties.relativePath)||_.isEmpty(this.properties.relativePath)?_.isUndefined(this.properties.htmlfolder)||_.isEmpty(this.properties.htmlfolder)||(e=i.FolderAssets.get(this.properties.htmlfolder),e=n.replaceTemplate(e.url+"/"+e.htmlFilename).encodeFilePath()):(t=this.properties.relativePath,e=n.replaceTemplate("{ASSETS_DIR}"+t).encodeFilePath()):(-1===(e=(e=this.properties.url).isTag()?e.url():e).indexOf("../")&&-1===e.indexOf("./")&&"http:"!==e.protocol()&&"https"!==e.protocol()&&(e="http://"+this.properties.url),"campov.hmckmc.co.kr"===new URL(e).host&&(t=e.indexOf("://"),e=window.location.protocol+e.substring(t+1))),this._$render.attr("src",e)}}),i.Action.PopupLayer=t}),define("toast/actions/PopupWindow",["../core","../utils/StringUtils","./Action"],function(n,o,t){"use strict";var s=t.prototype,t=t.extend();return _.extend(t.prototype,s,{initialize:function(t,e,i){s.initialize.call(this,t,e,i)},execute:function(){_.isEmpty(this.properties.url)?_.isUndefined(this.properties.relativePath)||_.isEmpty(this.properties.relativePath)?_.isUndefined(this.properties.htmlfolder)||_.isEmpty(this.properties.htmlfolder)||(t=n.FolderAssets.get(this.properties.htmlfolder),t=o.replaceTemplate(t.url+"/"+t.htmlFilename).encodeFilePath()):(e=this.properties.relativePath,t=o.replaceTemplate("{ASSETS_DIR}"+e).encodeFilePath()):-1===(t=(t=this.properties.url).isTag()?t.url():t).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.properties.url);var t,e=screen.width/2-this.properties.width/2,i=screen.height/2-this.properties.height/2;_.isEmpty(window.__nw__)?window.open(t,this.properties.title,"toolbar=no, location=no, scrollbars=yes, resizable=yes, top="+i+", left="+e+", width="+this.properties.width+", height="+this.properties.height):((t=window.__nw__.require("nw.gui").Window.open(t,{title:this.properties.title,focus:!0,toolbar:!1})).moveTo(e,i),t.resizeTo(this.properties.width,this.properties.height))}}),n.Action.PopupWindow=t}),define("toast/actions/PopupMenu",["../core","./Action"],function(a,t){"use strict";var r=t.prototype,t=t.extend();return _.extend(t.prototype,r,{initialize:function(t,e,i){var n,o,s;r.initialize.call(this,t,e,i),_.isEmpty(this.properties.targets)||(this._openFn=$.proxy(this.open,this),this._closeFn=$.proxy(this.close,this),(t=a.Book.find({id:this.properties.targets[0]}))&&t.view?this.doInit(t):(n=0,o=this,s=setInterval(function(){3<=++n&&clearInterval(s);var t=a.Book.find({id:o.properties.targets[0]});t&&t.view&&(o.doInit(t),clearInterval(s))},500)))},doInit:function(t){t.properties.visible=!1,this._popup=t.view,this.setPosition(),t.view.hide(),this._popup.$parent.css("zIndex",1050),"mouseover"===this.options.eventType&&(this._popup.$parent.hover(this._openFn,this._closeFn),this.view.$parent.on("mouseout",this._closeFn))},setPosition:function(){if(!_.isUndefined(this._popup)){var t={};switch(this.properties.position){case"rightCenter":t={left:this.view.model.width,top:(this.view.model.height-this._popup.model.height)/2};break;case"rightBottom":t={left:this.view.model.width,top:this.view.model.height-this._popup.model.height};break;case"leftTop":t={left:-this._popup.model.width,top:0};break;case"leftCenter":t={left:-this._popup.model.width,top:(this.view.model.height-this._popup.model.height)/2};break;case"leftBottom":t={left:-this._popup.model.width,top:this.view.model.height-this._popup.model.height};break;case"topLeft":t={left:0,top:-this._popup.model.height};break;case"topCenter":t={left:(this.view.model.width-this._popup.model.width)/2,top:-this._popup.model.height};break;case"topRight":t={left:this.view.model.width-this._popup.model.width,top:-this._popup.model.height};break;case"bottomLeft":t={left:0,top:this.view.model.height};break;case"bottomCenter":t={left:(this.view.model.width-this._popup.model.width)/2,top:this.view.model.height};break;case"bottomRight":t={left:this.view.model.width,top:this.view.model.height};break;default:t={left:this.view.model.width,top:0}}t.left+=this.view.model.left,_.isUndefined(this.properties.offsetX)||isNaN(this.properties.offsetX)||(t.left+=this.properties.offsetX),t.top+=this.view.model.top,_.isUndefined(this.properties.offsetY)||isNaN(this.properties.offsetY)||(t.top+=this.properties.offsetY),this._popup.position(t)}},execute:function(){this._popup&&(this.isPopup?"click"===this.options.eventType&&this.close():this.open())},open:function(){this.isPopup=!0,a.common.setActivePopupMenu(this),this._popup.show(),this._popup.$parent.addClass("__popup__")},close:function(){this.isPopup=!1,this._popup.hide(),this._popup.$parent.removeClass("__popup__")}}),a.Action.PopupMenu=t}),define("toast/actions/PopupPartialZoom",["../core","./PopupActionBase"],function(e,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},size:function(){return this.activeView?this.activeView.zoomInitSize():{width:0,height:0}},templateVars:function(){return{modalClassName:"popup-partial-zoom-modal"}},execute:function(){var t;_.isUndefined(this.properties.targets)||_.isEmpty(this.properties.targets)||(t=this.properties.targets[0],(t=e.Book.find({id:t}))&&t.view.isZoomPossible()&&(this.activeView=t.view,t.view.zoomAction=this,n.execute.call(this)))},_render:function(){return this.activeView?this.activeView.zoomEl():$("<div />")},_didPopupMount:function(){this.activeView&&this.activeView.popupMount(),this._didLoadContent()},_updateView:function(){this.activeView&&this.activeView.popupUpdateView()},_beforeDestroy:function(){this.activeView&&this.activeView.popupBeforeDestroy()},_destroy:function(){n._destroy.call(this),this.activeView&&this.activeView.popupDestroy()}}),e.Action.PopupPartialZoom=t}),define("toast/actions/PopupSubpage",["../core","../utils/StringUtils","./PopupActionBase"],function(n,t,e){"use strict";var o=e.prototype,e=e.extend();return _.extend(e.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i)},initSubpage:function(){var t;this.properties.subpage&&(!(t=(t=(t=this.view.viewController.findSubpage(this.properties.subpage))||_.find(n.project.subpages.models,{id:this.properties.subpage}))||n.Book.findSubpage(this.properties.subpage))&&n.view&&(t=n.view.findSubpage(this.properties.subpage)),this.subpage=t)},size:function(){return{width:this.subpage.width,height:this.subpage.height}},templateVars:function(){return{modalClassName:"popup-subpage-modal"}},execute:function(){this.properties.subpage&&this.initSubpage(),this.subpage&&($(document.body).find(".popup-modal-wrapper").hide(),o.execute.call(this))},_render:function(){return $("<div />",{class:"toast-ctrl"}).css({margin:0,padding:0,width:"100%",height:"100%"})},from:function(t){t?(this.subpage=t,n.showLoading(!0,{el:this.$el.find(".modal-body")})):t=this.subpage;var e=this,i=new tt.ViewController({el:this._$render});i.load(t.toJSON(),{htmlRender:!1,showLoader:!0,readyonly:!0}),i.modal=!0,i.willAppear(),i.ready(function(){i.$el.css("opacity",1),i.appear(),e.viewController=i,e._didLoadContent()}),this.viewController=i},_didPopupMount:function(){this.from(),n.activePopupSubpage=this},_updateView:function(){o._updateView.call(this),_.isUndefined(this._$render)||tt.Book.fitPage(this.viewController)},_beforeDestroy:function(){this.viewController&&(this.viewController.reset(),delete this.viewController),delete n.activePopupSubpage}}),n.Action.PopupSubpage=e}),define("toast/actions/GotoSubpage",["../core","./Action"],function(e,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){var t;this.properties.subpage&&(t=!(t=(t=(t=this.view.viewController.findSubpage(this.properties.subpage))||_.find(e.project.subpages.models,{id:this.properties.subpage}))||e.Book.findSubpage(this.properties.subpage))&&e.view?e.view.findSubpage(this.properties.subpage):t)&&e.activePopupSubpage&&setTimeout(function(){e.activePopupSubpage.from(t)})}}),e.Action.GotoSubpage=t}),define("toast/actions/CloseWindow",["../core","./Action"],function(e,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){var t;this.properties.confirm&&(t=this.properties.message,_.isEmpty(t)&&(t=e.Strings.CLOSE_WINDOW_ACTION_DEFAULT_CONFIRM_MESSAGE),1!=confirm(t))||("undefined"!=typeof external&&void 0!==external.appExit?external.appExit():e.topWindow().close())}}),e.Action.CloseWindow=t}),define("toast/actions/WidgetAction",["../core","./Action"],function(n,t){"use strict";var o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i),n.lazy(function(){this._lazyInitialize()},5,this)},_lazyInitialize:function(){this._widget=this._findWidget(),this._widget&&this._widget.view&&(this._widget.view.on("changeState",$.proxy(this.widgetChangeState,this)),this.widgetChangeState(this.properties.widgetActionName,this._widget.properties[this.properties.widgetActionName]))},_findWidget:function(){return n.Book.find({id:this.properties.widgetId})},widgetChangeState:function(t,e){this.properties.widgetActionName===t&&(this.view instanceof n.UIButton||this.view instanceof n.UIImageButton)&&(e&&e!==this.properties.widgetActionParameter?this.view.setState("normal"):this.view.setState("selected"))},execute:function(){_.isEmpty(this.properties.widgetId)||_.isEmpty(this.properties.widgetActionName)||(this._widget||(this._widget=this._findWidget()),this._widget&&this._widget.view&&n.hasFunctionByName(this.properties.widgetActionName,this._widget.view)&&n.executeFunctionByName(this.properties.widgetActionName,this._widget.view,this.properties.widgetActionParameter,this._widget.view))}}),n.Action.WidgetAction=t}),define("toast/actions/ChangeState",["../core","./Action"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i),_.isEmpty(this.properties.targets)&&(this._target=t.model)},execute:function(){this._target||(this._target=t.Book.find({id:this.properties.targets[0]})),this._target&&!_.isEmpty(this.properties.state)&&this._target.view.state(this.properties.state)}}),t.Action.ChangeState=e}),define("toast/actions/SetTextStyle",["../core","./Action"],function(i,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){_.each(this.properties.targets,function(t){var e,t=i.Book.find({id:t});t&&!t.__attributes__&&(e={color:this.properties.color,fontSize:this.properties.size},this.properties.bold&&(e.fontWeight="bold"),t.view.setTextStyle(e))},this)}}),i.Action.SetTextStyle=t}),define("toast/actions/ChangeOrder",["../core","./Action"],function(o,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i),_.isEmpty(this.properties.targets)&&(this.properties.targets=[t.model.id])},getIndex:function(e){var i="top"===(e=e||{q:"top"}).q?1:-1,t=this.view.viewController.$contents.children();return _.each(t,function(t){t=$(t),t=Number(t.css("zIndex"));isNaN(t)||("top"===e.q?i<=t&&(i=t+1):t<=i&&(i=t-1))},this),i},execute:function(){var n;"top"===this.properties.order?n=this.getIndex({q:"top"}):"bottom"===this.properties.order&&(n=this.getIndex({q:"bottom"})),_.each(this.properties.targets,function(t){var e,i,t=o.Book.find({id:t});t&&(e=t.view.$parent.css("zIndex"),i=t.view.$parent.attr("data-zindex"),e&&!i&&t.view.$parent.attr("data-zindex",e),"top"===this.properties.order?t.view.$parent.css("zIndex",n++):"bottom"===this.properties.order?t.view.$parent.css("zIndex",n--):"restore"===this.properties.order&&(i?t.view.$parent.css("zIndex",i):t.view.$parent.css("zIndex","")))},this)}}),o.Action.ChangeOrder=t}),define("toast/actions/Reset",["../core","./Action"],function(e,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){_.isEmpty(this.properties.targets)?_.each(this.view.viewController.collection.models,function(t){t.view&&!t.__attributes__&&t.view.reset()},this):_.each(this.properties.targets,function(t){t=e.Book.find({id:t});t&&!t.__attributes__&&t.view.reset()},this)}}),e.Action.Reset=t}),define("toast/actions/SendDropResult",["../core","./Action"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){}}),t.Action.SendDropResult=e}),define("toast/actions/SaveWidgetData",["../core","./Action"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){}}),t.Action.SaveWidgetData=e}),define("toast/actions/SetWidgetData",["../core","./Action"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){}}),t.Action.SetWidgetData=e}),define("toast/actions/LeanControl",["../core","./Action"],function(n,t){"use strict";var o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{initialize:function(t,e,i){o.initialize.call(this,t,e,i),_.isUndefined(n.config.learnContentControl)&&(n.config.learnContentControl=!0,n.Book._updateProgressPageControl());e=t.model,i=t.viewController,t=n.contentStorage.findWhere({id:e.id});t||(t={id:e.id,pageID:i.collection.id,progressPageControl:!0,learn:!1},n.contentStorage.addItem(t)),this._storageItem=t},execute:function(){var t=this.view.model,t=n.contentStorage.findWhere({id:t.id});t&&(t.set("learn",!0),t.set("progressPageControl",!1),n.contentStorage.updateItem(t))}}),n.Action.LeanControl=t}),define("toast/actions/ScrollTo",["../core","./Action"],function(o,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){o.isMobile?this.mobileScrollTo():this.scrollTo()},scrollTo:function(){var t=String(this.properties.position);if(_.isEmpty(t)&&this.properties.top&&(t="top"),!_.isEmpty(t))if("#"===t.substr(0,1))(e=o.Book.find({id:t.substr(1)}))&&$("html, body").animate({scrollTop:e.top});else{var e,i=this.view,n=this.view.$el.closest(".widget-scroll-container");if((i=(n=n.length?n.closest(".toast-object"):n).length?(e=o.Book.find({id:n.attr("id")})).view:i)&&"function"==typeof i.scrollTo)switch(t){case"top":i.scrollTo("top");break;case"bottom":i.scrollTo("bottom");break;default:i.scrollTo(t)}else switch(t){case"top":$("html, body").animate({scrollTop:0});break;case"bottom":$("html, body").animate({scrollTop:$(document).height()});break;default:$("html, body").animate({scrollTop:t})}}},mobileScrollTo:function(){var t;this.properties.top?window.location.href="#scroll-top-el":(t=String(this.properties.position),_.isEmpty(t)||"#"===t.substr(0,1)&&(window.location.href=t))}}),o.Action.ScrollTo=t}),define("toast/actions/FunctionCall",["../core","./Action"],function(s,t){"use strict";var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t,e,i){n.initialize.call(this,t,e,i)},execute:function(){if(!_.isEmpty(this.properties.name)&&s.hasFunctionByName(this.properties.name,window)){for(var t=this.properties.args,e=this.properties.name.split("."),i=e.pop(),n=window,o=0;o<e.length;o++)n=n[e[o]];n[i].apply(n,t)}}}),s.Action.FunctionCall=t}),define("toast/actions",["exports","./core","./actions/LinkUrl","./actions/GotoPage","./actions/Visible","./actions/ToggleSound","./actions/PlaySound","./actions/ToggleAudioPlayer","./actions/StopAllSound","./actions/StopSound","./actions/PopupMovie","./actions/PopupImage","./actions/PopupFlash","./actions/PopupLayer","./actions/PopupWindow","./actions/PopupMenu","./actions/PopupPartialZoom","./actions/PopupSubpage","./actions/GotoSubpage","./actions/CloseWindow","./actions/WidgetAction","./actions/ChangeState","./actions/SetTextStyle","./actions/ChangeOrder","./actions/Reset","./actions/SendDropResult","./actions/SaveWidgetData","./actions/SetWidgetData","./actions/LeanControl","./actions/ScrollTo","./actions/FunctionCall"],function(t,e){}),!function(e){"use strict";if(!e.jQuery){for(var c=function(t,e){return new c.fn.init(t,e)},o=(c.isWindow=function(t){return t&&t===t.window},c.type=function(t){return t?"object"==typeof t||"function"==typeof t?i[s.call(t)]||"object":typeof t:t+""},c.isArray=Array.isArray||function(t){return"array"===c.type(t)},c.isPlainObject=function(t){if(!t||"object"!==c.type(t)||t.nodeType||c.isWindow(t))return!1;try{if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(var e in t);return void 0===e||n.call(t,e)},c.each=function(t,e,i){var n=0,o=t.length,s=r(t);if(i){if(s)for(;n<o&&!1!==e.apply(t[n],i);n++);else for(n in t)if(t.hasOwnProperty(n)&&!1===e.apply(t[n],i))break}else if(s)for(;n<o&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(t.hasOwnProperty(n)&&!1===e.call(t[n],n,t[n]))break;return t},c.data=function(t,e,i){var n;return void 0===i?(n=(n=t[c.expando])&&o[n],void 0===e?n:n&&e in n?n[e]:void 0):void 0!==e?(n=t[c.expando]||(t[c.expando]=++c.uuid),o[n]=o[n]||{},o[n][e]=i):void 0},c.removeData=function(t,e){var t=t[c.expando],i=t&&o[t];i&&(e?c.each(e,function(t,e){delete i[e]}):delete o[t])},c.extend=function(){var t,e,i,n,o,s=arguments[0]||{},a=1,r=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"!=typeof s&&"function"!==c.type(s)&&(s={}),a===r&&(s=this,a--);a<r;a++)if(n=arguments[a])for(i in n)n.hasOwnProperty(i)&&(o=s[i],s!==(e=n[i]))&&(l&&e&&(c.isPlainObject(e)||(t=c.isArray(e)))?(o=t?(t=!1,o&&c.isArray(o)?o:[]):o&&c.isPlainObject(o)?o:{},s[i]=c.extend(l,o,e)):void 0!==e&&(s[i]=e));return s},c.queue=function(t,e,i){var n;if(t)return n=c.data(t,e=(e||"fx")+"queue"),i?(!n||c.isArray(i)?n=c.data(t,e,function(t,e){if(e=e||[],t)if(r(Object(t))){for(var i=e,n="string"==typeof t?[t]:t,o=+n.length,s=0,a=i.length;s<o;)i[a++]=n[s++];if(o!=o)for(;void 0!==n[s];)i[a++]=n[s++];i.length=a}else[].push.call(e,t);return e}(i)):n.push(i),n):n||[]},c.dequeue=function(t,o){c.each(t.nodeType?[t]:t,function(t,e){o=o||"fx";var i=c.queue(e,o),n=i.shift();(n="inprogress"===n?i.shift():n)&&("fx"===o&&i.unshift("inprogress"),n.call(e,function(){c.dequeue(e,o)}))})},c.fn=c.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){var t=this[0],e=function(t){for(var e=t.offsetParent;e&&"html"!==e.nodeName.toLowerCase()&&e.style&&"static"===e.style.position;)e=e.offsetParent;return e||document}(t),i=this.offset(),n=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:c(e).offset();return i.top-=parseFloat(t.style.marginTop)||0,i.left-=parseFloat(t.style.marginLeft)||0,e.style&&(n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0),{top:i.top-n.top,left:i.left-n.left}}},{}),i=(c.expando="velocity"+(new Date).getTime(),c.uuid=0,{}),n=i.hasOwnProperty,s=i.toString,t="Boolean Number String Function Array Date RegExp Object Error".split(" "),a=0;a<t.length;a++)i["[object "+t[a]+"]"]=t[a].toLowerCase();c.fn.init.prototype=c.fn,e.Velocity={Utilities:c}}function r(t){var e=t.length,i=c.type(t);return"function"!==i&&!c.isWindow(t)&&(!(1!==t.nodeType||!e)||"array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}}(window),!function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define("toast/animations/_velocity",t):t()}(function(){"use strict";var n,t,e=window.jQuery||window.Zepto||window,z=window,F=window?window.document:void 0,H=void 0,E=function(){if(F.documentMode)return F.documentMode;for(var t=7;4<t;t--){var e=F.createElement("div");if(e.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",e.getElementsByTagName("span").length)return e=null,t}return H}(),i=(n=0,z.webkitRequestAnimationFrame||z.mozRequestAnimationFrame||function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-n));return n=e+i,setTimeout(function(){t(e+i)},i)}),C=("function"!=typeof(r=z.performance||{}).now&&(t=r.timing&&r.timing.navigationStart?r.timing.navigationStart:(new Date).getTime(),r.now=function(){return(new Date).getTime()-t}),r);function D(){return Array.prototype.includes?function(t,e){return t.includes(e)}:Array.prototype.indexOf?function(t,e){return 0<=t.indexOf(e)}:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}}var o=function(){var r=Array.prototype.slice;try{return r.call(F.documentElement),r}catch(t){return function(t,e){var i=this.length;if("number"!=typeof t&&(t=0),"number"!=typeof e&&(e=i),this.slice)return r.call(this,t,e);var n,o=[],s=0<=t?t:Math.max(0,i+t),a=(e<0?i+e:Math.min(e,i))-s;if(0<a)if(o=new Array(a),this.charAt)for(n=0;n<a;n++)o[n]=this.charAt(s+n);else for(n=0;n<a;n++)o[n]=this[s+n];return o}}}();function m(t){return j.isWrapped(t)?t=o.call(t):j.isNode(t)&&(t=[t]),t}var W,s,a,V,_,G,x,j={isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isWrapped:function(t){return t&&t!==z&&j.isNumber(t.length)&&!j.isString(t)&&!j.isFunction(t)&&!j.isNode(t)&&(0===t.length||j.isNode(t[0]))},isSVG:function(t){return z.SVGElement&&t instanceof z.SVGElement},isEmptyObject:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}},r=!1;if(e.fn&&e.fn.jquery?(W=e,r=!0):W=z.Velocity.Utilities,E<=8&&!r)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(E<=7))return s="swing",G={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:z.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:F.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:W,Redirects:{},Easings:{},Promise:z.Promise,defaults:{queue:"",duration:400,easing:s,begin:H,complete:H,progress:H,display:H,visibility:H,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:function(t){W.data(t,"velocity",{isSVG:j.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:5,patch:0},debug:!1,timestamp:!0,pauseAll:function(i){var n=(new Date).getTime();W.each(G.State.calls,function(t,e){if(e){if(i!==H&&(e[2].queue!==i||!1===e[2].queue))return!0;e[5]={resume:!1}}}),W.each(G.State.delayedElements,function(t,e){e&&v(e,n)})},resumeAll:function(i){var t=(new Date).getTime();W.each(G.State.calls,function(t,e){if(e){if(i!==H&&(e[2].queue!==i||!1===e[2].queue))return!0;e[5]&&(e[5].resume=!0)}}),W.each(G.State.delayedElements,function(t,e){e&&y(e)})}},z.pageYOffset!==H?(G.State.scrollAnchor=z,G.State.scrollPropertyLeft="pageXOffset",G.State.scrollPropertyTop="pageYOffset"):(G.State.scrollAnchor=F.documentElement||F.body.parentNode||F.body,G.State.scrollPropertyLeft="scrollLeft",G.State.scrollPropertyTop="scrollTop"),a=function t(e,i,n){var o,s,a,r,l,c,h,d,u,p,f={x:-1,v:0,tension:null,friction:null},g=[0],m=0;for(e=parseFloat(e)||500,i=parseFloat(i)||20,n=n||null,f.tension=e,f.friction=i,s=(o=null!==n)?(m=t(e,i))/n*.016:.016;;)if(l=s,c=p=u=d=h=c=void 0,c={dx:(r=a||f).v,dv:w(r)},h=b(r,.5*l,c),d=b(r,.5*l,h),u=b(r,l,d),p=1/6*(c.dx+2*(h.dx+d.dx)+u.dx),c=1/6*(c.dv+2*(h.dv+d.dv)+u.dv),r.x=r.x+p*l,r.v=r.v+c*l,a=r,g.push(1+a.x),m+=16,!(1e-4<Math.abs(a.x)&&1e-4<Math.abs(a.v)))break;return o?function(t){return g[t*(g.length-1)|0]}:m},G.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},W.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["ease-out-in",[.465,.183,.153,.946]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(t,e){G.Easings[e[0]]=l.apply(null,e[1])}),(V=G.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t,e,i,n,o,s=0;s<V.Lists.colors.length;s++){var a="color"===V.Lists.colors[s]?"0 0 0 1":"255 255 255 1";V.Hooks.templates[V.Lists.colors[s]]=["Red Green Blue Alpha",a]}if(E)for(t in V.Hooks.templates)V.Hooks.templates.hasOwnProperty(t)&&(i=(e=V.Hooks.templates[t])[0].split(" "),n=e[1].match(V.RegEx.valueSplit),"Color"===i[0])&&(i.push(i.shift()),n.push(n.shift()),V.Hooks.templates[t]=[i.join(" "),n.join(" ")]);for(t in V.Hooks.templates)if(V.Hooks.templates.hasOwnProperty(t))for(var r in i=(e=V.Hooks.templates[t])[0].split(" "))i.hasOwnProperty(r)&&(o=t+i[r],r=r,V.Hooks.registered[o]=[t,r])},getRoot:function(t){var e=V.Hooks.registered[t];return e?e[0]:t},getUnit:function(t,e){t=(t.substr(e||0,5).match(/^[a-z%]+/)||[])[0]||"";return t&&D(V.Lists.units)?t:""},fixColors:function(t){return t.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,function(t,e,i){return V.Lists.colorNames.hasOwnProperty(i)?(e||"rgba(")+V.Lists.colorNames[i]+(e?"":",1)"):e+i})},cleanRootPropertyValue:function(t,e){return V.RegEx.valueUnwrap.test(e)&&(e=e.match(V.RegEx.valueUnwrap)[1]),e=V.Values.isCSSNullValue(e)?V.Hooks.templates[t][1]:e},extractValue:function(t,e){var i,t=V.Hooks.registered[t];return t?(i=t[0],t=t[1],(e=V.Hooks.cleanRootPropertyValue(i,e)).toString().match(V.RegEx.valueSplit)[t]):e},injectValue:function(t,e,i){var n,t=V.Hooks.registered[t];return t?(n=t[0],t=t[1],(n=(i=V.Hooks.cleanRootPropertyValue(n,i)).toString().match(V.RegEx.valueSplit))[t]=e,n.join(" ")):i}},Normalizations:{registered:{clip:function(t,e,i){switch(t){case"name":return"clip";case"extract":var n=!V.RegEx.wrappedValueAlreadyExtracted.test(i)&&(n=i.toString().match(V.RegEx.valueUnwrap))?n[1].replace(/,(\s+)?/g," "):i;return n;case"inject":return"rect("+i+")"}},blur:function(t,e,i){switch(t){case"name":return G.State.isFirefox?"filter":"-webkit-filter";case"extract":var n,o=parseFloat(i);return o=o||0===o?o:(n=i.toString().match(/blur\(([0-9]+[A-z]+)\)/i))?n[1]:0;case"inject":return parseFloat(i)?"blur("+i+")":"none"}},opacity:function(t,e,i){if(E<=8)switch(t){case"name":return"filter";case"extract":var n=i.toString().match(/alpha\(opacity=(.*)\)/i);return i=n?n[1]/100:1;case"inject":return(e.style.zoom=1)<=parseFloat(i)?"":"alpha(opacity="+parseInt(100*parseFloat(i),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return i}}},register:function(){E&&!(9<E)||G.State.isGingerbread||(V.Lists.transformsBase=V.Lists.transformsBase.concat(V.Lists.transforms3D));for(var t=0;t<V.Lists.transformsBase.length;t++)!function(){var o=V.Lists.transformsBase[t];V.Normalizations.registered[o]=function(t,e,i){switch(t){case"name":return"transform";case"extract":return P(e)===H||P(e).transformCache[o]===H?/^scale/i.test(o)?1:0:P(e).transformCache[o].replace(/[()]/g,"");case"inject":var n=!1;switch(o.substr(0,o.length-1)){case"translate":n=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":G.State.isAndroid&&P(e).transformCache[o]===H&&i<1&&(i=1),n=!/(\d)$/i.test(i);break;case"skew":case"rotate":n=!/(deg|\d)$/i.test(i)}return n||(P(e).transformCache[o]="("+i+")"),P(e).transformCache[o]}}}();for(var e=0;e<V.Lists.colors.length;e++)!function(){var s=V.Lists.colors[e];V.Normalizations.registered[s]=function(t,e,i){switch(t){case"name":return s;case"extract":var n,o=V.RegEx.wrappedValueAlreadyExtracted.test(i)?i:(o={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"},/^[A-z]+$/i.test(i)?n=o[i]!==H?o[i]:o.black:V.RegEx.isHex.test(i)?n="rgb("+V.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(n=o.black),(n||i).toString().match(V.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," "));return(!E||8<E)&&3===o.split(" ").length&&(o+=" 1"),o;case"inject":return/^rgb/.test(i)?i:(E<=8?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(E<=8?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")")}}}();function s(t,e,i){if("border-box"===V.getPropertyValue(e,"boxSizing").toString().toLowerCase()!==(i||!1))return 0;for(var n,o=0,t="width"===t?["Left","Right"]:["Top","Bottom"],s=["padding"+t[0],"padding"+t[1],"border"+t[0]+"Width","border"+t[1]+"Width"],a=0;a<s.length;a++)n=parseFloat(V.getPropertyValue(e,s[a])),isNaN(n)||(o+=n);return i?-o:o}function i(n,o){return function(t,e,i){switch(t){case"name":return n;case"extract":return parseFloat(i)+s(n,e,o);case"inject":return parseFloat(i)-s(n,e,o)+"px"}}}V.Normalizations.registered.innerWidth=i("width",!0),V.Normalizations.registered.innerHeight=i("height",!0),V.Normalizations.registered.outerWidth=i("width"),V.Normalizations.registered.outerHeight=i("height")}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(E||G.State.isAndroid&&!G.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(G.State.prefixMatches[t])return[G.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],i=0,n=e.length;i<n;i++){var o=0===i?t:e[i]+t.replace(/^\w/,function(t){return t.toUpperCase()});if(j.isString(G.State.prefixElement.style[o]))return[G.State.prefixMatches[t]=o,!0]}return[t,!1]}},Values:{hexToRgb:function(t){return t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(t){return!t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){t=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(t,e){var i;t&&(t.classList?t.classList.add(e):j.isString(t.className)?t.className+=(t.className.length?" ":"")+e:(i=t.getAttribute(E<=7?"className":"class")||"",t.setAttribute("class",i+(i?" ":"")+e)))},removeClass:function(t,e){var i;t&&(t.classList?t.classList.remove(e):j.isString(t.className)?t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," "):(i=t.getAttribute(E<=7?"className":"class")||"",t.setAttribute("class",i.replace(new RegExp("(^|s)"+e.split(" ").join("|")+"(s|$)","gi")," "))))}},getPropertyValue:function(t,e,i,a){function r(t,e){var i=0;if(E<=8)i=W.css(t,e);else{var n,o=!1,s=(/^(width|height)$/.test(e)&&0===V.getPropertyValue(t,"display")&&(o=!0,V.setPropertyValue(t,"display",V.Values.getDisplayType(t))),function(){o&&V.setPropertyValue(t,"display","none")});if(!a){if("height"===e&&"border-box"!==V.getPropertyValue(t,"boxSizing").toString().toLowerCase())return n=t.offsetHeight-(parseFloat(V.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(V.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(V.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(V.getPropertyValue(t,"paddingBottom"))||0),s(),n;if("width"===e&&"border-box"!==V.getPropertyValue(t,"boxSizing").toString().toLowerCase())return n=t.offsetWidth-(parseFloat(V.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(V.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(V.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(V.getPropertyValue(t,"paddingRight"))||0),s(),n}n=P(t)===H?z.getComputedStyle(t,null):P(t).computedStyle?P(t).computedStyle:P(t).computedStyle=z.getComputedStyle(t,null),"borderColor"===e&&(e="borderTopColor"),""!==(i=9===E&&"filter"===e?n.getPropertyValue(e):n[e])&&null!==i||(i=t.style[e]),s()}return i="auto"===i&&/^(top|right|bottom|left)$/i.test(e)&&("fixed"===(n=r(t,"position"))||"absolute"===n&&/top|left/i.test(e))?W(t).position()[e]+"px":i}var n,o,s;if(V.Hooks.registered[e]?(n=V.Hooks.getRoot(s=e),i===H&&(i=V.getPropertyValue(t,V.Names.prefixCheck(n)[0])),V.Normalizations.registered[n]&&(i=V.Normalizations.registered[n]("extract",t,i)),n=V.Hooks.extractValue(s,i)):V.Normalizations.registered[e]&&("transform"!==(s=V.Normalizations.registered[e]("name",t))&&(o=r(t,V.Names.prefixCheck(s)[0]),V.Values.isCSSNullValue(o))&&V.Hooks.templates[e]&&(o=V.Hooks.templates[e][1]),n=V.Normalizations.registered[e]("extract",t,o)),!/^[\d-]/.test(n)){i=P(t);if(i&&i.isSVG&&V.Names.SVGAttribute(e))if(/^(height|width)$/i.test(e))try{n=t.getBBox()[e]}catch(t){n=0}else n=t.getAttribute(e);else n=r(t,V.Names.prefixCheck(e)[0])}return V.Values.isCSSNullValue(n)&&(n=0),2<=G.debug&&console.log("Get "+e+": "+n),n},setPropertyValue:function(t,e,i,n,o){var s,a=e;if("scroll"===e)o.container?o.container["scroll"+o.direction]=i:"Left"===o.direction?z.scrollTo(i,o.alternateValue):z.scrollTo(o.alternateValue,i);else if(V.Normalizations.registered[e]&&"transform"===V.Normalizations.registered[e]("name",t))V.Normalizations.registered[e]("inject",t,i),a="transform",i=P(t).transformCache[e];else{if(V.Hooks.registered[e]&&(o=e,s=V.Hooks.getRoot(e),n=n||V.getPropertyValue(t,s),i=V.Hooks.injectValue(o,i,n),e=s),V.Normalizations.registered[e]&&(i=V.Normalizations.registered[e]("inject",t,i),e=V.Normalizations.registered[e]("name",t)),a=V.Names.prefixCheck(e)[0],E<=8)try{t.style[a]=i}catch(t){G.debug&&console.log("Browser does not support ["+i+"] for ["+a+"]")}else{o=P(t);o&&o.isSVG&&V.Names.SVGAttribute(e)?t.setAttribute(e,i):t.style[a]=i}2<=G.debug&&console.log("Set "+e+" ("+a+"): "+i)}return[a,i]},flushTransformCache:function(e){var i,n,o,s="",t=P(e);(E||G.State.isAndroid&&!G.State.isChrome)&&t&&t.isSVG?(i={translate:[(t=function(t){return parseFloat(V.getPropertyValue(e,t))})("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]},W.each(P(e).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),i[t]&&(s+=t+"("+i[t].join(" ")+") ",delete i[t])})):(W.each(P(e).transformCache,function(t){if(n=P(e).transformCache[t],"transformPerspective"===t)return o=n,!0;s+=(t=9===E&&"rotateZ"===t?"rotate":t)+n+" "}),o&&(s="perspective"+o+" "+s)),V.setPropertyValue(e,"transform",s)}}).Hooks.register(),V.Normalizations.register(),G.hook=function(t,n,o){var s;return t=m(t),W.each(t,function(t,e){var i;P(e)===H&&G.init(e),o===H?s===H&&(s=V.getPropertyValue(e,n)):("transform"===(i=V.setPropertyValue(e,n,o))[0]&&G.CSS.flushTransformCache(e),s=i)}),s},(G=W.extend(_=function(){function t(){return e?C.promise||null:i}var e,i,n,T,E,o=arguments[0]&&(arguments[0].p||W.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||j.isString(arguments[0].properties)),C=(j.isWrapped(this)?(e=!1,n=0,i=T=this):(e=!0,n=1,T=o?arguments[0].elements||arguments[0].e:arguments[0]),{promise:null,resolver:null,rejecter:null});if(e&&G.Promise&&(C.promise=new G.Promise(function(t,e){C.resolver=t,C.rejecter=e})),I=o?(E=arguments[0].properties||arguments[0].p,arguments[0].options||arguments[0].o):(E=arguments[n],arguments[n+1]),T=m(T)){var x,s,a,r,l,$=T.length,A=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(E)&&!W.isPlainObject(I))for(var I={},c=n+1;c<arguments.length;c++)j.isArray(arguments[c])||!/^(fast|normal|slow)$/i.test(arguments[c])&&!/^\d/.test(arguments[c])?j.isString(arguments[c])||j.isArray(arguments[c])?I.easing=arguments[c]:j.isFunction(arguments[c])&&(I.complete=arguments[c]):I.duration=arguments[c];switch(E){case"scroll":x="scroll";break;case"reverse":x="reverse";break;case"pause":var h=(new Date).getTime();return W.each(T,function(t,e){v(e,h)}),W.each(G.State.calls,function(t,n){var o=!1;n&&W.each(n[1],function(t,i){var e=I===H?"":I;return!0!==e&&n[2].queue!==e&&(I!==H||!1!==n[2].queue)||(W.each(T,function(t,e){if(e===i)return n[5]={resume:!1},!(o=!0)}),!o&&void 0)})}),t();case"resume":return W.each(T,function(t,e){y(e)}),W.each(G.State.calls,function(t,n){var o=!1;n&&W.each(n[1],function(t,i){var e=I===H?"":I;return!0!==e&&n[2].queue!==e&&(I!==H||!1!==n[2].queue)||!n[5]||(W.each(T,function(t,e){if(e===i)return n[5].resume=!0,!(o=!0)}),!o&&void 0)})}),t();case"finish":case"finishAll":case"stop":W.each(T,function(t,e){P(e)&&P(e).delayTimer&&(clearTimeout(P(e).delayTimer.setTimeout),P(e).delayTimer.next&&P(e).delayTimer.next(),delete P(e).delayTimer),"finishAll"!==E||!0!==I&&!j.isString(I)||(W.each(W.queue(e,j.isString(I)?I:""),function(t,e){j.isFunction(e)&&e()}),W.queue(e,j.isString(I)?I:"",[]))});var d=[];return W.each(G.State.calls,function(o,s){s&&W.each(s[1],function(t,i){var n=I===H?"":I;if(!0!==n&&s[2].queue!==n&&(I!==H||!1!==s[2].queue))return!0;W.each(T,function(t,e){e===i&&(!0!==I&&!j.isString(I)||(W.each(W.queue(e,j.isString(I)?I:""),function(t,e){j.isFunction(e)&&e(null,!0)}),W.queue(e,j.isString(I)?I:"",[])),"stop"===E?((e=P(e))&&e.tweensContainer&&!1!==n&&W.each(e.tweensContainer,function(t,e){e.endValue=e.currentValue}),d.push(o)):"finish"!==E&&"finishAll"!==E||(s[2].duration=1))})})}),"stop"===E&&(W.each(d,function(t,e){O(e,!0)}),C.promise)&&C.resolver(T),t();default:if(!W.isPlainObject(E)||j.isEmptyObject(E))return j.isString(E)&&G.Redirects[E]?(a=(s=W.extend({},I)).duration,r=s.delay||0,!0===s.backwards&&(T=W.extend(!0,[],T).reverse()),W.each(T,function(t,e){parseFloat(s.stagger)?s.delay=r+parseFloat(s.stagger)*t:j.isFunction(s.stagger)&&(s.delay=r+s.stagger.call(e,t,$)),s.drag&&(s.duration=parseFloat(a)||(/^(callout|transition)/.test(E)?1e3:400),s.duration=Math.max(s.duration*(s.backwards?1-t/$:(t+1)/$),.75*s.duration,200)),G.Redirects[E].call(e,e,s||{},t,$,T,C.promise?C:H)})):(l="Velocity: First argument ("+E+") was not a property map, a known action, or a registered redirect. Aborting.",C.promise?C.rejecter(new Error(l)):z.console&&console.log(l)),t();x="start"}var U={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},k=[],u=(W.each(T,function(t,e){j.isNode(e)&&g(e,t)}),(s=W.extend({},G.defaults,I)).loop=parseInt(s.loop,10),2*s.loop-1);if(s.loop)for(var p=0;p<u;p++){var f={delay:s.delay,progress:s.progress};p===u-1&&(f.display=s.display,f.visibility=s.visibility,f.complete=s.complete),_(T,"reverse",f)}return t()}function g(L,S){var R,t,e,N=W.extend({},G.defaults,I),B={};switch(P(L)===H&&G.init(L),parseFloat(N.delay)&&!1!==N.queue&&W.queue(L,N.queue,function(t){G.velocityQueueEntryFlag=!0;function e(){G.State.delayedElements[i]=!1,t&&t()}var i,n=G.State.delayedElements.count++;G.State.delayedElements[n]=L,i=n;P(L).delayBegin=(new Date).getTime(),P(L).delay=parseFloat(N.delay),P(L).delayTimer={setTimeout:setTimeout(t,parseFloat(N.delay)),next:e}}),N.duration.toString().toLowerCase()){case"fast":N.duration=200;break;case"normal":N.duration=400;break;case"slow":N.duration=600;break;default:N.duration=parseFloat(N.duration)||1}function i(t){var O,M,e,i,n;if(N.begin&&0===A)try{N.begin.call(T,T)}catch(t){setTimeout(function(){throw t},1)}if("scroll"===x){var o,s,a,r=/^x$/i.test(N.axis)?"Left":"Top",l=parseFloat(N.offset)||0;N.container?j.isWrapped(N.container)||j.isNode(N.container)?(N.container=N.container[0]||N.container,a=(o=N.container["scroll"+r])+W(L).position()[r.toLowerCase()]+l):N.container=null:(o=G.State.scrollAnchor[G.State["scrollProperty"+r]],s=G.State.scrollAnchor[G.State["scrollProperty"+("Left"===r?"Top":"Left")]],a=W(L).offset()[r.toLowerCase()]+l),B={scroll:{rootPropertyValue:!1,startValue:o,currentValue:o,endValue:a,unitType:"",easing:N.easing,scrollData:{container:N.container,direction:r,alternateValue:s}},element:L},G.debug&&console.log("tweensContainer (scroll): ",B.scroll,L)}else if("reverse"===x){if(!(O=P(L)))return;if(!O.tweensContainer)return void W.dequeue(L,N.queue);for(var c in"none"===O.opts.display&&(O.opts.display="auto"),"hidden"===O.opts.visibility&&(O.opts.visibility="visible"),O.opts.loop=!1,O.opts.begin=null,O.opts.complete=null,I.easing||delete N.easing,I.duration||delete N.duration,N=W.extend({},O.opts,N),M=W.extend(!0,{},O?O.tweensContainer:null))M.hasOwnProperty(c)&&"element"!==c&&(e=M[c].startValue,M[c].startValue=M[c].currentValue=M[c].endValue,M[c].endValue=e,j.isEmptyObject(I)||(M[c].easing=N.easing),G.debug)&&console.log("reverse tweensContainer ("+c+"): "+JSON.stringify(M[c]),L);B=M}else if("start"===x){(O=P(L))&&O.tweensContainer&&!0===O.isAnimating&&(M=O.tweensContainer);var h,d=function(t,e){var i=V.Hooks.getRoot(t),n=!1,o=e[0],s=e[1],a=e[2];if(O&&O.isSVG||"tween"===i||!1!==V.Names.prefixCheck(i)[1]||V.Normalizations.registered[i]!==H){(N.display!==H&&null!==N.display&&"none"!==N.display||N.visibility!==H&&"hidden"!==N.visibility)&&/opacity|filter/.test(t)&&!a&&0!==o&&(a=0),N._cacheValues&&M&&M[t]?(a===H&&(a=M[t].endValue+M[t].unitType),n=O.rootPropertyValueCache[i]):V.Hooks.registered[t]?a===H?(n=V.getPropertyValue(L,i),a=V.getPropertyValue(L,t,n)):n=V.Hooks.templates[i][1]:a===H&&(a=V.getPropertyValue(L,t));var r,l,c=!1,e=function(t,e){var e=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(t){return i=t,""}),i=i||V.Values.getUnitType(t);return[e,i]};if(a!==o&&j.isString(a)&&j.isString(o)){for(var h="",d=0,u=0,p=[],f=[],g=0,m=0,_=0,a=V.Hooks.fixColors(a),o=V.Hooks.fixColors(o);d<a.length&&u<o.length;){var v=a[d],y=o[u];if(/[\d\.-]/.test(v)&&/[\d\.-]/.test(y)){for(var w=v,b=y,S=".",T=".";++d<a.length;){if((v=a[d])===S)S="..";else if(!/\d/.test(v))break;w+=v}for(;++u<o.length;){if((y=o[u])===T)T="..";else if(!/\d/.test(y))break;b+=y}var E,C,x=V.Hooks.getUnit(a,d),$=V.Hooks.getUnit(o,u);d+=x.length,u+=$.length,x===$?w===b?h+=w+x:(h+="{"+p.length+(m?"!":"")+"}"+x,p.push(parseFloat(w)),f.push(parseFloat(b))):(E=parseFloat(w),C=parseFloat(b),h+=(g<5?"calc":"")+"("+(E?"{"+p.length+(m?"!":"")+"}":"0")+x+" + "+(C?"{"+(p.length+(E?1:0))+(m?"!":"")+"}":"0")+$+")",E&&(p.push(E),f.push(0)),C&&(p.push(0),f.push(C)))}else{if(v!==y){g=0;break}h+=v,d++,u++,0===g&&"c"===v||1===g&&"a"===v||2===g&&"l"===v||3===g&&"c"===v||4<=g&&"("===v?g++:(g&&g<5||4<=g&&")"===v&&--g<5)&&(g=0),0===m&&"r"===v||1===m&&"g"===v||2===m&&"b"===v||3===m&&"a"===v||3<=m&&"("===v?(3===m&&"a"===v&&(_=1),m++):_&&","===v?3<++_&&(m=_=0):(_&&m<(_?5:4)||(_?4:3)<=m&&")"===v&&--m<(_?5:4))&&(m=_=0)}}d===a.length&&u===o.length||(G.debug&&console.error('Trying to pattern match mis-matched strings ["'+o+'", "'+a+'"]'),h=H),h&&(p.length?(G.debug&&console.log('Pattern found "'+h+'" -> ',p,f,"["+a+","+o+"]"),a=p,o=f,r=l=""):h=H)}h||(a=(I=e(t,a))[0],l=I[1],o=(I=e(t,o))[0].replace(/^([+-\/*])=/,function(t,e){return c=e,""}),r=I[1],a=parseFloat(a)||0,o=parseFloat(o)||0,"%"===r&&(/^(fontSize|lineHeight)$/.test(t)?(o/=100,r="em"):/^scale/.test(t)?(o/=100,r=""):/(Red|Green|Blue)$/i.test(t)&&(o=o/100*255,r="")));var A,I,k,D;if(/[\/*]/.test(c))r=l;else if(l!==r&&0!==a)if(0===o)r=l;else{R=R||(e={myParent:L.parentNode||F.body,position:V.getPropertyValue(L,"position"),fontSize:V.getPropertyValue(L,"fontSize")},I=e.position===U.lastPosition&&e.myParent===U.lastParent,k=e.fontSize===U.lastFontSize,U.lastParent=e.myParent,U.lastPosition=e.position,U.lastFontSize=e.fontSize,D={},k&&I?(D.emToPx=U.lastEmToPx,D.percentToPxWidth=U.lastPercentToPxWidth,D.percentToPxHeight=U.lastPercentToPxHeight):(A=O&&O.isSVG?F.createElementNS("http://www.w3.org/2000/svg","rect"):F.createElement("div"),G.init(A),e.myParent.appendChild(A),W.each(["overflow","overflowX","overflowY"],function(t,e){G.CSS.setPropertyValue(A,e,"hidden")}),G.CSS.setPropertyValue(A,"position",e.position),G.CSS.setPropertyValue(A,"fontSize",e.fontSize),G.CSS.setPropertyValue(A,"boxSizing","content-box"),W.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(t,e){G.CSS.setPropertyValue(A,e,"100%")}),G.CSS.setPropertyValue(A,"paddingLeft","100em"),D.percentToPxWidth=U.lastPercentToPxWidth=(parseFloat(V.getPropertyValue(A,"width",null,!0))||1)/100,D.percentToPxHeight=U.lastPercentToPxHeight=(parseFloat(V.getPropertyValue(A,"height",null,!0))||1)/100,D.emToPx=U.lastEmToPx=(parseFloat(V.getPropertyValue(A,"paddingLeft"))||1)/100,e.myParent.removeChild(A)),null===U.remToPx&&(U.remToPx=parseFloat(V.getPropertyValue(F.body,"fontSize"))||16),null===U.vwToPx&&(U.vwToPx=parseFloat(z.innerWidth)/100,U.vhToPx=parseFloat(z.innerHeight)/100),D.remToPx=U.remToPx,D.vwToPx=U.vwToPx,D.vhToPx=U.vhToPx,1<=G.debug&&console.log("Unit ratios: "+JSON.stringify(D),L),D);var P=/margin|padding|left|right|width|text|word|letter/i.test(t)||/X$/.test(t)||"x"===t?"x":"y";switch(l){case"%":a*="x"==P?R.percentToPxWidth:R.percentToPxHeight;break;case"px":break;default:a*=R[l+"ToPx"]}switch(r){case"%":a*=1/("x"==P?R.percentToPxWidth:R.percentToPxHeight);break;case"px":break;default:a*=1/R[r+"ToPx"]}}switch(c){case"+":o=a+o;break;case"-":o=a-o;break;case"*":o*=a;break;case"/":o=a/o}B[t]={rootPropertyValue:n,startValue:a,currentValue:a,endValue:o,unitType:r,easing:s},h&&(B[t].pattern=h),G.debug&&console.log("tweensContainer ("+t+"): "+JSON.stringify(B[t]),L)}else G.debug&&console.log("Skipping ["+i+"] due to a lack of browser support.")};for(h in E)if(E.hasOwnProperty(h)){var u=V.Names.camelCase(h),p=(p=E[h],n=i=m=f=void 0,j.isFunction(p)&&(p=p.call(L,S,$)),j.isArray(p)?(m=p[0],n=!j.isArray(p[1])&&/^[\d-]/.test(p[1])||j.isFunction(p[1])||V.RegEx.isHex.test(p[1])?p[1]:j.isString(p[1])&&!V.RegEx.isHex.test(p[1])&&G.Easings[p[1]]||j.isArray(p[1])?(i=f?p[1]:Y(p[1],N.duration),p[2]):p[1]||p[2]):m=p,f||(i=i||N.easing),[(m=j.isFunction(m)?m.call(L,S,$):m)||0,i,n=j.isFunction(n)?n.call(L,S,$):n]);if(D(V.Lists.colors)){var f=p[0],g=p[1],m=p[2];if(V.RegEx.isHex.test(f)){for(var _=["Red","Green","Blue"],v=V.Values.hexToRgb(f),y=m?V.Values.hexToRgb(m):H,w=0;w<_.length;w++){var b=[v[w]];g&&b.push(g),y!==H&&b.push(y[w]),d(u+_[w],b)}continue}}d(u,p)}B.element=L}B.element&&(V.Values.addClass(L,"velocity-animating"),k.push(B),(O=P(L))&&(""===N.queue&&(O.tweensContainer=B,O.opts=N),O.isAnimating=!0),A===$-1?(G.State.calls.push([k,T,N,null,C.resolver,null,0]),!1===G.State.isTicking&&(G.State.isTicking=!0,X())):A++)}!1!==G.mock&&(!0===G.mock?N.duration=N.delay=1:(N.duration*=parseFloat(G.mock)||1,N.delay*=parseFloat(G.mock)||1)),N.easing=Y(N.easing,N.duration),N.begin&&!j.isFunction(N.begin)&&(N.begin=null),N.progress&&!j.isFunction(N.progress)&&(N.progress=null),N.complete&&!j.isFunction(N.complete)&&(N.complete=null),N.display!==H&&null!==N.display&&(N.display=N.display.toString().toLowerCase(),"auto"===N.display)&&(N.display=G.CSS.Values.getDisplayType(L)),N.visibility!==H&&null!==N.visibility&&(N.visibility=N.visibility.toString().toLowerCase()),N.mobileHA=N.mobileHA&&G.State.isMobile&&!G.State.isGingerbread,!1===N.queue?N.delay?(t=G.State.delayedElements.count++,G.State.delayedElements[t]=L,e=t,t=function(){G.State.delayedElements[e]=!1,i()},P(L).delayBegin=(new Date).getTime(),P(L).delay=parseFloat(N.delay),P(L).delayTimer={setTimeout:setTimeout(i,parseFloat(N.delay)),next:t}):i():W.queue(L,N.queue,function(t,e){if(!0===e)return C.promise&&C.resolver(T),!0;G.velocityQueueEntryFlag=!0,i()}),""!==N.queue&&"fx"!==N.queue||"inprogress"===W.queue(L)[0]||W.dequeue(L)}C.promise&&(E&&I&&!1===I.promiseRejectEmpty?C.resolver():C.rejecter())},G)).animate=_,x=z.requestAnimationFrame||i,G.State.isMobile||F.hidden===H||((r=function(){F.hidden?(x=function(t){return setTimeout(function(){t(!0)},16)},X()):x=z.requestAnimationFrame||i})(),F.addEventListener("visibilitychange",r)),e.Velocity=G,e!==z&&(e.fn.velocity=_,e.fn.velocity.defaults=G.defaults),W.each(["Down","Up"],function(t,h){G.Redirects["slide"+h]=function(i,t,n,e,o,s){var t=W.extend({},t),a=t.begin,r=t.complete,l={},c={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};t.display===H&&(t.display="Down"===h?"inline"===G.CSS.Values.getDisplayType(i)?"inline-block":"block":"none"),t.begin=function(){for(var t in 0===n&&a&&a.call(o,o),c){var e;c.hasOwnProperty(t)&&(l[t]=i.style[t],e=V.getPropertyValue(i,t),c[t]="Down"===h?[e,0]:[0,e])}l.overflow=i.style.overflow,i.style.overflow="hidden"},t.complete=function(){for(var t in l)l.hasOwnProperty(t)&&(i.style[t]=l[t]);n===e-1&&(r&&r.call(o,o),s)&&s.resolver(o)},G(i,c,t)}}),W.each(["In","Out"],function(t,l){G.Redirects["fade"+l]=function(t,e,i,n,o,s){var e=W.extend({},e),a=e.complete,r={opacity:"In"===l?1:0};0!==i&&(e.begin=null),e.complete=i!==n-1?null:function(){a&&a.call(o,o),s&&s.resolver(o)},e.display===H&&(e.display="In"===l?"auto":"none"),G(this,r,e)}}),G;function P(t){t=W.data(t,"velocity");return null===t?H:t}function v(t,e){t=P(t);t&&t.delayTimer&&!t.delayPaused&&(t.delayRemaining=t.delay-e+t.delayBegin,t.delayPaused=!0,clearTimeout(t.delayTimer.setTimeout))}function y(t){t=P(t);t&&t.delayTimer&&t.delayPaused&&(t.delayPaused=!1,t.delayTimer.setTimeout=setTimeout(t.delayTimer.next,t.delayRemaining))}function l(m,e,_,i){var v=4,y=.001,w=1e-7,b=10,S=11,T=1/(S-1),t="Float32Array"in z;if(4!==arguments.length)return!1;for(var n=0;n<4;++n)if("number"!=typeof arguments[n]||isNaN(arguments[n])||!isFinite(arguments[n]))return!1;m=Math.min(m,1),_=Math.min(_,1),m=Math.max(m,0),_=Math.max(_,0);var E=new(t?Float32Array:Array)(S);function o(t,e){return 1-3*e+3*t}function C(t,e,i){return((o(e,i)*t+(3*i-6*e))*t+3*e)*t}function x(t,e,i){return 3*o(e,i)*t*t+2*(3*i-6*e)*t+3*e}function s(t){for(var e=0,i=1,n=S-1;i!==n&&E[i]<=t;++i)e+=T;var o=e+(t-E[--i])/(E[i+1]-E[i])*T,s=x(o,m,_);if(y<=s){for(var a=t,r=o,l=0;l<v;++l){var c=x(r,m,_);if(0===c)return r;r-=(C(r,m,_)-a)/c}return r}if(0===s)return o;for(var h,d,u=t,p=e,f=e+T,g=0;0<(h=C(d=p+(f-p)/2,m,_)-u)?f=d:p=d,Math.abs(h)>w&&++g<b;);return d}var a=!1;function r(){if(a=!0,m!==e||_!==i)for(var t=0;t<S;++t)E[t]=C(t*T,m,_)}function l(t){return a||r(),m===e&&_===i?t:0===t?0:1===t?1:C(s(t),e,i)}l.getControlPoints=function(){return[{x:m,y:e},{x:_,y:i}]};var c="generateBezier("+[m,e,_,i]+")";return l.toString=function(){return c},l}function w(t){return-t.tension*t.x-t.friction*t.v}function b(t,e,i){i={x:t.x+i.dx*e,v:t.v+i.dv*e,tension:t.tension,friction:t.friction};return{dx:i.v,dv:w(i)}}function Y(t,e){var i=t;return j.isString(t)?G.Easings[t]||(i=!1):i=j.isArray(t)&&1===t.length?function(e){return function(t){return Math.round(t*e)*(1/e)}}.apply(null,t):j.isArray(t)&&2===t.length?a.apply(null,t.concat([e])):!(!j.isArray(t)||4!==t.length)&&l.apply(null,t),i=!1===i?G.Easings[G.defaults.easing]?G.defaults.easing:s:i}function X(t){if(t){var e=G.timestamp&&!0!==t?t:C.now(),i=G.State.calls.length;1e4<i&&(G.State.calls=function(t){for(var e=-1,i=t?t.length:0,n=[];++e<i;){var o=t[e];o&&n.push(o)}return n}(G.State.calls),i=G.State.calls.length);for(var n=0;n<i;n++)if(G.State.calls[n]){var o=G.State.calls[n],s=o[0],a=o[2],r=!!(d=o[3]),l=null,c=o[5],h=o[6],d=d||(G.State.calls[n][3]=e-16);if(c){if(!0!==c.resume)continue;d=o[3]=Math.round(e-h-16),o[5]=null}for(var h=o[6]=e-d,u=Math.min(h/a.duration,1),p=0,f=s.length;p<f;p++){var g=s[p],m=g.element;if(P(m)){var _,v,y,w,b,S,T=!1;for(_ in a.display!==H&&null!==a.display&&"none"!==a.display&&("flex"===a.display&&W.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(t,e){V.setPropertyValue(m,"display",e)}),V.setPropertyValue(m,"display",a.display)),a.visibility!==H&&"hidden"!==a.visibility&&V.setPropertyValue(m,"visibility",a.visibility),g)g.hasOwnProperty(_)&&"element"!==_&&(v=g[_],y=j.isString(v.easing)?G.Easings[v.easing]:v.easing,w=j.isString(v.pattern)?v.pattern.replace(/{(\d+)(!)?}/g,1===u?function(t,e,i){e=v.endValue[e];return i?Math.round(e):e}:function(t,e,i){var n=v.startValue[e],e=v.endValue[e]-n,n=n+e*y(u,a,e);return i?Math.round(n):n}):1===u?v.endValue:(w=v.endValue-v.startValue,v.startValue+w*y(u,a,w)),!r&&w===v.currentValue||(v.currentValue=w,"tween"===_?l=w:(V.Hooks.registered[_]&&(b=V.Hooks.getRoot(_),S=P(m).rootPropertyValueCache[b])&&(v.rootPropertyValue=S),S=V.setPropertyValue(m,_,v.currentValue+(E<9&&0===parseFloat(w)?"":v.unitType),v.rootPropertyValue,v.scrollData),V.Hooks.registered[_]&&(V.Normalizations.registered[b]?P(m).rootPropertyValueCache[b]=V.Normalizations.registered[b]("extract",null,S[1]):P(m).rootPropertyValueCache[b]=S[1]),"transform"===S[0]&&(T=!0))));a.mobileHA&&P(m).transformCache.translate3d===H&&(P(m).transformCache.translate3d="(0px, 0px, 0px)",T=!0),T&&V.flushTransformCache(m)}}a.display!==H&&"none"!==a.display&&(G.State.calls[n][2].display=!1),a.visibility!==H&&"hidden"!==a.visibility&&(G.State.calls[n][2].visibility=!1),a.progress&&a.progress.call(o[1],o[1],u,Math.max(0,d+a.duration-e),d,l),1===u&&O(n)}}G.State.isTicking&&x(X)}function O(t,e){if(G.State.calls[t]){for(var i=G.State.calls[t][0],n=G.State.calls[t][1],o=G.State.calls[t][2],s=G.State.calls[t][4],a=!1,r=0,l=i.length;r<l;r++){var c,h=i[r].element,d=(e||o.loop||("none"===o.display&&V.setPropertyValue(h,"display",o.display),"hidden"===o.visibility&&V.setPropertyValue(h,"visibility",o.visibility)),P(h));if(!0===o.loop||W.queue(h)[1]!==H&&/\.velocityQueueEntryFlag/i.test(W.queue(h)[1])||d&&(d.isAnimating=!1,c=!(d.rootPropertyValueCache={}),W.each(V.Lists.transforms3D,function(t,e){var i=/^scale/.test(e)?1:0,n=d.transformCache[e];d.transformCache[e]!==H&&new RegExp("^\\("+i+"[^.]").test(n)&&(c=!0,delete d.transformCache[e])}),o.mobileHA&&(c=!0,delete d.transformCache.translate3d),c&&V.flushTransformCache(h),V.Values.removeClass(h,"velocity-animating")),!e&&o.complete&&!o.loop&&r===l-1)try{o.complete.call(n,n)}catch(t){setTimeout(function(){throw t},1)}s&&!0!==o.loop&&s(n),d&&!0===o.loop&&!e&&(W.each(d.tweensContainer,function(t,e){var i;/^rotate/.test(t)&&(parseFloat(e.startValue)-parseFloat(e.endValue))%360==0&&(i=e.startValue,e.startValue=e.endValue,e.endValue=i),/^backgroundPosition/.test(t)&&100===parseFloat(e.endValue)&&"%"===e.unitType&&(e.endValue=0,e.startValue=100)}),G(h,"reverse",{loop:!0,delay:o.delay})),!1!==o.queue&&W.dequeue(h,o.queue)}G.State.calls[t]=!1;for(var u=0,p=G.State.calls.length;u<p;u++)if(!1!==G.State.calls[u]){a=!0;break}!1===a&&(G.State.isTicking=!1,delete G.State.calls,G.State.calls=[])}}jQuery.fn.velocity=jQuery.fn.animate}),!function(t){"use strict";"function"==typeof require&&"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("toast/animations/_velocity.ui",["./_velocity"],t):t()}(function(){"use strict";var t=window.jQuery||window.Zepto||window,e=window,y=void(window&&window.document),w=t.Velocity;if(w&&w.Utilities){var i,n,o,b=w.Utilities,t=w.version;if(t=t,n=[],(i={major:1,minor:1,patch:0})&&t&&(b.each([i,t],function(t,e){var i=[];b.each(e,function(t,e){for(;e.toString().length<5;)e="0"+e;i.push(e)}),n.push(i.join(""))}),parseFloat(n[0])>parseFloat(n[1])))throw i="Velocity UI Pack: You need to update Velocity (velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.",alert(i),new Error(i);for(o in w.RegisterEffect=w.RegisterUI=function(_,v){return w.Redirects[_]=function(n,a,o,s,r,l,c){var h=o===s-1,t=0;c=c||v.loop,"function"==typeof v.defaultDuration?v.defaultDuration=v.defaultDuration.call(r,r):v.defaultDuration=parseFloat(v.defaultDuration);for(var e=0;e<v.calls.length;e++)"number"==typeof(g=v.calls[e][1])&&(t+=g);for(var i=1<=t?0:v.calls.length?(1-t)/v.calls.length:1,e=0;e<v.calls.length;e++){var d,u=v.calls[e],p=u[0],f=1e3,g=u[1],u=u[2]||{},m={};a.duration!==y?f=a.duration:v.defaultDuration!==y&&(f=v.defaultDuration),m.duration=f*("number"==typeof g?g:i),m.queue=a.queue||"",m.easing=u.easing||"ease",m.delay=parseFloat(u.delay)||0,m.loop=!v.loop&&u.loop,m._cacheValues=u._cacheValues||!0,0===e&&(m.delay+=parseFloat(a.delay)||0,0===o&&(m.begin=function(){a.begin&&a.begin.call(r,r);var t,e,n,o,s,i=_.match(/(In|Out)$/);i&&"In"===i[0]&&p.opacity!==y&&b.each(r.nodeType?[r]:r,function(t,e){w.CSS.setPropertyValue(e,"opacity",0)}),a.animateParentHeight&&i&&(t=r,i=i[0],e=f+m.delay,n=a.stagger,s=0,b.each(t.nodeType?[t]:t,function(t,i){n&&(e+=t*n),o=i.parentNode;t=["height","paddingTop","paddingBottom","marginTop","marginBottom"];"border-box"===w.CSS.getPropertyValue(i,"boxSizing").toString().toLowerCase()&&(t=["height"]),b.each(t,function(t,e){s+=parseFloat(w.CSS.getPropertyValue(i,e))})}),w.animate(o,{height:("In"===i?"+":"-")+"="+s},{queue:!1,easing:"ease-in-out",duration:e*("In"===i?.6:1)}))}),null!==a.display&&(a.display!==y&&"none"!==a.display?m.display=a.display:/In$/.test(_)&&(u=w.CSS.Values.getDisplayType(n),m.display="inline"===u?"inline-block":u)),a.visibility)&&"hidden"!==a.visibility&&(m.visibility=a.visibility),e===v.calls.length-1&&(d=function(){a.display!==y&&"none"!==a.display||!/Out$/.test(_)||b.each(r.nodeType?[r]:r,function(t,e){w.CSS.setPropertyValue(e,"display","none")}),a.complete&&a.complete.call(r,r),l&&l.resolver(r||n)},m.complete=function(){if(c&&w.Redirects[_](n,a,o,s,r,l,!0===c||Math.max(0,c-1)),v.reset){for(var t in v.reset){var e;v.reset.hasOwnProperty(t)&&(e=v.reset[t],w.CSS.Hooks.registered[t]!==y||"string"!=typeof e&&"number"!=typeof e||(v.reset[t]=[v.reset[t],v.reset[t]]))}var i={duration:0,queue:!1};h&&(i.complete=d),w.animate(n,v.reset,i)}else h&&d()},"hidden"===a.visibility)&&(m.visibility=a.visibility),w.animate(n,p,m)}},w},w.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:0}]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]}],[{opacity:[1,"easeInOutQuad"]}],[{opacity:[0,"easeInOutQuad"]}],[{opacity:[1,"easeInOutQuad"]}]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15}],[{rotateZ:-10}],[{rotateZ:5}],[{rotateZ:-5}],[{rotateZ:0}]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10}],[{opacity:0,rotateY:90}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15}],[{opacity:0,rotateX:90}]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0},resetEffectName:"transition.swoopIn"},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0},resetEffectName:"transition.whirlIn"},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1},resetEffectName:"transition.shrinkIn"},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1},resetEffectName:"transition.expandIn"},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.35],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.45]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1},resetEffectName:"transition.bounceIn"},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0},resetEffectName:"transition.bounceUpIn"},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0},resetEffectName:"transition.bounceDownIn"},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0},resetEffectName:"transition.bounceLeftIn"},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0},resetEffectName:"transition.bounceRightIn"},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,"100%"],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:["-100%",0],translateZ:0}]],reset:{translateY:0},resetEffectName:"transition.slideUpIn"},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,"-100%"],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:["100%",0],translateZ:0}]],reset:{translateY:0},resetEffectName:"transition.slideDownIn"},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,"-100%"],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:["-100%",0],translateZ:0}]],reset:{translateX:0},resetEffectName:"transition.slideLeftIn"},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,"100%"],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:["100%",0],translateZ:0}]],reset:{translateX:0},resetEffectName:"transition.slideRightIn"},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,"-100%"],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:["-100%",0],translateZ:0}]],reset:{translateY:0},resetEffectName:"transition.slideUpBigIn"},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,"-100%"],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:["100%",0],translateZ:0}]],reset:{translateY:0},resetEffectName:"transition.slideDownBigIn"},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,"-100%"],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:["-100%",0],translateZ:0}]],reset:{translateX:0},resetEffectName:"transition.slideLeftBigIn"},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,"100%"],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:["100%",0],translateZ:0}]],reset:{translateX:0},resetEffectName:"transition.slideRightBigIn"},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0},resetEffectName:"transition.perspectiveUpIn"},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0},resetEffectName:"transition.perspectiveDownIn"},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0},resetEffectName:"transition.perspectiveLeftIn"},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0},resetEffectName:"transition.perspectiveRightIn"}},w.RegisterEffect.packagedEffects)w.RegisterEffect.packagedEffects.hasOwnProperty(o)&&w.RegisterEffect(o,w.RegisterEffect.packagedEffects[o]);w.RunSequence=function(t){var a=b.extend(!0,[],t);1<a.length&&(b.each(a.reverse(),function(t,e){var i,n,o,s=a[t+1];s&&(t=e.o||e.options,i=s.o||s.options,t=t&&!1===t.sequenceQueue?"begin":"complete",n=i&&i[t],(o={})[t]=function(){var t=s.e||s.elements,t=t.nodeType?[t]:t;n&&n.call(t,t),w(e)},s.o?s.o=b.extend({},i,o):s.options=b.extend({},i,o))}),a.reverse()),w(a[0])}}else e.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting.")}),define("toast/animations/Animation",["../core","./_velocity","./_velocity.ui"],function(Toast,Velocity){"use strict";var STATUS_NONE=-1,STATUS_PLAYING=1,STATUS_REVERING=2,STATUS_COMPLETED=3,Animation=Toast.Animation=function(t,e,i){t=t||[],i=i||{},this.id=Toast.UUID4().prefix("ani"),this.view=t,this.$el=this.view.$parent,this.options=i,this.initialize.apply(this,arguments)};return Toast.Animation.STATUS_NONE=STATUS_NONE,Toast.Animation.STATUS_PLAYING=STATUS_PLAYING,Toast.Animation.STATUS_REVERING=STATUS_REVERING,Toast.Animation.STATUS_COMPLETED=STATUS_COMPLETED,Toast.Animation.DURATION_DEFAULT=500,Toast.Animation.EASING_DEFAULT="ease-out-in",_.extend(Animation.prototype,{initialize:function(view,model,options){var Model=eval("Toast.Animation.Model."+model.name);Model&&(this.model=new Model(view,model,options),this.model.animation=this,this.model.options.complete=$.proxy(this._complete,this),this.model.options.progress||(this.model.options.progress=options.progressCallback)),this.playCount=0},play:function(){var t=_.extend({},this.model.options),t=(this.isAnimating()&&(t.queue=!1),this.$el.velocity(this.model.properties(),t),this.setAnimating(!0),this.ref(),this.status(this.id,STATUS_PLAYING),this.playCount++,this.data("animations"));t||(this.data("animations",[]),t=this.data("animations")),t.push(this)},isAnimating:function(){return this.data("isAnimating-"+this.view.model.id)},setAnimating:function(t){this.view.isAnimating=t,this.data("isAnimating-"+this.view.model.id,t)},stop:function(){this.isAnimating()&&(this.$el.velocity("stop"),this.reset()),this.$el.velocity(this.model.reverses(),{duration:0})},stopImmediately:function(){this.$el.velocity("stop",!0),this.reset(),this.$el.velocity(this.model.reverses(),{duration:0})},count:function(t){return t?this.data("count-"+t+"-"+this.view.model.id):this.data("count-"+this.view.model.id)},ref:function(t){var t=t?t+"-"+this.view.model.id:this.view.model.id,e=this.data("count-"+t);return e?e++:e=1,this.data("count-"+t,e),e},unref:function(t){var t=t?t+"-"+this.view.model.id:this.view.model.id,e=this.data("count-"+t);return e?e--:e=1,e=Math.max(0,e),this.data("count-"+t,e),e},status:function(t,e){var i="status";if(t&&(i+="-"+t),1===arguments.length)return this.data(i);this.data(i,e)},reset:function(){this.removeData("animations"),this.removeData("count-"+this.view.model.id),this.setAnimating(!1),this.status(this.view.model.id,STATUS_NONE),this.status(this.id,STATUS_NONE),this.playCount=0},data:function(t,e){if(1===arguments.length)return this.$el.data(t);2===arguments.length&&this.$el.data(t,e)},removeData:function(t){this.$el.removeData(t)},_complete:function(t){var e,i=this.unref();this.model.options._loop||this.model.options.count!==this.playCount||this.status(this.id)!==STATUS_REVERING?this.model.options._reverse||this.model.options._loop||1<this.model.options.count?this.status(this.id)===STATUS_REVERING&&(this.model.options._loop||1<this.model.options.count)?this.play():(e=_.extend({},this.model.options),this.status(this.view.model.id)===STATUS_REVERING?e.queue=!1:this.status(this.view.model.id,STATUS_REVERING),this.status(this.id,STATUS_REVERING),this.model.options._reverse||(e.duration=0),this.$el.velocity(this.model.reverses(),e)):0==i&&(this.view.isAnimating=!1,this.options.completeCallback)&&this.options.completeCallback(this.data("animations")):(this.playCount=0,this.status(this.view.model.id,STATUS_NONE),this.status(this.id,STATUS_NONE),this.view.isAnimating=!1,this.options.completeCallback&&this.options.completeCallback(this.data("animations")))}}),_.extend(Animation,{create:function(t,e,i){return new((i=i||{}).effect?Toast.Animation.Effect:Animation)(t,e,i)}}),Toast.Velocity=Velocity,Animation.extend=Toast.extend,Toast.Animation=Animation}),define("toast/animations/Effect",["../core","./Animation"],function(Toast,Animation){"use strict";var __super__=Animation.prototype,Effect=Animation.extend();return _.extend(Effect.prototype,__super__,{initialize:function(view,model,options){var Model=eval("Toast.Animation.Model"),registerEffect=(Model&&(this.model=new Model(view,model),this.model.options.complete=$.proxy(this._complete,this)),this.name=this.model._.name,Toast.Velocity.RegisterEffect.packagedEffects[this.name]);if(registerEffect){if(!model.properties.inputDuration&&model.properties.namedDurations){var defaultDuration=Toast.Velocity.RegisterEffect.packagedEffects[this.name].defaultDuration,model_=this.model._;switch(model_.properties.namedDurations){case"fast":this.model.options.duration=.7*defaultDuration;break;case"normal":this.model.options.duration=defaultDuration;break;case"slow":this.model.options.duration=defaultDuration+1.5;break;default:this.model.options.duration=defaultDuration}}this.isRegisterEffect=!0}this.playCount=0},play:function(){this.isRegisterEffect&&(this.data("org-style")||this.data("org-style",this.$el.attr("style")),this.$el.show(),this.$el.velocity(this.name,this.model.options))},stop:function(){this.isRegisterEffect&&(this.$el.velocity("stop"),this.reset(),this.$el.attr("style",this.data("org-style")),"showpage"===this.model._.event.type)&&this.$el.hide()},stopImmediately:function(){this.isRegisterEffect&&(this.$el.velocity("stop",!0),this.reset(),this.$el.attr("style",this.data("org-style")),"showpage"===this.model._.event.type)&&this.$el.hide()},_complete:function(t){var e,i;(this.model.options._loop||this.playCount<this.model.options.count-1)&&((e=Toast.Velocity.RegisterEffect.packagedEffects[this.name].resetEffectName)&&this.status(this.id)!==Toast.Animation.STATUS_REVERING?(i=_.extend({queue:!1},this.model.options),this.status(this.id,Toast.Animation.STATUS_REVERING),this.$el.velocity(e,i)):(this.playCount++,this.status(this.id,Toast.Animation.STATUS_PLAYING),this.play()))}}),Toast.Animation.Effect=Effect}),define("toast/animations/Model",["../core","./Animation"],function(t,e){"use strict";function i(t,e){if(this.view=t,this._=e,this.options={},e.properties.easing&&(this.options.easing=e.properties.easing),e.properties.inputDuration)this.options.duration=e.properties.duration;else if(e.properties.namedDurations)switch(e.properties.namedDurations){case"fast":this.options.duration=300;break;case"normal":this.options.duration=500;break;case"slow":this.options.duration=800;break;default:this.options.duration=500}_.isUndefined(this.options.duration)&&(this.options.duration=500),e.properties.delay&&(this.options.delay=e.properties.delay),e.properties.reverse&&(this.options._reverse=e.properties.reverse),_.isUndefined(e.properties.count)?this.options.count=1:this.options.count=Number(e.properties.count),e.properties.loop&&(this.options._loop=e.properties.loop),this.initialize.apply(this,arguments)}return _.extend(i.prototype,{initialize:function(t,e,i){},properties:function(){return{}},reverses:function(){return{}}}),i.extend=t.extend,t.Animation.Model=i}),define("toast/animations/Opacity",["../core","./Model"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t,e,i){_.isUndefined(t.style.opacity)?this._opacity=1:this._opacity=t.style.opacity},properties:function(){return{opacity:this._.properties.opacity/100}},reverses:function(){return{opacity:this._opacity}}}),t.Animation.Model.Opacity=e}),define("toast/animations/Position",["../core","./Model"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t,e,i){var n,o=t.$parent.css("display");t.$parent.is(":visible")||"none"!==o||(t.$parent.show(),n=!0),this._left=parseInt(t.$parent.css("left")),this._top=parseInt(t.$parent.css("top")),n&&t.$parent.hide(),this.progressCallback=i.progressCallback,_.isEmpty(String(this._.properties.curve))||isNaN(this._.properties.curve)||(this.options.progress=$.proxy(this._progress,this))},properties:function(){var t;return this._.properties.offset?((t={}).left=parseInt(this.view.$parent.position().left/this.view.viewController.contentScale)+this._.properties.left,t.top=parseInt(this.view.$parent.position().top/this.view.viewController.contentScale)+this._.properties.top,t):{left:this._.properties.left,top:this._.properties.top}},reverses:function(){return{left:this._left,top:this._top}},_progress:function(t,e,i,n,o){var s=this._.properties.curve,a=parseInt($(t).css("top"))-s,r=parseInt($(t).css("left")),e=($(t).height(),Math.sin(2*e*Math.PI),Math.cos(2*e*Math.PI));$(t).css({left:r,top:a+s*e}),this.progressCallback&&this.progressCallback(this.animation.data("animations"))}}),t.Animation.Model.Position=e}),define("toast/animations/Size",["../core","./Model"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t,e,i){this._width=t.$parent.width(),this._height=t.$parent.height(),(t.model.hasChildren()||t.model.container||t.model.multilayerContainer)&&(this.options.progress=$.proxy(this._progress,this,t))},properties:function(){var t;return this._.properties.offset?(t={},0!==this._.properties.width&&(t.width=this.view.$parent.width()+this._.properties.width),0!==this._.properties.height&&(t.height=this.view.$parent.height()+this._.properties.height),t):{width:this._.properties.width,height:this._.properties.height}},reverses:function(){return{width:this._width,height:this._height}},_progress:function(t,e,i,n,o,s){var a;t&&t.model&&(t.model.hasChildren()||t.model.container||t.model.multilayerContainer)&&(a=$(e).width(),e=$(e).height(),t.size({width:a,height:e},{save:!1}))}}),t.Animation.Model.Size=e}),define("toast/animations/Rotate",["../core","./Model"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t,e,i){_.isUndefined(e.currentRotate)?this._deg=t.model.rotate:this._deg=e.currentRotate},properties:function(){return{rotateZ:this._.properties.angle+"deg"}},reverses:function(){return{rotateZ:this._deg+"deg"}}}),t.Animation.Model.Rotate=e}),define("toast/animations/Zoom",["../core","./Model"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t,e,i){this._scale=t.$parent.tt_scale()},properties:function(){return{scale:this._.properties.zoomScale/100}},reverses:function(){return{scale:this._scale}}}),t.Animation.Model.Zoom=e}),define("toast/animations/Text",["../core","./Model"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t,e,i){}}),t.Animation.Model.Text=e}),define("toast/animations",["exports","./core","./animations/Animation","./animations/Effect","./animations/Opacity","./animations/Position","./animations/Size","./animations/Rotate","./animations/Zoom","./animations/Text"],function(t,e){}),define("toast/utils/PathUtils",["../core"],function(t){"use strict";var r=t.PathUtils={urlParseRE:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#\.]*(?:\.[^\?#\.]+)*(\.[^\?#\.]+)|[^\?#]*)))?(\?[^#]+)?)(#.*)?/,parsedUrlPropNames:["href","hrefNoHash","hrefNoSearch","domain","protocol","doubleSlash","authority","userinfo","username","password","host","hostname","port","pathname","directory","filename","filenameExtension","search","hash"],defaultPorts:{http:"80",https:"443",ftp:"20",ftps:"990"},parseUrl:function(t){if(t&&"object"==typeof t)return t;for(var e=r.urlParseRE.exec(t||"")||[],i=r.parsedUrlPropNames,n=i.length,o={},s=0;s<n;s++)o[i[s]]=e[s]||"";return o},port:function(t){t=r.parseUrl(t);return t.port||r.defaultPorts[t.protocol]},isSameDomain:function(t,e){return r.parseUrl(t).domain===r.parseUrl(e).domain},isRelativeUrl:function(t){return""===r.parseUrl(t).protocol},isAbsoluteUrl:function(t){return""!==r.parseUrl(t).protocol},makePathAbsolute:function(t,e){if(t&&"/"===t.charAt(0))return t;t=t||"";for(var i=(e=e?e.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"")?e.split("/"):[],n=t.split("/"),o=0;o<n.length;o++){var s=n[o];switch(s){case".":break;case"..":i.length&&i.pop();break;default:i.push(s)}}return"/"+i.join("/")},makePathRelative:function(t,e){e=e?e.replace(/^\/|\/?[^\/]*$/g,""):"",t=t?t.replace(/^\//,""):"";for(var i=e?e.split("/"):[],n=t.split("/"),o=[],s=i.length,a=!1,r=0;r<s;r++)(a=a||n[0]!==i[r])?o.push(".."):n.shift();return o.concat(n).join("/")},makeUrlAbsolute:function(t,e){var i,n,o,s,a;return r.isRelativeUrl(t)?(i=r.parseUrl(t),e=r.parseUrl(e),n=i.protocol||e.protocol,o=i.protocol?i.doubleSlash:i.doubleSlash||e.doubleSlash,s=i.authority||e.authority,a=""!==i.pathname,n+o+s+r.makePathAbsolute(i.pathname||e.filename,e.pathname)+(i.search||!a&&e.search||"")+i.hash):t}};for(var e,i=r.parsedUrlPropNames,n=i.length,o=0;o<n;o++)e=i[o],r[e]||(r[e]=function(e){return function(t){return r.parseUrl(t)[e]}}(e));return r}),define("toast/utils/Loader",["require","exports","module","../core","./PathUtils"],function(e,t,i,n,o){"use strict";function s(t,e,i){t={type:"text/css",rel:"stylesheet",href:t},t=$("<link/>").attr(t);return i&&t.attr(i),e&&e.resolve(),t.appendTo("head"),t[0]}function a(t,e){e=_.extend({parentEl:document.head},e);var i,n=$(e.parentEl).find('script[src="'+t+'"]');return _.isUndefined(n[0])?((i=document.createElement("script")).src=t,i.addEventListener?(e.success&&i.addEventListener("load",e.success,!1),e.error&&i.addEventListener("error",e.error,!1)):i.readyState&&e.success&&(i.onreadystatechange=e.success),e.parentEl.appendChild(i),i):(e.success&&e.success(),n[0])}function r(t,e){t=t.uri.substr(0,t.uri.lastIndexOf("/")+1);return e&&(t+=e),t}function l(t,e){t=encodeURI(r(t,e));return t="win"===n.platform&&-1!==t.indexOf(":")?"file:///"+t:t}function c(t,e){t=o.isAbsoluteUrl(e)?e:l(t,e);return $.get(t)}function h(t){var i=new $.Deferred;return e(["text!"+t],function(t){try{var e=JSON.parse(t);i.resolve(e)}catch(t){i.reject()}}),i.promise()}t.addEmbeddedStyleSheet=function(t){return $("<style>").text(t).appendTo("head")[0]},t.addLinkedStyleSheet=s,t.getModulePath=r,t.getModuleUrl=l,t.loadFile=c,t.loadStyleSheet=function(t,n){var o=new $.Deferred;return c(t,n).done(function(t){var e=this.url,i=new $.Deferred,n=s(e,i);i.done(function(){o.resolve(n)}).fail(o.reject)}).fail(o.reject),o.fail(function(t,e,i){void 0!==t.readyState?console.error("[Loader] Unable to read stylesheet "+n+":",e,i):console.error("[Loader] Unable to process stylesheet "+n,t)}),o.promise()},t.loadScript=function(t,n){var i=new $.Deferred;return c(t,n).done(function(t){var e=a(this.url,{success:function(){i.resolve(e)},error:function(){i.reject()}})}).fail(i.reject),i.fail(function(t,e,i){void 0!==t.readyState?console.error("[Loader] Unable to read script "+n+":",e,i):console.error("[Loader] Unable to process script "+n,t)}),i.promise()},t.loadJson=h,t.loadPackageJson=function(t){return h(t+"/package.json")},t.addJavascript=a,n.Loader=t}),define("toast/utils/Async",["../core"],function(t){"use strict";var s=t.Async={ERROR_TIMEOUT:{}};return _.extend(s,{doInParallel:function(i,n,o){var s,a,r=[],l=new $.Deferred;return 0===i.length?l.resolve():(s=0,a=!1,i.forEach(function(t,e){t=n(t,e);r.push(t),t.fail(function(){o?l.reject():a=!0}),t.always(function(){++s===i.length&&(a?l.reject():l.resolve())})})),l.promise()},doSequentially:function(n,o,s){var a=new $.Deferred,r=!1;return function t(e){var i;e>=n.length?r?a.reject():a.resolve():((i=o(n[e],e)).done(function(){t(e+1)}),i.fail(function(){s?a.reject():(r=!0,t(e+1))}))}(0),a.promise()},doSequentiallyInBackground:function(t,n,o,s){o=o||15,s=s||30;var a=(new Date).getTime();return doSequentially(t,function(t,e){var i=new $.Deferred;return n(t,e),(new Date).getTime()-a>=o?window.setTimeout(function(){a=(new Date).getTime(),i.resolve()},s):i.resolve(),i},!1)},firstSequentially:function(i,n){var o=new $.Deferred;return function t(e){e>=i.length?o.reject():n(i[e],e).fail(function(){t(e+1)}).done(function(){o.resolve(i[e])})}(0),o.promise()},withTimeout:function(t,e,i){var n,o=new $.Deferred;return 0<e&&(n=window.setTimeout(function(){i?o.resolve():o.reject(s.ERROR_TIMEOUT)},e)),t.always(function(){n&&window.clearTimeout(n)}),t.then(o.resolve,o.reject),o.promise()},waitForAll:function(e,i,t){var n=new $.Deferred,o=[],s=0,a=!1;return e&&0!==e.length?(i=void 0!==i,void 0!==t&&withTimeout(n,t),e.forEach(function(t){t.fail(function(t){a=!0}).done(function(t){o.push(t)}).always(function(){++s===e.length&&(i&&a?n.reject():n.resolve(o))})})):n.resolve(),n.promise()},ready:function(t,e,i){return this.waitForAll(t,e,i)},chain:function(s,t){var a=$.Deferred();return function t(e,i){if(s.length===e)a.resolveWith(null,i);else{var n=s[e++];try{var o=n.apply(null,i);o.hasOwnProperty("done")&&o.hasOwnProperty("fail")?(o.done(function(){t(e,arguments)}),o.fail(function(){a.rejectWith(null,arguments)})):t(e,[o])}catch(t){a.reject(t)}}}(0,t||[]),a.promise()},promisify:function(t,e){var i=new $.Deferred,n=Array.prototype.slice.call(arguments,2);return n.push(function(t){t?i.reject(t):i.resolve.apply(i,Array.prototype.slice.call(arguments,1))}),t[e].apply(t,n),i.promise()}}),s}),define("toast/utils/FontLoader",["exports","../core","./Async"],function(t,o,i){"use strict";function h(t,e){var i,n=$("head").find('[webfont][name="'+t.name+'"]');n.length?e.resolve():(n=$("<link/>").attr({type:"text/css",rel:"stylesheet",href:(i=t,(o.isPreview||o.isNative?i.default?i.private?"extensions/FontManager/fonts/default/"+(window.require.s.contexts._.config.locale||o.config.language||(o.config.language="ko"))+"/":"extensions/FontManager/fonts/default/common/":"extensions/FontManager/fonts/user/":o.paths.assets+"fonts/")+t.foldername+"/"+t.css),name:t.name,webfont:!0}),e&&n.on("readystatechange",function(){e.resolve()}).on("load",function(){e.resolve()}).on("error",function(){e.resolve()}),n.appendTo("head"))}t.load=function(t,c){var e=new $.Deferred;return(c=_.extend({reset:!0},c)).reset&&$("head").find("[webfont]").remove(),t=t||o.config.fonts,_.isEmpty(t)?e.resolve():i.doInParallel(t,function(t){var e,i,n,o,s,a,r=new $.Deferred;function l(){if(o&&o.offsetWidth!=s&&(o.parentNode.removeChild(o),o=null),a++,!o||5<a)return o&&(o.parentNode.removeChild(o),o=null),n&&clearInterval(n),i(),!0}return _.isEmpty(t.foldername)?r.resolve():c.wait?(h(t),e=t.name,i=function(){r.resolve()},(o=document.createElement("span")).innerHTML="giItT1WQy@!-/#",o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",o.style.fontSize="300px",o.style.fontFamily="sans-serif",o.style.fontVariant="normal",o.style.fontStyle="normal",o.style.fontWeight="normal",o.style.letterSpacing="0",document.body.appendChild(o),s=o.offsetWidth,o.style.fontFamily=e,a=0,l()||(n=setInterval(l,1))):h(t,r),r.promise()}).always(function(){e.resolve()}),e.promise()},t.setCSS=h,t.unsetCSS=function(t){$("head").find('[webfont][name="'+t.name+'"]').remove()},t.unloadAll=function(){$("head").find("webfont").remove()},o.FontLoader=t}),define("text!toast/html-templates/dialog-template.html",[],function(){return'<div class="modal fade modal-dialog-center {{modalClassName}}" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="btn close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h5 class="modal-title">{{title}}</h4>\n      </div>\n      <div class="modal-body">\n        {{{content}}}\n      </div>\n      <div class="modal-footer">\n        {{#buttons}}\n        <button class="dialog-button btn {{className}}" data-button-id="{{id}}">{{text}}</button>\n        {{/buttons}}\n      </div>\n    </div>\n  </div>\n</div>\n\n'}),define("text!toast/html-templates/popup-modal.html",[],function(){return'<div {{#modalWrapperId}}id="{{modalWrapperId}}"{{/modalWrapperId}} class="modal-wrapper modal-wrapper-black popup-modal-wrapper">\n  <button type="button" class="close" data-dismiss="modal"><span class="glyphicon glyphicon-remove" style="top:2px" /></button>\n  <div class="modal-inner-wrapper">\n    <div class="modal modal-dialog-center popup-modal {{#modalClassName}}{{modalClassName}}{{/modalClassName}} fade in">\n      <div class="modal-dialog" {{#modalDialogMaxWidth}}style="max-width: {{modalDialogMaxWidth}}px;"{{/modalDialogMaxWidth}}>\n        <div class="modal-content">\n          \x3c!--<button type="button" class="close" data-dismiss="modal"><span class="glyphicon glyphicon-remove" /></button>--\x3e\n          <div class="modal-body">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("text!toast/html-templates/image-viewer.html",[],function(){return'<div class="iviewer viewer-container" touch-action="none">\n  <div class="viewer-canvas-container">\n    <div class="viewer-canvas"></div>\n    <div class="side-navigate-buttons">\n      <button class="btn btn-side-previous" data-viewer-action="prev">\n        <div class="arrow_carrot-left"></div>\n      </button>\n      <button class="btn btn-side-next" data-viewer-action="next">\n        <div class="arrow_carrot-right"></div>\n      </button>\n    </div>\n  </div>\n  \n  <div class="viewer-footer">\n    <div class="viewer-title"></div>\n    <div class="viewer-description"></div>\n    <div class="viewer-toolbar">\n      <ul>\n        <li class="viewer-zoom-in" data-viewer-action="zoom-in" title="{{Stringss.ZOOM_IN}}"></li>\n        <li class="viewer-zoom-out" data-viewer-action="zoom-out" title="{{Stringss.ZOOM_OUT}}"></li>\n        <li class="viewer-prev" data-viewer-action="prev" title="{{Strings.PREVIOUS}}"></li>\n        <li class="viewer-play" data-viewer-action="play" title="{{Strings.PLAY}}"></li>\n        <li class="viewer-next" data-viewer-action="next" title="{{Strings.NEXT}}"></li>\n        <li class="viewer-one-to-one" data-viewer-action="one-to-one" title="{{Strings.ORIGINAL_SIZE}}"></li>\n        <li class="viewer-reset" data-viewer-action="reset" title="{{Strings.RESET}}"></li>\n      </ul>\n    </div>\n    <div class="viewer-navbar">\n      <ul class="viewer-list"></ul>\n    </div>\n  </div>\n  <div class="viewer-tooltip"></div>\n  <div role="button" class="viewer-button" data-viewer-action="mix" title="{{Strings.CLOSE}}">\n    <span class="glyphicon glyphicon-remove"></span>\n  </div>\n  <div class="viewer-player"></div>\n</div>'}),define("text!toast/html-templates/audioplayer.html",[],function(){return'<audio ></audio>\r\n<div class="player-controlbars" data-control-btn-width="40">\r\n\t<div class="player-controlbar">\r\n\t\t<div class="left-control-group">\r\n\t\t\t<div class="control-btn" data-action="playAndPause">\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="play-icon">\r\n\t\t\t    <path d="M8 5v14l11-7z"/>\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="pause-icon">\r\n\t\t\t    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t\t<div class="player-time">\r\n\t\t\t\t<span class="player-time-current">0:00</span>\r\n\t\t\t\t<span class="player-time-separator"> / </span>\r\n\t\t\t\t<span class="player-time-duration">0:00</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="player-bar">\r\n\t\t\t<div class="player-bar-loaded"></div>\r\n\t\t\t<div class="player-bar-played"></div>\r\n\t\t\t<div class="player-time-slider-wrap">\r\n\t\t\t\t<input type="range" max="100" value="0" data-time-slider>\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="right-control-group">\r\n\t\t\t<div class="player-volume-control-group">\r\n\t\t\t\t<div class="control-btn" data-action="mute">\r\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="mute-off-icon">\r\n\t\t\t\t    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>\r\n\t\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="volume-down-icon">\r\n\t\t\t\t    <path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/>\r\n\t\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="mute-on-icon">\r\n\t\t\t\t    <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>\r\n\t\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'}),define("text!toast/html-templates/videoplayer.html",[],function(){return'<video ></video>\r\n<div class="player-controlbars _hide" data-control-btn-width="40">\r\n\t<div class="player-bar">\r\n\t\t<div class="player-bar-loaded"></div>\r\n\t\t<div class="player-bar-played"></div>\r\n\t\t<div class="player-time-slider-wrap">\r\n\t\t\t<input type="range" max="100" value="0" data-time-slider>\t\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="player-controlbar">\r\n\t\t<div class="left-control-group">\r\n\t\t\t<div class="control-btn" data-action="playAndPause">\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="play-icon">\r\n\t\t\t    <path d="M8 5v14l11-7z"/>\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="pause-icon">\r\n\t\t\t    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t\t<div class="player-volume-control-group">\r\n\t\t\t\t<div class="control-btn" data-action="mute">\r\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="mute-off-icon">\r\n\t\t\t\t    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>\r\n\t\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="volume-down-icon">\r\n\t\t\t\t    <path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/>\r\n\t\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="mute-on-icon">\r\n\t\t\t\t    <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>\r\n\t\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="player-volume-bar">\r\n\t\t\t\t\t<div class="player-volume-bar-wrap">\r\n\t\t\t\t\t\t<div class="player-volume-bar-line"></div>\r\n\t\t\t\t\t\t<div class="player-volume-bar-current"></div>\r\n\t\t\t\t\t\t<input type="range" max="100" value="0" data-volume-slider>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="player-time">\r\n\t\t\t\t<span class="player-time-current">0:0</span>\r\n\t\t\t\t<span class="player-time-separator"> / </span>\r\n\t\t\t\t<span class="player-time-duration">0:0</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="right-control-group">\r\n\t\t\t<div class="control-btn" data-action="playbackRate">\r\n\t\t\t\t<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\r\n\t\t\t\t\t<path d="M26.674,7.892c-6.756,0-12.232,5.477-12.232,12.233s5.477,12.233,12.232,12.233c6.757,0,12.233-5.478,12.233-12.233\r\n\t\t\t\t\tc0.001-6.755-5.476-12.232-12.23-12.233C26.676,7.892,26.676,7.892,26.674,7.892z M34.459,21.236h-8.9V12.34h2.227v6.674h6.674\r\n\t\t\t\t\tV21.236z M5.541,12.34h6.674v2.226H5.541V12.34z M1.093,19.015h8.896v2.226H1.093V19.015z M5.541,25.688h6.674v2.227H5.541V25.688z"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="control-btn" data-action="toggleFullScreen">\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="fullscreen-icon">\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="fullscreen-exit-icon">\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t    <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class="center-icon center-play-btn">\r\n\t<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 841.89 595.281" enable-background="new 0 0 841.89 595.281" xml:space="preserve" pointer-events="none" fill="#fff">\r\n\t\t<path fill="#454545" fill-opacity="0.9" d="M823.566,96.33c-9.656-36.276-30.828-66.98-67.104-76.637  C690.72,2.112,420.945,0.502,420.945,0.502s-269.776,1.61-335.518,19.19C49.151,29.35,28.104,60.054,18.323,96.33  C0.743,162.071,0,297.64,0,297.64s0.743,135.568,18.323,201.311c9.657,36.275,30.828,66.98,67.104,76.637  c65.742,17.58,335.518,19.189,335.518,19.189s269.775-1.609,335.518-19.189c36.275-9.656,57.447-40.361,67.104-76.637  c17.58-65.742,18.324-201.311,18.324-201.311S841.146,162.071,823.566,96.33z"></path>\r\n\t\t<path d="M557.132,297.64L334.28,173.833v247.614"></path>\r\n\t</svg>\r\n</div>\r\n'}),define("text!toast/html-templates/videoplayer.mini.html",[],function(){return'<video ></video>\r\n<div class="player-controlbars" data-control-btn-width="40">\r\n\t<div class="player-controlbar">\r\n\t\t<div class="player-bar">\r\n\t\t\t<div class="player-bar-loaded"></div>\r\n\t\t\t<div class="player-bar-played"></div>\r\n\t\t\t<div class="player-time-slider-wrap">\r\n\t\t\t\t<input type="range" max="100" value="0" data-time-slider>\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="player-time">\r\n\t\t\t<span class="player-time-current">0:0</span>\r\n\t\t\t<span class="player-time-separator"> / </span>\r\n\t\t\t<span class="player-time-duration">0:0</span>\r\n\t\t</div>\r\n\t\t<div class="right-control-group">\r\n\t\t\t<div class="control-btn" data-action="playbackRate">\r\n\t\t\t\t<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\r\n\t\t\t\t\t<path d="M26.674,7.892c-6.756,0-12.232,5.477-12.232,12.233s5.477,12.233,12.232,12.233c6.757,0,12.233-5.478,12.233-12.233\r\n\t\t\t\t\tc0.001-6.755-5.476-12.232-12.23-12.233C26.676,7.892,26.676,7.892,26.674,7.892z M34.459,21.236h-8.9V12.34h2.227v6.674h6.674\r\n\t\t\t\t\tV21.236z M5.541,12.34h6.674v2.226H5.541V12.34z M1.093,19.015h8.896v2.226H1.093V19.015z M5.541,25.688h6.674v2.227H5.541V25.688z"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t\t<div class="control-btn" data-action="toggleFullScreen">\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="fullscreen-icon">\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="fullscreen-exit-icon">\r\n\t\t\t    <path d="M0 0h24v24H0z" fill="none"/>\r\n\t\t\t    <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class="center-icon center-play-btn">\r\n\t<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 841.89 595.281" enable-background="new 0 0 841.89 595.281" xml:space="preserve" pointer-events="none" fill="#fff">\r\n\t\t<path fill="#454545" fill-opacity="0.9" d="M823.566,96.33c-9.656-36.276-30.828-66.98-67.104-76.637  C690.72,2.112,420.945,0.502,420.945,0.502s-269.776,1.61-335.518,19.19C49.151,29.35,28.104,60.054,18.323,96.33  C0.743,162.071,0,297.64,0,297.64s0.743,135.568,18.323,201.311c9.657,36.275,30.828,66.98,67.104,76.637  c65.742,17.58,335.518,19.189,335.518,19.189s269.775-1.609,335.518-19.189c36.275-9.656,57.447-40.361,67.104-76.637  c17.58-65.742,18.324-201.311,18.324-201.311S841.146,162.071,823.566,96.33z"></path>\r\n\t\t<path d="M557.132,297.64L334.28,173.833v247.614"></path>\r\n\t</svg>\r\n</div>\r\n'}),define("text!toast/html-templates/audio-sync-player-controlbar.html",[],function(){return'<div class="control-btn" data-action="playAndPause">\r\n  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="play-icon">\r\n    <path d="M8 5v14l11-7z"/>\r\n    <path d="M0 0h24v24H0z" fill="none"/>\r\n  </svg>\r\n  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="pause-icon">\r\n    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\r\n    <path d="M0 0h24v24H0z" fill="none"/>\r\n  </svg>\r\n</div>\r\n<div class="control-btn" data-action="stop">\r\n  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="stop-icon">\r\n    <path d="M0 0h24v24H0z" fill="none"/><path d="M6 6h12v12H6z"/>\r\n  </svg>\r\n</div>\r\n<div class="player-volume-control-group">\r\n  <div class="control-btn" data-action="mute">\r\n    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="mute-off-icon">\r\n      <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>\r\n      <path d="M0 0h24v24H0z" fill="none"/>\r\n    </svg>\r\n    <svg xmlns="http://www.w3.org/2000/svg"fill="currentColor"  width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="volume-down-icon">\r\n      <path fill="none" d="M-2.083,0h24v24h-24V0z"/>\r\n      <path d="M16.417,12c0-1.77-1.02-3.29-2.5-4.03v8.05C15.397,15.29,16.417,13.77,16.417,12z M2.917,9v6h4l5,5V4l-5,5H2.917z"/>\r\n      <path fill="none" d="M0,0h24v24H0V0z"/>\r\n    </svg>\r\n    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="mute-on-icon">\r\n      <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>\r\n      <path d="M0 0h24v24H0z" fill="none"/>\r\n    </svg>\r\n  </div>\r\n  <div class="player-volume-bar">\r\n    <div class="player-volume-bar-line"></div>\r\n    <div class="player-volume-bar-current"></div>\r\n    <input type="range" max="100" value="0" data-volume-slider>\r\n  </div>\r\n</div>\r\n'}),define("toast/utils/HtmlLoader",["exports","text!../html-templates/dialog-template.html","text!../html-templates/popup-modal.html","text!../html-templates/image-viewer.html","text!../html-templates/audioplayer.html","text!../html-templates/videoplayer.html","text!../html-templates/videoplayer.mini.html","text!../html-templates/audio-sync-player-controlbar.html"],function(t,e,i,n,o,s,a,r){"use strict";t.Dialog=e,t.Popup=i,t.ImageViewer=n,t.AudioPlayer=o,t.VideoPlayer=s,t.VideoPlayerMimi=a,t.AudioSyncPlayerControlbar=r,Toast.HtmlLoader=t}),define("toast/utils/ThemeLoader",["exports","../core"],function(t,c){"use strict";var r,l,e,h;function d(t,e){var i=new $.Deferred,n=new $.Deferred,t=TT.Loader.addLinkedStyleSheet(t,n,e);return less.sheets=[t],less.refresh(),n.done(i.resolve).fail(i.reject),i.promise()}function u(r){var e,i,n,l=new $.Deferred;return e=r,i=new $.Deferred,n={MyStorage:"../html-templates/mystorage.html",Searchbar:"../html-templates/searchbar.html",Searchlist:"../html-templates/searchlist.html",TOC:"../html-templates/toc.html",Thumbnail:"../html-templates/thumbnail.html",PrintModal:"../html-templates/print-dialog.html",ZoomBar:"../html-templates/zoombar.html",Share:"../html-templates/share.html",InputBar:"../html-templates/inputbar.html",Settings:"../html-templates/settings.html"},e(["text!theme.json"],function(t){(t=JSON.parse(t)).templates=_.extend(n,t.templates),t.baseURL=e.toUrl(""),i.resolve(t)},function(){var t={templates:n};t.baseURL=e.toUrl(""),i.resolve(t)}),i.promise().done(function(a){a.config&&!_.isEmpty(a.config)&&a.config.projectConfig&&(c.config=_.extend(c.project.config,a.config.projectConfig),delete a.config.projectConfig),c.theme=a,r(["text!theme.html"],function(t){var e,n,o,s,i;e=r,n=t,o=a,s=l,i=[],_.each(Object.keys(o.templates),function(t){i.push("text!"+o.templates[t])}),e(i,function(){var e=0,i=arguments;_.each(Object.keys(o.templates),function(t){c.HtmlLoader[t]=i[e],e++}),$(document.body).append(Mustache.render(n,{Toast:c,Strings:TT.Strings,theme:o})),0!==$(document.body).find(".start-menu").length&&c.DropdownMenAutoScroller.on(),TT.$el=$(".toast"),TT.$bookContainer=TT.$el.find(".book-container"),TT.$book=TT.$bookContainer.find(".book"),TT.$navbar=TT.$el.find(".navbar"),TT.$controlbar=TT.$el.find(".controlbar"),TT.$toggleZoom=TT.$el.find('[command="toggleZoom"]'),TT.$fullscreen=TT.$el.find('[command="fullscreen"]'),TT.$search=TT.$el.find('[command="search"]'),TT.$first=TT.$el.find('[command="firstPage"]'),TT.$prev=TT.$el.find('[command="previousPage"]'),TT.$next=TT.$el.find('[command="nextPage"]'),TT.$last=TT.$el.find('[command="lastPage"]'),TT.config.reversePageTurnDirection&&(TT.$first.attr("title",TT.Strings.LAST_PAGE),TT.$prev.attr("title",TT.Strings.NEXT_PAGE),TT.$next.attr("title",TT.Strings.PREVIOUS_PAGE),TT.$last.attr("title",TT.Strings.FIRST_PAGE)),TT.$thumbnail=TT.$el.find('[command="thumbnail"]'),TT.$moveToUserInputPage=TT.$el.find('[command="moveToUserInputPage"]'),TT.$pagelabel=TT.$moveToUserInputPage.find(".label-page"),TT.$pageInput=TT.$el.find(".input-page"),TT.$toggleBookmark=TT.$el.find('[command="toggleBookmark"]'),TT.$toggleDoublePage=TT.$el.find('[command="toggleDoublePage"]'),TT.$toggleAutoSlide=TT.$el.find('[command="toggleAutoSlide"]'),TT.$toggleBgSound=TT.$el.find('[command="toggleBgSound"]'),TT.$startMenuDropdown=TT.$el.find(".start-menu.dropdown"),TT.$toggleAutoSlide=TT.$startMenuDropdown.find('[command="toggleAutoSlide"]'),TT.$print=TT.$el.find('[command="print"]'),$(".svg-icon").tt_replaceSvgIcon(),s&&s.resolve(o)})})}),l.promise()}t.load=function(n,o,s,a){var a=new $.Deferred,t=((e=c.config.moduleBaseUrl)&&"./"!==c.config.moduleBaseUrl||(t=(t=decodeURI(window.location.pathname)).substr(0,t.lastIndexOf("/")),e=unescape(t)+"/"),h={text:e+"thirdparty/text",i18n:e+"thirdparty/i18n"},r&&l&&(r(l).unload(),TT.$el.remove(),r.undef(l),l=null),$("head > #theme"));return _.isUndefined(t[0])||t.remove(),t=$("head > #mobile-theme"),_.isUndefined(t[0])||t.remove(),d((c.paths.themeUrl=o)+s+".css",{id:"theme"}).always(function(){var t={context:n,baseUrl:o,paths:h,locale:window.require.s.contexts._.config.locale,waitSeconds:30},e=window.require.s.contexts._.config.charset,i=(e&&(t.charset=e),window.require.config(t));(r=i)([s],function(){l=s,u(i).done(function(t){c.isMobileDevice&&_.isFunction(r(l).hasMobileStyleSheet)&&r(l).hasMobileStyleSheet()?d(o+s+".mobile.css",{id:"mobile-theme"}).always(function(){c.theme._context=r(l),r(l).load(o),c.dispatchReady(c.THEME_READY,r(l)),a.resolve()}):(c.theme._context=r(l),r(l).load(o),c.dispatchReady(c.THEME_READY,r(l)),a.resolve())})},a.resolve)}),a.promise()},c.ThemeLoader=t}),define("toast/utils/ImageUtils",["../core"],function(t){"use strict";return t.ImageUtils={getImageSize:function(t){var e=new $.Deferred,i=new Image;return i.onload=function(){e.resolve(this.width,this.height)},i.onerror=function(t){e.reject("Cannot load the image!")},i.src=t,e.promise()},resizeImage:function(t,o){var s=new $.Deferred,a=new Image;return a.onload=function(){var t=document.createElement("canvas"),e=(t.webkitImageSmoothingEnabled=!0,t.getContext("2d")),i=Math.max(a.width/o,a.height/o),n={};n.width=Math.round(a.width/i),n.height=Math.round(a.height/i),t.width=n.width,t.height=n.height,e.drawImage(a,0,0,a.width,a.height,0,0,n.width,n.height),s.resolve(t.toDataURL(),n.width,n.height)},a.onerror=function(){s.reject("Cannot load the image!")},a.src=t,s.promise()}}}),define("toast/utils/Rect",["../core"],function(t){"use strict";t=t.Rect={};return _.extend(t,{union:function(t,e){var i=(t.left<e.left?t:e).left,n=t.left+t.width>e.left+e.width?t.left+t.width:e.left+e.width,o=(t.top<e.top?t:e).top,t=t.top+t.height>e.top+e.height?t.top+t.height:e.top+e.height;return{left:i,top:o,width:n-i,height:t-o}}}),t}),define("toast/utils/Animate",["../core","./Async"],function(i,a){"use strict";i.animateUsingClass=function(e,t,i){var n=new $.Deferred,o=$(e);function s(t){t.target===e&&n.resolve()}return i=i||400,o.is(":hidden")?n.resolve():o.addClass(t).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",s),a.withTimeout(n.promise(),i,!0).done(function(){o.removeClass(t).off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",s)})},jQuery.fn.extend({animateUsingClass:function(t,e){return i.animateUsingClass(this[0],t,e)}})}),define("toast/utils/jquery.utils",["../core"],function(t){"use strict";for(var n="",e=["Moz","Webkit","Khtml","O","ms"],i=e.length,n="";i--;)e[i]+"Transform"in document.body.style&&(n="-"+e[i].toLowerCase()+"-");jQuery.fn.extend({tt_enable:function(){return this.removeAttr("disabled")},tt_disable:function(){return this.attr("disabled","disabled")},tt_isDisabled:function(){return"disabled"===this.attr("disabled")},tt_select:function(){return this.each(function(){var t,e,i=$(this).get(0);document.body.createTextRange?((t=document.body.createTextRange()).moveToElementText(i),t.select()):window.getSelection&&(e=window.getSelection(),(t=document.createRange()).selectNodeContents(i),e.removeAllRanges(),e.addRange(t))})},tt_deselect:function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},tt_moveCaretToEnd:function(){var t,e,i=$(this).get(0);void 0!==window.getSelection&&void 0!==document.createRange?((t=document.createRange()).selectNodeContents(i),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)):void 0!==document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText(i),e.collapse(!1),e.select())},tt_getCaretPosition:function(){var t=$(this).get(0);if(t)return document.selection&&t.focus(),"selectionStart"in t?t.selectionStart:Math.abs(document.selection.createRange().moveStart("character",-t.value.length))},tt_rotate:function(t,e){var i,n,o;return 0==arguments.length?(i=(i=this.css("-webkit-transform")||this.css("-moz-transform")||this.css("-ms-transform")||this.css("-o-transform")||"").match("matrix\\((.*)\\)"))?(n=(i=i[1].split(","))[0],o=i[1],i[2],i[3],Math.sqrt(n*n+o*o),t=Math.round(Math.atan2(o,n)*(180/Math.PI)),parseFloat(t)):0:this.tt_transform("rotate("+t+(e=e||"deg")+")")},tt_angle:function(){var t=this.css("-webkit-transform")||this.css("-moz-transform")||this.css("-ms-transform")||this.css("-o-transform")||"",e={rad:0,deg:0};return(t=t.match("matrix\\((.*)\\)"))&&void 0!==(t=t[1].split(","))[0]&&void 0!==t[1]&&(e.rad=Math.atan2(t[1],t[0]),e.deg=parseInt(e.rad*(180/Math.PI))),e},tt_scale:function(t){var e;return 0==arguments.length?(e=(e=this.css("-webkit-transform")||this.css("-moz-transform")||this.css("-ms-transform")||this.css("-o-transform")||"").match("matrix\\((.*)\\)"))?(e=e[1].split(","),parseFloat(e[0])):1:this.tt_transform("scale("+t+")")},tt_transform:function(t,e){var i={};return e&&(i[n+"transform-origin"]=e),i[n+"transform"]=t,i.transform=t,this.css(i)},tt_removeAttrsWithPrefix:function(n){return this.each(function(){var t=$.map(this.attributes,function(t){return t.name}),i=$(this);$.each(t,function(t,e){n===e.substr(0,n.length)&&i.removeAttr(e)})})},tt_highlight:function(t){return this.length&&t&&t.length?this.each(function(){!function t(e,i){var n=0;if(3==e.nodeType){var o,s,a=e.data.toUpperCase().indexOf(i);0<=(a-=e.data.substr(0,a).toUpperCase().length-e.data.substr(0,a).length)&&((o=document.createElement("span")).className="highlight",(a=e.splitText(a)).splitText(i.length),s=a.cloneNode(!0),o.appendChild(s),a.parentNode.replaceChild(o,a),n=1)}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var r=0;r<e.childNodes.length;++r)r+=t(e.childNodes[r],i);return n}(this,t.toUpperCase())}):this},tt_removeHighlight:function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName,this.parentNode.replaceChild(this.firstChild,this),this.parentNode.normalize()}).end()},tt_changeTag:function(t){var t=$("<"+t+">"),i={},e=($.each(this.get(0).attributes,function(t,e){i[e.name]=e.value}),t.attr(i),t.data(this.data()),this.children().clone(!0));return t.append(e),this.replaceWith(t),t},tt_replaceSvgIcon:function(){this.each(function(){var e=jQuery(this),i=e.attr("id"),n=e.attr("class"),t=e.attr("src"),o=e.attr("data-icon-color");tt.load(["text!"+t],function(t){t=$(t);void 0!==i&&(t=t.attr("id",i)),!(t=(t=void 0!==n?t.attr("class",n+" replaced-svg"):t).removeAttr("xmlns:a")).attr("viewBox")&&t.attr("height")&&t.attr("width")&&t.attr("viewBox","0 0 "+t.attr("height")+" "+t.attr("width")),o&&t.css("fill",o),e.replaceWith(t)})})}}),jQuery.fn.doubletap=jQuery.fn.doubletap||function(n,o){o=null==o?300:o,this.bind(t.__eventTypes__.end,function(t){var e=(new Date).getTime(),i=e-($(this).data("lastTouch")||e+1);i<o&&0<i?($(this).data("lastTouch",null),null!==n&&"function"==typeof n&&n(t)):$(this).data("lastTouch",e)})},jQuery.tt_getScrollbarWidth=function(){var t=document.createElement("div"),e=(t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t),t.offsetWidth),i=(t.style.overflow="scroll",document.createElement("div")),i=(i.style.width="100%",t.appendChild(i),i.offsetWidth);return t.parentNode.removeChild(t),e-i}}),define("toast/utils/jstree.plugins",["../core"],function(r){"use strict";var l=document.createElement("DIV"),c=(l.className="jstree-pageno",l.innerHTML="&#160;",$.jstree.plugins.pageno=function(t,a){this.teardown=function(){this.element.find(".jstree-pageno").remove(),a.teardown.call(this)},this.redraw_node=function(t,e,i,n){var o,s;return(t=a.redraw_node.apply(this,arguments))&&(o=l.cloneNode(!0),_.isEmpty($(t).attr("data-page"))||(s=r.Book.toLogicalPageNumber(Number($(t).attr("data-page"))),$(o).text(r.Book.getDisplayPageNumber(s))),t.insertBefore(o,t.childNodes[0])),t}},document.createElement("DIV")),h=(c.className="toc-svg-ocl-icon",$.jstree.plugins.svgoclicon=function(t,a){this.teardown=function(){this.element.find(".toc-svg-ocl-icon").remove(),a.teardown.call(this)},this.redraw_node=function(t,e,i,n){var o,s;return(t=a.redraw_node.apply(this,arguments))&&((o=$(c.cloneNode(!1))).append('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="sc-TOsTZ hVqsCp" style="vertical-align: middle;"><g><path d="m12.3 13l7.7 7.7 7.7-7.7 2.3 2.4-10 10-10-10z"></path></g></svg>'),$(t).hasClass("jstree-leaf")||(s=$(t).children(".jstree-ocl")).length&&s.append(o)),t}},document.createElement("DIV")),d=(h.className="toc-svg-file-icon",$.jstree.plugins.svgfileicon=function(t,a){this.teardown=function(){this.element.find(".toc-svg-file-icon").remove(),a.teardown.call(this)},this.redraw_node=function(t,e,i,n){var o,s;return(t=a.redraw_node.apply(this,arguments))&&(o=$(t).children(".jstree-anchor").find(".jstree-file")).length&&((s=$(h.cloneNode(!1))).append('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align: middle;"><g><path d="m21.6 15h9.3l-9.3-9.1v9.1z m-11.6-11.6h13.4l10 10v20q0 1.3-1.1 2.3t-2.3 0.9h-20q-1.3 0-2.3-0.9t-1.1-2.3l0.1-26.8q0-1.3 1-2.3t2.3-0.9z"></path></g></svg>'),o.append(s)),t}},document.createElement("DIV")),u=(d.className="toc-svg-folder-icon",$.jstree.plugins.svgfoldericon=function(t,a){this.teardown=function(){this.element.find(".toc-svg-folder-icon").remove(),a.teardown.call(this)},this.redraw_node=function(t,e,i,n){var o,s;return(t=a.redraw_node.apply(this,arguments))&&(o=(s=$(t).children(".jstree-anchor")).find(".jstree-themeicon")).length&&!s.find(".jstree-file").length&&((s=$(d.cloneNode(!1))).append('<svg xmlns="http://www.w3.org/2000/svg" class="folder-open" width="24" height="24" viewBox="0 0 24 24"><path fill="#656978" d="M20.8 5.25H12L9.8 3H3.2C1.99 3 1 4.013 1 5.25v13.5C1 19.988 1.99 21 3.2 21h17.6c1.21 0 2.2-1.012 2.2-2.25V7.5c0-1.237-.99-2.25-2.2-2.25zm0 13.5H3.2V7.5h17.6v11.25z"/></svg>'),s.append('<svg xmlns="http://www.w3.org/2000/svg" class="folder-closed" viewBox="0 0 24 24"><path d="M9.8 3L12 5.2h8.8c1.2 0 2.2 1 2.2 2.2v11.2c0 1.2-1 2.2-2.2 2.2H3.2C2 21 1 20 1 18.8V5.2C1 4 2 3 3.2 3h6.6z" fill="#656978"/></svg>'),o.append(s)),t}},document.createElement("DIV"));u.className="jstree-wholerowex",$.jstree.plugins.wholerowex=function(t,a){this.teardown=function(){this.element.find(".jstree-wholerowex").remove(),a.teardown.call(this)},this.redraw_node=function(t,e,i,n){var o,s;return(t=a.redraw_node.apply(this,arguments))&&(o=$(u.cloneNode(!1)),s=$("<div />",{class:"wholerowex-inner"}),o.append(s),$(t).children(".jstree-anchor").prepend(o)),t}}}),define("toast/utils/BackboneUtils",["../core"],function(t){"use strict";_.extend(Backbone.Model.prototype,{defineProperty:function(t){var e,i;_.isUndefined(this[t])&&(e=this,i=t,Object.defineProperty(e,i,{get:function(){return e.get(i)},set:function(t){return e.set(i,t),e}}))}}),_.extend(Backbone.Collection.prototype,{defineProperty:function(t){var e,i;_.isUndefined(this[t])&&(e=this,i=t,Object.defineProperty(e,i,{get:function(){return e.attributes[i]},set:function(t){e.attributes[i]=t}}))}})}),define("toast/utils/DropdownMenAutoScroller",["exports","../core"],function(t,e){"use strict";var c;function i(t){var e,i,n,o,s,a,r=$(t.target).hasClass("dropup"),l=$(t.target).find(".dropdown-toggle"),t=$(t.target).find(".dropdown-menu");t.hasClass("auto-scrollbar")&&(e=l.closest(".modal-content"),i=$(window),n=l.offset().top,t[0],s=($("html").scrollTop()?$("html"):$("body")).scrollTop(),t[a=0].hasAttribute("data-space-height")&&(a=Number(t.attr("data-space-height"))),e.length&&("hidden"!==e.css("overflow")?e=null:i=e),r?(o=n-(s+a+20))<0&&(o=i.innerHeight()-(n+l.outerHeight())-(s+a+20)):o=i.innerHeight()-(n+l.outerHeight())-(a+20),e&&e.length&&(o+=e.offset().top),t.outerHeight()>o?(t.addClass("auto-scrollbar-on"),t.css({width:t.outerWidth()+c+"px",height:o+"px"})):(t.removeClass("auto-scrollbar-on"),t.css({width:"",height:""})))}function n(t){t=$(t.target).find(".dropdown-menu");t.hasClass("auto-scrollbar")&&t.css({width:"",height:""})}t.on=function(){(c=$.tt_getScrollbarWidth())<1&&(c=8),$(document.body).on("show.bs.dropdown",i),$(document.body).on("hide.bs.dropdown",n)},t.off=function(){$(document.body).off("show.bs.dropdown",i),$(document.body).off("hide.bs.dropdown",n)},e.DropdownMenAutoScroller=t}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("toast/utils/iNoBounce",e):t.iNoBounce=e()}(this,function(){function t(t){_.extend(this,t),this.initialize.apply(this,arguments)}return _.extend(t.prototype,{initialize:function(t){this.startY=0,this.enabled=!1},enable:function(){this.enabled||(this._handleTouchstartFn=this._handleTouchstart.bind(this),this._handleTouchmoveFn=this._handleTouchmove.bind(this),this.win.addEventListener("touchstart",this._handleTouchstartFn,!1),this.win.addEventListener("touchmove",this._handleTouchmoveFn,!1),this.enabled=!0)},disable:function(){this.enabled&&(this.win.removeEventListener("touchstart",this._handleTouchstartFn,!1),this.win.removeEventListener("touchmove",this._handleTouchmoveFn,!1),this.enabled=!1)},isEnabled:function(){return this.enabled},_handleTouchstart:function(t){this.startY=(t.touches?t.touches[0]:t).screenY},_handleTouchmove:function(t){var e=t.target,i=this.win.innerWidth/this.win.document.documentElement.clientWidth;if(!(1<t.touches.length||1!=i)){for(;e!==this.doc.body&&e!==this.doc;){var n=this.win.getComputedStyle(e);if(!n)break;if("INPUT"===e.nodeName&&"range"===e.getAttribute("type"))return;var o=n.getPropertyValue("-webkit-overflow-scrolling"),s=n.getPropertyValue("overflow-y"),n=parseInt(n.getPropertyValue("height"),10),a=e.scrollHeight>e.offsetHeight;if("touch"===o&&("auto"===s||"scroll"===s)&&a)return o=(t.touches?t.touches[0]:t).screenY,s=startY<=o&&0===e.scrollTop,a=startY>=o&&e.scrollHeight-e.scrollTop===n,void((s||a)&&t.preventDefault());e=e.parentNode}t.preventDefault()}}}),t}),define("toast/utils/IFrameInteraction",["exports","../core","./iNoBounce"],function(t,a,i){function e(t){_.extend(this,t),this.window=this.$frameEl[0].contentWindow,this.document=this.$frameEl[0].contentWindow.document,this.contentDocument=this.$frameEl[0].contentDocument||this.$frameEl[0].contentWindow.document,this.initialize.apply(this,arguments)}return _.extend(e.prototype,{initialize:function(t){var e=this.contentDocument;this._gesture=new a.Hammer.Manager(e.body,{inputClass:a.isMobileDevice?a.Hammer.TouchInput:a.Hammer.MouseInput,cssProps:{userSelect:"inherit"}}),this._panRecognizer=new a.Hammer.Pan({threshold:10,pointers:0}),this._tapRecognizer=new a.Hammer.Tap({event:"doubletap",taps:2,threshold:15,posThreshold:50}),this._pinchRecognizer=new a.Hammer.Pinch({threshold:0}),this._gesture.add(this._panRecognizer),this._gesture.add(this._tapRecognizer).recognizeWith([this._gesture.get("pan")]),this._gesture.add(this._pinchRecognizer).recognizeWith([this._gesture.get("pan")]),this.$book=a.Book.$getBook(),this.$container=this.$book.parent(),this._zoomModeDidChange(a.BookZoom.isActivated()),a.isIOS&&(this._inoBounce=new i({win:this.$frameEl[0].contentWindow,doc:e})),this._on()},_on:function(){$(this.contentDocument).find("html").attr("ondragstart","event.preventDefault();"),$(this.contentDocument.body).css({padding:0,margin:0,"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none"}),this._onDoubleTapFn=$.proxy(this._onDoubleTap,this),this._onPinchStartFn=$.proxy(this._onPinchStart,this),this._onPinchFn=$.proxy(this._onPinch,this),this._onPinchEndFn=$.proxy(this._onPinchEnd,this),this._onPanStartFn=$.proxy(this._onPanStart,this),this._onPanFn=$.proxy(this._onPan,this),this._onPanEndFn=$.proxy(this._onPanEnd,this),this._onScrollFn=$.proxy(this._onScroll,this),this._onDocumentTouchEndFn=$.proxy(this._onDocumentTouchEnd,this),this._onDocumentClickedFn=$.proxy(this._onDocumentClicked,this),this._onDocumentKeyDownFn=$.proxy(this._onDocumentKeyDown,this),this._gesture.on("doubletap",this._onDoubleTapFn),this._gesture.on("pinchstart",this._onPinchStartFn),this._gesture.on("pinchmove",this._onPinchFn),this._gesture.on("pinchend pinchcancel",this._onPinchEndFn),this._gesture.on("panstart",this._onPanStartFn),this._gesture.on("panmove",this._onPanFn),this._gesture.on("panend pancancel",this._onPanEndFn),$(this.document).on(a.__eventTypes__.end,this._onDocumentTouchEndFn),$(this.document).on("click",this._onDocumentClickedFn),$(this.document).on("scroll",this._onScrollFn),$(this.document).on("mousewheel",this._onScrollFn),$(this.document).on("keydown",this._onDocumentKeyDownFn),this._inoBounce&&this._inoBounce.enable(),this._contentHeight=$(this.contentDocument.body).height()},_off:function(){this._gesture.off("doubletap",this._onDoubleTapFn),this._gesture.off("pinchstart",this._onPinchStartFn),this._gesture.off("pinchmove",this._onPinchFn),this._gesture.off("pinchend pinchcancel",this._onPinchEndFn),this._gesture.off("panstart",this._onPanStartFn),this._gesture.off("panmove",this._onPanFn),this._gesture.off("panend pancancel",this._onPanEndFn),$(this.document).off(a.__eventTypes__.end,this._onDocumentTouchEndFn),$(this.document).off("click",this._onDocumentClickedFn),$(this.document).off("scroll",this._onScrollFn),$(this.document).off("mousewheel",this._onScrollFn),$(this.document).off("keydown",this._onDocumentKeyDownFn),this._inoBounce&&this._inoBounce.disable()},_onDocumentTouchEnd:function(t){this._documentClickInterval&&clearTimeout(this._documentClickInterval);var e=this;this._documentClickInterval=setTimeout(function(){e._isDocumentDefaultPrevented||a.send("frameDocumentClicked"),e._isDocumentDefaultPrevented=!1},50)},_onDocumentClicked:function(t){this._isDocumentDefaultPrevented||(this._isDocumentDefaultPrevented=t.isDefaultPrevented())},_onDocumentKeyDown:function(t){if(0===$(".modal.in").length&&!a.isInputBoxFocused())switch(t.keyCode){case a.KeyEvent.DOM_VK_PAGE_UP:case a.KeyEvent.DOM_VK_UP:this._updateScroll();break;case a.KeyEvent.DOM_VK_PAGE_DOWN:case a.KeyEvent.DOM_VK_DOWN:this._updateScroll();break;case a.KeyEvent.DOM_VK_HOME:this._updateScroll({top:!0});break;case a.KeyEvent.DOM_VK_END:this._updateScroll({bottom:!0});break;case a.KeyEvent.DOM_VK_SPACE:this._updateScroll()}},_onScroll:function(t){this._updateScroll(),a.send("frameDocumentScroll",t)},_onTouchStart:function(t){var e=(new Date).getTime();this._lastTouchTime&&e-this._lastTouchTime<500&&(this._isPreventDefault=!0,this._preventDefault(t)),this._lastTouchTime=e},_onTouchEnd:function(t){this._isPreventDefault&&this._preventDefault(t),this._isPreventDefault=!1},_onDoubleTap:function(i){a.config.disableDoubleTapZoomGesture||a.config.disableZoomGesture||(i.preventDefault(),a.lazy(function(){var t,e;a.BookZoom.isActivated()?a.BookZoom.deactivate():(t=this._windowScale(),(e={}).x=i.center.x*t.x,e.y=i.center.y*t.y-this._frameOffset().top,a.BookZoom.activate({tapPoint:e}))},50,this))},_onPinchStart:function(t){a.config.disableZoomGesture||(this._startScale=t.scale,this.pinching=!0,this._isDocumentDefaultPrevented=!0)},_onPinch:function(t){if(!a.config.disableZoomGesture){var e,i;if(!a.BookZoom.isActivated())if(t.scale>this._startScale)return i=this._windowScale(),(e={}).x=t.center.x*i.x,e.y=t.center.y*i.y-this._frameOffset().top,void a.BookZoom.activate({tapPoint:e});a.BookZoom.isActivated()&&(i=a.BookZoom.getCurrentScales().zoom+(t.scale-this._startScale),a.BookZoom.setZoomScale(i),a.BookZoom._limitOffset(),a.BookZoom._update({smooth:!0}))}},_onPinchEnd:function(t){a.config.disableZoomGesture||(this.pinching=!1)},_canPan:function(t){t=!$(t.target).closest(".prevent-pan").length;return this._inoBounce&&(t?this._inoBounce.enable():this._inoBounce.disable()),t},_onPanStart:function(t){this._isDocumentDefaultPrevented=!0,this._canPan(t)&&(this._startScrollTop=$(this.window).scrollTop(),this._startMarginTop=parseInt($(this.contentDocument.body).css("marginTop")),this._currentMarginTop=this._startMarginTop,this._maxMarginTop=this._contentHeight-this.$frameEl.parent().height(),this._isScrollEnd=-this._maxMarginTop>=this._startMarginTop+delta.y)},_onPan:function(t){var e,i,n,o;this._canPan(t)&&(o=t.deltaX,e=t.deltaY,i=t.direction,this._isPanning(i)?(this._direction=i,this._panning=!0,a.BookZoom.isActivated()&&(o={left:(n=a.BookZoom._bookZoomOffset()).left+o*this.view.viewController.contentScale,top:n.top+e*this.view.viewController.contentScale},a.BookZoom.getScaleMode()==a.BookZoom.SCALE_MODE_HORIZONTAL&&(o.left=n.left),a.BookZoom._update({offset:o}))):this._isScrolling(i)?(this._scrolling=!0,this._onScrollByPan(t)):this._direction=i)},_onScrollByPan:function(t){var e=a.isIOS,i={x:t.deltaX,y:t.deltaY},n=$(this.window).scrollTop(),o=parseInt($(this.contentDocument.body).css("marginTop"))+parseInt($(this.contentDocument.body).css("marginBottom")),s=Math.max(this.contentDocument.body.scrollHeight+o-$(this.window).height(),0);switch(t.direction){case 8:e?(this._isScrollEnd||(this._maxMarginTop=this._contentHeight-this.$frameEl.parent().height(),this._currentMarginTop=Math.max(-this._maxMarginTop,this._startMarginTop+i.y),$(this.contentDocument.body).css("marginTop",this._currentMarginTop)),a.BookZoom.isActivated()&&this._isScrollEnd&&a.BookZoom.moveTo("down",-i.y),this._isScrollEnd=-this._maxMarginTop>=this._startMarginTop+i.y):s<n+2?a.BookZoom.isActivated()&&a.BookZoom.moveTo("down",-i.y):$(this.window).scrollTop(this._startScrollTop-i.y);break;case 16:e?(this._currentMarginTop=Math.min(0,this._startMarginTop+i.y),$(this.contentDocument.body).css("marginTop",this._currentMarginTop),a.BookZoom.isActivated()&&this._startMarginTop<10&&a.BookZoom.moveTo("up",i.y),this._isScrollEnd=-this._maxMarginTop>=this._startMarginTop+i.y):n?$(this.window).scrollTop(this._startScrollTop-i.y):a.BookZoom.isActivated()&&a.BookZoom.moveTo("up",i.y)}a.send("frameDocumentScroll",t)},_onPanEnd:function(t){this._canPan(t)&&(a.isIOS?this._currentMarginTop=parseInt($(this.contentDocument.body).css("marginTop")):this._currentScrollTop=$(this.window).scrollTop(),a.BookZoom.isActivated()?(a.BookZoom._limitOffset(),a.BookZoom._update({smooth:!0})):this.pinching||this._scrolling||a.config.disablePageMoveGesture||(2===this._direction?a.executeCommand(a.Commands.NEXT_PAGE):4===this._direction&&a.executeCommand(a.Commands.PREVIOUS_PAGE)),this.pinching=!1,this._panning=!1,this._scrolling=!1,this._direction=null)},_isPanning:function(t){return!this._scrolling&&(this._panning||2==t||4==t)},_isScrolling:function(t){return!this._panning&&(this._scrolling||8==t||16==t)},_zoomModeDidChange:function(t){var e;t?(window.location.origin||(window.location.origin=location.protocol+"//"+location.host),t=(t=window.location.pathname).substring(0,t.lastIndexOf("/")),t=window.location.origin+t+"/",e={cursor:"grab"},a.isIE&&(e.cursor="url("+t+"styles/images/grab.cur), url("+t+"styles/images/grab.cur), default"),$(this.contentDocument.body).css(e)):$(this.contentDocument.body).css("cursor","")},_updateScroll:function(t){var e,i,n;this._currentScrollTop=$(this.window).scrollTop(),a.BookZoom.isActivated()&&(t=t||{},i=$(this.window).scrollTop(),n=parseInt($(this.contentDocument.body).css("marginTop"))+parseInt($(this.contentDocument.body).css("marginBottom")),Math.max(this.contentDocument.body.scrollHeight+n-$(this.window).height(),0)<i+2||t.bottom?e="down":i&&!t.top||(e="up"),t.bottom?e="down":t.top&&(e="up"),t.top?((n=a.BookZoom._bookZoomOffset()).top=0,a.BookZoom._update({offset:n}),a.BookZoom._limitOffset(!0)):t.bottom?(i=a.$el.find(".bookzoom"),this._availableParentWindowSize(),n={width:i.width(),height:i.height()},a.BookZoom.moveTo(e,n.height)):e&&a.BookZoom.moveTo(e,150))},_availableParentWindowSize:function(){return{width:window.innerWidth-(window.innerWidth-this.$book.parent().width()),height:window.innerHeight-(window.innerHeight-this.$book.parent().height())}},_windowScale:function(){return{x:$(window).width()/$(this.window).width(),y:$(window).height()/$(this.window).height()}},_frameOffset:function(){return this.$frameEl.offset()},_preventDefault:function(t){t.preventDefault()},willReMountAll:function(){},remountAll:function(){try{a.isIOS?$(this.contentDocument.body).css("marginTop",this._currentMarginTop):$(this.window).scrollTop(this._currentScrollTop)}catch(t){}},didUpdateLayout:function(){if(!a.BookZoom.isActivated())try{this._contentHeight=$(this.contentDocument.body).height(),a._deviceRotating&&this.scrollTop(0)}catch(t){}},scrollTop:function(t){var e;a.isIOS?(e=Math.max(-($(this.contentDocument.body).height()-$(this.$frameEl.parent()).height()),t),e=Math.min(0,e),$(this.contentDocument.body).css("marginTop",t)):$(this.window).scrollTop(Math.max(1,t))},destroy:function(){this._off(),this._gesture.remove(this._panRecognizer),this._gesture.remove(this._tapRecognizer),this._gesture.remove(this._pinchRecognizer),this._gesture.destroy(),delete this._gesture,this._inoBounce&&delete this._inoBounce}}),a.IFrameInteraction=e}),define("toast/utils/ScrollInteraction",["exports","../core"],function(t,a){function e(t){this._setScrollCallbacks(t),_.extend(this,t),this.$el||(this.$el=this.view.$el),this.$el&&(this.el=this.$el[0]),this.contentEl=this.$contentEl[0],this.initialize.apply(this,arguments)}return _.extend(e.prototype,{initialize:function(t){this._gesture=new a.Hammer.Manager(this.el,{inputClass:a.isMobileDevice?a.Hammer.TouchInput:a.Hammer.MouseInput,cssProps:{userSelect:"inherit"}}),this._panRecognizer=new a.Hammer.Pan({threshold:10,pointers:0}),this._gesture.add(this._panRecognizer),this.$book=a.Book.$getBook(),this.$container=this.$book.parent(),this.$el.data("scroll-interaction",this),this._on()},_on:function(){this.$el.addClass("prevent-scroll scroll-interaction-el"),this.$el.css({padding:0,margin:0,"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none"}),this._onPanStartFn=$.proxy(this._onPanStart,this),this._onPanFn=$.proxy(this._onPan,this),this._onPanEndFn=$.proxy(this._onPanEnd,this),this._onScrollFn=$.proxy(this._onScroll,this),this._gesture.on("panstart",this._onPanStartFn),this._gesture.on("panmove",this._onPanFn),this._gesture.on("panend pancancel",this._onPanEndFn),this.$el.on("scroll",this._onScrollFn),this.$el.on("mousewheel",this._onScrollFn)},_off:function(){this.$el.removeClass("prevent-scroll scroll-interaction-el"),this._gesture.off("panstart",this._onPanStartFn),this._gesture.off("panmove",this._onPanFn),this._gesture.off("panend pancancel",this._onPanEndFn),this.$el.off("scroll",this._onScrollFn),this.$el.off("mousewheel",this._onScrollFn)},_setScrollCallbacks:function(t){t.scrollStart&&(this._scrollStartFn=t.scrollStart,delete t.scrollStart),t.scrollTo&&(this._scrollToFn=t.scrollTo,delete t.scrollTo),t.scrollEnd&&(this._scrollEndFn=t.scrollEnd,delete t.scrollEnd),t.isScrollTop&&(this._isScrollTopFn=t.isScrollTop,delete t.isScrollTop),t.isScrollBottom&&(this._isScrollBottomFn=t.isScrollBottom,delete t.isScrollBottom)},_onScroll:function(t){this.el.scrollHeight&&this._updateScroll(),a.send("scroll",t)},_onPanStart:function(t){this._startScrollTop=this.$el.scrollTop(),this._startMarginTop=parseInt(this.$el.css("marginTop")),this._currentMarginTop=this._startMarginTop;var e={x:t.deltaX,y:t.deltaY};if(a.BookZoom.isActivated()&&a.BookZoom._isPageStartOrEnd()&&(this._startDeltaY||(this._startDeltaY=e.y)),this._scrollStartFn){var i,e=this._startScrollTop-e.y/this.view.viewController.contentScale;switch(t.direction){case 8:i="up";break;case 16:i="down"}this._scrollStartFn(e,{direction:i})}},_onPan:function(t){var e=t.direction;this._isPanning(e)?(this._direction=e,this._panning=!0):this._isScrolling(e)?(this.isScrollTop()||this.isScrollBottom()?a.IS_SCROLLING=!1:a.IS_SCROLLING=!0,this._scrolling=!0,this._onScrollByPan(t)):this._direction=e},_onScrollByPan:function(t){a.isIOS,t.deltaX;var e=t.deltaY,i=this.$el.scrollTop(),n=parseInt(this.$el.css("marginTop"))+parseInt(this.$el.css("marginBottom")),o=Math.max(this.el.scrollHeight+n-this.$el.height(),0),s=this._startScrollTop-e/this.view.viewController.contentScale;switch(t.direction){case 8:this._scrollToFn?this._scrollToFn(s,{direction:"up"}):i+2<o&&this.$el.scrollTop(s);break;case 16:this._scrollToFn?this._scrollToFn(s,{direction:"down"}):i&&this.$el.scrollTop(s)}this.isScrollTop()||this.isScrollBottom()||a.send("scroll",t)},_onPanEnd:function(t){if(this._currentScrollTop=this.$el.scrollTop(),a.BookZoom.isActivated()&&(a.BookZoom._limitOffset(),a.BookZoom._update({smooth:!0})),this._scrolling&&this._scrollEndFn){t.deltaX;var e,i=t.deltaY,i=this._startScrollTop-i/this.view.viewController.contentScale;switch(t.direction){case 8:t.preventDefault(),e="up";break;case 16:t.preventDefault(),e="down"}this._scrollEndFn(i,{direction:e})}this._panning=!1,a.IS_SCROLLING=this._scrolling=!1,this._startDeltaY=null,this._direction=null},_isPanning:function(t){return!this._scrolling&&(this._panning||2==t||4==t)},_isScrolling:function(t){return!this._panning&&(this._scrolling||8==t||16==t)},_updateScroll:function(t){var e,i,n;this._currentScrollTop=this.$el.scrollTop(),a.BookZoom.isActivated()&&(t=t||{},i=this.$el.scrollTop(),n=parseInt(this.$el.css("marginTop"))+parseInt(this.$el.css("marginBottom")),Math.max(this.el.scrollHeight+n-this.$el.height(),0)<i+2||t.bottom?e="down":i&&!t.top||(e="up"),t.bottom?e="down":t.top&&(e="up"),t.top?((n=a.BookZoom._bookZoomOffset()).top=0,a.BookZoom._update({offset:n}),a.BookZoom._limitOffset(!0)):t.bottom?(n={width:(i=a.$el.find(".bookzoom")).width(),height:i.height()},a.BookZoom.moveTo(e,n.height)):e&&a.BookZoom.moveTo(e,150))},willReMountAll:function(){},remountAll:function(){try{this.$el.scrollTop(this._currentScrollTop)}catch(t){}},scrollTop:function(t){this.$el.scrollTop(Math.max(1,t))},isScrollTop:function(){return this._isScrollTopFn?this._isScrollTopFn():!this.$el.scrollTop()},isScrollBottom:function(){var t,e;return this._isScrollBottomFn?this._isScrollBottomFn():(t=this.$el.scrollTop(),e=parseInt(this.$el.css("marginTop"))+parseInt(this.$el.css("marginBottom")),Math.max(this.el.scrollHeight+e-this.$el.height(),0)<t+2)},destroy:function(){this._off(),this._gesture.remove(this._panRecognizer),this._gesture.destroy(),delete this._gesture}}),a.ScrollInteraction=e}),define("toast/utils/Math",["../core"],function(t){"use strict";Math.radians=function(t){return t*Math.PI/180},Math.degrees=function(t){return 180*t/Math.PI},Math.distance=function(t,e,i,n){i-=t,t=n-e;return i*=i,t*=t,Math.sqrt(i+t)},Math.rotatepoint=function(t,e,i,n,o){var o=Math.PI/180*o,s=Math.cos(o),o=Math.sin(o);return{x:s*(i-t)+o*(n-e)+t,y:s*(n-e)-o*(i-t)+e}}}),define("toast/utils/Matrix",["../core"],function(t){function a(t,e){return{x:t||0,y:e||0,equal:function(t){return this.x===t.x&&this.y===t.y},add:function(t){return a(this.x+t.x,this.y+t.y)},subtract:function(t){return a(this.x-t.x,this.y-t.y)},scale:function(t){return a(this.x*t,this.y*t)},magnitude:function(){return a.distance(a(0,0),this)}}}function r(t,e,i,n,o,s){return{a:t=void 0!==t?t:1,b:e||0,c:i||0,d:n=void 0!==n?n:1,tx:o||0,ty:s||0,concat:function(t){return r(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.tx+this.c*t.ty+this.tx,this.b*t.tx+this.d*t.ty+this.ty)},deltaTransformPoint:function(t){return a(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},inverse:function(){var t=this.a*this.d-this.b*this.c;return r(this.d/t,-this.b/t,-this.c/t,this.a/t,(this.c*this.ty-this.d*this.tx)/t,(this.b*this.tx-this.a*this.ty)/t)},rotate:function(t,e){return this.concat(r.rotation(t,e))},scale:function(t,e,i){return this.concat(r.scale(t,e,i))},transformPoint:function(t){return a(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},translate:function(t,e){return this.concat(r.translation(t,e))}}}a.distance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},a.direction=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},r.rotation=function(t,e){t=r(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t));return t=e?r.translation(e.x,e.y).concat(t).concat(r.translation(-e.x,-e.y)):t},r.scale=function(t,e,i){t=r(t,0,0,e=e||t);return t=i?r.translation(i.x,i.y).concat(t).concat(r.translation(-i.x,-i.y)):t},r.translation=function(t,e){return r(1,0,0,1,t,e)},r.IDENTITY=r(),r.HORIZONTAL_FLIP=r(-1,0,0,1),r.VERTICAL_FLIP=r(1,0,0,-1),t.Point=a,t.Matrix=r}),define("toast/utils",["./core","./utils/Loader","./utils/FontLoader","./utils/HtmlLoader","./utils/ThemeLoader","./utils/StringUtils","./utils/ImageUtils","./utils/Rect","./utils/Async","./utils/Animate","./utils/jquery.utils","./utils/jstree.plugins","./utils/BackboneUtils","./utils/DropdownMenAutoScroller","./utils/IFrameInteraction","./utils/ScrollInteraction","./utils/iNoBounce","./utils/Math","./utils/Matrix"],function(t){}),define("toast/views/UIView",["../core","../core/Model","../actions","../animations","../utils"],function(a,t,e,i){"use strict";a.Strings;function n(t){this.__events__=[],this._currentState=void 0,this.__changeState__=null,_.extend(this,_.pick(t,o)),s.constructor.apply(this,arguments)}var o=["viewController","$parent","style","label","$contentMount","inlineStyle"],s=Backbone.View.prototype;return _.extend(n.prototype,s,{viewController:null,tagName:"div",className:"",attributes:{},style:{},model:t,maintainRatio:!1,__events__:[],__eventTypes__:"ontouchstart"in window?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},templateHTML:function(){return""},states:function(){return[]},state:function(t,e){if(!arguments.length)return this._currentState;e=e||{};var i=this._currentState!=t;return(i||e.force)&&(this._currentState=t,this.model.__changeState__)&&(e=this._conditionalChangeStates(this.model.__changeState__.actions),this.model.__changeState__&&!_.isEmpty(e)&&this._executeActions(e),t=this._conditionalChangeStates(this.model.__changeState__.animations),this.model.__changeState__)&&!_.isEmpty(t)&&this._executeAnimations(t),i},initialize:function(t){_.extend(this,_.pick(t,o)),(this.model.view=this).viewController||((t=new a.ViewController({el:a.$el}))._state=a.STATUS_NONE,t.index=-1,this.viewController=t),_.isUndefined(this.model.properties)&&(this.model.properties={});var t=_.extend([],this.model.states,this.states()),e=[];_.each(t,function(t){_.find(e,{value:t.value})||e.push(t)},this),this.model.states=e},render:function(t){return this.isRender=!0,this.commonRender(),this.__refreshTimeout__||(this.__refreshTimeout__={}),_.isUndefined(this.model.properties.visible)&&(this.model.properties.visible=!0),!0!==this.model.properties.visible&&this.$parent.hide(),this.renderAccessibility(),this._setStyleToParent(),_.isUndefined(this.model.properties._orgVisible)&&(this.model.properties._orgVisible=this.model.properties.visible),_.isUndefined(this.model.properties._orgLeft)&&(this.model.properties._orgLeft=this.model.left),_.isUndefined(this.model.properties._orgTop)&&(this.model.properties._orgTop=this.model.top),this},commonRender:function(){this.$parent.data("view",this),this.$el.attr("data-view-type",this.model.get("viewType")),_.isUndefined(this.model.properties.zIndex)||this.$parent.css("zIndex",this.model.properties.zIndex),_.isEmpty(this.inlineStyle)||(this.style=_.extend(this.inlineStyle,this.style)),this.style=_.extend({},this.style,this.model.get("style"));var t=this.model.properties.backgroundColor;_.isUndefined(t)||(this.style.backgroundColor=t),_.isEmpty(this.style)||this.$el.css(this.style),this.corners(),this.origin(this.origin(),{save:!1}),this.rotate(this.model.rotate,{save:!1}),this.viewController.print&&this.print()},renderAccessibility:function(){_.isEmpty(this.model.label)||this.$el.attr("title",this.model.label)},print:function(){var t;this.style.backgroundColor&&(t=this.$el.attr("style"),t+="; background-color: "+this.style.backgroundColor+" !important;",this.$el.attr("style",t))},mount:function(){},mountAll:function(){var t,e;this.isViewsDidMounted=!0,this.actions={},this.animations={},!this.viewController.print&&(_.isEmpty(this.model.actions)||_.each(this.model.actions,function(i){i.event||(i.event={type:"click"}),a.isMobileDevice&&"mouseover"===i.event.type&&(i.event.type="click");var n=i.event.type,o=(o=this.actions[i.event.type])||(this.actions[i.event.type]=[]);"click"===i.event.type&&this.$parent.attr("data-prevent-event","click"),"drop"!==i.event.type||_.isUndefined(i.properties.targets)||!_.isEmpty(i.properties.targets)||_.isEmpty(i.properties.dropTargets)?(i=a.Action.create(this,i,{eventType:n}))&&o.push(i):_.each(i.properties.dropTargets,function(t){var e;this.viewController._deepFind({id:t})&&((e=_.cloneDeep(i)).properties.targets=[t],e=a.Action.create(this,e,{eventType:n}))&&(e.__autoDropTarget__=!0,o.push(e))},this)},this),_.isEmpty(this.model.animations)||_.each(this.model.animations,function(e){e.event||(e.event={type:"click"});var i=(i=this.animations[e.event.type])||(this.animations[e.event.type]=[]),n=("click"===e.event.type&&this.$parent.attr("data-prevent-event","click"),[]);_.isEmpty(e.properties.targets)?"drop"!==e.event.type||_.isEmpty(e.properties.dropTargets)?n.push(this.model):_.each(e.properties.dropTargets,function(t){t=this.viewController._deepFind({id:t});t&&t.view&&(t.__autoDropTarget__=!0,n.push(t))},this):_.each(e.properties.targets,function(t){t=this.viewController._deepFind({id:t});t&&t.view&&n.push(t)},this),_.each(n,function(t){t=a.Animation.create(t.view,e,{effect:e.effect,progressCallback:$.proxy(t.view._onAanimationProgress,t.view),completeCallback:$.proxy(t.view._onAanimationCompleted,t.view)});t&&i.push(t)},this)},this),this._setCursor(),this.model.properties.draggable&&(this.$parent.off("draginit dragstart drag dragend"),a.isMobileDevice||this.$parent.drag("init",$.proxy(this._onDragInit,this)),this.$parent.drag("start",$.proxy(this._onDragStart,this),{distance:1,drop:!0}),this.$parent.drag("drag",$.proxy(this._onDrag,this)),this.$parent.drag("end",$.proxy(this._onDragEnd,this))),(this.actions.init||this.animations.init)&&this._execute("init"),(this.actions.showpage||this.animations.showpage)&&this._stopAnimations(null,this.animations.showpage),(this.actions.click||this.animations.click)&&this.$parent.on("click",$.proxy(this._onClick,this)),(this.actions.mouseover||this.animations.mouseover)&&(t=$.proxy(this._onMouseOver,this)),(this.actions.mouseout||this.animations.mouseout)&&(e=$.proxy(this._onMouseOut,this)),t||e)&&this.$parent.hover(t,e)},willAppear:function(){this.isWillAppear=!0},appear:function(){this.isAppeared=!0,(this.actions.showpage||this.animations.showpage)&&this._execute("showpage",{play:!0}),(this.actions.drop||this.animations.drop)&&(this.$parent.off("drop"),this.$parent.drop($.proxy(this._onDrop,this))),this.autostart()},willDisappear:function(){this.isWillAppear=!1},disappear:function(){this.isAppeared=!1,this.animations.showpage&&this._stopAnimations("showpage"),(this.actions.hidepage||this.animations.hidepage)&&this._execute("hidepage",{stop:!0}),(this.actions.drop||this.animations.drop)&&this.$parent.off("drop"),this.autostop()},didUpdateLayout:function(){},willReMountAll:function(){},remountAll:function(){},remove:function(){this.__off__(),this.model.__changeState__&&delete this.model.__changeState__,s.remove.call(this),this.$parent.remove(),this.isViewsDidMounted=!1},show:function(){this.isVisible()||(this.$parent.show(),this._execute("show"))},hide:function(){this.isVisible()&&(this.$parent.hide(),this._execute("hide"))},toggle:function(){this.isVisible()?this.hide():this.show()},isVisible:function(){return!(!this.$parent.is(":visible")&&"none"===this.$parent.css("display"))},position:function(t,e){if(!arguments.length)return{left:this.model.left,top:this.model.top};t=t||{},e=_.extend({save:!0,silent:!0},e);var i={};_.isUndefined(t.left)||(i.left=t.left),_.isUndefined(t.top)||(i.top=t.top),_.isEmpty(i)||(e.save&&this.model.set(i,{silent:e.silent}),this.$parent.css(i))},offset:function(){for(var t=0,e=0,i=this.viewController.topParentViewController().$el.offset(),n=this.$parent[0];n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)t+=n.offsetLeft-n.scrollLeft,e+=n.offsetTop-n.scrollTop,n=n.offsetParent;return{top:e-i.top,left:t-i.left}},size:function(t,e){if(!arguments.length)return{width:this.model.width,height:this.model.height};t=t||{},e=_.extend({save:!0,silent:!0},e);var i={};_.isUndefined(t.width)||(i.width=t.width),_.isUndefined(t.height)||(i.height=t.height),_.isEmpty(i)||(e.save&&this.model.set(i,{silent:e.silent}),this.$parent.css(i))},rotate:function(t,e){if(!arguments.length)return this.model.rotate;(e=_.extend({save:!0},e)).save&&this.model.set("rotate",t),this.$parent.tt_rotate(t)},origin:function(t,e){if(!arguments.length)return{x:this.model.originX,y:this.model.originY};(e=_.extend({save:!0},e)).save&&(this.model.set("originX",t.x),this.model.set("originY",t.y)),_.isUndefined(t.x)||_.isUndefined(t.y)||this.$parent.css("transform-origin",t.x+"px "+t.y+"px")},autostart:function(){},autostop:function(){},update:function(t,e){return this},scaleDidChange:function(t){},reset:function(){var t;this._resetStyle(),!0!==this.model.properties._orgVisible&&(this.model.properties.visible=this.model.properties._orgVisible,this.hide()),this._setStyleToParent(),_.isEmpty(this.model.states)||(this._currentState=void 0,this.model.__changeState__&&(t=this.model.__changeState__.actions.concat(this.model.__changeState__.animations),_.each(t,function(t){t&&t.instance.view!==this&&t.instance.view.reset()},this)))},getResponsiveProperties:function(i){var n;return this.model.responsives?(this._sortedResponsives||(this.model.responsives=_.sortBy(this.model.responsives,function(t){return t.properties.resp_width}),this._sortedResponsives=!0),_.each(this.model.responsives,function(t){var e=t.properties;if(e.resp_enable)switch(e.resp_cond){case"mobile":if(a.isMobile)return n=e,!1;break;case"phone":if(a.isMobile&&!a.isTablet)return n=e,!1;break;case"tablet":if(a.isMobile&&a.isTablet)return n=e,!1;break;case"desktop":if(a.isMobile)break;return n=e,!1;case"above":if(!_.isUndefined(i)&&i>e.resp_width)return n=e,!1;break;case"lessOrEqual":if(!_.isUndefined(i)&&i<=e.resp_width)return n=e,!1}},this),n):null},responsiveLayoutChanged:function(t){var e=this.model.properties,i=e.visible,n=this.getResponsiveProperties((t=t||{}).responsiveWidth),i=(e.visible=n?n.resp_visible:e._orgVisible,i!==e.visible&&(e.visible?this.show():this.hide()),t.responsiveWidth);return!_.isUndefined(i)&&this.model.layout&&this.size(this.responsiveSize(i,n)),n},responsiveSize:function(t,e){var i,n,o=this.model.layout,s={};return"none"===o.name?(n=t/a.view.collection._orgWidth,s.width=this.model._orgWidth*n,s.height=this.model._orgHeight*n,this.model.fixedHeight&&(s.height=this.model._orgHeight)):(i=o.padding.left+o.padding.right,o.collection._orgWidth<this.model._orgWidth+i+30?(n=t/this.model._orgWidth,s.width=t,s.height=this.model._orgHeight*n):(this.model.fitWidth=!1,s.width=this.model._orgWidth,s.height=this.model._orgHeight),this.model.fixedHeight&&(s.height=this.model._orgHeight)),s},beforeAutofit:function(t){this.position(t),this.size(t)},afterAutofit:function(t){this.position(t),this.size(t),this.model.firstOfRow=t.firstOfRow}}),n.MODEL=function(){return{}},n.extend=Backbone.View.extend,a.UIView=n}),define("toast/views/UIViewPrivate",["../core","./UIView"],function(n,t){"use strict";_.extend(t.prototype,{_resetStyle:function(){var t=this.model.properties.backgroundColor,t=(_.isUndefined(t)||(this.style.backgroundColor=t),this.model.properties.opacity);_.isUndefined(t)||(this.style.opacity=parseFloat(t/100)),this.style=_.extend({},this.style,this.model.get("style")),this.$el.attr("style",""),this.$parent.css({left:this.model.get("left"),top:this.model.get("top"),width:this.model.get("width"),height:this.model.get("height")}),this.$el.css(this.style)},_setCursor:function(){this.model.properties.draggable?(this.style.cursor="pointer",this.$el.css("cursor","pointer")):_.find(this.model.actions,function(t){if("click"===t.event.type)return this.$el.css("cursor","pointer"),!0},this)||_.find(this.model.animations,function(t){if("click"===t.event.type)return this.$el.css("cursor","pointer"),!0},this)},_setStyleToParent:function(){var t=this.$el.css("opacity");t&&(this.$parent.css("opacity",t),this.$el.css("opacity",""))},__on__:function(t,e,i){i=i||this,e=$.proxy(e,i),this.__events__.push({name:t,callback:e}),n.on(t,e,i)},__off__:function(t,e){0===arguments.length?(_.each(this.__events__,function(t){n.off(t.name,t.callback)},this),this.__events__=[]):n.off(t,e)},_onClick:function(t){n.IS_DRAGGING||n.IS_PANNING||n.IS_SLIDING||this._execute("click")},_onMouseOver:function(t){t=t.handleObj||{};t.type&&"mouseover"!==t.type||this._execute("mouseover")},_onMouseOut:function(t){t=t.handleObj||{};t.type&&"mouseout"!==t.type||this._execute("mouseout")}})}),define("toast/views/UIViewActionAndAnimation",["../core","./UIView"],function(t,e){"use strict";_.extend(e.prototype,{_execute:function(t,e){this.actions&&this._executeActions(this.actions[t]),this.animations&&this._executeAnimations(this.animations[t],e)},_executeActions:function(t){return!_.isEmpty(t)&&(_.isArray(t)||(t=[t]),_.each(t,function(t){t.execute()},this),!0)},_executeAnimations:function(t,e){return!_.isEmpty(t)&&(e=e||{play:!0},_.isArray(t)||(t=[t]),_.each(t,function(t){e.play?(t.model._.properties.restart&&t.stopImmediately(),t.play()):e.stop&&t.stopImmediately()},this),!0)},_stopAnimations:function(t,e){e?this._executeAnimations(e,{stop:!0}):t?this._executeAnimations(this.animations[t],{stop:!0}):_.isEmpty(this.animations)||_.each(Object.keys(this.animations),function(t){this._executeAnimations(this.animations[t],{stop:!0})},this)},_onAanimationProgress:function(t){},_onAanimationCompleted:function(t){},_conditionalChangeStates:function(t){_.isEmpty(t);var e=[];return _.each(t,function(t){this._conditionalChangeState(t)&&e.push(t.instance)},this),e},_conditionalChangeState:function(t){var o,s,a=!0,r=t.states,l=t.models;return"if"===t.condition?o=0:"if_or"===t.condition?o=1:"else"===t.condition?o=2:"else_or"===t.condition&&(o=3),_.isEmpty(r)?a=!1:_.each(r,function(e){if(s)return!1;var i=[],n=(_.each(r,function(t){t.target===e.target&&i.push(t)},this),_.find(l,{id:e.target}));!n||_.isUndefined(n.view._currentState)||_.isNull(n.view._currentState)?s=!(a=!1):0==o?_.each(i,function(t){if(n.view._currentState!=t.value)return!(s=!(a=!1))}):1==o?(a=!1,_.each(i,function(t){if(n.view._currentState==t.value)return!(s=a=!0)})):2==o?_.each(i,function(t){if(n.view._currentState==t.value)return!(s=!(a=!1))}):3==o&&(a=!1,_.each(i,function(t){if(n.view._currentState!=t.value)return!(s=a=!0)}))},this),a}})}),define("toast/views/UIViewDragAndDrop",["../core","./UIView"],function(o,t){"use strict";_.extend(t.prototype,{_onDragInit:function(t){if(o.IS_ZOOM&&o.IS_ZOOM_DRAG_MODE)return!1},_onDragStart:function(t,e){t.stopPropagation(),e.dropActions&&delete e.dropActions,e.dropAnimations&&delete e.dropAnimations,e.dropAccepts&&delete e.dropAccepts,e.dropRejects&&delete e.dropRejects,o.isMobileDevice?o.lazy(function(){this._doDragStart(t,e)},10,this):this._doDragStart(t,e)},_doDragStart:function(t,e){var i;o.IS_ZOOM_DRAG_MODE||(o.IS_DRAGGING=!0,i=$(e.drag),e.zIndex=i.css("zIndex"),e.startOffset={left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10)},e.contentScale=this.viewController.contentScale,i.css("zIndex",9999),(e.drag.view=this).model.__dropSuccess__&&(this.model.__dropSuccess__.__dropped__=!1,this.model.__dropSuccess__=null),this._execute("dragStart"))},_onDrag:function(t,e){var i,n;o.IS_DRAGGING&&!o.IS_ZOOM_DRAG_MODE&&(i=$(e.drag),(n={}).left=e.startOffset.left+e.deltaX/e.contentScale,n.top=e.startOffset.top+e.deltaY/e.contentScale,i.css(n))},_onDragEnd:function(t,e){o.IS_ZOOM_DRAG_MODE||($(e.drag).css("zIndex",e.zIndex),this._execute("dragEnd"),_.isEmpty(e.drop)&&_.isEmpty(e.dropAccepts)&&_.isEmpty(e.dropRejects)&&this._onDropReject(),e.dropAccepts&&(_.each(e.dropAccepts,function(t){this._onDropAccept(t)},this),delete e.dropAccepts),e.dropRejects&&(_.each(e.dropRejects,function(t){this._onDropReject(t)},this),delete e.dropRejects),this._doDropActions(e),this._doDropAnimations(e),o.lazy(function(){o.IS_DRAGGING=!1},5,this))},_doDropActions:function(e){var i;e.dropActions&&(i=[],_.each(e.dropActions,function(t){t.__autoDropTarget__&&!_.isUndefined(t.properties.targets)&&-1===t.properties.targets.indexOf(e.dropActions.drop.model.id)||i.push(t)},this),this._executeActions(i),delete e.dropActions)},_doDropAnimations:function(e){var i;!e.dropAnimations||this._hasDropAcceptAnimations(e)||this._hasDropRejectAnimations(e)||(i=[],_.each(e.dropAnimations,function(t){(!t.view.model.__autoDropTarget__||t.model.view.model.id===e.dropAnimations.drop.model.id)&&i.push(t)},this),this._executeAnimations(i),delete e.dropAnimations)},_hasDropAcceptAnimations:function(t){return!_.isEmpty(t.dropAccepts)&&_.find(t.dropAccepts,function(t){return!_.isEmpty(t.animations.dropAccept)})},_hasDropRejectAnimations:function(t){return!_.isEmpty(t.dropRejects)&&_.find(t.dropRejects,function(t){return!_.isEmpty(t.animations.dropReject)})},_onDrop:function(t,e){var i,n,o,s,a,r=e.drag.view,l=$(e.drag).attr("id"),c=!1,r=r.viewController._deepFind({id:this.$parent.attr("id")});return!!r&&(i=r.view,n=[],o=[],s=[],a=[],_.each(i.actions.drop,function(t){var e=_.find(t.properties.dropTargets,function(t){if(t==l)return!0});e&&(e=i.viewController._deepFind({id:e}))&&(_.isUndefined(t.properties.dropResult)?(s.drop=e.view,s.push(t)):((t.properties.multipleDropSuccess||!t.__dropped__)&&t.properties.dropResult?(t.__dropped__=!0,e.__dropSuccess__=t,n):o).push(e.view))}),_.each(i.animations.drop,function(t){var e=_.find(t.model._.properties.dropTargets,function(t){if(t==l)return!0});e&&(e=i.viewController._deepFind({id:e}))&&(a.drop=e.view,a.push(t))}),_.isEmpty(n)||(e.dropAccepts=n),_.isEmpty(o)||(e.dropRejects=o),_.isEmpty(s)&&_.isEmpty(a)||(_.isEmpty(s)||(e.dropActions=s),_.isEmpty(a)||(e.dropAnimations=a),c=!0),c)},_onDropAccept:function(t){(t||this)._execute("dropAccept")},_onDropReject:function(t){(t||this)._execute("dropReject")}})}),define("toast/views/UIViewCollisionDetector",["../core","./UIView"],function(t,e){"use strict";function s(t){return Math.sin(t/180*Math.PI)}function a(t){return Math.cos(t/180*Math.PI)}function l(t,e,i,n,o){i=t+i/2,n=e+n/2,t-=i,e-=n,o=[[a(o),-s(o)],[s(o),a(o)]];return{x:i+(t*o[0][0]+e*o[0][1]),y:n+(t*o[1][0]+e*o[1][1])}}function c(t,e){return 180-2*(Math.acos(t/e)*(180/Math.PI))}function i(t,e){var i=!1;return t.corners().forEach(function(t){!function(t,e,i){for(var n=0,o=t.length,s=0,a=o-1;s<o;a=s++)t[s].y>i!=t[a].y>i&&e<(t[a].x-t[s].x)*(i-t[s].y)/(t[a].y-t[s].y)+t[s].x&&(n=!n);return n}(e.corners(),t.x,t.y)||(i=!0)}),i}_.extend(e.prototype,{corners:function(t){var e,i,n,o=this.model.rotate,s=this.offset(),a=this.size(),r=(this.leftTopCorner=l(s.left,s.top,a.width,a.height,o),e=s.left,r=s.top,i=a.width,n=a.height,e-=e+i/2,i=r-(r+n/2),Math.sqrt(e*e+i*i));return o+=c(a.width/2,r),this.rightTopCorner=l(s.left,s.top,a.width,a.height,o),o+=c(a.height/2,r),this.rightBottomCorner=l(s.left,s.top,a.width,a.height,o),o+=c(a.width/2,r),this.leftBottomCorner=l(s.left,s.top,a.width,a.height,o),this._corners=[this.leftTopCorner,this.rightTopCorner,this.rightBottomCorner,this.leftBottomCorner]},isCollided:function(t){return t=t,(e=this).corners(),t.corners(),!!i(e,t)||!!i(t,e);var e}})}),define("toast/views/UIGroup",["../core","./UIView"],function(i,t){"use strict";var s=t.prototype,t=t.extend();return _.extend(t.prototype,s,{style:{},maintainRatio:!0,initialize:function(t){s.initialize.call(this,t)},initializeChildren:function(){this.model.orgWidth=this.model.width,this.model.orgHeight=this.model.height;var t=this.model.__children__;_.each(t,function(t){var e;(e=this.viewController.htmlRender?this.$el.find("#"+t.get("id")):e)&&e.length||(e=this.viewController._createModelElement(t),this.$el.append(e)),t.view=i.Factory.create(this.viewController,t,e)},this)},size:function(t,e){if(!arguments.length)return s.size.call(this);s.size.call(this,t,e);var n=t.width/this.model.orgWidth,o=t.height/this.model.orgHeight,e=this.model.__children__;_.each(e,function(t){t.original||(t.original={left:t.left,top:t.top,width:t.width,height:t.height});var e={left:parseInt(t.original.left*n,10),top:parseInt(t.original.top*o,10)},i={width:parseInt(t.original.width*n,10),height:parseInt(t.original.height*o,10)};t.view&&(t.view.position(e),t.view.size(i))},this)},mount:function(){s.mount.apply(this,arguments),this.initializeChildren()},mountAll:function(){s.mountAll.call(this);var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.mountAll(),this.viewController.__setChangeState__(t.view.actions.changeState,t,"actions"),this.viewController.__setChangeState__(t.view.animations.changeState,t,"animations")},this)},willAppear:function(){s.willAppear.call(this);var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.willAppear()},this)},appear:function(){s.appear.call(this);var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.appear()},this)},willDisappear:function(){s.willDisappear.call(this);var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.willDisappear()},this)},disappear:function(){s.disappear.call(this);var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.disappear()},this)},scaleDidChange:function(e){s.scaleDidChange.call(this,e);var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.scaleDidChange(e)},this)},remove:function(){var t=this.model.__children__;_.each(t,function(t){t.view&&t.view.remove()},this),s.remove.call(this)}}),i.UIGroup=t}),define("toast/views/UIText",["../core","./UIView"],function(t,e){"use strict";var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{textEditable:!0,maintainRatio:!0,attributes:{"data-text-content":!0},style:{fontFamily:"NanumGothic",whiteSpace:"normal",wordBreak:"normal"},initialize:function(t){n.initialize.call(this,t)},render:function(){return n.render.call(this),this},commonRender:function(){this.isRender&&(t=(i=this.model.get("style")).lineHeight,isNaN(t)||(e=parseInt(i.fontSize),_.isUndefined(e))||(i.lineHeight=parseInt(t*e)+"px"));var t,e,i=this.model.properties.wordBreak;_.isUndefined(i)||(this.style.wordBreak=i),this.style=_.extend({},n.style,this.style),this.$textWrap=this.$el.find(".text-wrap"),this.$textWrap.length||(this.$textWrap=$("<div />",{class:"text-wrap"}),this.hasTag(this.getText())?this.$textWrap.html(this.getText()):this.$textWrap.html("<div>"+this.getText()+"</div>"),this.$el.append(this.$textWrap)),n.commonRender.call(this)},_resetStyle:function(){var t=this.model.properties.wordBreak;_.isUndefined(t)||(this.style.wordBreak=t),n._resetStyle.call(this)},size:function(t,e){if(!arguments.length)return n.size.call(this);n.size.call(this,t,e);var i,t=this.model;return t.original?(e=this.model.style,i=t.width/t.original.width,_.isUndefined(t.original.fontSize)&&(t.original.fontSize=parseInt(this.$el.css("fontSize"))),e.fontSize=parseInt(t.original.fontSize*i),this.$el.css("fontSize",e.fontSize),this.resizeFontSize(this.$textWrap.children()),t.set("htmlText",this.$textWrap.html()),this):void 0},resizeFontSize:function(t){var n=this,e=this.model,o=(this.model.style,e.width/e.original.width);t.children().each(function(t,e){var e=$(e),i=e.attr("data-start-font-size");i&&(i=parseInt(i)*o,e.css("fontSize",i)),e.children().length&&n.resizeFontSize(e)})},responsiveLayoutChanged:function(t){var e,t=n.responsiveLayoutChanged.call(this,t);return t?(this.$el.attr("text-align",t.resp_textAlign),e=t.resp_wordBreak,_.isUndefined(e)||this.$el.css("wordBreak",e)):(this.$el[0].hasAttribute("text-align")&&this.$el.removeAttr("text-align"),this.$el.css("wordBreak",this.model.properties.wordBreak)),t},beforeAutofit:function(t){n.beforeAutofit.call(this,t),this.autoFit({save:!0})},afterAutofit:function(t){n.afterAutofit.call(this,t),this.autoFit({save:!0})},autoFit:function(t){t=_.extend({add:0},t);var e=this.$textWrap.height(),i=!0===t.noMax?e+t.add:Math.max(this.model.height,e+t.add),n={};return(i=this.model.collection.block?e+t.add:i)&&(n.height=i,t.save)&&(this.model.set("height",i),this.model.__parent__)&&object.initialArea&&(this.model.__extra__.initialArea.height=i),_.isEmpty(n)||this.$parent.css(n),e?this.__clearFixedWrapHeight__&&(this.$textWrap.css("height",""),this.$textWrap.height()?this.__clearFixedWrapHeight__=!1:this.autoFit()):(this.__clearFixedWrapHeight__=!0,t=this.$textWrap.html(),this.$textWrap.html("<div> </div>"),e=this.$textWrap.height(),this.$textWrap.html(t),this.$textWrap.css("height",e)),i},isEmpty:function(){return void 0===this.getText()||0===this.getText().replace(/(<([^>]+)>)/gi,"").replace("&nbsp;","").length},setTextStyle:function(e){_.each(Object.keys(e),function(t){this.style[t]=e[t],this.$el.css(t,e[t])},this)},getText:function(){return this.model.get("htmlText")||""},setText:function(t){this.model.set("htmlText",t)},hasTag:function(t){return new RegExp("(<(/?[^>]+)>)").test(t)}}),t.UIText=e}),define("toast/views/UIImageButton",["../core","./UIText"],function(e,t){"use strict";e.Strings;var i=t.prototype,t=t.extend();return _.extend(t.prototype,i,{tagName:"div",className:"image-btn text-center",style:{fontSize:"14px",width:"100%",height:"100%",minHeight:"20px",outline:"none",color:"#333"},initialize:function(t){i.initialize.call(this,t)},render:function(){return i.render.call(this),this},commonRender:function(){this.style=_.extend({},i.style,this.style),i.commonRender.call(this),this._setImageElements(),this.setState(this.model.properties.buttonState,!0)},mount:function(){i.mount.call(this),e.isMobileDevice||_.isEmpty(this.model.properties.overImage)||this.$el.hover($.proxy(this._onHover,this),$.proxy(this._onOut,this)),this.$el.on(this.__eventTypes__.start,$.proxy(this._onDown,this)),this.$el.on(this.__eventTypes__.end,$.proxy(this._onUp,this))},setState:function(t,e){var i;this.buttonState===t&&!e||("selected"===t&&(i=this.model.properties.selectedImage,_.isEmpty(i)||this._showImage("selected")),_.isEmpty(i)&&(i=this.model.properties.normalImage,_.isEmpty(i)?this.$el.children("img[data-state]").hide():this._showImage("normal")),this.buttonState=t)},_setImageElements:function(t){(t=t||{}).reset&&this.$el.children("img").remove();t=this.model.properties.normalImage;_.isEmpty(t)||this.$el.find('[data-state="normal"]').length||this.$el.prepend($("<img />",{"data-state":"normal",src:e.ImageAssets.url(t)})),e.isMobileDevice||(t=this.model.properties.overImage,_.isEmpty(t))||this.$el.find('[data-state="over"]').length||this.$el.prepend($("<img />",{"data-state":"over",src:e.ImageAssets.url(t)})),t=this.model.properties.downImage,_.isEmpty(t)||this.$el.find('[data-state="down"]').length||this.$el.prepend($("<img />",{"data-state":"down",src:e.ImageAssets.url(t)})),t=this.model.properties.selectedImage,_.isEmpty(t)||this.$el.find('[data-state="selected"]').length||this.$el.prepend($("<img />",{"data-state":"selected",src:e.ImageAssets.url(t)})),this.$el.children("img[data-state]").css("opacity",0)},_showImage:function(t){var e=this.$el.children('img[data-state="'+t+'"]');e.length&&(e.css("opacity",1),this.$el.children('img[data-state!="'+t+'"]').css("opacity",0))},_onDown:function(){this._showImage("down")},_onUp:function(){e.isMobileDevice||_.isEmpty(this.model.properties.overImage)?this._onOut():this._onHover()},_onOut:function(){"selected"===this.buttonState&&!_.isEmpty(this.model.properties.selectedImage)||this.setState(this.model.properties.buttonState,!0)},_onHover:function(){this._showImage("over")},autoFit:function(t){},responsiveSize:function(t,e){return this.model.fitWidth=!1,{width:this.model._orgWidth,height:this.model._orgHeight}}}),e.UIImageButton=t}),define("toast/views/UIButton",["../core","./UIView","./UIText"],function(i,t,e){"use strict";i.Strings;var n=t.prototype,o=e.prototype,t=e.extend();return _.extend(t.prototype,o,{tagName:"button",className:"btn",autoMaintainRatio:!1,initialize:function(t){o.initialize.call(this,t)},render:function(){return o.render.call(this),this._setIcon(),this},commonRender:function(){o.commonRender.call(this),this.setState(this.model.properties.buttonState,!0),_.isUndefined(this.model.properties.buttonStyle)&&(this.model.properties.buttonStyle="primary"),this.model.properties.buttonIconOffsetX||(this.model.properties.buttonIconOffsetX=0),this.model.properties.buttonIconOffsetY||(this.model.properties.buttonIconOffsetY=0),this.model.properties.buttonTextOffsetX||(this.model.properties.buttonTextOffsetX=0),this.model.properties.buttonTextOffsetY||(this.model.properties.buttonTextOffsetY=0),this.model.properties.buttonIconWidth||(this.model.properties.buttonIconWidth=24),this.model.properties.buttonIconHeight||(this.model.properties.buttonIconHeight=24),this._setIcon()},responsiveSize:function(t,e){return this.model.fitWidth=!1,{width:this.model._orgWidth,height:this.model._orgHeight}},beforeAutofit:function(t){n.beforeAutofit.call(this,t)},afterAutofit:function(t){n.afterAutofit.call(this,t)},autoFit:function(t){return!1},_setCursor:function(){},setState:function(t,e){this.buttonState===t&&!e||(this.buttonState=t)},_setIcon:function(t){this._buttonImageIcon!==this.model.properties.buttonImageIcon?(this._buttonImageIcon=this.model.properties.buttonImageIcon,this._setImageIcon(),this.$contentMount&&this.$contentMount.reject(),_.isEmpty(this._buttonImageIcon)&&this._setSvgIcon()):this._buttonSvgIcon!==this.model.properties.buttonSvgIcon?(this._buttonSvgIcon=this.model.properties.buttonSvgIcon,_.isEmpty(this.model.properties.buttonImageIcon)&&this._setSvgIcon(),_.isEmpty(this._buttonSvgIcon)&&(this._setImageIcon(),this.$contentMount)&&this.$contentMount.reject()):this.$contentMount&&this.$contentMount.reject(),this._setButtonStyle(),this._setSvgIconColor(),this._setIconSize(),this._setIconAlign(),this._setTextOffset()},_setButtonStyle:function(){this.$el.attr("class","btn"),this.model.style.backgroundColor&&(this.model.properties.buttonStyle=""),_.isEmpty(this.model.properties.buttonStyle)||this.$el.addClass("btn-"+this.model.properties.buttonStyle)},_setImageIcon:function(){var t;this.$iconContainer&&this.$iconContainer.remove(),_.isEmpty(this._buttonImageIcon)?this.$iconContainer=null:(t=i.ImageAssets.url(this._buttonImageIcon),t=$("<img />",{class:"btn-icon vertical-middle",src:t}),this.$iconContainer=$("<div />",{class:"btn-icon-container"}),this.$iconContainer.append(t),this.$el.prepend(this.$iconContainer))},_setSvgIcon:function(){var t,e;_.isEmpty(this._buttonSvgIcon)?(this.$iconContainer&&this.$iconContainer.remove(),this.$svgIcon&&this.$svgIcon.remove(),this.$iconContainer=null,this.$svgIcon=null):(t=i.SVGAssets.url(this._buttonSvgIcon),(t=i.paths.__originalAssets__&&(e=i.SVGAssets._assets[this._buttonSvgIcon])&&e.url?i.StringUtils.replaceTemplate(e.url,"ASSETS_DIR",i.paths.__originalAssets__):t)?$.ajax({type:"GET",url:t,dataType:"xml",success:$.proxy(this.svgLoaded,this),error:function(){self.$contentMount&&self.$contentMount.reject()}}):this.$svgIcon&&this.$svgIcon.remove())},svgLoaded:function(t){i.SVGAssets.url(this._buttonSvgIcon);this.$iconContainer&&this.$iconContainer.remove(),this.$svgIcon&&this.$svgIcon.remove(),this.$svgIcon=$(t),this.$svgIcon.prop("viewBox")||(this.$svgIcon=this.$svgIcon.find("svg")),this.$svgIcon.attr("class","btn-icon vertical-middle"),this.$svgIcon.attr("width","100%"),this.$svgIcon.attr("height","100%"),this.$svgIcon.get(0).setAttribute("preserveAspectRatio","none"),this.$svgIcon.attr("pointer-events","none"),this.$iconContainer=$("<div />",{class:"btn-icon-container"}),this.$iconContainer.append(this.$svgIcon),this._setIconSize(),this._setIconAlign(),this._setSvgIconColor(),this.$el.prepend(this.$iconContainer),this.$contentMount&&this.$contentMount.resolve(this.$svg)},_setSvgIconColor:function(){this.$svgIcon&&this.$svgIcon.get(0).setAttribute("fill",this.model.properties.buttonSvgIconColor)},_setIconSize:function(t){this.$iconContainer&&this.$iconContainer.css({width:this.model.properties.buttonIconWidth,height:this.model.properties.buttonIconHeight})},_setIconAlign:function(){this.$iconContainer&&(this.$iconContainer.css("top",(this.$parent.outerHeight()-this.$iconContainer.outerHeight())/2+this.model.properties.buttonIconOffsetY),"right"===this.model.properties.buttonIconAlign?(this.$iconContainer.css("left",""),this.$iconContainer.css("right",parseInt(this.$el.css("paddingRight"))+2+this.model.properties.buttonIconOffsetX)):"center"===this.model.properties.buttonIconAlign?(this.$iconContainer.css("right",""),this.$iconContainer.css("left",(this.$parent.outerWidth()-this.$iconContainer.outerWidth())/2+this.model.properties.buttonIconOffsetX)):(this.$iconContainer.css("right",""),this.$iconContainer.css("left",parseInt(this.$el.css("paddingLeft"))+2+this.model.properties.buttonIconOffsetX)))},_setTextOffset:function(){this.$textWrap.css("left",this.model.properties.buttonTextOffsetX),this.$textWrap.css("top",this.model.properties.buttonTextOffsetY)}}),i.UIButton=t}),define("toast/views/UIImage",["../core","../utils/StringUtils","./UIView"],function(e,t,i){"use strict";e.Strings;var s=i.prototype,i=i.extend();return _.extend(i.prototype,s,{maintainRatio:!0,initialize:function(t){s.initialize.call(this,t)},render:function(){var t;return this.viewController.htmlRender&&"bg"===this.model.label&&!_.isEmpty(this.model.properties.asset)&&(t=e.ImageAssets.url(this.model.properties.asset))&&(this.isDocumentBackgroundImage=!0,$(document.body).css("backgroundImage",'url("'+t+'")'),this.$parent.remove()),s.render.call(this),this},commonRender:function(){var t;this.isDocumentBackgroundImage||(this.$img=this.$el.children("img"),this.$img.length||(this.$img=$("<img />"),this.$el.append(this.$img)),this.$img.css("width",""),this.$img.css("height",""),_.isEmpty(this.model.properties.alt)||this.$img.attr("alt",this.model.properties.alt),!_.isEmpty(this.model.properties.asset)&&(t=e.ImageAssets.url(this.model.properties.asset))?(this.$el.removeClass("placeholder"),this.$img.attr("src",t)):this.showPlacehoder(),this.model.properties.contain&&this.update(),s.commonRender.call(this))},mount:function(){s.mount.call(this)},update:function(t,e){s.update.apply(this,arguments);var i=this.model.properties.contain,n=this.model.get("imgWidth"),o=this.model.get("imgHeight");return i&&n&&o?(this.model.width/n<this.model.height/o?(this.$img.css("width",this.model.width),this.$img.css("height","auto")):(this.$img.css("width","auto"),this.$img.css("height",this.model.height)),this.$parent.addClass("image-centered")):(this.$img.css("width","100%"),this.$img.css("height","100%"),this.$parent.removeClass("image-centered")),this},responsiveSize:function(t,e){return!0===this.model.properties.sizeFixed?(this.model.fitWidth=!1,{width:this.model._orgWidth,height:this.model._orgHeight}):s.responsiveSize.call(this,t,e)},beforeAutofit:function(t){s.beforeAutofit.call(this,t)},afterAutofit:function(t){s.afterAutofit.call(this,t)},showPlacehoder:function(){this.$el.addClass("placeholder"),this.$img.attr("src","styles/images/image-placeholder.svg")},_setHTMLAttrs:function(){s._setHTMLAttrs.call(this),this.$parent.removeClass("image-centered"),this.$img.removeAttr("width height"),this.$img.removeAttr("style")}}),e.UIImage=i}),define("toast/views/UILink",["../core","./UIView"],function(t,e){"use strict";t.Strings;var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{style:{},initialize:function(t){i.initialize.call(this,t)},render:function(){i.render.call(this),this.model.properties.color&&this.$el.css("backgroundColor",this.model.properties.color);var t=this;return t.$el.hover(function(){t.$el.css("backgroundColor",t.model.properties.hoverColor)},function(){t.model.properties.color?t.$el.css("backgroundColor",t.model.properties.color):t.$el.css("backgroundColor","")}),this},commonRender:function(){i.commonRender.call(this)},_setCursor:function(){}}),t.UILink=e}),define("toast/views/UIIcon",["../core","../utils/StringUtils","./UIView"],function(n,t,e){"use strict";n.Strings;var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{maintainRatio:!0,initialize:function(t){i.initialize.call(this,t)},render:function(){return i.render.call(this),this},commonRender:function(){i.commonRender.call(this),this._load()},mount:function(){this.$svg=this.$el.find("svg"),this.$svg.length||this._load()},_load:function(){var t,e,i;this._asset!==this.model.properties.asset&&(this._asset=this.model.properties.asset,t=n.SVGAssets.url(this._asset),(t=n.paths.__originalAssets__&&(e=n.SVGAssets._assets[this._asset])&&e.url?n.StringUtils.replaceTemplate(e.url,"ASSETS_DIR",n.paths.__originalAssets__):t)?(i=this,$.ajax({type:"GET",url:t,dataType:"xml",success:$.proxy(this._svgLoaded,this),error:function(){i.$contentMount&&i.$contentMount.reject()}})):this.$svg&&this.$svg.remove())},_svgLoaded:function(t){this.$svg&&this.$svg.remove(),this.$svg=$(t),this.$svg.prop("viewBox")||(this.$svg=this.$svg.find("svg")),this.$svg.attr("width","100%"),this.$svg.attr("height","100%"),this.$svg.attr("pointer-events","none"),_.isUndefined(this.model.__extra__.preserveAspectRatio)||this.$svg.get(0).setAttribute("preserveAspectRatio",this.model.__extra__.preserveAspectRatio),_.isUndefined(this.model.__extra__.fill)||this.$svg.get(0).setAttribute("fill",this.model.__extra__.fill),this.$el.prepend(this.$svg),this.$contentMount&&this.$contentMount.resolve(this.$svg)}}),n.UIIcon=e}),define("toast/views/UITable",["../core","./UIView","./UIText"],function(t,e,i){"use strict";var n=e.prototype,o=i.prototype,e=i.extend();return _.extend(e.prototype,o,{tagName:"div",autoMaintainRatio:!1,initialize:function(t){o.initialize.call(this,t)},render:function(){return o.render.call(this),this},commonRender:function(){o.commonRender.call(this)},beforeAutofit:function(t){n.beforeAutofit.call(this,t)},afterAutofit:function(t){n.afterAutofit.call(this,t)}}),t.UITable=e}),define("toast/views/UIMediaPlayer",["../core","./UIView"],function(n,t){"use strict";n.Strings;var i=t.prototype,t=t.extend();return _.extend(t.prototype,i,{className:"media-player",initialize:function(t){i.initialize.call(this,t)},render:function(){i.render.call(this),this.$el.find(".player-controlbars").length||this.$el.append(this.templateHTML()),__app__||!0!==n.config.disableMediaSeeking||(this.model.properties.disableMediaSeeking=!0),n.config.delegatePlayerInteractions&&n.config.delegatePlayerInteractions.userInteractionDisabled&&(this.userInteractionDisabled=!0),this._initElements(),this._initMediaElement(),n.on(n.Events.FULLSCREEN_DID_CHANGE,this._fullscreenDidChanged,this);var t;return this.$media.on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange webkitbeginfullscreen webkitendfullscreen",$.proxy(this._webkitFullscreenDidChanged,this)),n.config.progressPageControl&&((t=n.contentStorage.findWhere({id:this.model.id}))||(t={id:this.model.id,pageID:this.viewController.collection.id,progressPageControl:!0,ended:!1},n.contentStorage.addItem(t)),this._storageItem=t),this},mount:function(){i.mount.call(this),this._initSliders(),this._initControlBarData(),this.update()},mountAll:function(){i.mountAll.call(this)},willAppear:function(){i.willAppear.call(this),this.viewController.parentViewController&&!this._initControlBarDataOnce&&(this._initControlBarData(),this._initControlBarDataOnce=!0),this.update()},appear:function(){i.appear.call(this),(this.model.properties.autoplay||n.project.config.mediaAutoPlay)&&(this.__lazyTimeout__||(this.__lazyTimeout__={}),n.lazyOnce(function(){this.isAppeared&&(this.isLoaded()?this.play():this.isLoading()||this.isLoaded()||this.load())},50,this.__lazyTimeout__,this))},disappear:function(){i.disappear.call(this),this.pause()},scaleDidChange:function(t){i.scaleDidChange.apply(this,arguments),this.update(),this.isViewsDidMounted&&(this.$timeSlider&&(this.$timeSlider.closest(".contents").length?this.$timeSlider.attr("data-content-scale",this.viewController.contentScale):this.$timeSlider.attr("data-content-scale",1),this.$timeSlider.rangeslider("update",!0)),this.$volumeSlider.closest(".contents").length?this.$volumeSlider.attr("data-content-scale",this.viewController.contentScale):this.$volumeSlider.attr("data-content-scale",1),this.$volumeSlider.rangeslider("update",!0))},update:function(t,e){return i.update.apply(this,arguments),this._updateElementSize(),this},show:function(){i.show.call(this),this.update()},isPlaying:function(){return!!this.isReadyMedia()&&!!(0<this.$media[0].currentTime&&!this.$media[0].paused&&!this.$media[0].ended&&2<this.$media[0].readyState)},isPaused:function(){return!!this.isReadyMedia()&&!!(0<this.$media[0].currentTime&&this.$media[0].paused&&!this.$media[0].ended&&2<this.$media[0].readyState)},isMuted:function(){return!!this.isReadyMedia()&&this.$media[0].muted},isLoading:function(){return this._isLoading},isLoaded:function(){return this._isLoaded},isReadyMedia:function(){return _.isUndefined(this.$media[0])?-1:0!==this.$media[0].readyState||0},load:function(){-1===this.isReadyMedia()||this.isLoading()||this.isLoaded()?this.isLoaded()&&this._sendMediaStatusChangeCallback("loaded"):(this._isLoading=!0,this.$media.load(),this.updateBuffered(),this.$media.attr("src")&&(this._currentFilename=this.$media.attr("src").getBaseName().getFilenameWithoutExtension()))},updateBuffered:function(){var t=this;this.__bufferInterval=setInterval(function(){t.isReadyMedia()&&4===t.$media[0].readyState&&(t.$media[0].onprogress=function(){t.$playerBarLoaded.width(t.$media[0].buffered.end(0)/t.$media[0].duration*100+"%")},clearInterval(t.__bufferInterval))},100)},fileFromAsset:function(t){return n.MovieAssets.url(t)},play:function(){return!(!this.isReadyMedia()||n.config.delegatePlayerInteractions&&!n._.userGestureRequirementForAutoplay||(this.$media[0].play(),0))},playFile:function(t,e,i){if((!_.isEmpty(t)||!_.isEmpty(e))&&(i=i||{},e=_.isEmpty(t)?e:this.fileFromAsset(t),!_.isEmpty(e))){if(!i.replay)if(e.getBaseName().getFilenameWithoutExtension()==this._currentFilename)return void(this.isReadyMedia()&&this.play());this._isLoaded=!1,this._playAfterLoad=!0,this.$media.attr("src",e),this.load(),this.$el.hasClass("empty")&&this.$el.removeClass("empty")}},pause:function(){return!!this.isReadyMedia()&&(this._userInteraction=!0,this.$media[0].pause(),!0)},stop:function(){return!!this.isReadyMedia()&&(this.$parent.addClass("stopped"),this.$parent.removeClass("playing paused"),this._userInteraction=!0,this.$media[0].pause(),_.isUndefined(this.$media[0].currentTime)||(this.$media[0].currentTime=0),this._sendMediaStatusChangeCallback("stopped"),!0)},mute:function(){return!!this.isReadyMedia()&&(this.$media[0].muted=!this.$media[0].muted,this.$media[0].volume||(this.$media[0].volume=.7),this._sendMediaStatusChangeCallback("muted"),this._didVolumeupdate(),!0)},end:function(){return!!this.isReadyMedia()&&(this.$media[0].currentTime=this.$media[0].duration,!0)},startFullscreen:function(){this.__isPlayingBeforeFullscreen__=this.isPlaying();var t,e=this.model.properties.disableMediaSeeking;if(!n.isIOS||e||"AUDIO"===this.$media[0].tagName)return this.$parent.addClass("fullscreen"),e=this.$parent.parent(),t=$("<div />",{id:this.model.id+"_player"}),e.children().eq(this.$parent.index()).before(t),n.isIOS&&"AUDIO"!==this.$media[0].tagName&&this._startFullscreen(),$(document.body).append(this.$parent),n.isIOS&&"AUDIO"!==this.$media[0].tagName||this._startFullscreen(),this.scaleDidChange(1),this.update(),!0;this._startFullscreen()},_startFullscreen:function(){var t=this.model.properties.disableMediaSeeking;n.isIOS&&!t?n.requestFullScreen(this.$media[0]):n.requestFullScreen(this.$parent[0])||this._fullscreenDidChanged(!0),this.__isPlayingBeforeFullscreen__&&this.play(),this.__isPlayingBeforeFullscreen__=!1},stopFullscreen:function(){var t;return this.$parent.hasClass("fullscreen")&&(this.$parent.removeClass("fullscreen"),(t=this.viewController.$el.find("#"+this.model.id+"_player")).before(this.$parent),t.remove(),this.scaleDidChange(this.viewController.contentScale),this.update(),this._stopFullscreen()),!0},_stopFullscreen:function(){var t=this.model.properties.disableMediaSeeking;n.isIOS&&!t?n.exitFullScreen(this.$media[0]):n.exitFullScreen(this.$parent[0])||this._fullscreenDidChanged(!1)},_initElements:function(){this.$controlBars=this.$el.find(".player-controlbars"),this.$controlBar=this.$controlBars.find(".player-controlbar"),this.$playerBar=this.$el.find(".player-bar"),this.$playerBarLoaded=this.$el.find(".player-bar-loaded"),this.$playerBarPlayed=this.$el.find(".player-bar-played"),this.$playerTime=this.$el.find(".player-time"),this.$controlBtn=this.$el.find(".control-btn"),this.$timeCurrent=this.$playerTime.find(".player-time-current"),this.$timeDuration=this.$playerTime.find(".player-time-duration"),this.$timeSlider=this.$el.find("[data-time-slider]"),this.$volumeBar=this.$el.find(".player-volume-bar"),this.$volumeCurrent=this.$volumeBar.find(".player-volume-bar-current"),this.$volumeSlider=this.$volumeBar.find("[data-volume-slider]")},_initMediaElement:function(){this.$media=this.createMediaElement(),this.$media.on("loadeddata",$.proxy(this._didLoaded,this)),this.$media.on("play",$.proxy(this._didPlayed,this)),this.$media.on("pause",$.proxy(this._didPaused,this)),this.$media.on("timeupdate",$.proxy(this._didTimeupdate,this)),this.$media.on("ended",$.proxy(this._didEnded,this)),this.setMediaSource()},_initSliders:function(){var i;n._.forHTMLPublishing||((i=this).$timeSlider&&this.$timeSlider.rangeslider({polyfill:!1,onInit:function(){},onSlide:function(t,e){},onSlideEnd:function(t,e){n.IS_SLIDING&&(i.$media[0].currentTime=e),n.IS_SLIDING=!1,i.$parent.hasClass("time-sliding")&&i.$parent.removeClass("time-sliding")},onHandleDown:function(t){n.IS_SLIDING=!0,i.$parent.addClass("time-sliding"),i.$media[0].currentTime=t,i._didTimeupdate()},onHandleMove:function(t){i.$media[0].currentTime=t,i._didTimeupdate()}}),this.$playerTimeSlider=this.$el.find(".player-bar .rangeslider"),this.$playerTimeSliderHandle=this.$el.find(".player-bar .rangeslider__handle"),this.$volumeSlider&&this.$volumeSlider.rangeslider({polyfill:!1,onInit:function(){},onSlide:function(t,e){},onSlideEnd:function(t,e){n.IS_SLIDING=!1,i.$parent.hasClass("volume-sliding")&&i.$parent.removeClass("volume-sliding")},onHandleDown:function(t){n.IS_SLIDING=!0,i.$parent.addClass("volume-sliding"),i.$media[0].muted=!1,i.$media[0].volume=t/100,i._didVolumeupdate()},onHandleMove:function(t){i.$media[0].muted=!1,i.$media[0].volume=t/100,i._didVolumeupdate()}}),this.$playerVolumeSliderHandle=this.$el.find(".player-volume-bar .rangeslider__handle"),this.model.properties.disableMediaSeeking&&this.$timeSlider&&this.$timeSlider.length&&(this.$timeSlider.rangeslider("destroy"),this.$timeSlider=null))},_initControlBarData:function(){n._.forHTMLPublishing||this.$controlBars.length&&(this.$controlBars.attr("data-time-slider-height",this.$playerTimeSlider.height()),this.$controlBars.attr("data-time-slider-handle-size",this.$playerTimeSliderHandle.width()),this.$controlBars.attr("data-volume-slider-handle-size",this.$playerVolumeSliderHandle.width()),this.$controlBars.attr("data-controlbars-height",this.$controlBars.height()),this.$controlBars.attr("data-controlbar-left",parseInt(this.$controlBar.css("left"))),this.$controlBars.attr("data-controlbar-right",parseInt(this.$controlBar.css("right"))),this.$controlBars.attr("data-font-size",parseInt(this.$controlBars.css("font-size"))),this.$controlBars.attr("data-control-btn-width")||this.$controlBars.attr("data-control-btn-width",this.$controlBtn.width()))},_isFullscreen:function(){return this.$parent.hasClass("fullscreen")},_secondsToTime:function(t){isNaN(t)&&(t=0);var e=Math.floor(t/3600),i=Math.floor(t%3600/60),t=Math.floor(t%3600%60);return(0==e?"":(0<e&&e.toString().length,e+":"))+(i.toString().length,i)+":"+(t.toString().length<2?"0"+t:t)},_updateElementSize:function(){},_timeupdateCallback:function(t,e){this._timeupdateCallbackFn=t,this._timeupdateCallbackContext=e},_mediaStatusChangeCallback:function(t,e){this._mediaStatusChangeCallbackFn=t,this._mediaStatusChangeCallbackContext=e},_sendMediaStatusChangeCallback:function(t){this._mediaStatusChangeCallbackFn&&(this._mediaStatusChangeCallbackContext?this._mediaStatusChangeCallbackFn.bind(this._mediaStatusChangeCallbackContext)(t):this._mediaStatusChangeCallbackFn(t)),n.config.delegatePlayerInteractions&&n.config.delegatePlayerInteractions.statusChangeCallbackFn&&n.config.delegatePlayerInteractions.statusChangeCallbackFn(this,this.$media[0],t)},_changeFullscreenCallback:function(t,e){this._changeFullscreenCallbackFn=t,this._changeFullscreenCallbackContext=e},_didLoaded:function(){this._isLoading=!1,this._isLoaded=!0,this.$timeCurrent.text(this._secondsToTime(0)),this.$timeDuration.text(this._secondsToTime(this.$media[0].duration)),this.update();var t=this.$media[0].volume;this.$media[0].muted=this.model.properties.muted,this.$volumeSlider.attr("value",100*t),this.$volumeSlider.attr("max",100),this.$volumeSlider.rangeslider("update",!0),this._didVolumeupdate(),this.$timeSlider&&(this.$timeSlider.attr("value",0),this.$timeSlider.attr("max",Math.floor(this.$media[0].duration))),this._loadedDuration=this.$media[0].duration,this.$timeSlider&&this.$timeSlider.rangeslider("update",!0),this._sendMediaStatusChangeCallback("loaded"),this._playAfterLoad?(this._playAfterLoad=!1,this.isAppeared&&(this.viewController.current()||n.config.sharedAudioPlayer)&&this.play()):(!0===this.model.properties.autoplay||n.project.config.mediaAutoPlay)&&this.isAppeared&&(this.viewController.current()||n.config.sharedAudioPlayer)&&(this.$media.attr("data-autoplay",!0),this.play())},_didPlayed:function(){this.$parent.addClass("playing"),this.$parent.removeClass("paused stopped"),this._sendMediaStatusChangeCallback("playing")},_didPaused:function(){this._userInteraction&&(this._userInteraction=!1,this.$parent.addClass("paused"),this.$parent.removeClass("playing stopped user-action"),this._sendMediaStatusChangeCallback("paused"))},_didTimeupdate:function(){var t=Math.floor(this.$media[0].currentTime),e=Math.floor(this.$media[0].duration);this._loadedDuration!==this.$media[0].duration&&(this._loadedDuration=this.$media[0].duration,this.$timeSlider)&&(this.$timeSlider.attr("max",e),this.$timeSlider.rangeslider("update",!0)),!n.IS_SLIDING&&this.$timeSlider&&this.$timeSlider.val(t).change(),this._timeupdateCallbackFn&&(this._timeupdateCallbackContext?this._timeupdateCallbackFn.bind(this._timeupdateCallbackContext)(this.$media[0].currentTime):this._timeupdateCallbackFn(this.$media[0].currentTime)),n.config.delegatePlayerInteractions&&n.config.delegatePlayerInteractions.timeupdateCallbackFn&&n.config.delegatePlayerInteractions.timeupdateCallbackFn(this,this.$media[0],this.$media[0].currentTime),this.$timeCurrent.text(this._secondsToTime(this.$media[0].currentTime)),this.$timeDuration.text(this._secondsToTime(this.$media[0].duration)),this.$playerBarPlayed.width(t/e*100+"%")},_didVolumeupdate:function(){var t;this.$media[0].muted?(this.$parent.removeClass("volume-down"),this.$parent.addClass("muted")):(t=100*this.$media[0].volume,n.IS_SLIDING||this.$volumeSlider.val(t).change(),this.$volumeCurrent.width(t+"%"),70<=t?this.$parent.removeClass("muted volume-down"):0==t?(this.$parent.removeClass("volume-down"),this.$parent.addClass("muted"),this.$media[0].muted=!0):(this.$parent.removeClass("muted"),this.$parent.addClass("volume-down")))},_didEnded:function(){var t;this.$playerBarPlayed.width("100%"),this.$timeSlider&&!n.IS_SLIDING&&this.$timeSlider.val(Math.floor(this.$media[0].duration)).change(),this.$parent.removeClass("playing paused stopped"),n.config.progressPageControl&&(t=n.contentStorage.findWhere({id:this.model.id}))&&(t.set("ended",!0),t.set("progressPageControl",!1),n.contentStorage.updateItem(t)),this._sendMediaStatusChangeCallback("end")},_webkitFullscreenDidChanged:function(){var t=n.isFullScreen(this.$media[0]);t?n.$el.addClass("fullscreen"):n.$el.removeClass("fullscreen"),n.send(n.Events.FULLSCREEN_DID_CHANGE,t)},_fullscreenDidChanged:function(t){this.$parent.hasClass("fullscreen")&&!t&&this.stopFullscreen(),this._changeFullscreenCallbackFn&&(this._changeFullscreenCallbackContext?this._changeFullscreenCallbackFn.bind(this._changeFullscreenCallbackContext)(t):this._changeFullscreenCallbackFn(t))},_onControlButtonClicked:function(t){t.stopPropagation();var t=$(t.target).closest("[data-action]"),e=t.attr("data-action");e&&this._mediaControlAction(e,t)},_mediaControlAction:function(t){switch(n._.userGestureRequirementForAutoplay=!0,t){case"playAndPause":return this.isPlaying()?this.pause():this.play(),!0;case"play":return this.play(),!0;case"replay":return _.isUndefined(this.$media[0].currentTime)||(this.$media[0].currentTime=0),this.play(),!0;case"pause":return this.pause(),!0;case"stop":return this.stop(),!0;case"mute":return this.mute(),!0;case"toggleFullScreen":return this.$parent.hasClass("fullscreen")?this.stopFullscreen():this.startFullscreen(),!0}return!1},remove:function(){this.$timeSlider&&this.$timeSlider.length&&(this.$timeSlider.rangeslider("destroy"),this.$timeSlider=null),this.$volumeSlider&&this.$volumeSlider.length&&(this.$volumeSlider.rangeslider("destroy"),this.$volumeSlider=null),i.remove.apply(this,arguments),this._isFullscreen()&&this.$parent.remove()},events:{"click .control-btn":"_onControlButtonClicked"}}),n.UIMediaPlayer=t}),define("toast/views/UIAudioPlayer",["../core","./UIMediaPlayer"],function(n,t){"use strict";var e=n.Strings,o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{style:{},minsize:{width:300,height:54},controllbarMinSize:130,templateHTML:function(){return Mustache.render(n.HtmlLoader.AudioPlayer,{Strings:e})},initialize:function(t){o.initialize.call(this,t),this.$el.addClass("audio-player")},createMediaElement:function(){var t=this.$el.find("audio");return t.length||(t=$("<audio />"),this.$el.prepend(t)),t.attr({id:this.model.id+"-inner",width:"100%",preload:"auto"}),!0===this.model.properties.loop&&t.attr("loop","loop"),t},setMediaSource:function(){this.$media.empty(),_.isEmpty(this.model.properties.assets)&&!this.getUrl()?this.$el.addClass("empty"):this.$el.removeClass("empty"),_.each(this.model.properties.assets,function(t){var e=n.AudioAssets.url(t);e&&(t=$("<source />",{"data-audio-id":t,src:e}),this.$media.append(t))},this),_.isEmpty(this.model.properties.assets)&&this.getUrl()&&(t=$("<source />",{src:this.getUrl()}),this.$media.append(t));var t=0!==this.$media[0].currentTime;0<this.$media.children("source").length?this.$media.attr({"data-audio-id":this.$media.children("source").eq(0).attr("data-audio-id"),src:this.$media.children("source").eq(0).attr("src")}):this.$media.attr("src",""),this.load(),t&&(this.$media[0].currentTime=0,this._didTimeupdate())},getUrl:function(){var t;return this.model.properties.url?-1===(t=this.model.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()?"http://"+t:t:""},render:function(){return o.render.call(this),this},mount:function(){o.mount.call(this),this.updateStyle()},update:function(t,e){return o.update.apply(this,arguments),this},updateStyle:function(){this.$el.css("border-radius",this.$el.height());var t=this.model.properties.backgroundColor||"",t=(this.$el.css("background-color",t),this.model.properties.buttonIconColor||""),t=(this.$parent.find(".control-btn").css("color",t),this.isRender&&this.$playerBar.find(".rangeslider__handle").css("background-color",t),this.model.properties.textColor||""),t=(this.$playerTime.css("color",t),this.model.properties.seekbarBgColor||""),t=(this.$playerBar.css("background-color",t),this.model.properties.seekbarColor||"");this.$playerBarPlayed.css("background-color",t)},willAppear:function(){return o.willAppear.call(this),this.updateStyle(),this},remove:function(){o.remove.apply(this,arguments)},fileFromAsset:function(t){return n.AudioAssets.url(t)},_didLoaded:function(){o._didLoaded.apply(this,arguments)},_didPlayed:function(){o._didPlayed.apply(this,arguments)},_didPaused:function(){o._didPaused.apply(this,arguments)},_didEnded:function(){o._didEnded.apply(this,arguments)},_updateElementSize:function(){var t,e,i;o._updateElementSize.apply(this,arguments),this.$controlBars.length&&!n._.forHTMLPublishing&&(t=Number(this.$controlBars.attr("data-controlbar-left")),e=Number(this.$controlBars.attr("data-controlbar-right")),e=this._isFullscreen()?t=0:(t=Math.max(t,t*(this.$el.height()/this.minsize.height)),Math.max(e,e*(this.$el.height()/this.minsize.height))),this.$controlBars.css("font-size",""),this._compositionWidgetPlayer&&this.$controlBars.css("height",""),this.$controlBtn.css("width",""),this.$controlBar.css({left:t,right:e}),t=this.$controlBars.find(".left-control-group"),e=this.$controlBars.find(".right-control-group"),t.width()&&e.width()&&(this.controllbarMinSize&&this.$el.width()*this.viewController.contentScale<this.controllbarMinSize?(i=this.$controlBars.find(".player-volume-control-group"),this.$playerTime.hide(),e.hide(),this.$playerBar.css({left:t.width()+15,right:i.length?i.css("margin-left"):15})):(this.$playerTime.show(),e.show(),this.$playerBar.css({left:t.width(),right:e.width()}))),this.$playerBar.width()<20?this.$playerBar.hide():this.$playerBar.show(),this.$playerTimeSlider&&this.$playerTimeSlider.css("height",""),this.$playerTimeSliderHandle&&this.$playerTimeSliderHandle.css({width:"",height:"",marginTop:""}),this.$timeSlider)&&this.isRender&&this.$timeSlider.rangeslider("update",!0)}}),n.UIAudioPlayer=t}),define("toast/views/UIMoviePlayer",["../core","./UIMediaPlayer"],function(a,t){"use strict";var i=a.Strings,r=(a.const.MOVIE_PLAYER_CONTROLBAR_HEIGHT=44,t.prototype),t=t.extend();return _.extend(t.prototype,r,{templateHTML:function(){return a.isMobileDevice?Mustache.render(a.HtmlLoader.VideoPlayerMimi,{Strings:i}):Mustache.render(a.HtmlLoader.VideoPlayer,{Strings:i})},initialize:function(t){r.initialize.call(this,t),this.userInteractionDisabled=this.model.properties.controlbarHidden,this.$el.addClass("movie-player")},render:function(){return r.render.call(this),a.isMobileDevice&&this.$el.addClass("mini"),this.userInteractionDisabled||(this.$centerPlayBtn.on("click",$.proxy(this._onCenterPlayBtnClicked,this)),this.events.click="_onClicked",this.events.mousemove="_onMouseMove",this.events.mouseout="_onMouseout"),this.delegateEvents(),_.isUndefined(a.project.config.playbackRate)||!0===a.project.config.playbackRate||this.$el.find('.control-btn[data-action="playbackRate"]').remove(),this.$el.find(".control-btn").hover($.proxy(this._onControlButtonHover,this),$.proxy(this._onControlButtonOut,this)),this},mount:function(){r.mount.call(this)},willAppear:function(){r.willAppear.call(this),this.viewController.parentViewController&&(this.viewController.parentViewController.$el.addClass("video-controls-fix"),this.viewController.$el.closest(".toast-object").addClass("video-controls-fix"))},willDisappear:function(){r.willAppear.call(this),this.viewController.parentViewController&&(this.viewController.parentViewController.$el.removeClass("video-controls-fix"),this.viewController.$el.closest(".toast-object").removeClass("video-controls-fix"))},appear:function(){r.appear.call(this),a.config.delegatePlayerInteractions&&this.setMediaSource()},disappear:function(){r.disappear.call(this),a.config.delegatePlayerInteractions&&(this.$media.attr("src",""),this.$media.load(),this._isLoading=!1,this._isLoaded=!0)},update:function(t,e){var i,n,o,s;return r.update.apply(this,arguments),i=this.$parent.width(),n=this.$parent.height(),this.$centerPlayBtn.width(),this.$centerPlayBtn.height(),o=a.isMobileDevice?90:100,s=this._isFullscreen()?(s=Math.min(o,Math.min(i,n))-5,s*=Math.min(this.$parent.width()/this.model.width,this.$parent.height()/this.model.height),Math.min(80,Math.max(o,s))):(s=o/this.viewController.contentScale,Math.min(o,s)),!_.isUndefined(this.model.properties.centerPlayButtonBgColor)&&this.$centerPlayBtnIcon&&this.$centerPlayBtnIcon.length&&this.$centerPlayBtnIcon.find("path").get(0).setAttribute("fill",this.model.properties.centerPlayButtonBgColor),this.$centerPlayBtn.css({width:s,height:s}),this},remove:function(){r.remove.apply(this,arguments)},createMediaElement:function(){var t=this.$el.find("video"),e=(t.length||(t=$("<video />"),this.$el.prepend(t)),t.attr("poster")),e=(!e&&this.model.properties.cover&&(e=a.ImageAssets.url(this.model.properties.cover)),{id:this.model.id+"-inner",type:"video/mp4",poster:e,playsinline:!0});return this.model.properties.loop&&(e.loop=!0),this.model.properties.muted&&(e.muted=!0),t.attr(e),t.css("backgroundColor",this.model.properties.backgroundColor),t},setMediaSource:function(){var t;this.$media.empty(),a.config.delegatePlayerInteractions&&!this.isAppeared||(_.isEmpty(this.model.properties.asset)&&_.isEmpty(this.model.properties.url)?this.$el.addClass("empty"):this.$el.removeClass("empty"),t="",_.isEmpty(this.model.properties.asset)?_.isEmpty(this.model.properties.url)||-1===(t=this.model.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.model.properties.url):(t=a.MovieAssets.url(this.model.properties.asset),!_.isEmpty(t)&&a.config.movieBaseUrl&&(t=a.config.movieBaseUrl+t.getBaseName())),_.isEmpty(t)||a._.forHTMLPublishing||(a.showLoading(!0,{el:this.$parent}),this._sendMediaStatusChangeCallback("loading")),this.$media.attr("src",t),this.load())},play:function(){return!(!this.isReadyMedia()||a.config.delegatePlayerInteractions&&!a._.userGestureRequirementForAutoplay||(this.$media[0].playbackRate=this.getPlaybackRate(),this.$media[0].play(),0))},_initElements:function(){r._initElements.apply(this,arguments),this.$centerPlayBtn=this.$el.find(".center-play-btn"),this.$centerPlayBtnIcon=this.$centerPlayBtn.find("svg"),(this.userInteractionDisabled||this.model.properties.controlbarHidden)&&(this.$centerPlayBtn.hide(),this.$controlBars.hide()),this.model.properties.muted&&this.$volumeBar.parent().hide()},_setControlbarHiddingInterval:function(t){var e;this.userInteractionDisabled||(arguments.length||(t=3e3),this._mouseTrackingInterval&&clearTimeout(this._mouseTrackingInterval),(e=this)._mouseTrackingInterval=setTimeout(function(){a.IS_SLIDING||!e.isPlaying()||e.isAutoHiddingLocked||e.popoverInstance||e.$controlBars.addClass("_hide")},t))},_updateElementSize:function(){var t,e,i,n,o,s;this.$controlBars.length&&!a._.forHTMLPublishing&&(s=o=n=i=e=t="",!this._isFullscreen()&&this.viewController.contentScale<1&&(t=this.$controlBars.attr("data-controlbars-height"),e=this.$controlBars.attr("data-control-btn-width"),i=this.$controlBars.attr("data-font-size"),n=this.$controlBars.attr("data-time-slider-height"),o=this.$controlBars.attr("data-time-slider-handle-size"),s=this.$controlBars.attr("data-volume-slider-handle-size"),t=parseInt(t/this.viewController.contentScale)||"",e=parseInt(e/this.viewController.contentScale)||"",i=parseInt(i/this.viewController.contentScale)||"",n=parseInt(n/this.viewController.contentScale)||"",o=parseInt(o/this.viewController.contentScale)||"",s=parseInt(s/this.viewController.contentScale)||""),this.$controlBars.css("font-size",i),this.$controlBars.css("height",t),this.$controlBtn.css("width",e),this.isRender)&&(this.$playerTimeSlider.css("height",n),this.$playerTimeSliderHandle.css({width:o,height:o,marginTop:o?-o/2:""}),this.$timeSlider&&this.$timeSlider.rangeslider("update",!0),this.$playerVolumeSliderHandle.css({width:s,height:s,marginTop:s?-s/2:""}),this.$volumeSlider)&&this.$volumeSlider.rangeslider("update",!0)},_didLoaded:function(){r._didLoaded.apply(this,arguments),a.showLoading(!1,{el:this.$parent}),this.$centerPlayBtn.removeClass("_hide")},_didPlayed:function(){r._didPlayed.apply(this,arguments),this.$centerPlayBtn.addClass("_hide"),this._setControlbarHiddingInterval()},_didPaused:function(){r._didPaused.apply(this,arguments),this.$centerPlayBtn.removeClass("_hide")},_didEnded:function(){r._didEnded.apply(this,arguments),this.$centerPlayBtn.removeClass("_hide"),this.$controlBars.removeClass("_hide")},_onCenterPlayBtnClicked:function(t){t.stopPropagation(),a._.userGestureRequirementForAutoplay=!0,this.play()},_onClicked:function(t){a._.userGestureRequirementForAutoplay=!0,!this.isReadyMedia()||a.IS_PANNING||a.IS_DRAGGING||a.IS_SCROLLING||"VIDEO"===t.target.tagName&&(this.isPlaying()?this.pause():this.play())},_onMouseMove:function(t){this.isPlaying()&&!a.IS_SLIDING&&(this.$controlBars.hasClass("_hide")&&this.$controlBars.removeClass("_hide"),this._setControlbarHiddingInterval())},_onMouseout:function(){!this.isPlaying()||a.IS_SLIDING||this.popoverInstance||this.$controlBars.addClass("_hide")},_onControlButtonHover:function(){this.isAutoHiddingLocked=!0},_onControlButtonOut:function(){this.isAutoHiddingLocked=!1},popoverPlaybackRate:function(t){var e;this.popoverInstance?(this.popoverInstance.popover("destroy"),this.popoverInstance=null):(this.popoverEl=t,t="top",a.config.delegatePlayerInteractions&&a.config.delegatePlayerInteractions.playbackRateChangeCallbackFn&&(t="auto"),e=this,t={className:"playback-rate-popover",title:'<svg class="icon" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" pointer-events="none" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path d="M26.674,7.892c-6.756,0-12.232,5.477-12.232,12.233s5.477,12.233,12.232,12.233c6.757,0,12.233-5.478,12.233-12.233c0.001-6.755-5.476-12.232-12.23-12.233C26.676,7.892,26.676,7.892,26.674,7.892z M34.459,21.236h-8.9V12.34h2.227v6.674h6.674V21.236z M5.541,12.34h6.674v2.226H5.541V12.34z M1.093,19.015h8.896v2.226H1.093V19.015z M5.541,25.688h6.674v2.227H5.541V25.688z"/></svg> <span class="title" style="font-size: 12px;">'+i.PLAYBACK_RATE+"</span>",content:'<ul><li data-playback-rate="0.5">0.5</li><li data-playback-rate="1">'+i.NORMAL+'</li><li data-playback-rate="1.5">1.5</li><li data-playback-rate="2">2</li></ul>',width:"auto",padding:!0,placement:t,animation:"pop",trigger:"manual",closeable:!0,onHide:function(t){e.__lazyTimeout__||(e.__lazyTimeout__={}),a.lazyOnce(function(){e.popoverInstance&&(e.popoverInstance.popover("destroy"),e.popoverInstance=null,e._setControlbarHiddingInterval())},5,e.__lazyTimeout__,e)}},this._isFullscreen()?t.container=this.$parent[0]:t.container=document.body,this.popoverInstance=this.popoverEl.popover(t),this.popoverInstance.popover("show"),$(t.container).find('li[data-playback-rate="'+this.getPlaybackRate()+'"]').prepend('<span class="check">✓</span>'),$(t.container).find("li[data-playback-rate]").on("click",function(t){t=$(t.currentTarget);e.currentPlaybackRate=t.attr("data-playback-rate"),e.popoverInstance.popover("hide"),e.isReadyMedia()&&(e.$media[0].playbackRate=e.currentPlaybackRate),e._mediaPlaybackRateChangeCallbackFn&&(e._mediaPlaybackRateChangeCallbackContext?e._mediaPlaybackRateChangeCallbackFn.bind(e._mediaPlaybackRateChangeCallbackContext)(e.currentPlaybackRate):e._mediaPlaybackRateChangeCallbackFn(e.currentPlaybackRate)),a.config.delegatePlayerInteractions&&a.config.delegatePlayerInteractions.playbackRateChangeCallbackFn&&a.config.delegatePlayerInteractions.playbackRateChangeCallbackFn(e,e.$media[0],e.currentPlaybackRate)}))},getPlaybackRate:function(){var t=a.config.currentPlaybackRate;return _.isUndefined(t)&&(t=this.currentPlaybackRate),t=_.isUndefined(t)?1:t},_mediaPlaybackRateChangeCallback:function(t,e){this._mediaPlaybackRateChangeCallbackFn=t,this._mediaPlaybackRateChangeCallbackContext=e},_mediaControlAction:function(t,e){return"playbackRate"===t?(this.popoverPlaybackRate(e),!0):!!r._mediaControlAction.apply(this,arguments)}}),a.UIMoviePlayer=t}),define("toast/views/UIYoutubePlayer",["require","module","../core","./UIView","../utils"],function(t,e,i,n){"use strict";i.Strings;var o=new $.Deferred;var s=n.prototype,n=n.extend();return _.extend(n.prototype,s,{style:{},__player__:null,initialize:function(t){s.initialize.call(this,t)},render:function(){return s.render.call(this),i._.forHTMLPublishing||!0!==o.ok&&$.getScript("https://www.youtube.com/iframe_api").done(function(t,e){var i=setInterval(function(){"function"==typeof YT.Player&&(clearInterval(i),o.ok=!0,o.resolve())},10)}),this},mount:function(){this.$playerEl=this.$el.find(".youtube-player-container"),this.$playerEl.length||(this.$playerEl=$("<div />",{id:"ypc-"+this.model.id,class:"youtube-player-container"}),this.$el.append(this.$playerEl))},appear:function(){s.appear.call(this),i.showLoading(!0,{el:this.$el}),this._createPlayer(),this.$el.show()},disappear:function(){s.disappear.call(this),this._destroyPlayer(),i.showLoading(!1,{el:this.$el}),this.$el.hide()},remove:function(){this._destroyPlayer(),s.remove.call(this)},_onPlayerReady:function(t){i.showLoading(!1,{el:this.$el}),(this.__player__.readyok=!0)===this.__doDestroy__?(this._destroyPlayer(),this.__doDestroy__=!1):this.viewController.current()&&!0===this.model.properties.autoplay&&t.target.playVideo()},_onPlayerStateChange:function(t){t.data===YT.PlayerState.ENDED&&t.target.cueVideoById(t.target.getVideoData().video_id)},_play:function(){_.isNull(this.__player__)||this.__player__.playVideo()},_stop:function(){_.isNull(this.__player__)||this.__player__.stopVideo()},_pause:function(){_.isNull(this.__player__)||this.__player__.pauseVideo()},_createPlayer:function(){var t;!0!==this.__createPlayer__&&(this.__createPlayer__=!0,t=this,o.promise().done(function(){t.__player__=new YT.Player(t.$playerEl.attr("id"),{height:t.$playerEl.height(),width:t.$playerEl.width(),videoId:t._getVideoId(),events:{onReady:$.proxy(t._onPlayerReady,t),onStateChange:$.proxy(t._onPlayerStateChange,t)}})}),!0===o.ok)&&o.resolve()},_getVideoId:function(){var t,e,i,n=this.model.properties.url;return _.isEmpty(n)?"":(-1!=n.indexOf("iframe")&&(e=new RegExp(/src=(["'])(.*?)\1/),2<(e=n.match(e)).length)&&-1!==(i=e[2].split("/")).length&&(t=i[i.length-1]),-1!==(i=n.split("/")).length&&(t=i[i.length-1]),_.isEmpty(t)?"":-1!==(i=t.split("?")).length?i[0]:t)},_destroyPlayer:function(){_.isNull(this.__player__)||!0!==this.__player__.readyok?_.isNull(this.__player__)||(this.__doDestroy__=!0):(this.__player__.destroy(),this.__player__=null,this.__createPlayer__=!1,this.__doDestroy__=!1)}}),i.UIYoutubePlayer=n}),define("toast/views/UIImageSlide",["../core","../utils/StringUtils","./UIView","../actions"],function(a,t,e,i){"use strict";a.Strings;var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{initialize:function(t){n.initialize.call(this,t)},render:function(){return n.render.call(this),this.$parent.show(),!0!==this.model.properties.visible&&this.$parent.css("opacity",0),this},commonRender:function(){this.style=_.extend({},n.style,this.style),_.isUndefined(this.model.properties.backgroundColor)||(this.style.backgroundColor=this.model.properties.backgroundColor),n.commonRender.call(this)},mount:function(){var i,t,e,n,o,s=this.model.properties.assets;_.isUndefined(s)||0==s.length||(!0===(i=this).model.properties.popupImage&&_.isUndefined(this.__action__)&&(this.$el.css("cursor","pointer"),this.__action__=TT.Action.create(this,{name:"PopupImage",properties:{title:"",zoomable:!0,maxZoomRatio:100,thumbnail:!1,assets:this.model.properties.assets}}),this.$el.on("click",function(t){a.IS_DRAGGING||a.IS_PANNING||i.__action__.execute()})),e=this.$el.css("borderTopWidth"),t=this.$el.css("borderBottomWidth"),e=parseFloat(e),t=parseFloat(t),e=((e=isNaN(e)?0:e)+(t=isNaN(t)?0:t)).toFixed(1),n=this.$el.parent().height()-e,(o=this.$el.find("ul")).length||(o=$("<ul />"),_.each(s,function(t){o.append('<li><img src="'+a.ImageAssets.url(t)+'"height="'+n+'" style="max-width: '+this.$el.parent().width()+'px"></li>')},this),this.$el.append(o)),a._.forHTMLPublishing)||(this.$slider=o.lightSlider({mode:this.model.properties.transition,adaptiveHeight:!0,item:1,slideMargin:0,thumbMargin:0,galleryMargin:0,onSliderLoad:function(t){a.lazy(function(){i.$slider.refresh(),!0!==i.model.properties.visible&&(i.$parent.hide(),i.$parent.css("opacity",1))},500);Math.abs(i.$el.parent().width()/8),Math.min(30,Math.abs(i.$el.parent().width()/8));i.$prev=i.$el.find(".lSPrev"),i.$next=i.$el.find(".lSNext"),i.$prev.css({backgroundColor:i.model.properties.buttonBgColor,color:i.model.properties.buttonColor}),i.$next.css({backgroundColor:i.model.properties.buttonBgColor,color:i.model.properties.buttonColor}),i.updateNavigationButtonSize(),i.$prev.on("click",$.proxy(i._preventDoubleTapDefault,i)),i.$next.on("click",$.proxy(i._preventDoubleTapDefault,i))},onBeforeSlide:function(t,e){},onAfterSlide:function(t,e){i.__action__.options.start=e,i.__isImageSlideDown__&&(i.__isImageSlideDown__=!1,i.$slider.isDisableDrag()&&i.$slider.disableDrag(!1),a.IS_DRAGGING=!1)}}),this.$el.on(a.__eventTypes__.start,function(t){a.IS_ZOOM||t.stopPropagation(),i.__isImageSlideDown__=!0,i.__startPageX=t.pageX,i.__startPageY=t.pageY}),this.$el.on(a.__eventTypes__.move,function(t){i.__isImageSlideDown__&&!a.IS_DRAGGING&&(i.__slideTimeout__&&i.__slideTimeout__.id&&clearTimeout(i.__slideTimeout__.id),a.IS_DRAGGING=!0),a.IS_ZOOM&&(a.IS_ZOOM_DRAG_MODE?i.$slider.isDisableDrag()||i.$slider.disableDrag(!0):i.$slider.isDisableDrag()&&i.$slider.disableDrag(!1))}),this.$el.on(a.__eventTypes__.end,function(t){i.__isImageSlideDown__=!1,i.__slideTimeout__||(i.__slideTimeout__={});var e=t.pageX,t=t.pageY;5<Math.distance(i.__startPageX,i.__startPageY,e,t)?a.lazyOnce(function(){a.IS_DRAGGING=!1},50,i.__slideTimeout__):a.IS_DRAGGING=!1,i.$slider.isDisableDrag()&&i.$slider.disableDrag(!1)}))},willAppear:function(){n.willAppear.call(this);var t=!1;this.$parent.is(":visible")||(this.$parent.show(),!0!==this.model.properties.visible&&(t=!0,this.$parent.css("opacity",0))),!0===t&&(this.$parent.hide(),this.$parent.css("opacity",1)),this.$slider&&a.lazy(function(){this.$slider.refresh()},100,this)},scaleDidChange:function(t){n.scaleDidChange.call(this,t),this.updateNavigationButtonSize()},updateSlideLayout:function(){this.$el.find("ul").height(this.$el.height()),this.$slider.refresh()},_preventDoubleTapDefault:function(t){a.IS_ZOOM_LOCKED=!0,this._refreshTimeout||(this._refreshTimeout={}),a.lazyOnce(function(){a.IS_ZOOM_LOCKED=!1},250,this._refreshTimeout)},updateNavigationButtonSize:function(){this.$prev=this.$el.find(".lSPrev");this.$prev.width(),this.viewController.contentScale,this.$prev.height(),this.viewController.contentScale;this.$prev.css("zoom",Math.max(Math.min(1.5,this.viewController.contentScale),1-this.viewController.contentScale+1)),this.$next=this.$el.find(".lSNext"),this.$next.css("zoom",Math.max(Math.min(1.5,this.viewController.contentScale),1-this.viewController.contentScale+1))},responsiveLayoutChanged:function(t){n.responsiveLayoutChanged.call(this,t);t=this.$el.find("ul");_.each(t.children(),function(t){$(t).find("img").height(this.$el.height())},this),this.updateSlideLayout()}}),a.UIImageSlide=e}),define("toast/views/UIIFrame",["../core","./UIView","../utils/IFrameInteraction","../utils/StringUtils"],function(i,t,e,n){"use strict";var o=i.Strings,s=t.prototype,t=t.extend();return _.extend(t.prototype,s,{initialize:function(t){s.initialize.call(this,t)},render:function(){return s.render.call(this),this.$el.css("backgroundColor","transparent"),this},mount:function(){var t,e;this._$frameEl=this.$el.find("iframe"),this._$frameEl.length||(this._$frameEl=$("<iframe />"),this._$frameEl.attr("allowTransparency",!0)),_.isUndefined(this.model.properties.htmlfolder)||_.isEmpty(this.model.properties.htmlfolder)?_.isUndefined(this.model.properties.url)||_.isEmpty(this.model.properties.url)?_.isUndefined(this.model.properties.relativePath)||_.isEmpty(this.model.properties.relativePath)?_.isUndefined(this.model.properties.html)||_.isEmpty(this.model.properties.html)||(e=i.HTMLAssets.url(this.model.properties.html),this._$frameEl.attr("src",e)):(t=this.model.properties.relativePath,e=n.replaceTemplate("{ASSETS_DIR}"+t).encodeFilePath(),this._$frameEl.attr("src",e)):("http:"!==(e=(e=this.model.properties.url).isTag()?e.url():e).protocol()&&"https"!==e.protocol()&&(e="http://"+this.model.properties.url),this._$frameEl.attr("src",e)):(t=i.FolderAssets.get(this.model.properties.htmlfolder),e=n.replaceTemplate(t.url+"/"+t.htmlFilename).encodeFilePath(),this._$frameEl.attr("src",e)),!0===this.model.properties.scrollbarHidden?this._$frameEl.attr("scrolling","no"):i.isMobileDevice&&this.$el.css({overflow:"auto","-webkit-overflow-scrolling":"touch"}),i._.forHTMLPublishing?this.$el.append(this._$frameEl):(this._$iframeOverlay=$("<div />",{class:"toast-iframe-overlay"}),this.$parent.append(this._$iframeOverlay),this._$iframeOverlay.on("click",$.proxy(this._overlayClickHandler,this))),this._frameDidLoadedFn=$.proxy(this._frameDidLoaded,this),i.Book.isFirstPage()&&!i.__initFirstPageFrameOnce__&&(i.__initialFirstPagLoadFrame__=!0,this._loadPage(!0))},willReMountAll:function(){this._iframeInteraction&&this._iframeInteraction.willReMountAll()},remountAll:function(t){this._iframeInteraction&&this._iframeInteraction.remountAll()},appear:function(){s.appear.call(this),i.__initialFirstPagLoadFrame__||this._loadPage(!0),i.lazy(function(){var t=i.urlParams.get("preview");(t=t&&t.trim().toLowerCase())&&"true"==t&&(i.__iframePreviewAlert__||alert(o.ERROR_PREVIEW_IFRAME),i.__iframePreviewAlert__=!0)},100)},disappear:function(){s.disappear.call(this),this._loadPage(!1),i.__initialFirstPagLoadFrame__=!1},didUpdateLayout:function(){s.didUpdateLayout.call(this),this._iframeInteraction&&this._iframeInteraction.didUpdateLayout()},_loadPage:function(t){this._isFrameDidLoaded&&(this._saveFrameScrollPosition(),this._unsetFrameInteraction()),t?(this._$frameEl.on("load",this._frameDidLoadedFn),0===this.$el.find("iframe").length&&(i.showLoading(!0,{el:this.$el}),this.$el.append(this._$frameEl)),this.$parent.show()):(!0!==this.model.properties.scrollbarHidden&&this._$frameEl.off("mouseenter mouseleave"),this._$frameEl.off("load",this._frameDidLoadedFn),this._$frameEl.remove(),i.showLoading(!1,{el:this.$el}),this.$parent.hide(),this._isFrameDidLoaded=!1)},_frameDidLoaded:function(t){i.showLoading(!1,{el:this.$el});var e=i.urlParams.get("preview");(e=e&&e.trim().toLowerCase())&&"true"==e||(this._saveFrameScrollPosition(),this._setFrameInteraction())},_setFrameInteraction:function(){i.config.htmlRender||i.config.mobileOnly||!this._isSameDomain()&&(_.isUndefined(this.model.properties.htmlfolder)||_.isEmpty(this.model.properties.htmlfolder))&&(_.isUndefined(this.model.properties.html)||_.isEmpty(this.model.properties.html))||(this._iframeInteraction=new e({model:this.model,view:this,$frameEl:this._$frameEl}),this._iframeInteraction.scrollTop(this._scrollTop))},_saveFrameScrollPosition:function(){this._iframeInteraction&&(this._scrollTop=0,this._scrollTop=this._iframeInteraction._currentScrollTop,_.isUndefined(this._scrollTop))&&(this._scrollTop=this._iframeInteraction._currentMarginTop)},_unsetFrameInteraction:function(){this._iframeInteraction&&(this._iframeInteraction.destroy(),delete this._iframeInteraction)},_isSameDomain:function(){var t,e=this.model.properties.url;return!!e&&(t=i.PathUtils.parseUrl(document.location.href),"http:"!==(e=e.isTag()?e.url():e).protocol()&&"https"!==e.protocol()&&(e="http://"+this.model.properties.url),e=i.PathUtils.parseUrl(e),t.host===e.host)},_overlayClickHandler:function(t){i.$el.removeClass("flipping")},remove:function(){this._unsetFrameInteraction(),this._$frameEl&&this._$frameEl.remove(),s.remove.apply(this,arguments)}}),i.UIIFrame=t}),define("toast/views/UIFlash",["../core","./UIView","../utils/StringUtils"],function(i,t,e){"use strict";i.Strings;var n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{initialize:function(t){n.initialize.call(this,t)},_swfLoadEvent:function(e){var i=this;if(!e.success||!e.ref)return!1;var n=setInterval(function(){var t;void 0!==e.ref.PercentLoaded&&e.ref.PercentLoaded()&&(clearInterval(n),t=setInterval(function(){100===e.ref.PercentLoaded()&&(i._swfDidLoaded(),clearInterval(t))},5))},5)},_swfDidLoaded:function(){i.showLoading(!1,{el:this.$parent})},render:function(){return n.render.call(this),i.isMobileDevice||this.$el.css("backgroundColor","transparent"),this},mount:function(){var t,e;i.showLoading(!0,{el:this.$parent}),this.fid=this.model.get("id")+"-flash",this.$flash=this.$el.find("#"+this.fid),this.$flash.length||(this.$flash=$("<div />",{id:this.fid}),this.$el.append(this.$flash)),_.isUndefined(this.model.properties.asset)||_.isEmpty(this.model.properties.asset)?_.isUndefined(this.model.properties.url)||_.isEmpty(this.model.properties.url)||(t=this.model.properties.url,"http:"!==this.model.properties.url.protocol()&&"https"!==this.model.properties.url.protocol()&&(t="http://"+this.model.properties.url)):t=i.FlashAssets.url(this.model.properties.asset),t&&(i.isChrome&&(swfobject.ua.pv=[100,0,0]),e=this.$contentMount?null:$.proxy(this._swfLoadEvent,this),swfobject.embedSWF(t,this.fid,"100%","100%","10",!1,{},{wmode:"transparent",scale:"exactFit",allowScriptAccess:"always"},{},e),this.$contentMount)&&this.$contentMount.resolve()},willAppear:function(){n.willAppear.call(this),i.showLoading(!0,{el:this.$parent})},appear:function(){this.$el.show(),i.showLoading(!1,{el:this.$parent})},disappear:function(){n.willDisappear.call(this),this.$el.hide()}}),i.UIFlash=t}),define("toast/views/UIPartialZoom",["../core","./UIView"],function(a,t){"use strict";var e=t.prototype,t=t.extend();return _.extend(t.prototype,e,{className:"ui-partial-zoom",initialize:function(t){e.initialize.call(this,t),this.events=_.extend({},e.events,this.events),this.delegateEvents(this.events)},render:function(){return e.render.call(this),(_.isUndefined(this.model.properties.zoomScale)||_.isNull(this.model.properties.zoomScale))&&(this.model.properties.zoomScale=300),!_.isNumber(this.model.properties.zoomScale)&&_.isEmpty(this.model.properties.zoomScale)&&(this.model.properties.zoomScale=300),this.model.properties.zoomScale=this.model.properties.zoomScale/100,!1===this.model.properties.onClick&&this.$parent.css("pointer-events","none"),this},_context:function(){this.context||(this.context={});var t=window.innerWidth,e=window.innerHeight-30;this.context.bounds||(this.context.bounds={width:this.$parent[0].getBoundingClientRect().width,height:this.$parent[0].getBoundingClientRect().height});var i=this.context.bounds.width,n=this.context.bounds.height,o=this.model.get("width")*Number(this.model.properties.zoomScale),o=(this.model.get("height"),Number(this.model.properties.zoomScale),this.model.properties.fitWidth?t<o?i/t:i/o:Math.max(i/t,n/e));return this.context.modalSize={width:i/o,height:n/o},this.context.zoomScale=o,this.context},isZoomPossible:function(){return!this.$el.closest(".bookzoom").length},zoomOpen:function(){var t={name:"PopupPartialZoom",properties:{targets:[this.model.id],scaleMode:this.model.properties.fitWidth?"fitWidth":"showAll"}};(t=a.Action.create(this,t,{eventType:"click"})).execute()},zoomInitSize:function(){return this._context().modalSize},zoomEl:function(){var t=this.viewController.modal||this.viewController.parentView?(this.viewController.$$parent=this.viewController.$el.parent(),this.viewController.$el):a.$el.find('.toast-ctrl[data-index="'+this.viewController.index+'"]'),e=this._context(),e=(e.pageSize||(this.context.pageSize={width:t.width(),height:t.height()}),e.position||(this.context.position={top:parseInt(this.$el.parent().position().top),left:parseInt(this.$el.parent().position().left)}),$("<section />")),i=(e.css({position:"relative"}),t.clone());return i.addClass("clone-page"),t.before(i),e.append(t),this.viewController.parentView&&(this.viewController.scaleContent=!0),this._$pageEl=t,e},popupMount:function(){this.$parent.hide(),a.Book.enableAction(!1)},popupUpdateView:function(){var t,e,i,n,o,s;this._$pageEl&&(t=this._context(),e=this.zoomAction.$el,i=this.zoomAction.$modalBody,o=(n=this.zoomAction.$container).find("section"),window.innerWidth,s=window.innerHeight-30,i.css({marginLeft:-parseInt(t.modalSize.width/2),width:t.modalSize.width,height:t.modalSize.height}),o.css("width",this.context.pageSize.width/t.zoomScale+"px"),o.css("height",this.context.pageSize.height/t.zoomScale+"px"),n.css("top",-(this.context.position.top/t.zoomScale)+"px"),n.css("left",-(this.context.position.left/t.zoomScale)+"px"),a.Book.fitPage(this.viewController),t.modalSize.height+60>s?e.addClass("scroll-acitivated"):e.removeClass("scroll-acitivated"))},popupBeforeDestroy:function(){var t=this.zoomAction.$modal.find(".popup-container").children().children(),e=this.viewController.modal||this.viewController.parentView?this.viewController.$$parent.find(".clone-page"):a.$el.find('.toast-ctrl[data-index="'+this.viewController.index+'"]');e.before(t),a.Book.fitPage(this.viewController),e.remove(),this.$parent.show(),a.Book.enableAction(!0),delete this.context,delete this.zoomAction},popupDestroy:function(){},handleClick:function(t){a.isEditor||!1!==this.model.properties.onClick&&this.zoomOpen()},events:{click:"handleClick"}}),a.UIPartialZoom=t}),define("toast/views/UIShape",["../core","./UIView","./UIText"],function(t,e,i){"use strict";var n=e.prototype,o=i.prototype,e=i.extend();return _.extend(e.prototype,o,{initialize:function(t){o.initialize.call(this,t)},commonRender:function(){this.style=_.extend({},this.style,this.model.get("style")),o.commonRender.call(this)},beforeAutofit:function(t){n.beforeAutofit.call(this,t)},afterAutofit:function(t){n.afterAutofit.call(this,t)},autoFit:function(t){return!1}}),t.UIShape=e}),define("toast/views/UILine",["../core","./UIView"],function(t,e){"use strict";t.Strings;var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{style:{},initialize:function(t){i.initialize.call(this,t)},render:function(){return i.render.call(this),"bias"===this.model.direction||"horizon"===this.model.direction?this.$parent.css("height",0):"vertical"===this.model.direction&&this.$parent.css("width",0),this._setLine(),this._renderDrawLine(),this},willAppear:function(){i.willAppear.call(this),this._renderDrawLine()},_setLine:function(t){this.$parent.addClass(this.model.direction),t||"bias"===this.model.direction||"horizon"===this.model.direction?this.$el.css("height",0):"vertical"===this.model.direction&&this.$el.css("width",0),"solid"===this.model.properties.style&&this.model.properties.round?this.$el.css("borderRadius",this.model.properties.width):this.$el.css("borderRadius",""),t||"bias"===this.model.direction||"horizon"===this.model.direction?this.$el.css("borderTop",this.model.properties.width+"px "+this.model.properties.style+" "+this.model.properties.color):this.$el.css("borderLeft",this.model.properties.width+"px "+this.model.properties.style+" "+this.model.properties.color)},_renderDrawBiasLine:function(){var t=this.model.start,e=this.model.end,i=(__app__?this.viewController.viewScale():this.viewController.contentScale,[t.x,t.y]),n=Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2)),e=Math.atan2(e.y-t.y,e.x-t.x),t=this.model.properties.width;this.$el.css({left:i[0],top:i[1]-t/2,width:n,transform:"rotate("+e+"rad)",transformOrigin:"0 50% 0px"})},_drawHorizonLine:function(){this.$el.css("top",-this.model.properties.width/2)},_drawVerticalLine:function(){this.$el.css("left",this.model.properties.width/2)},_renderDrawLine:function(){"bias"===this.model.direction?this._renderDrawBiasLine():"horizon"===this.model.direction?this._drawHorizonLine():"vertical"===this.model.direction&&this._drawVerticalLine()}}),t.UILine=e}),define("toast/views/UITextInput",["../core","./UIView"],function(e,t){"use strict";var i=t.prototype,t=t.extend();return _.extend(t.prototype,i,{tagName:"input",className:"form-control",style:{color:"#999",fontSize:"20px",fontFamily:"Nanum Gothic",padding:"10px"},attributes:{type:"text"},initialize:function(t){i.initialize.call(this,t)},render:function(){i.render.call(this),this.__storageId=e.project.config.publishUniqueId+"-"+this.$parent.attr("id");var t=e.data.get(this.__storageId);return _.isNull(t)||_.isEmpty(t)?this._setVal():this.$el.val(t),this},commonRender:function(){this.style=_.extend({},i.style,this.style),_.isUndefined(this.model.properties.padding)?this.model.properties.padding=parseInt(this.style.padding):this.style.padding=this.model.properties.padding+"px",i.commonRender.call(this)},_setVal:function(){_.isUndefined(this.model.properties.placeholder)||_.isEmpty(this.model.properties.placeholder)||this.$el.val(this.model.properties.placeholder)},_onFocus:function(){var t=e.data.get(this.__storageId);(_.isNull(t)||_.isEmpty(t))&&this.$el.val("")},_onFocusOut:function(){_.isEmpty(this.$el.val())&&this._setVal()},_onChange:function(t){e.data.set(this.__storageId,this.$el.val())},events:{focus:"_onFocus",focusout:"_onFocusOut",change:"_onChange"}}),e.UITextInput=t}),define("toast/views/UITextInputBox",["../core","./UITextInput"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{tagName:"textarea",style:{color:"#999",fontSize:"28px",padding:"10px"},initialize:function(t){i.initialize.call(this,t)},commonRender:function(){this.style=_.extend({},i.style,this.style),i.commonRender.call(this)}}),t.UITextInputBox=e}),define("toast/views/UIOvenVideo",["../core","./UIView","../utils/IFrameInteraction","../utils/StringUtils"],function(i,t,e,n){"use strict";var o=i.Strings,s=t.prototype,t=t.extend();return _.extend(t.prototype,s,{initialize:function(t){s.initialize.call(this,t)},render:function(){return s.render.call(this),this.$el.css("backgroundColor","transparent"),this},mount:function(){var t,e;this._$frameEl=this.$el.find("iframe"),this._$frameEl.length||(this._$frameEl=$("<iframe />"),this._$frameEl.attr("allowTransparency",!0),this._$frameEl.attr("allowFullScreen",!0),this._$frameEl.attr("allow","accelerometer; autoplay; fullscreen")),_.isUndefined(this.model.properties.embed_url)||_.isEmpty(this.model.properties.embed_url)||(e=(t="http:"!==(t=(t=this.model.properties.embed_url).isTag()?t.url():t).protocol()&&"https"!==t.protocol()?"http://"+this.model.properties.embed_url:t).indexOf("://"),t=window.location.protocol+t.substring(e+1),e=[],this.model.properties.autoplay&&e.push("autoPlay=true"),this.model.properties.disableMediaSeeking&&e.push("disableSeek=true"),e.length&&(e=e.join("&")),this._$frameEl.attr("src",t+="?"+e),i.config.progressPageControl&&i.contentStorage&&((e=i.contentStorage.findWhere({id:this.model.id}))||(e={id:this.model.id,pageID:this.viewController.collection.id,progressPageControl:!0,ended:!1,alert:o.ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES},i.contentStorage.addItem(e)),this._storageItem=e),this._onMessageFn=$.proxy(this._onMessage,this),$(window).on("message",this._onMessageFn)),!0===this.model.properties.scrollbarHidden?this._$frameEl.attr("scrolling","no"):i.isMobileDevice&&this.$el.css({overflow:"auto","-webkit-overflow-scrolling":"touch"}),i._.forHTMLPublishing?this.$el.append(this._$frameEl):(this._$iframeOverlay=$("<div />",{class:"toast-iframe-overlay"}),this.$parent.append(this._$iframeOverlay),this._$iframeOverlay.on("click",$.proxy(this._overlayClickHandler,this))),this._frameDidLoadedFn=$.proxy(this._frameDidLoaded,this)},willReMountAll:function(){},remountAll:function(t){},appear:function(){s.appear.call(this),i.__initialFirstPagLoadFrame__||this._loadPage(!0)},disappear:function(){s.disappear.call(this),this._loadPage(!1),i.__initialFirstPagLoadFrame__=!1},didUpdateLayout:function(){s.didUpdateLayout.call(this)},_loadPage:function(t){t?(this._$frameEl.on("load",this._frameDidLoadedFn),0===this.$el.find("iframe").length&&(i.showLoading(!0,{el:this.$el}),this.$el.append(this._$frameEl)),this.$parent.show()):(!0!==this.model.properties.scrollbarHidden&&this._$frameEl.off("mouseenter mouseleave"),this._$frameEl.off("load",this._frameDidLoadedFn),this._$frameEl.remove(),i.showLoading(!1,{el:this.$el}),this.$parent.hide())},_frameDidLoaded:function(t){i.showLoading(!1,{el:this.$el})},_overlayClickHandler:function(t){i.$el.removeClass("flipping")},_onMessage:function(t){"endOfStream"===(t=t.originalEvent||t).data.command&&i.config.progressPageControl&&i.contentStorage&&(t=i.contentStorage.findWhere({id:this.model.id}))&&(t.set("progressPageControl",!1),i.contentStorage.updateItem(t))},remove:function(){$(window).off("message",this._onMessageFn),this._$frameEl&&this._$frameEl.remove(),s.remove.apply(this,arguments)}}),i.UIOvenVideo=t}),define("toast/views",["./core","./views/UIViewPrivate","./views/UIViewActionAndAnimation","./views/UIViewDragAndDrop","./views/UIViewCollisionDetector","./views/UIGroup","./views/UIText","./views/UIImageButton","./views/UIButton","./views/UIImage","./views/UILink","./views/UIIcon","./views/UITable","./views/UIAudioPlayer","./views/UIMoviePlayer","./views/UIYoutubePlayer","./views/UIImageSlide","./views/UIIFrame","./views/UIFlash","./views/UIPartialZoom","./views/UIShape","./views/UILine","./views/UITextInput","./views/UITextInputBox","./views/UIOvenVideo"],function(t){}),define("toast/core/Factory",["../core","../views"],function(Toast){"use strict";var Factory={create:function(viewController,model,$parent){var htmlRender=viewController.htmlRender&&$parent.children().first().length,el=htmlRender?$parent.children().first():null,View=eval("Toast.UI"+model.get("viewType")),viewInstance=new View({viewController:viewController,model:model,el:el,$parent:$parent}),doRender;return __app__&&!Toast._.forHTMLPublishing?viewInstance.__render__():(doRender=!0,viewInstance.render()),el||$parent.append(viewInstance.el),doRender?viewInstance.mount():viewInstance.__mount__(),viewInstance},has:function(viewType){var Factory=eval("Toast.UI"+viewType);return"function"!=typeof Factory?!1:!0}};return Toast.Factory=Factory}),define("toast/core/ViewController",["../core","./Model","./Contents","./Factory"],function(T,e,i,n){"use strict";function o(){return{id:"page-b16aea9c-d10f",title:"untitled",label:"",width:595,height:845,background:{url:"",width:0,height:0,color:"#fff"},thumbnail:{width:70,height:100,src:""},config:{},properties:{},_doc:{},actions:[],contents:[],subpages:[]}}function s(){return{id:"to-"+TT.UUID6(),label:"",viewType:"View",__parent__:null,__children__:[],__extra__:{},left:0,top:0,width:100,height:100,rotate:0,properties:{},style:{},actions:[],animations:[],responsives:[],initState:null,states:[],selected:!1,fitWidth:!1,locked:!1,hidden:!1,draggable:!0,copyable:!0,removable:!0,droppable:!0,isModified:!1}}var a=["viewSelector"],t=Backbone.View.extend({collection:null,viewSelector:".toast-object",promises:[],xhrs:[],backgroundImages:[],contentScale:1,cache:{},initialize:function(t){t=t||{},_.bindAll(this,"_responsiveLayoutDidUpdate"),_.extend(this,_.pick(t,a)),this.viewClassName=this.viewSelector.replace(/\./g,""),this.collection=new i(null,{attributes:o(),model:e.extend({defaults:s})}),(this.collection.view=this)._state=T.STATUS_NONE,this._$ready=new $.Deferred},viewScale:function(){var t=this.$el.css("-webkit-transform")||this.$el.css("-moz-transform")||this.$el.css("-ms-transform")||this.$el.css("-o-transform")||"";return(t=t.match("matrix\\((.*)\\)"))?(t=t[1].split(","),parseFloat(t[0])):1},_createView:function(t){var e;return void 0!==t.__attributes__?(this.updateBackground(),!1):!!n.has(t.viewType)&&!t.__parent__&&((e=this.htmlRender?this.$el.find("#"+t.get("id")):e)&&e.length?e.css(t.rect()):(this.$el.find("#"+t.get("id")).remove(),e=this._createModelElement(t),this.$contents.append(e)),t.view=n.create(this,t,e),!0)},_createModelElement:function(t){return $("<div />",{class:this.viewClassName}).attr("id",t.get("id")).css({left:t.get("left"),top:t.get("top"),width:t.get("width"),height:t.get("height")})},_removeModelElement:function(t){this.$el.find("#"+t.get("id")).remove()},find:function(i,n,o){arguments.length<3&&(o=!1);var s=null;return _.find(this.collection.models,function(t){if(!t.__attributes__&&t.get(i)==n)return s=t,!0;if(o&&!t.__attributes__){var e=[];if(t.hasChildren()?this.findChildren(e,t.__children__,i,n):t.container&&!_.isEmpty(t.contents)&&t.view?t.view.containerView&&this.findChildren(e,t.view.containerView.collection.models,i,n):t.multilayerContainer&&!_.isEmpty(t.contents)&&t.view&&_.each(t.view.layers,function(t){this.findChildren(e,t.containerView.collection.models,i,n)},this),0<e.length)return s=e[0],!0}},this),s},finds:function(e,i,n){var o=[];return arguments.length<3&&(n=!0),this.collection.each(function(t){if(t.__attributes__)return!0;t.get(e)==i&&o.push(t),n&&(t.hasChildren()?this.findChildren(o,t.__children__,e,i):t.container&&!_.isEmpty(t.contents)&&t.view?t.view.containerView&&this.findChildren(o,t.view.containerView.collection.models,e,i):t.multilayerContainer&&!_.isEmpty(t.contents)&&t.view&&_.each(t.view.layers,function(t){this.findChildren(o,t.containerView.collection.models,e,i)},this))},this),o},_find:function(t){var e=_.find(this.findAll(),t);return e=!e&&this.parentViewController?this.parentViewController._find(t):e},_deepFind:function(t){var e=_.find(this.findAll(),t);return e=(e=!e&&this.parentViewController?this.parentViewController._find(t):e)||(e=T.api.find(t))&&e.model},findAll:function(){var e=[];return _.each(this.collection.models,function(t){if(t.__attributes__)return!0;e.push(t),t.hasChildren()?this.findChildren(e,t.__children__):t.container&&!_.isEmpty(t.contents)&&t.view?t.view.containerView&&this.findChildren(e,t.view.containerView.collection.models):t.multilayerContainer&&!_.isEmpty(t.contents)&&t.view&&_.each(t.view.layers,function(t){t.containerView&&this.findChildren(e,t.containerView.collection.models)},this)},this),e},findChildren:function(e,t,i,n){_.each(t,function(t){if(t.__attributes__)return!0;i&&t.get(i)!=n||e.push(t),t.hasChildren()?this.findChildren(e,t.__children__,i,n):t.container&&!_.isEmpty(t.contents)&&t.view?t.view.containerView&&this.findChildren(e,t.view.containerView.collection.models,i,n):t.multilayerContainer&&!_.isEmpty(t.contents)&&t.view&&_.each(t.view.layers,function(t){t.containerView&&this.findChildren(e,t.containerView.collection.models,i,n)},this)},this)},findProperty:function(t,o){var e=[];_.isUndefined(t.properties)||e.push(t.properties),_.each(t.actions,function(t){e.push(t.properties)}),_.each(e,function(e){_.each(Object.keys(e),function(i){var t,n=e[i];if(_.isEmpty(n))return!0;_.isArray(n)?_.each(n,function(t,e){t=o(t,i);_.isUndefined(t)||(n[e]=t)}):(t=o(n,i),_.isUndefined(t)||(e[i]=t))})})},findSubpage:function(t){return _.find(this.collection.subpages.models,{id:t})},updateBackground:function(t){var e,i,n,o=this._model,s=((t=t||{}).width&&(o.width=t.width),t.height&&(o.height=t.height),{width:o.width,height:o.height,backgroundColor:o.background.color});return _.isEmpty(this._model.style)||(s=_.extend(s,this._model.style)),this.$el.css(s),(!this.collection.container||!_.isEmpty(o.background))&&(this._removeBackground(),this.updateBackgroundAttributes(),!_.isEmpty(o.background.url)||o._doc&&!_.isEmpty(o._doc.url))?((s=(e=new $.Deferred).promise()).$defer=e,this.promises.push(s),i=_tt.StringUtils.replaceTemplate(o.background.url,"ASSETS_DIR",tt.paths.assets),T._.forHTMLPublishing||(i=i.encodeFilePath()),o._doc&&"svg"===o._doc.type&&!_.isEmpty(o._doc.url)&&(n=_tt.StringUtils.replaceTemplate(o._doc.url,"ASSETS_DIR",tt.paths.assets),T._.forHTMLPublishing||(n=n.encodeFilePath())),this._loadBackground(i,n,o.width,o.height,t.refresh).always(function(){e.resolve()}),s):(new $.Deferred).resolve().promise()},getBackgroundSize:function(){var t,e,i=this._model;return i.properties.customBgSize?(t="100%",_.isUndefined(i.properties.backgroundWidth)||(t=i.properties.backgroundWidth,isNaN(t))||(t+="px"),e="auto",_.isUndefined(i.properties.backgroundHeight)||(e=i.properties.backgroundHeight,isNaN(e))||(e+="px"),t+" "+e):_.isUndefined(i.background.size)?"cover":i.background.size},getBackgroundPosition:function(){var t=this._model.background;return _.isUndefined(t.position)?"50% 50%":t.position},getBackgroundRepeat:function(){var t=this._model.background;return _.isUndefined(t.repeat)?"no-repeat":t.repeat},getBackgroundAttributes:function(){return{backgroundSize:this.getBackgroundSize(),backgroundPosition:this.getBackgroundPosition(),backgroundRepeat:this.getBackgroundRepeat()}},updateBackgroundAttributes:function(){this.$el.css(this.getBackgroundAttributes())},_loadBackground:function(i,n,t,e,o){var s,a,r=new $.Deferred,t=(t=t||this._model.width,e=e||this._model.height,(new Date).getTime());return o&&(i+="?timestamp="+t,_.isEmpty(n)||(n+="?timestamp="+t)),(T._.forHTMLPublishing?(e=$("<img />",{class:"background",src:i,border:0}),this.$el.prepend(e),r.resolve()):(s=this,(a=new Image).onload=function(){var t,e;s.$el.css("backgroundRepeat","no-repeat"),_.isEmpty(n)?(s.collection.container||s.collection.multilayerContainer?s.$el.css("backgroundImage",'url("'+i+'")'):(t=$("<img />",{class:"background",src:i,border:0}),!0===T.config.brokenPageCorrection?t.css({width:"100.2%",height:"100.2%"}):t.css({width:"100%",height:"100%"}),t.mousedown(function(t){t.preventDefault()}),s.$el.prepend(t)),r.resolve()):((e=new Image).onload=function(){var t;s.print?t=$("<img />",{class:"background",src:e.src,border:0}):(s.$el.css("backgroundImage",'url("'+a.src+'")'),t=$("<img />",{class:"background svg-background","data-url":e.src,width:"100%",height:"100%",border:0}),T._msieVersion<10&&T.Book._isFlipTransition?t[0].src=e.src:(t[0].src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t.css("backgroundSize","100% 100%"),t.css("backgroundRepeat","no-repeat"),t.css("backgroundPosition","50% 50%"),t.css("backgroundImage",'url("'+e.src+'")')),!0===T.config.brokenPageCorrection?s.$el.css("backgroundSize","100.4% 100.4%"):s.$el.css("backgroundSize","100% 100%"),t.mousedown(function(t){t.preventDefault()})),s.$el.prepend(t),s.print&&(t=$("<img />",{class:"background",src:a.src,border:0}),!0===T.config.brokenPageCorrection?t.css({width:"100.4%",height:"100.4%"}):t.css({width:"100%",height:"100%"}),s.$el.prepend(t)),r.resolve()},e.onerror=function(){r.resolve()},s.backgroundImages.push(e),e.src=n)},a.onerror=function(){r.resolve()},s.backgroundImages.push(a),a.src=i,r)).promise()},_removeBackground:function(){_.each(this.backgroundImages,function(t){t.src=""}),this.backgroundImages=[],this.$el.children(".background").remove(),this.$el.css("backgroundImage",""),this.$el.css("backgroundSize",""),this.$el.css("backgroundRepeat",""),this.$el.css("backgroundPosition","")},_hasBackgroundImage:function(){var t;return!!this.$el.first().hasClass("background")||(t=this.$el.css("backgroundImage"),!_.isUndefined(t)&&!_.isEmpty(t)&&"none"!==t)},state:function(){return this._state},load:function(t,e){var i;e=e||{},e=_.extend({htmlRender:!1,showLoader:!1,readyonly:!1},e),!0===T.config.disablingContentLoadingBar&&(e.showLoader=!1),_.extend(this,e),this.htmlRender||this.reset(),this._state=T.STATUS_LOADING,this.cache={},this.htmlRender||!0!==e.showLoader||T.showLoading(!0,{modal:!1,el:this.$el.parent()}),this.collection.load(t,{silent:!0}),this.collection._orgWidth=this.collection.width,e.readyonly&&(this.$contents=this.$el.find(".contents"),this.$contents.length||(this.$contents=$("<div />",{class:"contents"}),this.$el.append(this.$contents))),_.each(this.collection.models,function(t){this._createView(t)},this),__app__||(_.each(this.collection.models,function(t){!t.__attributes__&&t.view&&(t.view.mountAll(this),this.__setChangeState__(t.view.actions.changeState,t,"actions"),this.__setChangeState__(t.view.animations.changeState,t,"animations"))},this),_.each(this.collection.models,function(t){!t.__attributes__&&t.view&&t.initState&&t.view.state(t.initState)},this)),_.isEmpty(this.promises)?(T.showLoading(!1,{el:this.$el.parent()}),this._state=T.STATUS_LOADED,this._$ready.resolve()):T.Async.waitForAll((i=this).promises).then(function(){i._state===T.STATUS_LOADING&&(T.showLoading(!1,{el:i.$el.parent()}),i.promises=[],i._state=T.STATUS_LOADED,i._$ready.resolve())}),T.viewLayout({collection:this.collection})},bounds:function(){var e={left:0,top:0,width:this.collection.width,height:this.collection.height};return _.each(this.collection.models,function(t){if(t.__attributes__)return!0;t={left:t.get("left"),top:t.get("top"),width:t.get("left")+t.get("width"),height:t.get("top")+t.get("height")};e.left=Math.min(t.left,e.left),e.top=Math.min(t.top,e.top),e.width=Math.max(t.width,e.width),e.height=Math.max(t.height,e.height)},this),e},__setChangeState__:function(t,o,s){var a="actions"!==s;_.each(t,function(e){var i=(a?e.model._:e).properties,t=(t=i.stateTargets)||[o.id],n=[];_.each(t,function(t){var e=this._find({id:t});(e=!e&&this.parentViewController?this.parentViewController._find({id:t}):e)?n.push(e):(e=T.api.find({id:t}))&&n.push(e.model)},this),_.each(n,function(t){t.__changeState__||(t.__changeState__={}),t.__changeState__[s]||(t.__changeState__[s]=[]),t.__changeState__[s].push({states:i.states,condition:i.condition,instance:e,models:n})},this)},this)},ready:function(t,e){switch(this._$ready.promise().state()){case"resolved":void 0===e?t():t.call(e);break;case"pending":void 0===e?this._$ready.promise().done(t):this._$ready.promise().done(t.bind(e))}},topParentViewController:function(){var t=this.parentViewController;if(!t)return this;for(;;){if(!t.parentViewController)break;t=t.parentViewController}return t},willAppear:function(){this.viewVisibilityChange(T.Events.SHOW_PAGE)},appear:function(){this.viewVisibilityChange(T.Events.SHOWN_PAGE)},willDisappear:function(){this.viewVisibilityChange(T.Events.HIDE_PAGE)},disappear:function(){this.viewVisibilityChange(T.Events.HIDDEN_PAGE)},viewVisibilityChange:function(e){_.each(this.collection.models,function(t){if(t.view&&!t.__attributes__)switch(e){case T.Events.SHOW_PAGE:t.view.willAppear();break;case T.Events.SHOWN_PAGE:t.view.appear();break;case T.Events.HIDE_PAGE:t.view.willDisappear();break;case T.Events.HIDDEN_PAGE:t.view.disappear()}},this)},willReMountAll:function(){_.each(this.collection.models,function(t){t.view&&!t.__attributes__&&t.view.willReMountAll()})},remountAll:function(){_.each(this.collection.models,function(t){t.view&&!t.__attributes__&&t.view.remountAll()})},scaleDidChange:function(e){this.contentScale=e,_.each(this.collection.models,function(t){t.view&&!t.__attributes__&&t.view.scaleDidChange(e)},this)},current:function(t){if(!arguments.length)return!!T.config.htmlRender||this.$el.hasClass(T.CURRENT_PAGE);t?this.$el.addClass(T.CURRENT_PAGE):this.$el.removeClass(T.CURRENT_PAGE)},config:function(t){if(!arguments.length)return this.collection.config;this.collection.config=_.extend(this.collection.config,t)},sizeEl:function(t){if(!arguments.length)return{width:this.$el.width(),height:this.$el.height()};this.$el.css(t)},size:function(t,e){if(!arguments.length)return{width:this.collection.width,height:this.collection.height};(e=e||{modelUpdate:!0}).modelUpdate&&(this.collection.width=t.width,this.collection.height=t.height),this.$contents.css(t);var i,e=this.sizeEl(),n=Math.max(e.width/t.width,e.height/t.height);this.contentScale!==n&&(1===n?this.$contents.tt_transform(""):(i=(e.width-t.width)/2/n,e=(e.height-t.height)/2/n,this.$contents.tt_transform("scale("+n+") translate("+i+"px, "+e+"px)")),this.scaleDidChange(n))},layout:function(t){var e={width:this.collection.width,height:this.collection.height},i=Math.min(this.$el.parent().width()/e.width,this.$el.parent().height()/e.height),n=parseInt(e.width*i),i=parseInt(e.height*i);n+=n%2,Math.abs(this.$el.parent().width()-n)<=4&&(n=this.$el.parent().width()),i+=i%2,Math.abs(this.$el.parent().height()-i)<=4&&(i=this.$el.parent().height()),this.needLayout=0===n||0===i,this.sizeEl({width:n,height:i}),this.size(e,{modelUpdate:!1}),this.didUpdateLayout()},mlayout:function(){var t={width:this.collection.width,height:this.collection.height},e=this.$el.parent().width()/t.width,i=parseInt(t.width*e),e=parseInt(t.height*e);i+=i%2,Math.abs(this.$el.parent().width()-i)<=4&&(i=this.$el.parent().width()),e+=e%2,Math.abs(this.$el.parent().height()-e)<=4&&(e=this.$el.parent().height()),this.needLayout=0===i||0===e,this.sizeEl({width:i,height:e}),this.size(t,{modelUpdate:!1}),this.didUpdateLayout()},didUpdateLayout:function(t){_.each(this.collection.models,function(t){t.view&&!t.__attributes__&&t.view.didUpdateLayout()},this)},reset:function(){T.showLoading(!1,{el:this.$el.parent()}),_.each(this.xhrs,function(t){!_.isUndefined(t)&&_.isFunction(t.abort)&&t.abort()},this),this.xhrs=[],_.each(this.promises,function(t){!_.isUndefined(t.$defer)&&_.isFunction(t.$defer.reject)&&t.$defer.reject()},this),this.promises=[],this.contentScale=1,this._state=T.STATUS_NONE,this.cache={},this._removeBackground(),T.common.setActivePopupMenu(null);var t=this.findAll();_.each(t,function(t){!t.__attributes__&&t.view&&(t.view.remove(),delete t.view)},this),this.$contents&&this.$contents.children().remove(),this.$el.children().remove(),this._$ready=new $.Deferred,this.collection.reset()},output:function(t){var e=this.collection.attributes;return e.title=this._model.title,e.label=this._model.label,e.contents=this.collection.output(),e.contents.splice(0,1),t?JSON.stringify(e,null,2):e},toHTML:function(n){n=n||{};var y=new $.Deferred,w=this.$el.clone(),b=w.children(".contents"),S=(b.empty(),this);return T.Async.doSequentially(this.collection.models,function(t,e){var i=new $.Deferred;return!t.__attributes__&&t.view?t.view.toHTML(n).always(function(t){b.append(t),i.resolve()}):i.resolve(),i.promise()},!1).always(function(){if(T._.forNewsletter){var t,n,o,e=__app__.activeEditor.manager.getActivePageEditor(),i=S.parentView?(t=S.parentView).model:(t=S)._model,s=b.children(".column"),a=S.collection.properties.itemLayout;if(S.collection.block&&!s.length&&!S.collection.column)return v=$("<td />",{class:"block"}),p=$("<table />",{class:"block",cellspacing:0,cellpadding:0,border:0}),f=$("<tr />"),g=$("<td />"),n=$("<div />"),(c=b.children()).length,_.each(c,function(t,e){var t=$(t),i=S.collection.at(e+1);if("none"===a)return!0;(i.block||"block"===a||i.firstOfRow)&&(r=$("<table />",{cellspacing:0,cellpadding:0,border:0}),(l=$("<tr />")).css("borderSpacing",0),r.css("borderSpacing",0),r.css("width","auto"),r.append(l),n.append(r)),"inline"===a?0<e&&(i.firstOfRow||t.css("marginLeft",S.collection.properties.itemSpacing),i.firstOfRow?t.css("marginTop",S.collection.properties.itemSpacing):t.css("marginTop",o.css("marginTop"))):0<e&&r.css("marginTop",S.collection.properties.itemSpacing);i=$("<td />");i.css("vertical-align","top"),i.append(t),l.append(i),o=t}),g.append(n),f.append(g),n.css("display","block"),n.css("padding",0),g.css("paddingTop",S.collection.properties.paddingTop),g.css("paddingRight",S.collection.properties.paddingRight),g.css("paddingBottom",S.collection.properties.paddingBottom),g.css("paddingLeft",S.collection.properties.paddingLeft),f.css("borderSpacing",0),f.attr("align",S.collection.properties.itemAlign),p.css("width",S._model.width),S.collection.properties.sizeByUser&&e.collection.id!==S.collection.id&&(p.removeClass("container"),p.css("marginLeft",S._model.left)),_.isEmpty(S._model.style)||p.css(S._model.style),v.css("vertical-align","top"),p.css("backgroundColor",S.$el.css("backgroundColor")),m=i.background,_.isEmpty(m)||_.isEmpty(m.url)||(u=_tt.StringUtils.replaceTemplate(m.url,"ASSETS_DIR",tt.paths.assets),p.css("backgroundImage",'url("'+u+'")'),p.css(t.getBackgroundAttributes())),t.collection.isEmpty()&&p.css("height",t.collection.height),p.append(f),(h=i.actions?_.find(i.actions,{name:"LinkUrl"}):h)&&h.properties.url?(d=$("<a />"),u=h.properties.url,d.attr("href",u),h.properties.openWindow&&d.attr("target","_blank"),d.css("display","block"),d.css("text-decoration","none"),d.append(p),v.append(d)):v.append(p),y.resolve(v[0].outerHTML);var r,l,c,h,d,u,p=$("<table />",{class:"container",cellspacing:0,cellpadding:0,align:"center",border:0}),f=$("<tr />"),g=$("<td />"),m=(p.css("borderSpacing",0),p.css("max-width",S._model.width),S.collection.parent?p.css("width","100%"):p.css("width",S._model.width),S.collection.properties.sizeByUser&&e.collection.id!==S.collection.id&&(p.removeClass("container"),p.css("marginLeft",S._model.left)),_.isEmpty(S._model.style)||p.css(S._model.style),p.css("backgroundColor",S.$el.css("backgroundColor")),i.background),v=(_.isEmpty(m)||_.isEmpty(m.url)||(u=_tt.StringUtils.replaceTemplate(m.url,"ASSETS_DIR",tt.paths.assets),p.css("backgroundImage",'url("'+u+'")'),p.css(t.getBackgroundAttributes())),t.collection.isEmpty()&&p.css("height",t.collection.height),s.length?(r=$("<table />",{class:"container",cellspacing:0,cellpadding:0,align:"center",border:0}),"block"===$(s[0]).attr("parent-column-layout")?_.each(s,function(t,e){var t=$(t),i=$("<tr />");i.append(t),r.append(i)}):(l=$("<tr />"),_.each(s,function(t,e){t=$(t);t.children("table");0<e&&0<S.collection.properties.itemSpacing&&((e=$("<td />",{class:"space"})).css("width",S.collection.properties.itemSpacing),l.append(e)),l.append(t)}),r.append(l)),g.append(r),g.css("paddingTop",S.collection.properties.paddingTop),g.css("paddingRight",S.collection.properties.paddingRight),g.css("paddingBottom",S.collection.properties.paddingBottom),g.css("paddingLeft",S.collection.properties.paddingLeft)):(c=b.children(),_.each(c,function(t,e){$(t).css("display","block")}),b.css("max-width",S._model.width),g.append(b)),f.append(g),_.filter(S.collection.models,function(t){return t.block}));_.isEmpty(v)&&(p.css("width",S._model.width),p.css("marginLeft",""),p.css("backgroundColor",""),p.css("backgroundImage",""),p.css("backgroundSize",""),p.css("backgroundPosition",""),p.css("backgroundRepeat",""),(e=w.children(".background")).removeAttr("id class style"),e.attr("usemap","#map"),e.css({padding:0,margin:"auto",width:S._model.width,height:S._model.height}),g.append(e),(b=b.tt_changeTag("map")).attr("name","map"),b.removeAttr("id class style"),b.children(".toast-object").remove()),p.append(f),(h=!_.isEmpty(v)&&i.actions?_.find(i.actions,{name:"LinkUrl"}):h)&&h.properties.url&&(d=$("<a />"),u=h.properties.url,d.attr("href",u),h.properties.openWindow&&d.attr("target","_blank"),d.css("display","block"),d.css("text-decoration","none"),d.append(p),p=d),y.resolve(p[0].outerHTML)}else w.css("width",S._model.width),w.css("height",S._model.height),y.resolve(w[0].outerHTML)}),y.promise()},updateItemLayout:function(t,e){this.collection.width=this._model.width=t.width,this.collection.height=this._model.height=t.height,this.$el.css(t)},responsiveLayout:function(t){var e=(t=t||{}).responsiveWidth;return _.isUndefined(e)||(this.collection.width=e,this.$el.css({width:e}),_.each(this.collection.models,function(t){t.view&&!t.__attributes__&&t.view.responsiveLayoutChanged({responsiveWidth:e})},this)),t=_.extend({collection:this.collection,onUpdate:this._responsiveLayoutDidUpdate},t),T.viewLayout(t)},_responsiveLayoutDidUpdate:function(t,e){this.collection.width=e.contentSize.width,this.collection.height=e.contentSize.height,this.$el.css(e.contentSize)}});return t.getAttributes=o,T.ViewController=t}),define("toast/core/Project",["exports","../core","./Collection","./Model","./ViewController","../utils"],function(t,a,r,l,e){"use strict";var i,c={id:"project-213b-aa20-08344f936337",version:"5.8.355",title:"Toast Project",description:"",metadata:{},config:{language:"ko",defaultPageWidth:595,defaultPageHeight:845,userStylesheets:[],mobile:{},transition:"flip",doublepage:!0,firstPageNumber:1,print:!0,share:!0,shadow:!0,pdfUrl:"",widgetDataManager:{}},pages:[],subpages:[]};function h(){return e.getAttributes()}var n=r.extend(),o=(_.extend(n,{initialize:function(t){return c.id=a.dateUUID().prefix("project-"),t=t||{},_.isNull(t.attributes)||_.isUndefined(t.attributes)?t.attributes=_.clone(c):t.attributes=_.extend(_.clone(c),t.attributes),(_.isNull(t.model)||_.isUndefined(t.model))&&(t.model=l.extend({defaults:h})),i=new n(null,t),t.editor&&i.setParsedVersion(),i}}),r.prototype);return _.extend(n.prototype,{subpages:new r(null,{model:l.extend({defaults:h})}),getProjectPath:function(){return a.paths.projectRoot+a.paths.projectFile},load:function(t,n){this.reset(),"string"==typeof t&&(t=JSON.parse(t)),!__app__&&t.config&&t.config.publishDirectory&&delete t.config.publishDirectory,t.pages?(e=$.extend(!0,[],t.pages),t.pages&&delete t.pages):t.collection&&(e=$.extend(!0,[],t.collection),t.collection)&&delete t.collection;var e,i,o=$.extend(!0,[],t.subpages),s=(t.subpages&&delete t.subpages,this.attributes);for(i in this.attributes=_.extend(s,t),this.attributes)this.defineProperty(i);this.config.reversePageTurnDirection&&!__app__&&(e.reverse(),o.reverse()),_.each(e,function(t){var e=t.subpages,i=(t.subpages&&delete t.subpages,new this.model(t));this.createChildren(i,t),i.unset("children",{silent:!0}),this.add(i,n),i.subpages=new r(null,{model:l.extend({defaults:h})}),_.each(e,function(t){var e=new this.model(t);this.createChildren(e,t),e.unset("children",{silent:!0}),i.subpages.add(e,n)},this)},this),_.each(o,function(t){var e=new this.model(t);this.createChildren(e,t),e.unset("children",{silent:!0}),this.subpages.add(e,n)},this),this.config=_.extend(_.clone(c.config),this.config),this._loadUserStylesheets(!0),this.setParsedVersion(),a.Assets.load()},reset:function(t,e){return t=o._reset.call(this,t,e),this.subpages.reset(),a.Assets.load(),t},setParsedVersion:function(){var t=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(this.version);t.VERSION_MAJOR=Number(t[1]),t.VERSION_MINOR=Number(t[2]),t.VERSION_PATCH=Number(t[3]),this.parsedVersion=t},updateVersion:function(){this.version=c.version,this.setParsedVersion()},finds:function(t,e){var i=[];return t instanceof l?t=_.isUndefined(t.contents)?[t]:t.contents:t instanceof r?t=t.models:_.isArray(t)||(t=[t]),_.each(t,function(t){e&&t[e.name]!==e.value||i.push(t),_.isEmpty(t.children)?_.isEmpty(t.__children__)?_.isEmpty(t.contents)||this._findChildren(i,t.contents,e):this._findChildren(i,t.__children__,e):this._findChildren(i,t.children,e)},this),i},find:function(t){return _.find(this.findAll(),t)},findAll:function(e){var i=[];return _.each(this.models,function(t){t.contents&&(i=i.concat(this.finds(t.contents,e))),t.collection&&t.collection!==this&&(i=i.concat(this.finds(t.collection,e))),_.each(t.subpages.models,function(t){t.contents&&(i=i.concat(this.finds(t.contents,e)))},this)},this),_.each(this.subpages.models,function(t){t.contents&&(i=i.concat(this.finds(t.contents,e)))},this),i},_findChildren:function(e,t,i){_.each(t,function(t){i&&t[i.name]!==i.value||e.push(t),_.isEmpty(t.children)?_.isEmpty(t.contents)||this._findChildren(e,t.contents,i):this._findChildren(e,t.children,i)},this)},findPage:function(i){var n;return i.name&&i.value&&_.each(this.models,function(t,e){if(t[i.name]===i.value)return!(n={page:t,index:e})},this),n},findAssets:function(t){var e=[],t=this.finds(t);return _.each(t,function(t){this.findProperty(t,function(t){"as-"===t.substr(0,3)&&(t=a.Assets.find(t))&&e.push(t)})},this),e},findProperty:function(t,e){var i=[];_.isUndefined(t.properties)||i.push(t.properties),_.each(t.actions,function(t){i.push(t.properties)}),_.each(i,function(t){this._findProperty(t,e)},this)},_findProperty:function(e,o){_.each(Object.keys(e),function(i){var t,n=e[i];if(_.isEmpty(n))return!0;_.isArray(n)?_.each(n,function(t,e){if(_.isEmpty(t))return!0;_.isObject(t)?this._findProperty(t,o):(t=o(t,i),_.isUndefined(t)||(n[e]=t))},this):_.isObject(n)?this._findProperty(n,o):(t=o(n,i),_.isUndefined(t)||(e[i]=t))},this)},output:function(t){var e=_.cloneDeep(this.attributes);return e.pages=this.toJSON(),e.subpages=this.subpages.toJSON(),_.each(a.Assets.collections(),function(t){e.assets[t.name]=t.output()}),tt.debug?JSON.stringify(e,null,2):JSON.stringify(e)},text:function(){var i=[];return _.each(this.models,function(t){var e={id:t.id,text:""},t=this.finds(t.contents);_.each(t,function(t){void 0!==t.htmlText&&"string"==typeof t.htmlText&&(_.isEmpty(e.text)||(e.text+=" "),e.text+=t.htmlText.removeTags()),void 0!==t.text&&"string"==typeof t.text&&(_.isEmpty(e.text)||(e.text+=" "),e.text+=t.text.removeTags())},this),i.push(e)},this),i},_loadUserStylesheets:function(t){t&&$(".userStylesheet").remove();var e=$("head");_.each(this.config.userStylesheets,function(t){_.isEmpty(e.children("#"+t.id))&&(t={id:t.id,type:"text/css",rel:"stylesheet",href:a.paths.assets+t.src},$('<link class="userStylesheet" />').attr(t).appendTo(e))},this)},__load__:function(t){t=t||{};var e,i,n=new $.Deferred;return a.setPaths(),(t.data?(this.load(t.data),this.__projectLoaded__(),n.resolve()):(t=t.url||this.getProjectPath(),e=(new Date).getTime(),i=this,(new Backbone.Model).fetch({url:t+"?timestamp="+e,success:function(t,e){i.load(e),i.__projectLoaded__(),n.resolve()},error:function(t,e){}}),n)).promise()},__projectLoaded__:function(){a.urlParams.get("doublepage")&&(this.config.doublepage="true"===a.urlParams.get("doublepage")),a.urlParams.get("publishUniqueId")&&(this.config.publishUniqueId=a.urlParams.get("publishUniqueId")),this.config.mobile||(this.config.mobile={}),a.config=_.extend(this.config,a.config),_.isUndefined(this.config.mobile.doublepage)&&(this.config.mobile.doublepage=!1),a.isMobileDevice&&(this.config.doublepage=this.config.mobile.doublepage),a.isMobileDevice&&this.config.mobile.landscapeDoublePage&&a.isLandscape()&&(this.config.doublepage=!0);var t=a.urlParams.get("language");t&&(a.config.language=t),a.config.language&&"ko"!==a.config.language?a.load(["i18n!nls/"+a.config.language+"/strings"],function(t){_.extend(a.Strings,t),a.dispatchReady(a.PROJECT_LOADED)}):a.dispatchReady(a.PROJECT_LOADED)}}),n.__ATTRIBUTES__=c,n.getModelAttributes=h,a.Project=n}),define("toast/core/Assets",["exports","../core"],function(t,n){"use strict";function e(t){for(var e in t)this[e]=t[e];this._folders=[],this._assets=[],this.initialize.apply(this,arguments)}var i=n.Strings,o=(_.extend(e.prototype,{initialize:function(){var t;_.each(n.project.assets[this.name].folders,function(t){t._default&&(this._defaultFolder=t),this._folders[t.id]=t},this),_.each(n.project.assets[this.name].assets,function(t){this._assets[t.id]=t},this),_.isEmpty(Object.keys(this._folders))?this._setDefaults():this._defaultFolder||(t=n.project.assets[this.name].folders[0])&&(t._default=!0,this._defaultFolder=t)},_setDefaults:function(t){(t=t||{folder:!0}).folder&&(this._defaultFolder={id:n.UUID6().prefix("as-"),_default:!0,readonly:!0,lock:!1,name:i.DEFAULT_FOLDER},this._folders[this._defaultFolder.id]=this._defaultFolder)},_getDefaultFolder:function(){return this._defaultFolder},values:function(e){var i=[];return!0===(e=e||{folder:!1}).folder?_.each(Object.keys(this._folders),function(t){i.push(this._folders[t])},this):e.folderId?_.each(Object.keys(this._assets),function(t){e.folderId===this._assets[t].fid&&i.push(this._assets[t])},this):_.each(Object.keys(this._assets),function(t){i.push(this._assets[t])},this),i},set:function(t,e){var i;return!0===(e=e||{folder:!1}).folder?i=this._folders:(i=this._assets,_.isUndefined(t.ref)&&(t.ref=0),_.isEmpty(t.name)&&!_.isEmpty(t.url)&&(t.name=t.url.getBaseName().getFilenameWithoutExtension()),_.isEmpty(t.fid)&&(t.fid=this._getDefaultFolder().id)),_.isEmpty(t.id)&&(t.id=n.UUID6().prefix("as-")),"as-"!==t.id.substr(0,3)&&(t.id="as-"+t.id),i[(t=_.extend({},i[t.id],t)).id]=t},unset:function(t,e){return!0===(e=e||{folder:!1}).folder?(e=this.values({folderId:t}),_.each(e,function(t){t.fid=this._defaultFolder.id},this),delete this._folders[t],this._folders):(delete this._assets[t],this._assets)},folder:function(t){return this._folders[t]},get:function(t,e){return this._assets[t]},url:function(t){var e,t=this._assets[t];return e=t&&t.url?n.StringUtils.replaceTemplate(t.url):e},allKeys:function(t){return!0===(t=t||{folder:!1}).folder?Object.keys(this._folders):Object.keys(this._assets)},reorder:function(t,e){var i,n=[],o=(i=!0===(e=e||{folder:!1}).folder?this._folders:this._assets,[]);return _.each(t,function(t){var e=i[t];e&&(n.push(o[t]=e),delete i[t])},this),_.each(Object.keys(o),function(t){i[t]=o[t]},this),n},ref:function(t){t=this._assets[t];return t&&t.ref++,t},unref:function(t){t=this._assets[t];return t&&(t.ref=Math.min(0,t.ref--)),t},gc:function(){var e=[];return _.each(Object.keys(this._assets),function(t){t=this._assets[t];t&&!t.ref&&e.push(t)},this),e},output:function(t){t=t||{stringify:!1};var e={folders:[],assets:[]};return e.folders=this.values({folder:!0}),e.assets=this.values(),t.stringify?JSON.stringify(e,null,2):e}}),[]);function s(){return o}function a(e){e=e||n.project;var t,i={image:{folders:[],assets:[]},gif:{folders:[],assets:[]},audio:{folders:[],assets:[]},movie:{folders:[],assets:[]},svg:{folders:[],assets:[]},flash:{folders:[],assets:[]},html:{folders:[],assets:[]},file:{folders:[],assets:[]},folder:{folders:[],assets:[]},data:{folders:[],assets:[]}};_.isUndefined(e.assets)?(e.attributes.assets=i,e.defineProperty("assets")):(t=Object.keys(i),_.each(t,function(t){e.assets[t]||(e.assets[t]=i[t])}))}t.load=function(){a(),n.ImageAssets=new e({name:"image",fileTypes:["jpg","jpeg","png","gif"]}),n.AudioAssets=new e({name:"audio",fileTypes:["mp3"]}),n.MovieAssets=new e({name:"movie",fileTypes:["mp4","m4v"]}),n.SVGAssets=new e({name:"svg",fileTypes:["svg"]}),n.FlashAssets=new e({name:"flash",fileTypes:["swf"]}),n.HTMLAssets=new e({name:"html",fileTypes:["html","htm"]}),n.FileAssets=new e({name:"file",fileTypes:["jpg","jpeg","png","gif","mp3","mp4","m4v","ogg","swf","pdf","hwp","hwpx","doc","docx","ppt","pptx","xls","xlsx","zip","7z"]}),n.FolderAssets=new e({name:"folder",folderType:""}),n.DataAssets=new e({name:"data",fileTypes:["json","xml"]}),(o=[]).push(n.ImageAssets),o.push(n.AudioAssets),o.push(n.MovieAssets),o.push(n.SVGAssets),o.push(n.FlashAssets),o.push(n.HTMLAssets),o.push(n.FileAssets),o.push(n.FolderAssets),o.push(n.DataAssets)},t.findCollection=function(t){return _.find(o,{name:t})},t.findCollectionByFileType=function(n){var t;return n=n.toLowerCase(),_.each(o,function(e){var i;if(_.each(e.fileTypes,function(t){if(t.toLowerCase()===n)return i=e,!1}),i)return t=e,!1}),t},t.collections=s,t.folder=function(e){var i;return _.each(o,function(t){if(i=t.folder(e))return!1}),i},t.find=function(e){var i;return _.each(o,function(t){if(i=t.get(e))return!1}),i},t.findByFilename=function(e){var i;return _.each(o,function(t){t=t.values();if(_.each(t,function(t){if(t.url.getBaseName()===e)return i=t,!1}),i)return!1}),i},t.allAssets=function(){var e=[];return _.each(o,function(t){e=e.concat(t.values())}),e},t.unset=function(e){_.each(o,function(t){if(t.get(e))return t.unset(e),!1})},t._setAssets=a,n.Assets=t}),define("toast/core/Storage",["exports","../core","../utils/Async"],function(t,i,e){"use strict";function n(t,e){this._$ready=new $.Deferred,a.constructor.apply(this,arguments)}var o={},s=Backbone.Model.extend({save:function(){},remove:function(){}}),a=(s.extend=Backbone.Model.extend,Backbone.Collection.prototype);_.extend(n.prototype,a,{initialize:function(t,e){_.extend(this,e)},ready:function(t,e){t&&this._$ready.promise().done(t),e&&this._$ready.promise().fail(e),"resolved"===this._$ready.promise().state()?this._$ready.resolve():"rejected"===this._$ready.promise().state()&&this._$ready.reject()},load:function(t){},addItem:function(t,e){return t=a.add.call(this,t,e)},set:function(t,e){return t=a.set.call(this,t,e=e||{}),e.merge,t},updateItem:function(t){this.set(t,{merge:!0,remove:!1})},removeItem:function(t,e){return a.remove.call(this,t,e)},empty:function(){},stringify:function(){return JSON.stringify(this.toJSON())}}),n.extend=Backbone.Collection.extend,i.EventDispatcher.makeEventDispatcher(t),t.Model=s,t.Collection=n,t.register=function(t){var e=t.attributes;return o[e.name]?e.priority>o[e.name].attributes.priority&&(delete o[e.name],delete i[e.name+"Storage"],i[e.name+"Storage"]=o[e.name]=t):i[e.name+"Storage"]=o[e.name]=t,o[e.name]},t.get=function(t){return o[t]},t.getAll=function(){var e=[];return _.each(Object.keys(o),function(t){e.push(o[t])}),e},t.loadAll=function(){var t=new $.Deferred;return e.doInParallel(Object.keys(o),function(t){var e=new $.Deferred,i=o[t],n=i.attributes.preload;return n||e.resolve(),i.load({done:function(){i._$ready.resolve(),n&&e.resolve()},fail:function(){i._$ready.reject(),n&&e.reject()}}),e.promise()}).always(function(){t.resolve()}),t.promise()},t.BOOKMARK="bookmark",t.MEMO="memo",t.DRAW="draw",t.CONTENT="content",i.Storage=t}),define("toast/core/book/BookCommon",["require","exports","module"],function(t,e,i){"use strict";var f={has3d:null,vendor:"",PI:Math.PI,A90:Math.PI/2,isTouch:"ontouchstart"in window,events:"ontouchstart"in window?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},corners:{backward:["bl","tl"],forward:["br","tr"],all:["tl","bl","tr","br"]},allowedCorners:null,displays:["single","double"],turnOptions:{page:1,cover:!0,gradients:!0,duration:600,acceleration:!0,display:"double",when:null},flipOptions:{folding:null,corners:"forward",cornerSize:100,gradients:!0,duration:600,acceleration:!0},pagesInDOM:6,pagePosition:{0:{top:0,left:0,right:"auto",bottom:"auto"},1:{top:0,right:0,left:"auto",bottom:"auto"}},divAtt:function(t,e,i,n){return{css:{position:"absolute",top:t,left:e,overflow:n||"hidden","z-index":i||"auto"}}},bezier:function(t,e,i,n,o){var s=1-o,a=s*s*s,r=o*o*o;return f.point2D(Math.round(a*t.x+3*o*s*s*e.x+3*o*o*s*i.x+r*n.x),Math.round(a*t.y+3*o*s*s*e.y+3*o*o*s*i.y+r*n.y))},rad:function(t){return t/180*f.PI},deg:function(t){return t/f.PI*180},point2D:function(t,e){return{x:t,y:e}},translate:function(t,e,i){return f.has3d&&i?" translate3d("+t+"px,"+e+"px, 0px) ":" translate("+t+"px, "+e+"px) "},rotate:function(t){return" rotate("+t+"deg) "},has:function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},getPrefix:function(){var t=["Moz","Webkit","Khtml","O","ms"],e=t.length;for(f.vendor="";e--;)t[e]+"Transform"in document.body.style&&(f.vendor="-"+t[e].toLowerCase()+"-");return f.vendor},gradient:function(t,e,i,n,o){var s=[];if(t.addClass("gradient"),"-webkit-"==this.vendor){for(p=0;p<o;p++)s.push("color-stop("+n[p][0]+", "+n[p][1]+")");t.css({"background-image":"-webkit-gradient(linear, "+e.x+"% "+e.y+"%,  "+i.x+"% "+i.y+"%, "+s.join(",")+" )"})}else{e={x:e.x/100*t.width(),y:e.y/100*t.height()};for(var a=(i={x:i.x/100*t.width(),y:i.y/100*t.height()}).x-e.x,r=i.y-e.y,l=Math.atan2(r,a),c=l-Math.PI/2,h=Math.abs(t.width()*Math.sin(c))+Math.abs(t.height()*Math.cos(c)),d=Math.sqrt(r*r+a*a),c=f.point2D(i.x<e.x?t.width():0,i.y<e.y?t.height():0),r=Math.tan(l),a=-1/r,i=(a*c.x-c.y-r*e.x+e.y)/(a-r),r=i,i=a*i-a*c.x+c.y,u=Math.sqrt(Math.pow(r-e.x,2)+Math.pow(i-e.y,2)),p=0;p<o;p++)s.push(" "+n[p][1]+" "+100*(u+d*n[p][0])/h+"%");t.css({"background-image":this.vendor+"linear-gradient("+-l+"rad,"+s.join(",")+")"})}},distanceBetween:function(t,e){var i=t.x-e.x,t=t.y-e.y;return Math.sqrt(i*i+t*t)}};return $.isTouch=f.isTouch,f}),define("toast/core/book/BookZoom",["exports","../../core","./BookCommon","../../libs"],function(t,r,B){"use strict";var s,l,e,c,i,n,a,h,o,d,u,p,f,g,U,z,F=8,H=16,W=0,m=1,v=2,y=W,w=!1,b=1.5,S=2,T=.5,E={_default:150,max:200},C={x:0,y:0},x={left:0,top:0},A={left:0,top:0},I=!0,V=[],k=!1,G={},j={},Y={},D={},X={},K=10;function P(t){var e,i,n;w||(ot()?r.DialogBar.present({titleIcon:"glyphicon glyphicon-info-sign",autoDismiss:!1,title:r.Strings.ALERT_TITLE,content:"<b>"+r.Strings.ZOOM_FUNCTION_CAN_NOT_BE_USED_DURING_PAGE_LOADING+"</b>"}):(t=t||{},r.$toggleZoom.addClass("active"),o=!0,r.$el.addClass("bookzoom-activate"),"flip"===r.config.transition&&r.$book.turn("stop"),r.IS_ZOOM=w=!0,r.IS_ZOOM_DRAG_MODE=I=!0,X={},y=W,l=$("<div />",{class:"bookzoom grab"}),c.append(l),r.Book.restoreLayoutFromZoomActiveState(!0),D=r.Book.getBookSize(),s.$getBook().css("opacity",0),U=s.isCoverPage(),z=s.isDoublePage(),Z(),J(),x.left=-D.fit.width/2,x.top=-D.fit.height/2,l.css({left:"50%",top:"50%",width:D.fit.width+"px",height:D.fit.height+"px",marginLeft:x.left+"px",marginTop:x.top+"px"}),l.tt_deselect(),b=Number(Math.max(d/r.Book.$getBook().width(),u/r.Book.$getBook().height())),!(e=0)===t.pinch&&(i=R(),b=Number(Math.max(r.Book.$getBook().width()/i.width,r.Book.$getBook().height()/i.height)),b=Math.min(S,Math.max(T,b))),r.send(r.Events.ZOOM_MODE_DID_CHANGE,w),C={x:0,y:0},t.setDefaultFitWidth||t.setDefaultFitHeight?(x.top=0,t.setDefaultFitWidth?N(m):N(v),o=!1):t.zoomInOut?(b=Number((R().height/D.fit.height).toFixed(2)),b=Math.min(S,Math.max(T,b)),x.left=-D.fit.width*b/2,x.top=-D.fit.height*b/2,O(),L(!0),o=!1):!0!==t.pinch?(t.zoomScale?b=Math.min(S,Math.max(T,t.zoomScale)):r.isMobile&&!r.isTablet&&(b=r.isLandscape()?Number((700/R().height).toFixed(2)):Number((700/R().width).toFixed(2)),b=Math.min(S,Math.max(T,b))),t.tapPoint&&((i=t.tapPoint).x=(i.x-s.$getBook().offset().left)*b,i.y=(i.y-s.$getBook().offset().top)*b,t=l.width()*b,n=l.height()*b,t/=2,n/=2,C.x=t-i.x,C.y=n-i.y,function(){var t=l.width()*b,e=l.height()*b,t=t/2>R().width/2?t/2-R().width/2:0;C.x>t?C.x=t:C.x<0&&Math.abs(C.x)>t&&(C.x=-t);t=e/2>R().height/2?e/2-R().height/2:0;t<C.y?C.y=t:Math.abs(C.y)>t&&(C.y=-t)}()),t=b,n=C,l.addClass("animate"),n=(n=["translate("+(n=n||{x:0,y:0}).x+"px, "+n.y+"px)","scale("+t+")"]).join(" "),l[0].style.webkitTransform=n,l[0].style.mozTransform=n,l[0].style.msTransform=n,l[0].style.transform=n,e=r.isMobileDevice?100:150,r.lazy(function(){var t,e;l.removeClass("animate"),t=parseFloat(l.css("marginLeft"))*b,e=parseFloat(l.css("marginTop"))*b,x.left=C.x+t,x.top=C.y+e,l.bookTransform(""),O(),L(),O({smooth:!0}),o=!1},e)):(O(),o=!1),s.$getBook().css("opacity",0),r.Book.enableAction(!1),r.send(r.Events.ZOOM_SCALE_DID_CHANGE,b),r.on(r.Events.WILL_DISPLAY_PAGE,tt),r.on(r.Events.WILL_MOVE_PAGE,et),r.on(r.Events.PAGE_DID_CHANGE,it),document.addEventListener("keydown",ft)))}function Z(){Y={width:c.width(),height:c.height()},D=r.Book.getBookSize(),T=Math.min(Y.width/D.fit.width,Y.height/D.fit.height),r.isMobileDevice||(T*=.5),i=D.page.width*(E._default/100),t=D.page.height*(E._default/100),i=(i+=i%2)+i/2%2*2,t+=t%2,r.Book.isDoublePage()&&!r.Book.isCoverPage()&&(i*=2),d=i,u=t;var t,e,i=E._defaultMax||E.max,i=(_.isEmpty(X.url)||(i=300),t=D.page.width*(i/100),e=D.page.height*(i/100),t=(t+=t%2)+t/2%2*2,e+=e%2,D.page.background&&D.page.background.width>=t&&(E._defaultMax||(E._defaultMax=E.max),i=E.max=D.page.background.width/D.page.width*100,t=D.page.background.width,e=D.page.background.height),r.Book.isDoublePage()&&!r.Book.isCoverPage()&&(t*=2),p=t,f=e,S=Number(Math.max(t/r.Book.$getBook().width(),e/r.Book.$getBook().height())),b=Number(Math.max(d/r.Book.$getBook().width(),u/r.Book.$getBook().height())),parseInt(Math.ceil(T/S*E.max)));E.min=i-=i%10}function O(t){t=_.extend({smooth:!1,fitPage:!0},t),_.isUndefined(t.zoomScale)||(b=t.zoomScale),t.offset&&(x=t.offset),t.smooth?l.addClass("animate"):l.removeClass("animate");var e=parseInt(D.fit.width*b),i=parseInt(D.fit.height*b),e=(e+=e%2)+e/2%2*2,i=(i+=i%2)+i/2%2*2;r._.disabledAutoZoomScaleSize||(Math.abs(d-e)<=6&&Math.abs(u-i)<=6?(e=d,i=u):(Math.abs(p-e)<=6&&Math.abs(f-i)<=6||p<=e||f<=i)&&(e=p,i=f)),l.css({width:e,height:i,marginLeft:x.left,marginTop:x.top}),t.fitPage&&_.each(a,function(t){s.fitPage(t)}),r.send(r.Events.ZOOM_VIEW_POSITION_AND_SIZE_DID_CHANGE)}function q(t){t=t||{},y==m||y==v?N(y):(t.center&&(x.left=-D.fit.width*b/2),O(),L(!0)),r.send(r.Events.ZOOM_SCALE_DID_CHANGE,b)}function J(t){t=t||{},!s.isCoverPage()&&s.$getBook().hasClass("doublepage")?(l.hasClass("doublepage")||(n=!0),l.addClass("doublepage")):(l.hasClass("doublepage")&&(n=!0),l.removeClass("doublepage"));var e,i,n,o=r.Book.getBookSize(),o=(s.isDoublePage()||s._isFlipTransition||n||D.fit.width===o.fit.width&&D.fit.height===o.fit.height||(e=n=!0),a=r.Book.getCurrentPageNumber(),_.each(a,function(t){var t=r.Book.views[t-1],e=t.collection.attributes;t.willReMountAll(),t.cache&&(i=t.cache._zoomInfo),X=e._doc}),s.getCurrentPage());_.each(o.reverse(),function(t){var e=$("<section />");e.attr("data-page",t.attr("page")),"SECTION"!==t[0].tagName&&(t=t.find("section")),e.append(t.children()),l.prepend(e),V.push(e)}),_.each(a,function(t){r.Book.views[t-1].remountAll()}),t.update&&(n?(o=b,Z(),e?i?(o=i.zoomScale,t=i.offset,yt(b=Math.min(Math.max(o,T),S)),x=t,L(),O()):q({center:!0}):yt(b=Math.min(Math.max(o,T),S))):O(),function(){l.width();var t=l.height(),e=R();if(t>e.height){var i=r.isMobileDevice?20:50;if(Math.abs(Math.abs(t+x.top)-e.height/2)<=i)return 1}return}())&&(l.width(),l.height()>(n=R()).height)&&(x.top=-n.height/2,O()),0}function Q(){_.each(a,function(t){t=r.Book.views[t-1];t.willReMountAll(),s.isDoublePage()||s._isFlipTransition?t.cache&&t.cache._zoomInfo&&delete t.cache._zoomInfo:(t.cache||(t.cache={}),t.cache._zoomInfo={zoomScale:b,offset:_.clone(x)})});var i=s.$getBook().children().first().hasClass("container")?s.$getBook().children().first():s.$getBook();_.each(V,function(t){var e=Number(t.attr("data-page")),e=i.children('[page="'+e+'"]');e.length&&("SECTION"===e[0].tagName?e:e.find("section")).prepend(t.children())}),_.each(a,function(t){r.Book.views[t-1].remountAll()}),_.each(a,function(t){s.fitPage(t)}),l.children().not(".__lock__").remove(),V=[]}function tt(){Q()}function et(){Q(),r.showLoading(!0)}function it(t){r.Async.doInParallel(t,function(t){var e=new $.Deferred,t=r.Book.views[t-1];return _.isUndefined(t)?e.reject():t.ready(function(){e.resolve()}),e.promise()}).done(function(){J({update:!0}),U===s.isCoverPage()&&z===s.isDoublePage()||N(y),z=s.isDoublePage(),U=s.isCoverPage(),r.showLoading(!1)}).fail(function(){r.showLoading(!1)})}function nt(t){!w||!r.isMobileDevice&&!1===r.config.bookZoom.toggleZoom||(t=t||{animate:!0},o=!0,TT.$toggleZoom.removeClass("active"),_t(),$(".toast").removeClass("bookzoom-activate"),c.tt_deselect(),r.IS_ZOOM=w=!1,r.IS_ZOOM_DRAG_MODE=I=!1,r.off(r.Events.WILL_DISPLAY_PAGE,tt),r.off(r.Events.WILL_MOVE_PAGE,et),r.off(r.Events.PAGE_DID_CHANGE,it),Q(),s.$getBook().css("opacity",1),r.Book.restoreLayoutFromZoomActiveState(!1),l.remove(),mt(),r.Book.enableAction(!0),r.send(r.Events.ZOOM_MODE_DID_CHANGE,w),document.removeEventListener("keydown",ft),t.callback&&"function"==typeof t.callback&&t.callback(),r.lazy(function(){o=!1},50),_.each(a,function(t){r.Book.views[t-1].remountAll()}))}function ot(){var e=!0,t=r.Book.getCurrentPageNumber();return _.each(t,function(t){if(TT.Book.views[t-1].state()!==r.STATUS_LOADED)return e=!1}),!0!==e}function st(t,e){if(e=e||{},(r.isMobileDevice||!1!==r.config.bookZoom.toggleZoom)&&!r.IS_ZOOM_LOCKED&&!r.Book._zoomDisabled()&&"INPUT"!==t.target.tagName){var i,t=$(t.target);if(!t.closest(".modal").length)if(!t.hasClass("cl"))if(r.isMobileDevice?i=t.closest(".book-container"):(i=(i=(i=t.closest(".toast-ctrl")).length?i:t.closest("section")).length?i:t.closest(".book")).length||(i=t.closest(".bookzoom")),i.length){if(e.doubletap){if(t.closest("[command]").length)return;if(0!==(i=t.closest(".toast-object")).length){e=i.data("view");if(e&&(e.actions&&e.actions.click||e.animations&&e.animations.click))return}}return 1}}}function at(t){!w||!I||!w||k||!(t=$(t.target)).closest(".book-container").length||r.IS_SLIDING||r.IS_SCROLLING||r.IS_PAINTER_ACTIVATED||r.IS_DRAWING||(t=t.closest(".scroll-interaction-el"),g=t.length?t.data("scroll-interaction"):null,$(document).tt_deselect(),A={x:parseFloat(l.css("marginLeft")),y:parseFloat(l.css("marginTop"))},l.removeClass("grab").addClass("grabbing"),n=!0,r.IS_PANNING=!0)}function rt(t){if(w&&I&&w&&!k&&n&&!(r.IS_SLIDING||r.IS_SCROLLING||r.IS_PAINTER_ACTIVATED||r.IS_DRAWING)){if(g&&!pt())switch(t.direction){case F:if(g.isScrollBottom())break;return;case H:if(g.isScrollTop())break;return}x={left:A.x+t.deltaX,top:A.y+t.deltaY},y==m&&(x.left=A.x),O()}}function lt(t){w&&(r.lazy(function(){r.IS_PANNING=!1},50),I)&&w&&!k&&n&&(n=!1,L(),O({smooth:!0}),l.removeClass("grabbing").addClass("grab"))}function ct(t){var e,i,n,o,s,a;r.config.disableZoomGesture||(ot()?r.DialogBar.present({titleIcon:"glyphicon glyphicon-info-sign",autoDismiss:!1,title:r.Strings.ALERT_TITLE,content:"<b>"+r.Strings.ZOOM_FUNCTION_CAN_NOT_BE_USED_DURING_PAGE_LOADING+"</b>"}):"pinchstart"==t.type?st(t)&&(r.IS_PINCHING=k=!0,w||P({tapPoint:t.center,pinch:!0}),h=b,j={x:x.left,y:x.top},G={x:t.center.x-(c.offset().left+c.width()/2),y:t.center.y-(c.offset().top+c.height()/2)}):"pinchmove"==t.type?k&&(a=h*t.scale,T<=a)&&a<=S&&(b=a,e=G.x*(a/h),i=G.y*(a/h),n=t.center.x-$(window).width()/2,o=t.center.y-$(window).height()/2,s=j.x*(a/h),a=j.y*(a/h)-i+o,x.left=s-e+n,x.top=a,O(),r.send(r.Events.ZOOM_SCALE_DID_CHANGE,b)):"pinchend"!=t.type&&"pinchcancel"!=t.type||(L()&&O({smooth:!0}),r.IS_PINCHING=k=!1))}function ht(t){t=t||{};var e=parseInt(Math.ceil(b/S*E.max));e-=e%10,e=Math.min(E.max,Math.max(E.min,e)),t.zoomIn?e+=K:e-=K,E.val=Math.min(E.max,Math.max(E.min,e))}function M(t,e){var i=parseInt(l.css("marginLeft")),n=parseInt(l.css("marginTop"));switch(_.isUndefined(e)&&(e=100),t){case"up":n+=e;break;case"right":i-=e;break;case"down":n-=e;break;case"left":i+=e}x={left:i,top:n},L(),O({smooth:!0})}function L(t){var e,i,n=!1,o=l.width(),s=l.height(),a=R(),n=(e=o>a.width?a.width/2:o/2,!0);return n=(i=s>a.height?a.height/2:s/2,!0),Math.abs(x.left)<e?(x.left=-e,n=!0):o+x.left<e&&(o<a.width?x.left=-e:x.left=a.width/2-o,n=!0),Math.abs(x.top)<i||a.height>s?(x.top=-i,n=!0):(Math.abs(s+x.top)<i||s<Math.abs(x.top))&&(s<a.height?x.top=-i:x.top=a.height/2-s,n=!0),t&&n&&l.css({marginLeft:x.left+"px",marginTop:x.top+"px"}),n}function dt(){l.width();var t=l.height(),e=R(),e=t>e.height?e.height/2:t/2;return Math.abs(x.top)<e}function ut(){l.width();var t=l.height(),e=R(),e=t>e.height?e.height/2:t/2;return Math.abs(t+x.top)<e||t<Math.abs(x.top)}function pt(){return dt()||ut()}function ft(t){t.keyCode===r.KeyEvent.DOM_VK_ESCAPE?nt():t.keyCode===r.KeyEvent.DOM_VK_UP?M("up"):t.keyCode===r.KeyEvent.DOM_VK_RIGHT?M("right"):t.keyCode===r.KeyEvent.DOM_VK_DOWN?M("down"):t.keyCode===r.KeyEvent.DOM_VK_LEFT?M("left"):t.keyCode===r.KeyEvent.DOM_VK_ADD?r.BookZoom.setZoomScale(b+.2):t.keyCode===r.KeyEvent.DOM_VK_SUBTRACT&&r.BookZoom.setZoomScale(b-.2)}function R(){return{width:window.innerWidth-(window.innerWidth-e.parent().width()),height:window.innerHeight-(window.innerHeight-e.parent().height())}}function gt(t){t.preventDefault(),r.config.disableDoubleTapZoomGesture||r.config.disableZoomGesture||!st(t,{doubletap:!0})||!0===o||$(t.target).hasClass("gradient")||(w?nt():P({tapPoint:t.center}))}function mt(){i&&(_t(),i.on("doubletap",gt),i.on("pinchstart pinchmove pinchend pinchcancel",ct),i.on("panstart",at),i.on("panmove",rt),i.on("panend",lt))}function _t(){i&&(i.off("doubletap",gt),i.off("pinchstart pinchmove pinchend pinchcancel",ct),i.off("panstart",at),i.off("panmove",rt),i.off("panend",lt))}function vt(){return y}function N(t){(y=t)==m?b=Number((R().width/D.fit.width).toFixed(2)):y==v&&(b=Number((R().height/D.fit.height).toFixed(2))),b=Math.min(S,Math.max(T,b)),y==m?x.left=-D.fit.width*b/2:y==v&&(x.left=-D.fit.width*b/2,x.top=-D.fit.height*b/2),O(),L(!0),r.send(r.Events.ZOOM_SCALE_DID_CHANGE,b)}function yt(t){t=Number(t),t=Math.min(Math.max(t,T),S);var e=D.fit.width*b,i=D.fit.height*b,n=D.fit.width*t,o=D.fit.height*t;b=t,O({fitPage:!1}),x.left-=(n-e)/2,x.top-=(o-i)/2,L(),l.css({marginLeft:x.left,marginTop:x.top}),r.send(r.Events.ZOOM_VIEW_POSITION_AND_SIZE_DID_CHANGE),_.each(a,function(t){s.fitPage(t)}),r.send(r.Events.ZOOM_SCALE_DID_CHANGE,b)}function wt(){!r.isMobileDevice&&!1===r.config.bookZoom.toggleZoom||!0===o||(w?nt:P)()}function bt(){w||P({zoomInOut:!0}),ht({zoomIn:!0});var t=S*(E.val/E.max),t=Math.max(T,Number(parseFloat(t).toFixed(2)));E.val===E.max?t=S:E.val===E.min&&(t=T),b!==t&&r.BookZoom.setZoomScale(t)}function St(){w||P({zoomInOut:!0}),ht({zoomIn:!1});var t=S*(E.val/E.max),t=Math.max(T,Number(parseFloat(t).toFixed(2)));b!==t&&r.BookZoom.setZoomScale(t)}r.ready(function(){r.config.mobileOnly||(r.CommandManager.registerInternal(r.Commands.TOGGLE_ZOOM,wt),r.CommandManager.registerInternal(r.Commands.ZOOM_IN,bt),r.CommandManager.registerInternal(r.Commands.ZOOM_OUT,St))}),t._initialize=function(){r.config.bookZoom||(r.config.bookZoom={}),_.isUndefined(r.config.bookZoom.zoomInOutStepPercent)?r.config.bookZoom.zoomInOutStepPercent=K=10:K=r.config.bookZoom.zoomInOutStepPercent,s=r.Book,e=s.$getBook(),c=e.parent(),(i=new TT.Hammer.Manager(document.body,{cssProps:{userSelect:"inherit"}})).add(new TT.Hammer.Pan({threshold:0,pointers:0})),i.add(new TT.Hammer.Tap({event:"doubletap",taps:2,threshold:15,posThreshold:50})).recognizeWith([i.get("pan")]),i.add(new TT.Hammer.Pinch({threshold:0})).recognizeWith([i.get("pan")]),r.config.disableZoomGesture&&r.$el.addClass("disable-zoom-gesture"),mt(),I=!(w=!1)},t.activate=P,t.deactivate=nt,t.isActivated=function(){return w},t._setPage=J,t._unsetPage=Q,t.getCurrentScales=function(){return{min:T,zoom:b,max:S}},t.setZoomPercents=function(t){t=t||{},E=_.extend({_default:150,max:200},t)},t.setDragMode=function(t){1==(I=t)?(l.tt_deselect(),l.find(".toast-ctrl").css(B.vendor+"user-select","none"),i.on("pinchstart pinchmove pinchend pinchcancel",ct),i.on("panstart",at),i.on("panmove",rt),i.on("panend",lt)):(l.find(".toast-ctrl").css(B.vendor+"user-select","text"),i.off("pinchstart pinchmove pinchend pinchcancel",ct),i.off("panstart",at),i.off("panmove",rt),i.off("panend",lt)),r.IS_ZOOM_DRAG_MODE=I,r.IS_ZOOM_DRAG_MODE?l.removeClass("grabbing").addClass("grab"):l.removeClass("grab grabbing")},t.setScaleMode=N,t.getScaleMode=vt,t.setZoomScale=yt,t.moveTo=M,t.toggleZoom=wt,t.zoomIn=bt,t.zoomOut=St,t._limitOffset=L,t._bookZoomOffset=function(t){if(!arguments.length)return x;x=t},t._isPageStart=dt,t._isPageEnd=ut,t._isPageStartOrEnd=pt,t._update=O,t.updateLayout=q,t._on=mt,t._off=_t,t.SCALE_MODE_NONE=W,t.SCALE_MODE_HORIZONTAL=m,t.SCALE_MODE_VERTICAL=v,r.BookZoom=t}),define("toast/core/book/BookTransition",["../../core"],function(e){"use strict";function t(t,e){this.book=t,this.configure.call(this,e=e||{}),this.initialize.apply(this,arguments)}return _.extend(t.prototype,Backbone.Events,{initialize:function(t,e){},configure:function(t){t=t||{},this.config=$.extend(!0,this.config,t),e.$bookContainer.removeClass(this.config.transition),e.$bookContainer.addClass(this.config.transition)},updateVisibility:function(){return!1},numberOfPageCache:function(){return 2},navigationInteraction:function(){return!1},canNavigationInteraction:function(){return!0},set:function(t){},layout:function(){},restoreLayoutFromZoomActiveState:function(){return!1},previous:function(t){},next:function(t){},move:function(t){},unset:function(t){}}),t.extend=e.extend,t}),define("toast/core/book/BookFlipPage",["./BookCommon"],function(C){"use strict";var x={init:function(t){return t.gradients&&(t.frontGradient=!0,t.backGradient=!0),this.data({f:{disabled:!1}}),this.flip("options",t),x._addPageWrapper.call(this),this},setData:function(t){var e=this.data();return e.f=$.extend(e.f,t),this},getData:function(){return this.data()},options:function(t){var e=this.data().f;return t?(x.setData.call(this,{opts:$.extend({},e.opts||C.flipOptions,t)}),this):e.opts},z:function(t){var e=this.data().f;return e.opts["z-index"]=t,e.fwrapper.css({"z-index":t||parseInt(e.parent.css("z-index"),10)||0}),this},_cAllowed:function(){return C.corners[this.data().f.opts.corners]||this.data().f.opts.corners},_cornerActivated:function(t,e){if(void 0===t.originalEvent&&!e)return!1;if(!1===C.corners.activated)return!1;if(!(t=C.isTouch?t.originalEvent.touches:[t]).length)return!1;var e=this.data().f,i=e.parent.offset(),n=this.width(),o=this.height(),e=e.opts.cornerSize,t={x:Math.max(0,t[0].pageX-i.left),y:Math.max(0,t[0].pageY-i.top)};if(t.x<=0||t.y<=0||n<=t.x||o<=t.y)return!1;if(t.y<e)t.corner="t";else{if(!(o-e<=t.y))return!1;t.corner="b"}if(t.x<=e)t.corner+="l";else{if(!(n-e<=t.x))return!1;if(Toast.__nextPageMoveLocked__)return!1;t.corner+="r"}i=x._cAllowed.call(this);return-1!=$.inArray(t.corner,i)&&t},_c:function(t,e){return{tl:C.point2D(e=e||0,e),tr:C.point2D(this.width()-e,e),bl:C.point2D(e,this.height()-e),br:C.point2D(this.width()-e,this.height()-e)}[t]},_c2:function(t){return{tl:C.point2D(2*this.width(),0),tr:C.point2D(-this.width(),0),bl:C.point2D(2*this.width(),this.height()),br:C.point2D(-this.width(),this.height())}[t]},_foldingPage:function(t){var e,i=this.data().f.opts;return i.folding||(i.turn?"single"==(e=i.turn.data()).display?1!==e.totalPages&&e.pageObjs[i.next]?e.pageObjs[0]:null:e.pageObjs[i.next]:void 0)},_backGradient:function(){var t=this.data().f,e=t.opts.turn,e=t.opts.backGradient&&(!e||"single"==e.data().display||2!=t.opts.page&&t.opts.page!=e.data().totalPages-1);return e&&!t.bshadow&&(t.bshadow=$("<div/>",C.divAtt(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(t.parent)),e},resize:function(t){var e=this.data().f,i=e.opts.turn,n=this.width(),o=this.height(),s=Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(o,2)));t&&(e.wrapper.css({width:s,height:s}),e.fwrapper.css({width:s,height:s}).children(":first-child").css({width:n,height:o}),e.fpage.css({width:o,height:n}),e.opts.frontGradient&&(TT.isMobileDevice&&"single"==i.data().display?e.ashadow.hide():e.ashadow.css({width:o,height:n})),x._backGradient.call(this))&&e.bshadow.css({width:n,height:o}),e.parent.is(":visible")&&(e.fwrapper.css({top:e.parent.offset().top,left:e.parent.offset().left}),e.opts.turn)&&e.fparent.css({top:-e.opts.turn.offset().top,left:-e.opts.turn.offset().left}),this.flip("z",e.opts["z-index"])},_addPageWrapper:function(){var t,e,i=this.data().f,n=this.parent();i.wrapper||(this.css("left"),this.css("top"),e=this.width(),t=this.height(),Math.round(Math.sqrt(Math.pow(e,2)+Math.pow(t,2))),i.parent=n,i.fparent=i.opts.turn?i.opts.turn.data().fparent:$("#turn-fwrappers"),i.fparent||((e=$("<div/>",{css:{"pointer-events":"none"}}).hide()).data().flips=0,i.opts.turn?(e.css(C.divAtt(-i.opts.turn.offset().top,-i.opts.turn.offset().left,"auto","visible").css).appendTo(i.opts.turn),i.opts.turn.data().fparent=e):e.css(C.divAtt(0,0,"auto","visible").css).attr("id","turn-fwrappers").appendTo($("body")),i.fparent=e),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),i.wrapper=$("<div/>",C.divAtt(0,0,this.css("z-index"))).appendTo(n).prepend(this),i.fwrapper=$("<div/>",C.divAtt(n.offset().top,n.offset().left)).hide().appendTo(i.fparent),i.fpage=$("<div/>",{css:{cursor:"default"}}).appendTo($("<div/>",C.divAtt(0,0,0,"visible")).appendTo(i.fwrapper)),i.opts.frontGradient&&(i.ashadow=$("<div/>",C.divAtt(0,0,1)).appendTo(i.fpage)),x.setData.call(this,i),x.resize.call(this,!0))},_fold:function(o){function t(t,e,i,n){var o=["0","auto"],s=(m-w)*i[0]/100,a=(_-w)*i[1]/100,o={left:o[e[0]],top:o[e[1]],right:o[e[2]],bottom:o[e[3]]},e=90!=n&&-90!=n?T?-1:1:0;i=i[0]+"% "+i[1]+"%",d.css(o).bookTransform(C.rotate(n)+C.translate(t.x+e,t.y,y),i),v.fpage.parent().css(o),v.wrapper.bookTransform(C.translate(-t.x+s-e,-t.y+a,y)+C.rotate(-n),i),v.fwrapper.bookTransform(C.translate(-t.x+p.x+s,-t.y+p.y+a,y)+C.rotate(-n),i),v.fpage.parent().bookTransform(C.rotate(n)+C.translate(t.x+f.x-p.x,t.y+f.y-p.y,y),i),v.opts.frontGradient&&C.gradient(v.ashadow,C.point2D(T?100:0,S?100:0),C.point2D(r.x,r.y),[[c,"rgba(0,0,0,0)"],[.8*(1-c)+c,"rgba(0,0,0,"+.2*h+")"],[1,"rgba(255,255,255,"+.2*h+")"]],3,u),x._backGradient.call(d)&&C.gradient(v.bshadow,C.point2D(T?0:100,S?0:100),C.point2D(l.x,l.y),[[.8,"rgba(0,0,0,0)"],[1,"rgba(0,0,0,"+.3*h+")"],[1,"rgba(0,0,0,0)"]],3)}var r,l,c,s,h,d=this,a=0,u=0,p=C.point2D(0,0),f=C.point2D(0,0),g=C.point2D(0,0),m=this.width(),_=this.height(),e=x._foldingPage.call(this),v=(Math.tan(u),this.data().f),y=v.opts.acceleration,w=v.wrapper.height(),b=x._c.call(this,o.corner),S="t"==o.corner.substr(0,1),T="l"==o.corner.substr(1,1),E=function(){var t=C.point2D(b.x?b.x-o.x:o.x,b.y?b.y-o.y:o.y),e=Math.atan2(t.y,t.x),i=(u=C.A90-e,a=C.deg(u),n=C.point2D(T?m-t.x/2:o.x+t.x/2,t.y/2),u-Math.atan2(n.y,n.x)),i=Math.max(0,Math.sin(i)*Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)));if(g=C.point2D(i*Math.sin(u),i*Math.cos(u)),u>C.A90&&(g.x=g.x+Math.abs(g.y*Math.tan(e)),g.y=0,Math.round(g.x*Math.tan(C.PI-u))<_))return o.y=Math.sqrt(Math.pow(_,2)+2*n.x*t.x),S&&(o.y=_-o.y),E();u>C.A90&&(i=C.PI-u,e=w-_/Math.sin(i),p=C.point2D(Math.round(e*Math.cos(i)),Math.round(e*Math.sin(i))),T&&(p.x=-p.x),S)&&(p.y=-p.y),s=Math.round(g.y/Math.tan(u)+g.x);var n=m-s,t=n*Math.cos(2*u),e=n*Math.sin(2*u),i=(f=C.point2D(Math.round(T?n-t:s+t),Math.round(S?e:_-e)),s=n*Math.sin(u),x._c2.call(d,o.corner)),t=Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2));return h=t<m?t/m:1,v.opts.frontGradient&&(c=100<s?(s-100)/s:0,r=C.point2D(s*Math.sin(C.A90-u)/_*100,s*Math.cos(C.A90-u)/m*100),S&&(r.y=100-r.y),T)&&(r.x=100-r.x),x._backGradient.call(d)&&(l=C.point2D(s*Math.sin(u)/m*100,s*Math.cos(u)/_*100),T||(l.x=100-l.x),S||(l.y=100-l.y)),g.x=Math.round(g.x),g.y=Math.round(g.y),!0};switch(o.corner){case"tl":o.x=Math.max(o.x,1),E(),t(g,[1,0,0,1],[100,0],a),v.fpage.bookTransform(C.translate(-_,-m,y)+C.rotate(90-2*a),"100% 100%"),e.bookTransform(C.rotate(90)+C.translate(0,-_,y),"0% 0%");break;case"tr":o.x=Math.min(o.x,m-1),E(),t(C.point2D(-g.x,g.y),[0,0,0,1],[0,0],-a),v.fpage.bookTransform(C.translate(0,-m,y)+C.rotate(2*a-90),"0% 100%"),e.bookTransform(C.rotate(270)+C.translate(-m,0,y),"0% 0%");break;case"bl":o.x=Math.max(o.x,1),E(),t(C.point2D(g.x,-g.y),[1,1,0,0],[100,100],-a),v.fpage.bookTransform(C.translate(-_,0,y)+C.rotate(2*a-90),"100% 0%"),e.bookTransform(C.rotate(270)+C.translate(-m,0,y),"0% 0%");break;case"br":o.x=Math.min(o.x,m-1),E(),t(C.point2D(-g.x,-g.y),[0,1,1,0],[0,100],a),v.fpage.bookTransform(C.rotate(90-2*a),"0% 0%"),e.bookTransform(C.rotate(90)+C.translate(0,-_,y),"0% 0%")}v.point=o},_moveFoldingPage:function(t){var e=this.data().f,i=x._foldingPage.call(this);i&&(t?e.fpage.children()[e.ashadow?"1":"0"]||(x.setData.call(this,{backParent:i.parent()}),e.fpage.prepend(i)):e.backParent&&e.backParent.prepend(i))},_showFoldedPage:function(e,t){var i,n=x._foldingPage.call(this),o=this.data(),s=o.f;s.opts.turn;if((!s.point||s.point.corner!=e.corner)&&s.opts.next){var a=$.Event("start");if(this.trigger(a,[s.opts,e.corner,t]),this.__out=!1,a.isDefaultPrevented())return!1}return!!n&&(t?(i=this,a=s.point&&s.point.corner==e.corner?s.point:x._c.call(this,e.corner,1),this.animatef({from:[a.x,a.y],to:[e.x,e.y],duration:500,frame:function(t){e.x=Math.round(t[0]),e.y=Math.round(t[1]),x._fold.call(i,e)}})):(x._fold.call(this,e),o.effect&&!o.effect.turning&&this.animatef(!1)),s.fwrapper.is(":visible")||(s.fparent.show().data().flips++,x._moveFoldingPage.call(this,!0),s.fwrapper.show(),s.bshadow&&s.bshadow.show()),!0)},hide:function(){var t=this.data().f,e=(t.opts.turn,x._foldingPage.call(this));return 0==--t.fparent.data().flips&&t.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).bookTransform("","0% 100%"),t.wrapper.bookTransform("","0% 100%"),t.fwrapper.hide(),t.bshadow&&t.bshadow.hide(),e.bookTransform("","0% 0%"),this},hideFoldedPage:function(t){var e,i,n,o,s,a,r=this.data().f;r.point&&(e=this,i=r.point,n=function(){r.point=null,e.flip("hide"),e.trigger("end",[!1])},t?(o=x._c.call(this,i.corner),t="t"==i.corner.substr(0,1)?Math.min(0,i.y-o.y)/2:Math.max(0,i.y-o.y)/2,s=C.point2D(i.x,i.y+t),a=C.point2D(o.x,o.y-t),this.animatef({from:0,to:1,frame:function(t){t=C.bezier(i,s,a,o,t);i.x=t.x,i.y=t.y,x._fold.call(e,i)},complete:n,duration:800,hiding:!0})):(this.animatef(!1),n()))},turnPage:function(e){var i=this,t=this.data().f,n=(e={corner:t.corner?t.corner.corner:e||x._cAllowed.call(this)[0]},t.point||x._c.call(this,e.corner,t.opts.turn?t.opts.turn.data().opts.elevation:0)),o=x._c2.call(this,e.corner);Toast.IS_ZOOM?this.trigger("flip").trigger("end",[!0]):this.trigger("flip").animatef({from:0,to:1,frame:function(t){t=C.bezier(n,n,o,o,t);e.x=t.x,e.y=t.y,x._showFoldedPage.call(i,e)},complete:function(){i.trigger("end",[!0])},duration:t.opts.duration,turning:!0}),t.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},_eventStart:function(t){var e=this.data().f,i=e.opts.turn;if(x._cornerActivated.call(this,t)&&(e.pressed=!0),!e.corner&&!e.disabled&&!this.flip("isTurning")&&e.opts.page==i.data().pagePlace[e.opts.page]){if(e.corner=x._cornerActivated.call(this,t),e._startCorner={x:e.corner.x,y:e.corner.y},Toast.IS_TURNING=!1,e.corner&&x._foldingPage.call(this,e.corner))return x._moveFoldingPage.call(this,!0),this.trigger("pressed",[e.point]),!1;e.corner=null}},_eventMove:function(t){var e,i,n=this.data().f,o=n.opts.turn;if(!n.disabled){if(t=C.isTouch?t.originalEvent.touches:[t],n.corner)return e=n.parent.offset(),n.corner.x=t[0].pageX-e.left,n.corner.y=t[0].pageY-e.top,e=Math.max(Math.abs(n._startCorner.x-n.corner.x),Math.abs(n._startCorner.y-n.corner.y)),!n.flipping&&5<e&&(Toast.IS_TURNING=!0,n.flipping=!0),x._showFoldedPage.call(this,n.corner),!1;if(!this.data().effect&&this.is(":visible")){if(i=x._cornerActivated.call(this,t[0]))return e=x._c.call(this,i.corner,n.opts.cornerSize),i.x=e.x,i.y=e.y,e=n.parent.offset(),o.data()._rolloverCorner={x:t[0].pageX-e.left,y:t[0].pageY-e.top},Toast.IS_TURNING=!0,x._showFoldedPage.call(this,i,!0),!1;x.hideFoldedPage.call(this,!0)}else if(!n.corner){if((i=x._cornerActivated.call(this,t[0]))||this.__out)return!this.data().effect;o=$.Event("out");this.trigger(o,[n.opts]),this.__out=!0,x.hideFoldedPage.call(this,!0)}}},_eventEnd:function(t){var e,i,n,o,s,a=this.data().f,r=a.opts.turn;!a.disabled&&a.point?(s=$.Event("released"),e=x._cornerActivated.call(this,t,!0),this.trigger(s,[a.point,!!e]),s.isDefaultPrevented()||(Toast.isMobile&&(s=$.Event("out"),this.trigger(s,[a.opts])),x.hideFoldedPage.call(this,!0))):a.corner&&a.pressed&&(e=x._cornerActivated.call(this,t,!0),o=0,(r=r.data()._rolloverCorner)&&(t=C.isTouch?t.originalEvent.touches:[t],i=a.parent.offset(),n=t[0].pageX-i.left,t=t[0].pageY-i.top,o=Math.max(Math.abs(r.x-n),Math.abs(r.y-t))),e)&&o<a.opts.cornerSize&&(x._showFoldedPage.call(this,e,!1),s=$.Event("released"),this.trigger(s,[e,!0]),s.isDefaultPrevented()||x.hideFoldedPage.call(this,!1)),a.corner=null,a.pressed=null,a._startCorner=null,a.flipping=!1,Toast.IS_TURNING=!1},disable:function(t){return x.setData.call(this,{disabled:t}),this}};return x}),define("toast/core/book/BookFlipManager",["./BookCommon","./BookFlipPage"],function(r,o){"use strict";var a={init:function(t){void 0!==r.has3d&&null!==r.has3d||(r.has3d="WebKitCSSMatrix"in window||"MSCSSMatrix"in window||"MozPerspective"in document.body.style,r.vendor=r.getPrefix()),!1===t.cover&&"double"===t.display&&this.prepend($("<div />",{class:"Oops"}));var e,i=this.data(),n=this.children().not(".__lock__");if(t=$.extend({width:this.width(),height:this.height()},r.turnOptions,t),i.opts=t,i.pageObjs={},i.pages={},i.pageWrap={},i.pagePlace={},i.pageMv=[],i.totalPages=t.pages||0,t.when)for(e in t.when)r.has(e,t.when)&&this.bind(e,t.when[e]);for(this.css({width:t.width,height:t.height}),this.turn("display",t.display),e=0;e<n.length;e++)this.turn("addPage",n[e],e+1);return this.prepend($("<div />",{class:"book-shadow"})),this.turn("page",t.page),r.corners=$.extend({},r.corners,t.corners),$(document).bind(r.events.start,function(t){if(!Toast.__destroy__&&!Toast.IS_ZOOM&&($(t.target).closest(".book").length?Toast.__noFlip__=!1:Toast.__noFlip__=!0,!Toast.__noFlip__))for(var e in i.pages)if(r.has(e,i.pages)&&!1===o._eventStart.call(i.pages[e],t))return r.isTouch}).bind(r.events.move,function(t){if(!Toast.__destroy__&&!Toast.IS_ZOOM&&!Toast.__noFlip__)for(var e in i.pages)!r.has(e,i.pages)||!1!==o._eventMove.call(i.pages[e],t)||r.isTouch||t.stopPropagation()}).bind(r.events.end,function(t){if(!Toast.__destroy__&&!Toast.IS_ZOOM)if(Toast.__noFlip__)Toast.__noFlip__=!1;else for(var e in i.pages)r.has(e,i.pages)&&o._eventEnd.call(i.pages[e],t)}),i.done=!0,this},addPage:function(t,e){var i,n=!1,o=this.data(),s=o.totalPages+1;if(e){if(e==s)e=s,n=!0;else if(s<e)throw new Error('It is impossible to add the page "'+e+'", the maximum value is: "'+s+'"')}else e=s,n=!0;return 1<=e&&e<=s&&(i="double"==o.display?e%2?" odd":" even":"",o.done&&this.turn("stop"),e in o.pageObjs&&a._movePages.call(this,e,1),n&&(o.totalPages=s),o.pageObjs[e]=$(t).addClass("page p"+e+i),a._addPage.call(this,e),o.done&&this.turn("update"),a._removeFromDOM.call(this)),this},_addPage:function(t){var e,i,n=this.data(),o=n.pageObjs[t];o&&(a._necessPage.call(this,t)?(n.pageWrap[t]||(e="double"==n.display?this.width()/2:this.width(),i=this.height(),o.css({width:e,height:i}),n.pagePlace[t]=t,n.pageWrap[t]=$("<div/>",{class:"page-wrapper",page:t,css:{position:"absolute",overflow:"hidden",width:e,height:i}}).css(r.pagePosition["double"==n.display?t%2:0]),this.append(n.pageWrap[t]),n.pageWrap[t].prepend(n.pageObjs[t]),!0===n.opts.shadow&&0===n.pageObjs[t].children(".shadow").length&&(o=$("<div/>",{class:"shadow"}),n.pageObjs[t].append(o)),this.trigger("addPage",t)),t&&1!=a._setPageLocation.call(this,t)||a._makeFlip.call(this,t)):(n.pagePlace[t]=0,n.pageObjs[t]&&n.pageObjs[t].remove()))},hasPage:function(t){return t in this.data().pageObjs},_makeFlip:function(t){var e,i,n=this.data();return n.pages[t]||n.pagePlace[t]!=t||(i=t%2,!1==(e="single"==n.display)&&!1===n.opts.cover&&2===t?n.pages[t]=n.pageObjs[t].css({width:e?this.width():this.width()/2,height:this.height()}).flip({page:t,next:null,turn:this,duration:n.opts.duration,acceleration:n.opts.acceleration,corners:e?"all":i?"forward":"backward",cornerSize:n.opts.cornerSize,backGradient:n.opts.gradients,frontGradient:n.opts.gradients}):(n.pages[t]=n.pageObjs[t].css({width:e?this.width():this.width()/2,height:this.height()}).flip({page:t,next:(!e||t!==n.totalPages)&&(i||e)?t+1:t-1,turn:this,duration:n.opts.duration,acceleration:n.opts.acceleration,corners:e?"all":i?"forward":"backward",cornerSize:n.opts.cornerSize,backGradient:n.opts.gradients,frontGradient:n.opts.gradients}).flip("disable",n.disabled).bind("pressed",a._pressed).bind("released",a._released).bind("cornerReleased",a._cornerReleased).bind("start",a._start).bind("end",a._end).bind("out",a._out).bind("flip",a._flip),1!==t&&t!==n.totalPages||"double"!=n.display||!0!==n.opts.cover||n.pageObjs[t].parents(".page-wrapper").addClass("cover")),a._setPageLocation.call(this,t)),n.pages[t]},_makeRange:function(){var t,e,i=this.data();if(!(i.totalPages<1))for(t=(e=this.turn("range"))[0];t<=e[1];t++)a._addPage.call(this,t)},range:function(t){var e,i,n,o=this.data();if(t=t||o.tpage||o.page||1,n=a._view.call(this,t),t<1||t>o.totalPages)throw new Error('"'+t+'" is not a valid page');return n[1]=n[1]||n[0],1<=n[0]&&n[1]<=o.totalPages?(t=Math.floor((r.pagesInDOM-2)/2),o.totalPages-n[1]>n[0]?i=2*t-(e=Math.min(n[0]-1,t)):e=2*t-(i=Math.min(o.totalPages-n[1],t))):(e=r.pagesInDOM-1,i=r.pagesInDOM-1),[Math.max(1,n[0]-e),Math.min(o.totalPages,n[1]+i)]},_necessPage:function(t){var e;return 0===t||t>=(e=this.turn("range"))[0]&&t<=e[1]},_removeFromDOM:function(){var t,e=this.data();for(t in e.pageWrap)r.has(t,e.pageWrap)&&!a._necessPage.call(this,t)&&(this.trigger("removePage",t),a._removePageFromDOM.call(this,t))},_removePageFromDOM:function(t){var e,i=this.data();i.pages[t]&&((e=i.pages[t].data()).f&&e.f.fwrapper&&e.f.fwrapper.remove(),i.pages[t].removeData(),i.pages[t].remove(),delete i.pages[t]),i.pageObjs[t]&&i.pageObjs[t].remove(),i.pageWrap[t]&&(i.pageWrap[t].remove(),delete i.pageWrap[t]),a._removeMv.call(this,t),delete i.pagePlace[t]},removePage:function(t){var e=this.data();return e.pageObjs[t]&&(this.turn("stop"),a._removePageFromDOM.call(this,t),delete e.pageObjs[t],a._movePages.call(this,t,-1),e.totalPages=e.totalPages-1,e.page>e.totalPages?(e.page=null,a._fitPage.call(this,e.totalPages)):(a._makeRange.call(this),this.turn("update"))),this},_movePages:function(t,o){function e(t){var e=t+o,i=e%2,n=i?" odd ":" even ";s.pageObjs[t]&&(s.pageObjs[e]=s.pageObjs[t].removeClass("page"+t+" odd even").addClass("page"+e+n)),s.pagePlace[t]&&s.pageWrap[t]&&(s.pagePlace[e]=e,s.pageWrap[e]=s.pageWrap[t].css(r.pagePosition[a?0:i]).attr("page",e),s.pages[t]&&(s.pages[e]=s.pages[t].flip("options",{page:e,next:a||i?e+1:e-1,corners:a?"all":i?"forward":"backward"})),o)&&(delete s.pages[t],delete s.pagePlace[t],delete s.pageObjs[t],delete s.pageWrap[t],delete s.pageObjs[t])}var i,s=this.data(),a="single"==s.display;if(0<o)for(i=s.totalPages;t<=i;i--)e(i);else for(i=t;i<=s.totalPages;i++)e(i)},display:function(t){var e=this.data(),i=e.display;if(t){if(-1==$.inArray(t,r.displays))throw new Error('"'+t+'" is not a value for display');return"single"==t?e.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),e.pageObjs[0]=$("<div />",{class:"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)):e.pageObjs[0]&&(this.turn("stop").css({overflow:""}),e.pageObjs[0].remove(),delete e.pageObjs[0]),e.display=t,i&&(e=this.turn("size"),a._movePages.call(this,1,0),this.turn("size",e.width,e.height).turn("update")),this}return i},animating:function(){return 0<this.data().pageMv.length},disable:function(t){var e,i=this.data(),n=this.turn("view");for(e in i.disabled=void 0===t||!0===t,i.pages)r.has(e,i.pages)&&i.pages[e].flip("disable",!!i.disabled||-1==$.inArray(parseInt(e,10),n));return this},disabled:function(t){return void 0===t?!0===this.data().disabled:(t&&this.turn("stop"),this.turn("disable",t))},getData:function(){return this.data()},size:function(t,e){if(t&&e){this.turn("stop");var i,n=this.data(),o="double"==n.display?t/2:t;for(i in this.css({width:t,height:e}),n.pageObjs[0]&&n.pageObjs[0].css({width:o,height:e}),n.pageWrap)r.has(i,n.pageWrap)&&(n.pageObjs[i].css({width:o,height:e}),n.pageWrap[i].css({width:o,height:e}),n.pages[i])&&n.pages[i].css({width:o,height:e});return this.turn("resize"),this}return{width:this.width(),height:this.height()}},resize:function(){var t,e=this.data();for(e.pages[0]&&(e.pageWrap[0].css({left:-this.width()}),e.pages[0].flip("resize",!0)),t=1;t<=e.totalPages;t++)e.pages[t]&&e.pages[t].flip("resize",!0)},_removeMv:function(t){for(var e=this.data(),i=0;i<e.pageMv.length;i++)if(e.pageMv[i]==t)return e.pageMv.splice(i,1),!0;return!1},_addMv:function(t){var e=this.data();a._removeMv.call(this,t),e.pageMv.push(t)},_view:function(t){var e=this.data();return t=t||e.page,"double"==e.display?t%2?[t-1,t]:[t,t+1]:[t]},view:function(t){var e=this.data(),t=a._view.call(this,t);return"double"==e.display?[0<t[0]?t[0]:0,t[1]<=e.totalPages?t[1]:0]:[0<t[0]&&t[0]<=e.totalPages?t[0]:0]},stop:function(){var t,e,i=this.data(),n=i.pageMv;for(t in i.pageMv=[],i.tpage&&(i.page=i.tpage,delete i.tpage),n)r.has(t,n)&&(e=i.pages[n[t]].data().f.opts,o._moveFoldingPage.call(i.pages[n[t]],null),i.pages[n[t]].flip("hideFoldedPage"),i.pagePlace[e.next]=e.next,e.force)&&(e.next=e.page%2==0?e.page-1:e.page+1,delete e.force);return this.turn("update"),this},pages:function(t){var e=this.data();if(t){if(t<e.totalPages){for(var i=t+1;i<=e.totalPages;i++)this.turn("removePage",i);this.turn("page")>t&&this.turn("page",t)}return e.totalPages=t,this}return e.totalPages},_fitPage:function(t){var e=this.data(),i=e.opts,n=this.turn("view",t);e.page!=t&&(this.trigger("turning",[t,n]),-1!=$.inArray(i.firstPage,n)&&this.trigger("first"),-1!=$.inArray(e.totalPages,n))&&this.trigger("last",t),e.pageObjs[t]&&(e.tpage=t,this.turn("stop"),a._removeFromDOM.call(this),a._makeRange.call(this),this.trigger("turned",[t,n]),this.is(":visible")||this.show())},_turnPage:function(t){var e,i,n=this.data(),o=this.turn("view"),s=this.turn("view",t);n.page!=t&&(this.trigger("turning",[t,s]),-1!=$.inArray(1,s)&&this.trigger("first"),-1!=$.inArray(n.totalPages,s))&&this.trigger("last"),n.pageObjs[t]&&(n.tpage=t,this.turn("stop"),a._makeRange.call(this),"single"==n.display?(e=o[0],i=s[0]):o[1]&&t>o[1]?(e=o[1],i=s[0]):o[0]&&t<o[0]&&(e=o[0],i=s[1]),n.pages[e])&&(t=n.pages[e].data().f.opts,n.tpage=i,t.next!=i&&(t.next=i,n.pagePlace[i]=t.page,t.force=!0),"single"==n.display?n.pages[e].flip("turnPage",s[0]>o[0]?"br":"bl"):n.pages[e].flip("turnPage"))},page:function(t){var e=this.data();return void 0!==t&&0<(t=parseInt(t,10))&&t<=e.totalPages?((e.done&&-1==$.inArray(t,this.turn("view"))?a._turnPage:a._fitPage).call(this,t),this):e.page},next:function(){var t=this.data();return this.turn("page",a._view.call(this,t.page).pop()+1)},previous:function(){var t=this.data();return this.turn("page",a._view.call(this,t.page).shift()-1)},_addMotionPage:function(){var t=$(this).data().f.opts,e=t.turn,i=e.data();t.pageMv=t.page,a._addMv.call(e,t.pageMv),i.pagePlace[t.next]=t.page,e.turn("update")},_start:function(t,e,i,n){var o=e.turn.data();if(t.stopPropagation(),e.next&&1<=e.next&&e.next<=o.totalPages){var s=$.Event("start");if(e.turn.trigger(s,[e,i,n]),s.isDefaultPrevented())return void t.preventDefault()}"single"==o.display&&(n="l"==i.charAt(1),1==e.page&&n||e.page==o.totalPages&&!n?t.preventDefault():n?(e.next=e.next<e.page?e.next:e.page-1,e.force=!0):e.next=e.next>e.page?e.next:e.page+1),a._addMotionPage.call(this)},_end:function(t,e){var i=$(this).data().f.opts,n=i.turn,o=n.data();t.stopPropagation(),e||o.tpage?o.tpage!=i.next&&o.tpage!=i.page||(delete o.tpage,a._fitPage.call(n,o.tpage||i.next,!0)):(n.turn("stop"),i.next&&1<=i.next&&i.next<=o.totalPages&&(t=$.Event("end"),i.turn.trigger(t,[i])))},_out:function(t,e){t.stopPropagation();e.turn.data();t=$.Event("out");e.turn.trigger(t)},_pressed:function(t){var e,i=$(this).data().f,n=i.opts.turn,o=n.data().pages;for(e in o)e!=i.opts.page&&o[e].flip("disable",!0);t.stopPropagation();t=$.Event("pressed");return n.trigger(t),i.time=(new Date).getTime()},_released:function(t,e,i){var n=$(this),o="l"==e.corner.charAt(1),s=n.data().f,a=s.opts.turn,r=(a.data(),!1),l=(t.stopPropagation(),s.flipping?("single"==a.data().display?(o&&e.x>Math.floor(n.width()/2)||!o&&e.x<Math.floor(n.width()/2))&&(r=!0):(e.x<0||e.x>n.width()/2)&&(r=!0),r&&(t.preventDefault(),a.data().tpage=s.opts.next,l=a.data().page>s.opts.next?$.Event("goPrevious"):$.Event("goNext"),a.trigger(l,[{silent:!0}]),a.turn("update"),$(n).flip("turnPage"))):i&&(t.preventDefault(),a.data().page!=s.opts.next)&&(l=o?$.Event("goPrevious"):$.Event("goNext"),a.trigger(l)),$.Event("released"));a.trigger(l)},_flip:function(){var t=$(this).data().f.opts;t.turn.trigger("turn",[t.next])},calculateZ:function(t){for(var e,i,n,o=this,s=this.data(),a=this.turn("view"),r=a[0]||a[1],l={pageZ:{},partZ:{},pageV:{}},c=function(t){t=o.turn("view",t);t[0]&&(l.pageV[t[0]]=!0),t[1]&&(l.pageV[t[1]]=!0)},h=0;h<t.length;h++)e=t[h],n=s.pages[e].data().f.opts.next,i=s.pagePlace[e],c(e),c(n),n=s.pagePlace[n]==n?n:e,l.pageZ[n]=s.totalPages-Math.abs(r-n),l.partZ[i]=2*s.totalPages+Math.abs(r-n);return l},update:function(){var t,e,i=this.data();if(i.pageMv.length&&0!==i.pageMv[0]){var n=this.turn("calculateZ",i.pageMv),o=this.turn("view",i.tpage);for(t in i.pagePlace[o[0]]==o[0]?o[0]:i.pagePlace[o[1]]==o[1]&&o[1],i.pageWrap)r.has(t,i.pageWrap)&&(i.pageWrap[t].css({display:n.pageV[t]?"":"none","z-index":n.pageZ[t]||0}),i.pages[t])&&(i.pages[t].flip("z",n.partZ[t]||null),n.pageV[t]&&i.pages[t].flip("resize"),i.tpage)&&i.pages[t].flip("disable",!0)}else for(t in i.pageWrap)r.has(t,i.pageWrap)&&(e=a._setPageLocation.call(this,t),i.pages[t])&&i.pages[t].flip("disable",i.disabled||1!=e).flip("z",null)},_setPageLocation:function(t){var e=this.data(),i=this.turn("view");return t==i[0]||t==i[1]?(e.pageWrap[t].css({"z-index":e.totalPages,display:""}),1):"single"==e.display&&t==i[0]+1||"double"==e.display&&t==i[0]-2||t==i[1]+2?(e.pageWrap[t].css({"z-index":e.totalPages-1,display:""}),2):(e.pageWrap[t].css({"z-index":0,display:"none"}),0)},options:function(t){var e,i,n,o=this.data(),s=o.opts;if(s.display!==t.display){for(a.stop.call(this),!1===(s=$.extend(o.opts,t)).cover&&"double"===s.display?(t=o.totalPages,o.pageObjs[1]&&!o.pageObjs[1].hasClass("Oops")&&(n=$("<div />",{class:"Oops"}),this.prepend(n),this.turn("addPage",n,1),t==o.totalPages&&o.totalPages++,o.page%2==0?o.page+=1:o.page+=2)):o.pageObjs[1]&&o.pageObjs[1].hasClass("Oops")?(o.page%2==0?--o.page:o.page-=2,a.removePage.call(this,1)):!0===s.cover&&o.page%2!=0&&--o.page,o.page=Math.max(1,o.page),o.page=Math.min(o.page,o.totalPages),o.pageObjs[1]&&o.pageObjs[1].hasClass("Oops")?s.firstPage=2:s.firstPage=1,this.turn("display",o.opts.display),e=(i=this.turn("range"))[0];e<=i[1];e++)r.has(e,o.pageWrap)&&a._necessPage.call(this,e)&&(this.trigger("removePage",e),a._removePageFromDOM.call(this,e));for(this.turn("page",o.page),1!==o.page&&o.page!==o.totalPages||"double"!=o.display||!0!==o.opts.cover||o.pageObjs[o.page].parents(".page-wrapper").addClass("cover"),e=(i=this.turn("range"))[0];e<=i[1];e++)r.has(e,o.pageWrap)&&a._necessPage.call(this,e)&&o.pageObjs[e].find(".loader").remove()}},clear:function(){var t=this.data();this.children();this.turn("stop");for(var e=t.totalPages;0<e;e--)t.fparent&&(t.fparent.remove(),t.fparent=null),a.removePage.call(this,e)},reset:function(t){var e,i=this.data(),n=this.children().not(".__lock__");i.opts;for(i.opts=_.extend(i.opts,t),(i.done=!1)===i.opts.cover&&"double"===i.opts.display&&this.prepend($("<div />",{class:"Oops"})),this.turn("display",i.opts.display),e=0;e<n.length;e++)this.turn("addPage",n[e],e+1);this.prepend($("<div />",{class:"book-shadow"})),this.turn("page",t.page),i.done=!0}};return a}),define("toast/core/book/BookFlipTransition",["./BookCommon","./BookTransition","./BookFlipManager","./BookFlipPage"],function(i,t,e,n){"use strict";var o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{initialize:function(t,e){o.initialize.call(this,t,e),!0===e.pageFlipSound&&(t=Toast.isNative||Toast.urlParams.get("preview")?"{APP_DIR}assets/media/page-flip.mp3":"{ASSETS_DIR}media/page-flip.mp3",t=TT.StringUtils.replaceTemplate(t),this.$pageFlipSound=$('<audio src="'+t+'" style="z-index:99999" />'),this.$pageFlipSound.on("loadeddata",function(t){this.isReadyPageFlipAudio=!0}.bind(this)),this.$pageFlipSound.load()),this.initializeFlip(),this._setCornerLayers()},configure:function(t){o.configure.call(this,t);var t=this.book.$getBook(),e=t.turn("getData");this.$bookShadow=t.children(".book-shadow"),!0===t.turn("getData").done&&0<e.totalPages&&(this.book.isLastPage()&&(e=this.book.getCurrentPageNumber(),_.each(e,function(t){this.book._unloadPage(t)},this)),t.turn("options",{display:this.config.display}),this._loadPages(),this.layout(),this._setCornerLayers())},initializeFlip:function(){var s=this,a=this.config;this.addPages=[],this.previousPage=-1,this.book.$getBook().turn({display:this.config.display,elevation:!Toast.isMobileDevice&&a.transitionConfig.elevation||50,cover:this.config.cover,shadow:this.config.shadow,page:!1===this.config.cover&&"double"===this.config.display?2:1,firstPage:!1===this.config.cover&&"double"===this.config.display?2:1,gradients:!0,acceleration:!0,cornerSize:60,corners:Toast.config.corners,duration:a.transitionConfig.duration||(Toast.isMobileDevice?350:400),when:{start:function(t,e,i,n){var o=$(this).data();s._loadPages(),!0===a.cover&&s.book.isDoublePage()&&(1===e.next||2===e.next?s.$bookShadow.css({width:"50%",left:"",right:0}):e.next===o.totalPages&&o.totalPages%2==0?s.$bookShadow.css({width:"50%",right:""}):e.next===o.totalPages-1&&o.totalPages%2==0&&s.$bookShadow.css({width:"50%",right:"",left:0})),!0===n&&(tt.$el.addClass("flipping"),s.book._addOverlay()),Toast.isMobileDevice&&!s.book.isDoublePage()&&s.book.$getBook().css({overflow:"hidden"}),n?Toast.send(Toast.Events.FLIP_CORNER_START_ANIMATE):Toast.send(Toast.Events.TRANSITION_START)},out:function(t){s.book._removeOverlay(),tt.$el.removeClass("flipping"),Toast.send(Toast.Events.TRANSITION_OUT)},pressed:function(t){tt.$el.addClass("flipping"),Toast.send(Toast.Events.TRANSITION_PRESSED)},released:function(t,e){},first:function(){s._loadPages()},last:function(){s._layout()},goPrevious:function(t,e){e=e||{},Toast.$el.removeClass("flipping"),s.book._removeOverlay(),e.silent?(s._playFlipSound(),s.book.turnByUserAction("previous")):Toast.BookZoom.isActivated()||Toast.CommandManager.execute(Toast.Commands.PREVIOUS_PAGE)},goNext:function(t,e){e=e||{},Toast.$el.removeClass("flipping"),s.book._removeOverlay(),e.silent?(s._playFlipSound(),s.book.turnByUserAction("next")):Toast.BookZoom.isActivated()||Toast.CommandManager.execute(Toast.Commands.NEXT_PAGE)},turning:function(t,e,i){},turn:function(t,e){var i=$(this).data();e=s._getCurrentPage(i,e),s._loadPages(),s._layout(),s.book._updateElements(),s.book._sendPageChangeEvent(Toast.Events.WILL_MOVE_PAGE,s.book.getCurrentPageNumber({page:e}),s.previousPage)},turned:function(t,e){var i=$(this).data();e=s._getCurrentPage(i,e),s.book._sendPageChangeEvent(Toast.Events.PAGE_DID_CHANGE,s.book.getCurrentPageNumber({page:e}),s.previousPage),s.previousPage=e},end:function(t,e){!0===a.cover&&s.book.isDoublePage()?s.$bookShadow.css({width:"",right:""}):Toast.isMobileDevice&&!s.book.isDoublePage()&&s.book.$getBook().css({overflow:""}),Toast.send(Toast.Events.TRANSITION_END)},addPage:function(t,e){var i=$(this).data().opts.firstPage-1,i=(s.addPages.push(e-=i),Toast.Book.views[e-1]);1<s.book.getTotalPageNumber()&&!_.isUndefined(i)&&i.state()===Toast.STATUS_NONE&&0===i.$el.parent().find(".indigator").length&&Toast.showLoading(!0,{modal:!1,el:i.$el.parent()})},removePage:function(t,e){var i=$(this).data().opts.firstPage-1;s.book._unloadPage(e-=i)}}}),this.$bookShadow=this.book.$getBook().children(".book-shadow"),this.layout()},_getCurrentPage:function(t,e){return e-=t.opts.firstPage-1,this.book.isDoublePage()&&(Toast.config.cover?this.previousPage>e&&1<e&&(e-=e%2?1:0):e-=e%2?0:1),e},_loadPages:function(){this.addPages=this.addPages.slice(Math.max(0,this.addPages.length-i.pagesInDOM));var e=this.book.getCurrentPageNumber(),t=_.find(this.addPages,function(t){return t==e[0]});_.isUndefined(t)&&this.book._loadPage(e[0]),1!=e.length&&(t=_.find(this.addPages,function(t){return t==e[1]}),_.isUndefined(t))&&this.book._loadPage(e[1]),_.each(this.addPages,function(t){this.book._loadPage(t)},this),this.addPages=[]},updateVisibility:function(){return!0},set:function(){},layout:function(){o.layout.call(this);var t=this.book.$getBook();t.turn("getData").done&&t.turn("size",t.width(),t.height()),this._layout()},_layout:function(){"center"==this.config.coverLayout&&this._coverCenterLayout(),this._updateCoverClassName()},_updateCoverClassName:function(){this._isCover()?(TT.$bookContainer.addClass("cover"),TT.$el.addClass("cover"),this.book.isLastPage()?(TT.$bookContainer.removeClass("front-cover"),TT.$bookContainer.addClass("back-cover"),TT.$el.removeClass("front-cover"),TT.$el.addClass("back-cover")):this.book.isFirstPage()&&(TT.$bookContainer.removeClass("back-cover"),TT.$bookContainer.addClass("front-cover"),TT.$el.removeClass("back-cover"),TT.$el.addClass("front-cover"))):TT.$bookContainer.hasClass("cover")&&(TT.$bookContainer.removeClass("cover front-cover back-cover"),TT.$el.removeClass("cover front-cover back-cover"))},_isCover:function(){return!(!0!==this.config.cover||!this.config.doublepage)&&(this.book.getCurrentPageIndex()<=0||!(!this.book.isLastPage()||this.book.getTotalPageNumber()%2!=0))},_coverCenterLayout:function(){var t=Number(Toast.$book.attr("data-left")),e=Toast.$bookContainer.children(".book-bg"),i=this.config;this._isCover()?(i.useBackground&&e.hide(),this.book.isLastPage()?Toast.$book.css("left",t+TT.$book.width()/4+"px"):Toast.$book.css("left",t-TT.$book.width()/4+"px")):Toast.$bookContainer.hasClass("cover")&&(Toast.$book.css("left",t+"px"),i.useBackground)&&e.show()},previous:function(t){this.book.$getBook().turn("previous"),t.silent||this._playFlipSound()},next:function(t){this.book.$getBook().turn("next"),t.silent||this._playFlipSound()},move:function(t){var e=this.book.$getBook(),i=t.page-1,e=(1<=i&&this.config.doublepage?(i*=2,!1===this.config.cover&&this.config.doublepage&&(i+=2)):i+=1,!1===this.config.cover&&this.config.doublepage&&(i=Math.max(2,i)),e.turn("page",i),e.turn("getData"));this._getCurrentPage(e,i),t.silent||this._playFlipSound()},_setCornerLayers:function(){var t;!1!==i.corners.activated&&((t=this.book.$getBook()).children(".cl").remove(),$("<div />",{class:"cl cl-lt"}).appendTo(t),$("<div />",{class:"cl cl-lb"}).appendTo(t),$("<div />",{class:"cl cl-rt"}).appendTo(t),$("<div />",{class:"cl cl-rb"}).appendTo(t))},unset:function(){this.book.$getBook().children(".cl").remove()},_playFlipSound:function(t){Toast.isMobileDevice||Toast.IS_ZOOM||(!0===t||!0===this.config.pageFlipSound&&!0===this.isReadyPageFlipAudio)&&void(this.$pageFlipSound[0].currentTime=0)!==(t=this.$pageFlipSound[0].play())&&"function"==typeof t.then&&t.then(function(){}).catch(function(t){})}}),t}),define("toast/core/book/BookSlideTransition",["./BookTransition"],function(t){"use strict";var i=t.prototype,t=t.extend();return _.extend(t.prototype,i,{initialize:function(t,e){i.initialize.call(this,t,e)},configure:function(t){i.configure.call(this,t),this._initFlick()},_initFlick:function(){this._beforeFlickStartFn||(this._beforeFlickStartFn=$.proxy(this._beforeFlickStart,this)),this._flickFn||(this._flickFn=$.proxy(this._flick,this)),this._flickEndFn||(this._flickEndFn=$.proxy(this._flickEnd,this)),this._flick=new eg.Flicking(".book",{duration:300,circular:!1,bounce:[50,50],defaultIndex:Math.max(0,this.book.getCurrentPageIndex())}).on({beforeFlickStart:this._beforeFlickStartFn,flick:this._flickFn,flickEnd:this._flickEndFn}),this.config.disablePageMoveGesture&&this._flick.disableInput(),$(this._flick.$container).addClass("container"),this.layout()},numberOfPageCache:function(){return 3},navigationInteraction:function(){return!0},canNavigationInteraction:function(){return!this._flicking},_beforeFlickStart:function(t){var e;this._flicking=!0,this._silent||this._byButtonInteraction||(eg.Flicking.DIRECTION_LEFT===t.direction?e=this._flick.getNextIndex():eg.Flicking.DIRECTION_RIGHT===t.direction&&(e=this._flick.getPrevIndex()),t=this.book.getCurrentPageNumber({pageIndex:e}),this.book.updatePageNo(t[0]),this.set(),this.book._sendPageChangeEvent(Toast.Events.WILL_MOVE_PAGE,this.book.getCurrentPageNumber()))},_flick:function(t){var e;Toast.IS_SLIDING=this._flicking=!0,this._silent||(eg.Flicking.DIRECTION_LEFT===t.direction?e=this._flick.getNextIndex():eg.Flicking.DIRECTION_RIGHT===t.direction&&(e=this._flick.getPrevIndex()),e=this.book.getCurrentPageNumber({pageIndex:e}),this.book._movable(e[0])||(this._flicking=this._silent=this._byButtonInteraction=!1,t.stop()),t.holding?this._distance=t.distance:this._distance&&this._flick.options.threshold>Math.abs(this._distance)&&this._resetFlickVars())},_flickEnd:function(t){this.stopped||this._silent||this._byButtonInteraction||this.book._sendPageChangeEvent(Toast.Events.PAGE_DID_CHANGE,this.book.getCurrentPageNumber()),this._resetFlickVars()},_resetFlickVars:function(){this._flicking&&Toast.IS_SLIDING&&(this._resetTimeout&&clearTimeout(this._resetTimeout),this._resetTimeout=setTimeout(function(){Toast.IS_SLIDING=!1,clearTimeout(this._resetTimeout)},10)),this._flicking=this._silent=this._byButtonInteraction=!1},set:function(t){var n,o,s=Toast.BookZoom.isActivated();this.book.isDoublePage()&&(n=this.book.$getBook(),(o=this.book._getBestSize()).width/=2,_.each(this.book.getVisiblePages(),function(t){var e,i=this.book.views[t-1];if(_.isUndefined(i)||i.state()===Toast.STATUS_NONE)return!0;e=t%2?n.width()/2-o.width:n.width()/2,s?i.$el.parent().css({left:"",width:"",height:""}):this.book.getTotalPageNumber()===t&&t%2?(i.$el.parent().addClass("right-blank-page"),i.$el.parent().css({left:e,width:2*o.width,height:o.height})):i.$el.parent().css({left:e,width:o.width,height:o.height})},this))},unset:function(){this.set(),this._flick&&(this._flick.off(),Toast.isMobileDevice&&this._flick.destroy(),delete this._flick,this._flick=null),this._resetFlickVars(),this._beforeFlickStartFn&&delete this._beforeFlickStartFn,this._flickFn&&delete this._flickFn,this._flickEndFn&&delete this._flickEndFn},layout:function(){var t=Toast.BookZoom.isActivated();t||this.book.$getBook().css({left:0,top:0,width:"100%",height:"100%"}),this._flick&&(this._silent=!0,t||this._flick.resize(),this._silent=this._flicking=!1),this.set()},updatePresent:function(){var t=this._flick.getIndex(),e=$(this.book.getPages()[t]),e=(e.removeClass("past future"),e.addClass("present"),e.css("display","block"),this.book.getPages()[t-1]),e=(e&&((e=$(e)).removeClass("present future"),e.addClass("past"),e.css("display","block")),this.book.getPages()[t+1]);e&&((t=$(e)).removeClass("present past"),t.addClass("future"),t.css("display","block"))},restoreLayoutFromZoomActiveState:function(t){},previous:function(t){this._flick&&(this._byButtonInteraction=!0,"hidden"===Toast.topWindow().document.visibilityState?this._flick.prev(0):this._flick.prev())},next:function(t){this._flick&&(this._byButtonInteraction=!0,"hidden"===Toast.topWindow().document.visibilityState?this._flick.next(0):this._flick.next())},move:function(t){this._flick&&(this._silent=!0,this._flick.moveTo(t.page-1,0),this._silent=!1)}}),t}),define("toast/core/book/BookTranslucentSlideTransition",["./BookSlideTransition"],function(t){"use strict";var i=t.prototype,t=t.extend();return _.extend(t.prototype,i,{initialize:function(t,e){i.initialize.call(this,t,e)},configure:function(t){i.configure.call(this,t),Toast.isMobileDevice||this.book.$getBook().closest(".book-container").addClass("visible-cache-page")},layout:function(){var t,e=Toast.BookZoom.isActivated();Toast.isMobileDevice&&(t=this.book.$getBook().closest(".book-container"),Toast.isLandscape()?t.addClass("visible-cache-page"):t.removeClass("visible-cache-page")),this._flick&&(e||this._flick.resize(),this._flicking=!1),this.set()}}),t}),define("toast/core/book/BookFadeTransition",["./BookTransition"],function(t){"use strict";var i=t.prototype,t=t.extend();return _.extend(t.prototype,i,{initialize:function(t,e){i.initialize.call(this,t,e)},configure:function(t){i.configure.call(this,t)},set:function(t){this.book.layout()},resize:function(){this.set()},previous:function(t){this.set(t)},next:function(t){this.set(t)},move:function(t){this.set(t)}}),t}),define("toast/core/book/Book.jquery.plugin",["./BookCommon","./BookFlipPage","./BookFlipManager"],function(n,i,e){"use strict";function o(t,e,i){if(i[0]&&"object"!=typeof i[0]){if(e[i[0]]&&"_"!=i[0].toString().substr(0,1))return e[i[0]].apply(t,Array.prototype.slice.call(i,1));throw i[0]+" is an invalid value"}return e.init.apply(t,i)}$.extend($.fn,{flip:function(t,e){return o(this,i,arguments)},turn:function(t){return o(this,e,arguments)},bookTransform:function(t,e){var i={};return e&&(i[n.vendor+"transform-origin"]=e),i[n.vendor+"transform"]=t,i.transform=t,this.css(i)},animatef:function(i){var n=this.data();if(n.effect&&clearInterval(n.effect.handle),i){i.to.length||(i.to=[i.to]),i.from.length||(i.from=[i.from]),i.easing||(i.easing=function(t,e,i,n,o){return n*Math.sqrt(1-(e=e/o-1)*e)+i});for(var o=[],s=i.to.length,a=this,r=i.fps||30,l=-r,t=function(){var t,e=[];for(l=Math.min(i.duration,l+r),t=0;t<s;t++)e.push(i.easing(1,l,i.from[t],o[t],i.duration));i.frame(1==s?e[0]:e),l==i.duration&&(clearInterval(n.effect.handle),delete n.effect,a.data(n),i.complete)&&i.complete()},e=0;e<s;e++)o.push(i.to[e]-i.from[e]);n.effect=i,n.effect.handle=setInterval(t,r),this.data(n),t()}else delete n.effect}})}),define("toast/core/book/Book",["exports","../../core","../../utils/iNoBounce","./BookCommon","./BookZoom","./BookFlipTransition","./BookSlideTransition","./BookTranslucentSlideTransition","./BookFadeTransition","./Book.jquery.plugin"],function(r,l,t,e,n,z,F,H,W){"use strict";var c,s,h,d,a,o,u={},p=[],f=[],g=-1,m=0,v=-1,y=-1,w=0,b=[],i=0,S=!1,T=!0,E=null,C={startX:0,startY:0,count:0,captured:!1,threshold:l.isMobileDevice?40:100},V=(new Date).getTime(),G=!1,j=null,x=!0,A={left:0,right:0,top:0,bottom:0},I={},Y={},X="true"===l.urlParams.get("disableAutoHeight")||"1"===l.urlParams.get("disableAutoHeight");function K(){var t,e,i;u.history&&(t="/",i=u.reversePageTurnDirection?(i=B().total+u.firstPageNumber-B().current,Math.max(u.firstPageNumber,i-(N().length-1))):B().current,s&&"string"==typeof(e=(e=s.attr("id"))&&(e=e.toLowerCase()).replace(/[^a-zA-Z0-9\-\_\:\.]/g,""))&&e.length?t="/"+e:0<=m&&(t+=i),window.location.hash=t)}function Z(t){if(!G&&l.urlParams.get("startpage")){var e=parseInt(l.urlParams.get("startpage"));if(-1===m||e!==N()[0])return void(R(e,{isLogical:!0}),G=!0)}var i=window.location.hash.slice(2).split("/"),e=parseInt(i[0],10);_.isNaN(e)&&(e=Ht(1)),-1!==m&&e===N()[0]||R(e,{isLogical:!0})}function q(t){var e=l.topWindow();l.Popovers.hideAll(),(l.isMobileDevice?Q:(!l.IS_ZOOM||I.width===e.innerWidth&&I.height===e.innerHeight||n.updateLayout(),U))(),I={width:e.innerWidth,height:e.innerHeight}}function J(t){t||l.lazy(function(){Q()},50)}function Q(t){k(),U(),t&&!0===t.orientationChanged&&!l.config.mobileOnly&&(l.config.setDefaultFitWidth||l.config.bookZoom.defaultScaleMode)&&(l.config.setDefaultFitWidth?this.pageFit("screen-width"):this.pageFit(l.config.bookZoom.defaultScaleMode))}function tt(t){if(n.isActivated()){if(!$(t.target).closest(".book-container").length)return;5<Date.now()-i&&(i=Date.now(),0<(t.detail||-t.wheelDelta)?n.moveTo("down",150):n.moveTo("up",150))}var e;u.disablePageMoveGesture||!0===T&&0===$(".modal.in").length&&((e=$(t.target)).hasClass("book-container")||0!==e.closest(".book-container").length)&&!e.hasClass("prevent-scroll")&&0===e.closest(".prevent-scroll").length&&500<Date.now()-i&&(i=Date.now(),0<(t.detail||-t.wheelDelta)?l.optionalGoToNextPage():l.optionalGoToPreviousPage())}function et(t){if(0===$(".modal.in").length&&!l.isInputBoxFocused()&&(t.target&&t.target.blur(),!u.disablePageMoveGesture))if(l.IS_ZOOM)switch(t.keyCode){case l.KeyEvent.DOM_VK_PAGE_UP:300<Date.now()-i&&(i=Date.now(),l.optionalGoToPreviousPage());break;case l.KeyEvent.DOM_VK_PAGE_DOWN:300<Date.now()-i&&(i=Date.now(),l.optionalGoToNextPage());break;case l.KeyEvent.DOM_VK_SPACE:t.shiftKey?l.optionalGoToPreviousPage():l.optionalGoToNextPage()}else if(!0===T)switch(t.keyCode){case l.KeyEvent.DOM_VK_PAGE_UP:case l.KeyEvent.DOM_VK_LEFT:300<Date.now()-i&&(i=Date.now(),l.optionalGoToPreviousPage());break;case l.KeyEvent.DOM_VK_PAGE_DOWN:case l.KeyEvent.DOM_VK_RIGHT:300<Date.now()-i&&(i=Date.now(),l.optionalGoToNextPage());break;case l.KeyEvent.DOM_VK_HOME:l.config.reversePageTurnDirection?l.executeCommand(l.Commands.LAST_PAGE):l.executeCommand(l.Commands.FIRST_PAGE);break;case l.KeyEvent.DOM_VK_END:l.config.reversePageTurnDirection?l.executeCommand(l.Commands.FIRST_PAGE):l.executeCommand(l.Commands.LAST_PAGE);break;case l.KeyEvent.DOM_VK_SPACE:t.shiftKey?l.optionalGoToPreviousPage():l.optionalGoToNextPage()}}function it(){return l.IS_VERTICAL_SCROLLING||(_.isUndefined(T)&&(T=!0),!l.IS_PAINTER_ACTIVATED&&T&&!l.IS_ZOOM&&!l.IS_DRAGGING&&!l.IS_DRAWING&&!l.IS_TURNING&&!l.IS_SLIDING)}function nt(t,e){C.isTouched=!0,C.startX=e.startX,C.startY=e.startY,C.count=e.count,C.elapsedTime=Date.now()}function ot(t,e){if(C.isTouched){if(!l.isMobileDevice){if(t.target.firstChild&&3===t.target.firstChild.nodeType)return void(C.isTouched=!1);if(Date.now()-C.elapsedTime<50)return;C.elapsedTime=Date.now()}C.captured||0===$(t.target).closest(".book-container").length||(t=e.x,e=e.y,t=t-C.startX,e=e-C.startY,t>C.threshold&&Math.abs(t)>Math.abs(e)?(C.captured=!0,"flip"===u.transition&&!0===c.turn("getData").opts.pressed||l.executeCommand(l.Commands.PREVIOUS_PAGE)):t<-C.threshold&&Math.abs(t)>Math.abs(e)&&(C.captured=!0,"flip"!==u.transition||!0!==c.turn("getData").opts.pressed)&&l.executeCommand(l.Commands.NEXT_PAGE))}}function st(t){C.captured&&t.preventDefault(),C.isTouched=!1,C.captured=!1}function at(t){it()&&"INPUT"!==t.target.tagName&&nt(0,{startX:t.pageX,startY:t.pageY,count:1})}function rt(t){it()&&ot(t,{x:t.pageX,y:t.pageY})}function lt(t){st(t)}function ct(t){it()&&nt(0,{startX:t.originalEvent.touches[0].clientX,startY:t.originalEvent.touches[0].clientY,count:t.originalEvent.touches.length})}function ht(t){it()&&1===t.originalEvent.touches.length&&2!==C.count&&ot(t,{x:t.originalEvent.touches[0].clientX,y:t.originalEvent.touches[0].clientY})}function dt(t){st(t)}function ut(t){var e,i;(new Date).getTime()-V<300&&(t=t,(i=$(t.target)).closest(".open").length||!i.closest(".disabled").length&&(e=i.closest("[command]"),i.attr("command")||e.length||(e=i.closest(".toast-object"),i.hasClass("toast-object"))||e.length)||t.preventDefault()),V=(new Date).getTime()}function pt(t){var e,i=$(t.target);i.closest(".auto-scrollbar").length||(e=i.closest("[command]"),i.attr("command"))||e.length||l.IS_DRAGGING||t.preventDefault()}function ft(t){C.isTouched||0===$(document.body).children(".dialog, .modal").length&&l.lazyOnce(function(){k(),U()},150,Y)}function gt(){}function mt(){l.isAndroid?l.lazy(function(){k(),U()},1e3):(k(),U())}function k(){var t,e;l.isMobileDevice&&!X&&(t=l.topWindow(),e=$(t).scrollTop(),$("html").css("top",e),e=l.config.frameNavbarHeight||0,$("html").css("height",t.innerHeight-e))}function _t(t,e){var i,n=p[t-1];_.isUndefined(n)||(n.state()!==l.STATUS_LOADED||0===n.$el.children().length&&!n._hasBackgroundImage()?(i=l.project.models[t-1],n.load(i.toJSON(),{showLoader:!0,readyonly:!0}),-1==b.indexOf(t)&&(b.push(t),b.sort(function(t,e){return t-e})),jt(t),l.send(l.Events.PAGE_DID_LOAD,t)):(n.needLayout||e&&e.alwaysFit)&&jt(t))}function vt(t){var e=p[t-1];_.isUndefined(e)||(e.reset(),(b=_.without(b,t)).sort(function(t,e){return t-e}),l.send(l.Events.PAGE_DID_UNLOAD,t))}function yt(){for(var t=h.numberOfPageCache(),e=[],i=Math.max(0,m-(t-1));i<Math.min(f.length,m+t);i++){var n=i;!0===S&&(n*=2),e.push(n+1),!0===S&&(n=Math.min(w,n+2))!==i&&e.push(n)}var o=_.difference(b,e);_.each(o,function(t){var e,i;e=(t=t)-1,!0===S&&(e/=2),(i=$(f[e])).removeClass("present future past"),m<e?i.addClass("future"):e<m&&i.addClass("past"),i.css("display","none"),vt(t)}),_.each(e,function(t){var e,i;e=(t=t)-1,!0===S&&(e/=2),(i=$(f[e])).removeClass("present future past"),m<e?i.addClass("future"):e<m&&i.addClass("past"),i.css("display","block"),_t(t,{alwaysFit:!0})}),_.isUndefined(s)||(s.removeClass("present"),_.isEmpty(s.attr("class"))&&s.removeAttr("class")),(s=$(f[m])).removeClass("past future"),s.addClass("present")}function D(e,i,t){var n=[],o=(_.each(i,function(t){t=p[t-1];_.isUndefined(t)||n.push(t)}),[]);if(-1!==g&&g!==m&&(t=Ut(3!==arguments.length?{pageIndex:g}:{page:t}),_.each(t,function(t){var e=p[t-1];_.isUndefined(e)||-1==i.indexOf(t)&&o.push(e)})),!_.isEmpty(n)){switch(l.common.setActivePopupMenu(null),_.each(n,function(t){switch(t.current(!0),e){case l.Events.WILL_MOVE_PAGE:t.willAppear();break;case l.Events.PAGE_DID_CHANGE:t.appear()}}),_.each(o,function(t){switch(t.current(!1),e){case l.Events.WILL_MOVE_PAGE:t.willDisappear();break;case l.Events.PAGE_DID_CHANGE:t.disappear()}}),e){case l.Events.WILL_MOVE_PAGE:case l.Events.PAGE_DID_CHANGE:M()}l.send(e,N(),w,n)}}function wt(t){if(void 0===t)return u;_.isEmpty(u)&&(o=!1,"flip"!==l.config.transition||_.isUndefined(l.config.useCoverPage)||(o=l.config.useCoverPage),e=l.config.reversePageTurnDirection?l.project.models.length-1:0,e={history:!(e={width:Math.floor(l.project.models[e].width),height:Math.floor(l.project.models[e].height)}),mouseWheel:!0,minScale:.2,maxScale:6,transition:"flip",display:l.config.doublepage?"double":"single",pageSize:e,cover:o,pageFlipSound:!!_.isUndefined(l.config.pageFlipSound)||l.config.pageFlipSound,coverLayout:"center",transitionConfig:{}},"true"===(o=l.$bookContainer.children(".book-bg")).attr("data-use-book-background")&&(e.coverBackground=o.attr("data-background-color")),u=e);var e,i,n,o=!1;u.doublepage!==t.doublepage&&-1!==m&&(g=-1,e=N()[0],t.doublepage?("flip"===u.transition&&!1===u.cover&&(m-=e%2==0?1:0),m=Math.floor(m/2),"flip"===u.transition&&!0===u.cover&&(m+=e%2==0?1:0)):("flip"===u.transition&&!1===u.cover&&(m+=e%2==0?1:0),m=Math.floor(2*m),"flip"===u.transition&&!0===u.cover&&(m-=e%2==0?1:0)),m=Math.max(0,Math.min(w-1,m)),o=!0),l.config=u=_.merge(u,t),l.config.history=u.history=u.usePageHistory,l.config.display=l.config.doublepage?"double":"single",r._isFlipTransition=x="flip"===u.transition,S=u.doublepage?(l.$el.addClass("doublepage"),c.addClass("doublepage"),!0):(l.$el.removeClass("doublepage"),c.removeClass("doublepage"),!1),u.bookSize={width:S?2*u.pageSize.width:u.pageSize.width,height:u.pageSize.height},(n=l.contentStorage.findWhere({id:"lastMaxPageIndex"}))&&n.get("doublepage")!==u.doublepage&&(i=N()[0],u.doublepage?("flip"===u.transition&&!1===u.cover&&(v-=i%2==0?1:0),v=Math.floor(v/2),"flip"===u.transition&&!0===u.cover&&(v+=i%2==0?1:0)):("flip"===u.transition&&!1===u.cover&&(v+=i%2==0?1:0),v=Math.floor(2*v),"flip"===u.transition&&!0===u.cover&&(v-=i%2==0?1:0)),v=Math.max(0,Math.min(w-1,v)),n.set("doublepage",u.doublepage),n.set("lastMaxPageIndex",v),l.contentStorage.updateItem(n)),h&&!1===h.updateVisibility()&&(i=c.children().first().hasClass("container")?c.children().first():c,f=i.children("section"),w=i.children("section").find(".toast-ctrl").length,yt()),o&&D(l.Events.WILL_MOVE_PAGE,N()),h&&(h.configure(u),o)&&((t={page:m+1,direction:null}).prev=1===t.page?null:t.page-1,t.next=t.page===w?null:t.page+1,h.set(t)),TT.$el.hasClass("has-book-bg")&&TT.$el.removeClass("has-book-bg"),0===(d=$(".book-bg")).length||!0!==x||l.isMobileDevice&&!l.isLandscape()?u.useBackground=!1:_.isUndefined(u.coverBackground)||_.isEmpty(u.coverBackground)||(u.useBackground=!0),!0===u.useBackground&&!0===u.useBackground&&(d.css("background",u.coverBackground),n={left:Number(d.attr("data-offset-left")),right:Number(d.attr("data-offset-right")),top:Number(d.attr("data-offset-top")),bottom:Number(d.attr("data-offset-bottom"))},A=l.isMobileDevice?{left:parseInt(n.left/1.3),right:parseInt(n.right/1.3),top:parseInt(n.top/1.5),bottom:parseInt(n.bottom/1.5)}:n,l.$el.addClass("has-book-bg")),U(),_.each(b,function(t){t=p[t-1];_.isUndefined(t)||t.state()!==l.STATUS_NONE||0!==t.$el.parent().find(".indigator").length&&l.showLoading(!1,{modal:!1,el:t.$el.parent()})}),o&&(O(),D(l.Events.PAGE_DID_CHANGE,N()))}function bt(t){if(h&&h.unset(),_.isUndefined(t)&&(t=l.config.doublepage),_.each(p,function(t){t.reset()}),r.$el=c=l.$book,r.el=c[0],c.children().not(".__lock__").remove(),b=[],p=[],r.views=p,"flip"===TT.config.transition)for(var e=0;e<TT.project.models.length;e++){var i=TT.project.models[e],n=$("<section />"),o=$("<div />",{id:i.id,class:"toast-ctrl","data-index":e});n.append(o),c.append(n),(a=new TT.ViewController({el:o}))._state=l.STATUS_NONE,a.index=e,p.push(a)}else for(e=0;e<TT.project.models.length;e++){var s,a,i=TT.project.models[e],n=$("<section />",{page:e+1}),o=$("<div />",{id:i.id,class:"toast-ctrl","data-index":e});(a=new TT.ViewController({el:o}))._state=l.STATUS_NONE,a.index=e,p.push(a),t?((s=$("<div />",{class:"wrapper"})).append(o),n.append(s)):n.append(o),t&&e+1<TT.project.models.length&&(i=TT.project.models[e+1],o=$("<div />",{id:i.id,class:"toast-ctrl","data-index":e+1}),(s=$("<div />",{class:"wrapper"})).append(o),n.append(s),(a=new TT.ViewController({el:o}))._state=l.STATUS_NONE,a.index=e+1,p.push(a),e++),c.append(n)}}function St(t){bt((t=t||{}).doublepage);var e=c.children().first().hasClass("container")?c.children().first():c;f=e.children("section"),w=c.children("section").find(".toast-ctrl").length,l.isMobileDevice&&(k(),l.lazyOnce(function(){var t=l.topWindow();I.height!==t.innerHeight&&(k(),U())},100,Y)),wt(t)}function Tt(){var t;!0===Rt()?l.DialogBar.present({content:l.config.reversePageTurnDirection?l.Strings.ALERT_LAST_PAGE:l.Strings.ALERT_FIRST_PAGE,autoDismiss:!0,dismissInterval:3e3,middle:!0,textCenter:!0,width:320,theme:"black-translucent"}):(l.DialogBar.dismiss({animate:!1}),t=N()[0]-1,Mt(t="double"===u.display&&(--t,!0===u.cover)?Math.max(1,t):t))}function Et(){var t;!0===Nt()?l.DialogBar.present({content:l.config.reversePageTurnDirection?l.Strings.ALERT_FIRST_PAGE:l.Strings.ALERT_LAST_PAGE,autoDismiss:!0,dismissInterval:3e3,middle:!0,textCenter:!0,width:320,theme:"black-translucent"}):(l.DialogBar.dismiss({animate:!1}),t=N()[0]+1,"double"===u.display&&("flip"!==u.transition||!1===u.cover||!0===u.cover&&!0!==Rt())&&(t+=1),Mt(t))}function Ct(){Mt(1)}function xt(){Mt(w)}function $t(t){var e;P(),l.isMobileDevice?l.InputBar.isPresent()||l.InputBar.present({maxWidth:320}).done(function(t){R(t,{isLogical:!0,silent:!1})}):((e=TT.$el.find('[command="moveToUserInputPage"]:focus')).length?(TT.$currentPagelabel=e.find(".label-page"),TT.$currentPageInput=e.find(".input-page")):(TT.$currentPagelabel=TT.$pagelabel,TT.$currentPageInput=TT.$pageInput),TT.$currentPagelabel.hide(),TT.$currentPageInput.show(),TT.$currentPageInput.focus(),TT.$currentPageInput.on("focusout",P),TT.$currentPageInput.on("keydown",It),l._msieVersion&&l._msieVersion<10&&$(document).on("click",At))}function P(){$(document).off("click",At),TT.$pageInput.off("focusout",P),TT.$pageInput.off("keydown",It),TT.$pagelabel.show(),TT.$pageInput.val(""),TT.$pageInput.hide()}function At(t){$(t.target).hasClass("background")&&P()}function It(t){t.keyCode==l.KeyEvent.DOM_VK_RETURN&&(t.stopPropagation(),t.preventDefault(),t=$(t.target).val(),P(),_.isEmpty(t)||R(t=t.replace(/<\/?[^>]+(>|$)/g,""),{isLogical:!0,silent:!1}))}function kt(){Dt(!u.doublepage)}function Dt(t){l.send(l.Events.WILL_DISPLAY_PAGE);var e,i=u.doublepage;"flip"!==u.transition&&(e=b,_.each(e,function(t){!0===i&&(t*=2),vt(t),!0===i&&vt(t+1)}),bt(t)),wt({doublepage:t}),t?l.$toggleDoublePage.addClass("active"):l.$toggleDoublePage.removeClass("active"),l.send(l.Events.DOUBLEPAGE_DID_CHANGE,t)}function Pt(){return S}function O(){var t=Bt(),t=(l.config.continuePageNavigation||(l.$first.tt_disable(),l.$prev.tt_disable(),l.$next.tt_disable(),l.$last.tt_disable(),t.prev&&(l.$first.tt_enable(),l.$prev.tt_enable()),t.next&&(l.$last.tt_enable(),l.$next.tt_enable())),B()),e=(u.reversePageTurnDirection&&(e=t.total+u.firstPageNumber-t.current,t.current=Math.max(u.firstPageNumber,e-(N().length-1))),t.current=Ft(t.current),[t.current]);"double"===u.display&&t.total>=e[0]+1&&(Rt()&&!0===u.cover&&"flip"===u.transition||e.push(t.current+1)),e=e,t=t.total,l.hook.setDisplayPageLabel&&"function"==typeof l.hook.setDisplayPageLabel?l.hook.setDisplayPageLabel(e,t):u.reversePageTurnDirection?l.$pagelabel.text(t+" / "+e[0]):l.$pagelabel.text(e[0]+" / "+t),P()}function Ot(t){arguments.length||(t=(e=l.contentStorage.findWhere({id:"lastMaxPageIndex"}))?e.get("lastMaxPageIndex"):0);var e,t=Math.max(v,t);v!==t&&(v=t,(e=l.contentStorage.findWhere({id:"lastMaxPageIndex"}))?(e.set("lastMaxPageIndex",v),l.contentStorage.updateItem(e)):l.contentStorage.addItem({id:"lastMaxPageIndex",doublepage:u.doublepage,lastMaxPageIndex:v}))}function M(){var t,e;(l.config.pageMoveLimit||l.config.progressPageControl||l.config.minLearnTimeEnable||l.config.learnContentControl)&&l.contentStorage&&(t=N(),_.each(t,function(t){var e,i,t=p[t-1];if((a=l.contentStorage.findWhere({pageID:t.collection.id,progressPageControl:!0}))&&(i=l.contentStorage.filter({pageID:t.collection.id,progressPageControl:!0}),_.each(i,function(t){Zt({id:t.id})||(l.contentStorage.remove(t),e=!0)})),a=e?l.contentStorage.findWhere({pageID:t.collection.id,progressPageControl:!0}):a)return!1}),t=t[t.length-1],t=t,e=Math.max(0,Math.min(w-1,t-1)),u.doublepage&&(e=Math.floor(e/2),"flip"===u.transition)&&!0===u.cover&&(e+=t%2==0?0:1),Math.max(0,Math.min(w-1,e))<v||(l.__nextPageMoveLocked__=!!a))}function L(i,t){var n;return t=t||N(),_.each(t,function(t){if(_.isNull(j)||j<=t){var e=p[t-1],t=_.filter(l.contentStorage.models,function(t){return t.get("pageID")==e.collection.id&&t.get("progressPageControl")});if(t)if(_.find(t,function(t){return!_.isUndefined(t.get(i))}))return!(n=!0)}}),n}function Mt(t,e){if(!(0<=m&&(w<t||t<1))){var i=Math.max(0,Math.min(w-1,t-1));if("double"===u.display&&(i=Math.floor(i/2),"flip"===u.transition)&&!0===u.cover&&(i+=t%2==0?1:0),i!==m&&h.canNavigationInteraction()){if(!e||!e.startPage){if(u.pageMoveLimit&&v<i)return void l.DialogBar.present({autoDismiss:!0,dismissInterval:99999,titleIcon:"fa fa-info-circle",title:l.Strings.ALERT_TITLE,content:"<b>"+l.StringUtils.format(l.Strings.ERROR_NOT_VIEWABLE_PAGE_NUMBER,N({pageIndex:i,isLogical:!0})[0])+"</b>"});if(l.config.progressPageControl){if(v+1<i&&!Lt(N({pageIndex:i})[0]))return void l.DialogBar.present({autoDismiss:!0,dismissInterval:99999,titleIcon:"fa fa-info-circle",title:l.Strings.ALERT_TITLE,content:"<b>"+l.StringUtils.format(l.Strings.ERROR_NOT_VIEWABLE_PAGE_NUMBER,N({pageIndex:i,isLogical:!0})[0])+"</b>"});if(v<i&&a&&L("ended"))return void l.DialogBar.present({autoDismiss:!0,dismissInterval:99999,titleIcon:"fa fa-info-circle",title:l.Strings.ALERT_TITLE,content:"<b>"+l.Strings.ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES+"</b>"})}if(a&&L("learn")&&v<i)return void l.DialogBar.present({autoDismiss:!0,dismissInterval:99999,titleIcon:"fa fa-info-circle",title:l.Strings.ALERT_TITLE,content:"<b>"+l.Strings.ALERT_LEARN_NOT_COMPLETE+"</b>"});if(o&&!L("ended")&&v<i)return void l.DialogBar.present({autoDismiss:!0,dismissInterval:99999,titleIcon:"fa fa-info-circle",title:l.Strings.ALERT_TITLE,content:"<b>"+l.StringUtils.format(l.Strings.ALERT_NOT_PASS_MIN_LEAN_TIME,u.minLearnTime)+"</b>"})}n.isActivated()&&(u.resetBookZoomOnPageChange||l.isMobileDevice&&l.BookZoom.getCurrentScales().zoom<1.2)&&n.deactivate(),_.isNull(E)||Xt(),-1!==m&&(y=N()[0]),g=m,Ot(m=i),u.minLearnTimeEnable&&!isNaN(u.minLearnTime)&&(o&&clearTimeout(o),o=setTimeout(function(){clearTimeout(o),o=null},1e3*u.minLearnTime)),!1===h.updateVisibility()&&yt(),!1!==h.updateVisibility()&&-1!=g||D(l.Events.WILL_MOVE_PAGE,N()),(e=_.extend({},e)).page=i+1,e.prev=1===e.page?null:e.page-1,e.next=e.page===w?null:e.page+1,e.direction=m<g?"left":"right",h.set(e),0==m&&-1==g?h.move(e):g-1===m?h.previous(e):g+1===m?h.next(e):h.move(e),u.history&&K(),!1===h.updateVisibility()?(O(),D(l.Events.PAGE_DID_CHANGE,N())):-1==g&&(g=0,D(l.Events.PAGE_DID_CHANGE,N()))}}}function Lt(t){if(0<=m&&(w<t||t<1))return!1;if(l.config.progressPageControl){if(a)return!1;var e=Math.max(0,Math.min(w-1,t-1));if("double"===u.display&&(e=Math.floor(e/2),"flip"===u.transition)&&!0===u.cover&&(e+=t%2==0?1:0),v<e){for(var i=!0,n=N()[0];n<t;n++){var o=l.project.models[n-1];if(o&&o.contents)if(_.find(o.contents,function(t){if(-1!==t.viewType.indexOf("Player")||-1!==t.viewType.indexOf("Audio")||-1!==t.viewType.indexOf("Video")||-1!==t.viewType.indexOf("LearnControl"))return!0})){i=!1;break}}return i}}return!0}function R(t,e){e=_.extend({isLogical:!1,silent:!0},e);var i=t=isNaN(t)&&(i=l.project.findPage({name:"label",value:t}))?i.index+1:t;!0===e.isLogical&&(i-=u.firstPageNumber-1),u.reversePageTurnDirection&&(i=w+1-i),l.DialogBar.dismiss({animate:!1}),isNaN(Number(t))?e.silent||l.DialogBar.present({titleIcon:"fa fa-exclamation-triangle",autoDismiss:!0,dismissInterval:5e3,title:l.Strings.ERROR,content:"<b>"+l.StringUtils.format(l.Strings.ERROR_NOT_VALID_PAGE_NUMBER,String(t))+"</b>"}):i<1||w<i?e.silent||(i=N()[0],l.lazy(function(){l.DialogBar.present({titleIcon:"fa fa-exclamation-triangle",autoDismiss:!0,dismissInterval:5e3,title:l.Strings.ERROR,content:"<b>"+l.StringUtils.format(l.Strings.ERROR_NOT_VALID_PAGE_NUMBER,t)+"</b>"})},5)):!e.force&&function(e){isNaN(e)||(e=Number(e));return!!_.find(N(),function(t){if(t===e)return!0})}(i)?e.silent||l.DialogBar.present({content:l.Strings.ALERT_PAGE_ALREADY_OPEN,autoDismiss:!0,dismissInterval:3e3,middle:!0,textCenter:!0,width:250,theme:"black-translucent"}):Mt(i,e)}function Rt(){return 0===m||-1===m}function Nt(){return"flip"===u.transition&&S&&!0===u.cover?N()[0]+w%2===w:S&&w%2==0?N()[0]+1===w:N()[0]===w}function Bt(){return{prev:0<m,next:!Nt()}}function N(t){return Ut(_.extend({isLogical:!1,pageIndex:m},t))}function Ut(t){var e,i=[];return(t=_.extend({isLogical:!1,pageIndex:m},t)).page?e=Math.max(1,t.page):(e=Math.max(1,t.pageIndex+1),"double"===u.display&&(e=2*e-1,!0===u.cover)&&"flip"===u.transition&&--e),e=Math.max(1,Math.min(w,e)),t.isLogical?i.push(Ht(e)):i.push(e),"double"===u.display&&e+1<=w&&(1===e&&!0===u.cover&&"flip"===u.transition||(t.isLogical?i.push(Ht(e+1)):i.push(e+1))),i}function zt(){return w}function B(){var t={current:N()[0],total:w},e=u.firstPageNumber-1;return t.current=N()[0]+e,t.total=w+e,t}function Ft(t){return l.hook.getDisplayPageNumber&&"function"==typeof l.hook.getDisplayPageNumber?l.hook.getDisplayPageNumber(t):t}function Ht(t){var e=u.firstPageNumber-1;return u.reversePageTurnDirection?w+1-t+e:t+e}function Wt(){return c.parent().hasClass("cover")}function Vt(){return m}function Gt(){return b}function jt(t,e){var i,t=t instanceof l.ViewController?t:p[t-1];_.isUndefined(t)||t.state()===l.STATUS_NONE||(i=t,l.theme&&l.theme._context.layoutPage&&l.theme._context.layoutPage(r,i))||(t.parentView&&!t.scaleContent?(t.$el.css({width:"100%",height:"100%"}),t.$contents.css({width:"100%",height:"100%"})):t.layout())}function Yt(){var t=c.parent(),e=t.width(),t=t.height(),i={width:u.bookSize.width,height:u.bookSize.height},n=(x||S||(n=p[S?2*m:m])&&(i.width=n.collection.width,i.height=n.collection.height),Math.min(e/i.width,t/i.height)),e=parseInt(i.width*n),t=(e=(e+=e%2)+e/2%2*2,parseInt(i.height*n));return{width:e,height:t+=t%2}}function U(){var t,e,i,n,o,s,a;c&&(l.theme&&l.theme._context.layoutBook&&(s=[],_.each(N(),function(t){t=p[t-1];t&&t.state()!==l.STATUS_NONE&&s.push(t)}),l.theme._context.layoutBook(r,s))||(i=c.parent(),t=(e=Yt()).width,e=e.height,a=parseInt((i.width()-t)/2),a+=a%2,i=parseInt((i.height()-e)/2),c.css({left:a+"px",top:(i+=i%2)+"px",width:t+"px",height:e+"px"}),c.attr({"data-left":a,"data-top":i,"data-width":t,"data-height":e}),u.useBackground?(a=a-A.left,i=i-A.top,n=t+A.left+A.right,o=e+A.top+A.bottom,d.css({left:a+"px",top:i+"px",width:n+"px",height:o+"px"}),d.children().eq(0).css({left:n-(t+A.left+10)+"px",right:n-(t+A.right+10)+"px",top:o-(e+A.top-12)+"px",bottom:o-(e+A.top-12)+"px"}),d.children().eq(1).css({left:n-(t+A.left+8)+"px",right:n-(t+A.right+8)+"px",top:o-(e+A.top-8)+"px",bottom:o-(e+A.top-8)+"px"}),d.children().eq(2).css({left:n-(t+A.left+5)+"px",right:n-(t+A.right+5)+"px",top:o-(e+A.top-5)+"px",bottom:o-(e+A.top-5)+"px"}),d.is(":visible")||d.show()):d.is(":visible")&&d.hide(),_.isUndefined(h))||_.isNull(h)||h.layout(),a=_.difference(N(),b),a=b.concat(a),_.each(a,function(t){jt(t)}))}function Xt(){_.isNull(E)||(E.off("click",Kt),E.remove(),E=null)}function Kt(){E&&(E.off("click",Kt),E.remove(),E=null)}function Zt(e){var i,t=N(),n=[];return _.each(t,function(t){n.push(p[t-1])}),_.each(n,function(t){if(i=t._find(e))return!1}),i}l.ready(function(){l.config.htmlRender||(l.debug||$(document.body).attr("oncontextmenu","return false;"),$("html").attr("ondragstart","event.preventDefault();"),l.topWindow().addEventListener("resize",q,!1),document.addEventListener("keydown",et,!1),u.mouseWheel&&(document.removeEventListener("DOMMouseScroll",tt,!1),document.removeEventListener("mousewheel",tt,!1),document.addEventListener("DOMMouseScroll",tt,!1),document.addEventListener("mousewheel",tt,!1)),u.history&&(window.removeEventListener("hashchange",Z,!1),window.addEventListener("hashchange",Z,!1)),!0===e.isTouch?(u.disablePageMoveGesture||h.navigationInteraction()||($(document).on("touchstart",ct),$(document).on("touchmove",ht),$(document).on("touchend",dt)),$(document).on("touchend",ut),u.mobileOnly||l.$bookContainer.on("touchmove",pt),l.$navbar.on("touchmove",pt),l.$controlbar.on("touchmove",pt),$(document).on("scroll",ft),$(document.body).on(l.Events.SHOWN_DILAOG,gt),$(document.body).on(l.Events.HIDDEN_DILAOG,mt),l.isIOS&&(new t({win:window,doc:document}).enable(),l.on(l.Events.FULLSCREEN_DID_CHANGE,J))):u.disablePageMoveGesture||h.navigationInteraction()||($(document).on("mousedown",at),$(document).on("mousemove",rt),$(document).on("mouseup",lt)),$(document).on("click",function(t){l._.userGestureRequirementForAutoplay=!0}),l.CommandManager.registerInternal(l.Commands.MOVE_TO_USER_INPUT_PAGE,$t),l.CommandManager.registerInternal(l.Commands.PREVIOUS_PAGE,Tt),l.CommandManager.registerInternal(l.Commands.NEXT_PAGE,Et),l.CommandManager.registerInternal(l.Commands.FIRST_PAGE,Ct),l.CommandManager.registerInternal(l.Commands.LAST_PAGE,xt),l.CommandManager.registerInternal(l.Commands.TOGGLE_DOUBLEPAGE,kt),l.CommandManager.registerInternal(l.Commands.DOUBLEPAGE,Dt))}),l.Book=r,l.Book.BookCommon=e,r.start=function(t,e){switch(l.contentStorage.on("change:progressPageControl",M),I={width:window.innerWidth,height:window.innerHeight},g=m=-1,Ot(),l.config=_.extend(l.config,t),St(l.config),_.isUndefined(h)||_.isNull(h)||h.unset(),u.transition){case"slide":h=new F(r,u);break;case"translucent-slide":h=new H(r,u);break;case"fade":h=new W(r,u);break;default:h=new z(r,u)}(_.isUndefined(i)||_.isNull(i))&&(i=function(){var t=l.urlParams.get("startpage");return _.isNaN(t)?null:t}()),(_.isUndefined(i)||_.isNull(i))&&(i=function(){var t=window.location.hash.slice(2).split("/");return t[0]?parseInt(t[0],10):null}()),(_.isUndefined(i)||_.isNull(i))&&(i=_.isUndefined(u.firstPageNumber)?1:u.firstPageNumber),_.isUndefined(l.config.startPage)?l.config.progressPageControl&&(i=_.isUndefined(u.firstPageNumber)?1:u.firstPageNumber):(i=Number(l.config.startPage),j=i),i<u.firstPageNumber?i=u.firstPageNumber:i>B().total&&(i=B().total);var i,t={isLogical:!0,force:!0,init:!0};_.isUndefined(l.config.startPage)||(t.startPage=!0),R(i,t),U(),O(),l.config.mobileOnly||n._initialize(),l.CommandManager.execute(l.Commands.SHOW_INTRO),l.config.mobileOnly||!l.config.setDefaultFitWidth&&!l.config.bookZoom.defaultScaleMode?e():l.config.setDefaultFitWidth?(l.$el.addClass("screen-width"),this.pageFit("screen-width",e)):this.pageFit(l.config.bookZoom.defaultScaleMode,e),l.config.mobileOnly&&l.$el.find('[command="toggleZoom"]').hide()},r.set=St,r.configure=wt,r.reset=function(t){var e;"flip"===u.transition&&c.turn("clear",t),t.page&&(t.page=Math.max(1,Math.min(w,t.page))),St(t),"flip"===u.transition&&(c.turn("reset",{display:u.display,page:t.page}),h.configure(u)),t.page&&(e=!1,_.isUndefined(t.isLogical)&&(e=t.isLogical),m=-1,R(t.page,{isLogical:e})),O()},r.back=function(){-1!==y&&y!==N()[0]&&R(y)},r.previous=Tt,r.next=Et,r.moveToFirst=Ct,r.moveToLast=xt,r.move=R,r._movable=Lt,r.updatePageNo=function(t,e){var i;w<t||t<1||(e=e||{},i=Math.max(0,Math.min(w-1,t-1)),"double"===u.display&&(i=Math.floor(i/2),"flip"===u.transition)&&!0===u.cover&&(i+=t%2==0?1:0),i===m&&!e.force)||(u.resetBookZoomOnPageChange&&n.isActivated()&&n.deactivate(),_.isNull(E)||Xt(),-1!==m&&(y=N()[0]),g=m,Ot(m=i),!1!==h.updateVisibility())||(yt(),O())},r.views=p,r.find=function(e){var i;return l.view?i=l.view._find(e):_.each(p,function(t){if(i=t._find(e))return!1}),i=!i&&l.activePopupSubpage?l.activePopupSubpage.viewController._find(e):i},r.findCurrent=Zt,r.findSubpage=function(e){var i,t=N();return _.each(t,function(t){t=p[t-1];if(t&&(i=t.findSubpage(e)))return!1}),i},r.getCurrentPageNumber=N,r.getTotalPageNumber=zt,r.getLogicalPageNumber=B,r.toLogicalPageNumber=Ht,r.pageFromLogicalPageNumber=function(t){var e=u.firstPageNumber-1;return u.reversePageTurnDirection?w+1-(t-e):t-e},r.getDisplayPageNumber=Ft,r.isFirstPage=Rt,r.isLastPage=Nt,r.isDoublePage=Pt,r.availablePageNavigation=Bt,r.availableCurrentPage=function(t){var e;return!!l.config.htmlRender||(e=N()[0])===t||!("flip"===u.transition&&S&&Rt()&&!0===u.cover||"double"!==u.display||e+1!==t)},r.enableAction=function(t){T=t=0==arguments.length?!0:t,c&&c.turn("disabled",!t)},r.$getBook=function(){return c},r.getCurrentPage=function(e){var i,t,n=[];return"flip"===u.transition?(t=c.turn("view"),i=c.data().pages,_.each(t,function(t){_.isUndefined(i[t])||(t=i[t].closest("[page]"),!0===e&&(t=t.clone(!0,!0)).bookTransform(""),n.push(t))})):!0===e?((t=s.clone(!0,!0)).bookTransform(""),n.push(t)):s&&n.push(s),n},r.isCoverPage=Wt,r.getPages=function(){return f},r.getCurrentPageIndex=Vt,r.getVisiblePages=Gt,r.getBookSize=function(t){var e,i={page:{width:0,height:0},fit:{width:c.width(),height:c.height()}},n=N();return n=!S||1===n.length?p[n[0]-1]:(e=p[n[0]-1],n=p[n[1]-1],Math.max(e.collection.width,e.collection.height)<Math.max(n.collection.width,n.collection.height)?n:e),i.page.width=n.collection.width,i.page.height=n.collection.height,i.page.background=n.collection.background,x&&Wt()&&(i.fit.width/=2),i},r._getBestSize=Yt,r.turnByUserAction=function(t){g=m,"previous"===t?--m:"next"===t&&(m+=1),u.history&&K()},r.fitPage=jt,r.layout=U,r.restoreLayoutFromZoomActiveState=function(t){h.restoreLayoutFromZoomActiveState(t),U()},r._changeSize=Q,r._loadPage=_t,r._unloadPage=vt,r._addOverlay=function(){_.isNull(E)&&(E=c.children(".book-overlay"),_.isUndefined(E[0]))&&(E=$("<div />",{class:"book-overlay"}),c.append(E),E.on("click",Kt))},r._removeOverlay=Xt,r._isFlipTransition=x,r._updateElements=O,r.pageFit=function(t,e){switch(t){case"screen-width":case"screen-height":var i;n.isActivated()?("screen-width"===t?n.setScaleMode(n.SCALE_MODE_HORIZONTAL):"screen-height"===t&&n.setScaleMode(n.SCALE_MODE_VERTICAL),e&&e()):(i=l.Book.getCurrentPageNumber(),l.Async.doInParallel(i,function(t){var e=new $.Deferred;return l.Book.views[t-1].ready(function(){e.resolve()}),e.promise()},!1).done(function(){"screen-width"===t?n.activate({setDefaultFitWidth:!0}):"screen-height"===t&&n.activate({setDefaultFitHeight:!0}),e&&e()}));break;default:n.isActivated()&&n.deactivate(),e&&e()}},r._sendPageChangeEvent=D,r._updateProgressPageControl=M,r._zoomDisabled=function(){var e=!0;return _.each(N(),function(t){t=p[t-1];return!t||(_.isUndefined(t.config().zoomDisabled)||!0!==t.config().zoomDisabled?!(e=!0):void(e=!1))}),!e},r._setLastMaxPage=function(t){var e=Math.max(0,Math.min(w-1,t-1));u.doublepage&&(e=Math.floor(e/2),"flip"===u.transition)&&!0===u.cover&&(e+=t%2==0?0:1),v=Math.max(0,Math.min(w-1,e)),M()},r.checkProgressPageControl=function(){var t;return M(),!!a&&(t=L("ended")?l.Strings.ALERT_CAN_NOT_MOVE_PAGE_UNTIL_PLAYBACK_FINISHES:L("learn")?l.Strings.ALERT_LEARN_NOT_COMPLETE:l.StringUtils.format(l.Strings.ALERT_NOT_PASS_MIN_LEAN_TIME,u.minLearnTime),l.DialogBar.present({autoDismiss:!0,dismissInterval:99999,titleIcon:"fa fa-info-circle",title:l.Strings.ALERT_TITLE,content:"<b>"+t+"</b>"}),!0)}}),define("toast/core2",["./core","./core/Model","./core/Collection","./core/Contents","./core/Project","./core/Assets","./core/Storage","./core/Factory","./core/ViewController","./core/book/Book"],function(t){t.dispatchReady(t.CORE_READY)}),define("toast/dialogs/DefaultDialogs",["exports","../core"],function(t,e){"use strict";t.DIALOG_ID_ERROR="error-dialog",t.DIALOG_ID_INFO="error-dialog",t.DIALOG_ID_SAVE_CLOSE="save-close-dialog",t.DIALOG_ID_OK_CANCEL="ok-cancel-dailog",t.DIALOG_ID_OK="ok-dailog",e.DefaultDialogs=t}),define("toast/dialogs/Dialog",["exports","../core","./DefaultDialogs"],function(t,r,s){"use strict";var l=r.Strings,c="cancel",h="ok",d="btn-primary",u="btn-outline-secondary",p="pull-left",f=1050;function g(t,e){t.data("buttonId",e),t.modal("hide")}function m(t,e,i){var n,o;this._$dlg=t,this._promise=e,i&&(n={isMouseDown:!1,mouseOffset:{}},o=this.getElement(),this.getElement().find(".modal-header").addClass("draggable").on("mousedown",function(t){n.isMouseDown=!0;var e=o.offset();n.mouseOffset={top:t.clientY-e.top,left:t.clientX-e.left}}),this.getElement().on("mouseup mouseleave",function(t){n.isMouseDown=!1}),$(document.body).on("mousemove",{dialog:this},function(t){n.isMouseDown&&o.offset({top:t.clientY-n.mouseOffset.top,left:t.clientX-n.mouseOffset.left})}))}function v(){var t,e,i=$(".modal-inner-wrapper > .instance");0<i.length&&(t=$("body").width(),e=$("body").height(),i.css({"max-width":t,"max-height":e,overflow:"auto"}))}function n(t,e,i){var n=new $.Deferred,o=[],i=i.className;return i===s.DIALOG_ID_OK_CANCEL&&o.push({className:u,id:c,text:l.CANCEL}),o.push({className:d,id:h,text:l.OK}),a(i,e,t,o).done(function(t){t!==c&&t===h?n.resolve(t):n.reject()}),n.promise()}function y(t,n,e,i){void 0===n&&(n=!0);var o=$("<div />",{class:"modal-wrapper"}),s=(i&&o.addClass("modal-wrapper-black"),o.append('<div class="modal-inner-wrapper"></div>'),$("body").append(o),new $.Deferred),i=s.promise(),a=$(t).addClass("instance").appendTo(".modal-inner-wrapper:last");return v(),a.data("promise",i),a.one("hidden.bs.modal",function(){var t=(t=a.data("buttonId"))||c;window.setTimeout(function(){s.resolve(t)},0),a.remove(),$(".modal-wrapper:last").remove()}).one("shown.bs.modal",function(){var t=a.find(".primary:enabled"),e=a.find(".modal-footer .dialog-button:enabled:eq(0)");t.length?t.focus():e.length?e.focus():document.activeElement.blur()}),a.on("click.bs.modal",".dialog-button",function(t){var e,i;e=a,i=$(this).attr("data-button-id"),n?g(e,i):e.triggerHandler("buttonClick",i)}),a.modal({backdrop:"static",show:!0,selector:".modal-inner-wrapper:last",keyboard:!1}).css("z-index",f+1).next().css("z-index",f),f+=2,new m(a,i,e)}function a(t,e,i,n,o,s,a){t={modalClassName:t,title:e||"",content:i||"",buttons:n||[{className:d,id:h,text:l.OK}]};return _.each(n,function(t){t.className&&t.className===p&&(t.className=u+" "+p)}),y(Mustache.render(r.HtmlLoader.Dialog,t),o,s,a)}m.prototype.getElement=function(){return this._$dlg},m.prototype.getPromise=function(){return this._promise},m.prototype.close=function(){this._$dlg.is(":visible")&&g(this._$dlg,"_canceled")},m.prototype.done=function(t){this._promise.done(t)},window.addEventListener("resize",v),t.DIALOG_BTN_CANCEL=c,t.DIALOG_BTN_OK=h,t.DIALOG_BTN_DONTSAVE="dontsave",t.DIALOG_BTN_CLOSE_AFTER_SAVE="close_after_save",t.DIALOG_BTN_SAVE_AS="save_as",t.DIALOG_CANCELED="_canceled",t.DIALOG_BTN_DOWNLOAD="download",t.DIALOG_BTN_CLASS_PRIMARY=d,t.DIALOG_BTN_CLASS_SUCCESS="btn-success",t.DIALOG_BTN_CLASS_DANGER="btn-danger",t.DIALOG_BTN_CLASS_NORMAL=u,t.DIALOG_BTN_CLASS_LEFT=p,t.showModalDialog=a,t.showModalDialogUsingTemplate=y,t.confirm=function(t,e,i){return n(t,e,{className:s.DIALOG_ID_OK_CANCEL})},t.alert=function(t,e,i){return n(t,e=e||l.ALERT_TITLE,{className:s.DIALOG_ID_OK})},r.Dialog=t}),define("text!toast/html-templates/spin-dialog-template.html",[],function(){return'<div class="spinner-wrap">\n\t<div class="spinner-container" style="height:44px;"></div>\n\t<div class="message" style="text-align:center"></div>\n\t<div class="progress">\n\t\t<div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">\n\t\t\t<span class="sr-only">0% Complete</span>\n\t\t</div>\n\t</div>\n</div>\n\n'}),define("toast/dialogs/SpinDialog",["../core","./Dialog","text!toast/html-templates/spin-dialog-template.html"],function(a,r,l){"use strict";var c=a.Strings,h=a.Spinner,t={dialog:null,$template:null,options:{width:400}};return _.extend(t,{show:function(t,e,i,n){n=n||{cancel:null};var o,s=new $.Deferred;return null!=$(".spin-dialog").get(0)?setTimeout(function(){s.reject()},1):(o=Mustache.render(l),o=(this.$template=$(o),t&&0<t.length&&this.$template.find(".message").html(t),{width:2,top:t&&0!=t.length||e&&0!=e.length?"30%":"50%"}),t=this.$template.find(".spinner-container"),o=new h(o).spin(),t=(t.append(o.el),null),n.cancel&&(t=[{className:r.DIALOG_BTN_CLASS_NORMAL,id:r.DIALOG_BTN_CANCEL,text:c.CANCEL}]),this.dialog=r.showModalDialog("spin-dialog",e,this.$template[0].outerHTML,t,!n.cancel),a._msieVersion&&a._msieVersion<10?a.lazy(function(){s.resolve()},5):this.dialog.getElement().one("shown.bs.modal",function(){s.resolve()}),(e&&0!=e.length?this.dialog.getElement().find(".close"):this.dialog.getElement().find(".modal-header")).remove(),this.$progress=this.dialog.getElement().find(".progress"),this.$progressbar=this.$progress.find(".progress-bar"),i||this.$progress.css("display","none"),n.cancel?(this.dialog.getElement().find(".modal-footer").css("textAlign","center"),this.dialog.getElement().on("buttonClick",$.proxy(this._onCancelClick,this,n.cancel))):this.dialog.getElement().find(".modal-footer").remove(),this.dialog.getElement().children(".modal-dialog").css("width",this.options.width)),s.promise()},showProgress:function(){this.$progress.css("display","")},hideProgress:function(){this.$progressbar.attr("aria-valuenow",0),this.$progressbar.css("width","0%"),this.$progressbar.find(".sr-only").text(""),this.$progress.css("display","none")},updateProgress:function(t){"none"==this.$progress.css("display")&&this.showProgress(),this.$progressbar.attr("aria-valuenow",t),this.$progressbar.css("width",t+"%"),this.$progressbar.children().text(t+"% Complete")},updateMessage:function(t,e){this.dialog.getElement().find(".modal-header .modal-title").html(e),this.dialog.getElement().find(".modal-body .message").html(t)},enableCancelButton:function(t){!0===t?this.dialog.getElement().find('.modal-footer [data-button-id"'+r.DIALOG_BTN_CANCEL+'"]').find("#"+r.DIALOG_BTN_CANCEL).tt_enable():this.dialog.getElement().find('.modal-footer [data-button-id="'+r.DIALOG_BTN_CANCEL+'"]').tt_disable()},hideCancelBlock:function(){this.dialog.getElement().find(".modal-footer").remove()},hide:function(){var t=new $.Deferred;return this.dialog.getElement().is(":visible")?(this.dialog.getElement().one("hidden.bs.modal",function(){t.resolve()}),this.dialog.close()):t.resolve(),t.promise()},_onCancelClick:function(t,e,i){t&&t()}}),a.SpinDialog=t}),define("toast/dialogs",["./core","./dialogs/DefaultDialogs","./dialogs/Dialog","./dialogs/SpinDialog"],function(t){}),define("toast/views_/DialogBar",["exports","../core"],function(n,o){"use strict";n.DIALOG_BAR_ID_INFO="info-dailog-bar",n.DIALOG_BAR_ID_OK_CANCEL="ok-cancel-dailog-bar",n.DIALOG_BAR_ID_OK="ok--dailog-bar";o.Strings;var s,a,r=null,l={},c=!1;function h(t){t.keyCode===o.KeyEvent.DOM_VK_ESCAPE&&g()}function d(t){t=$(t.target);!l.selfClickDismiss&&t.closest(".dialog-bar-content").length||l.autoDismiss&&g()}function u(){l.autoDismissWhenChangingOrientation&&($("input, textarea").blur(),g())}function p(t){g()}function f(t){window.innerHeight<r.height()?r.css({overflow:"auto",height:window.innerHeight}):l.modal?r.height("100%"):r.css({overflow:"",height:""})}function i(t){s.resolve(t.buttonId),r&&(t=$.Event(o.Events.HIDDEN_DILAOG),r.trigger(t),r.remove(),r=null),$(document.body).removeClass("show-bookmark-dialog-bar"),c=!1}function g(t){var e;c&&(t=_.extend({animate:!0},t),a&&(clearTimeout(a),a=null),l.autoDismiss&&$(document).off(o.__eventTypes__.start,d),$(document).off("keydown",h),$(window).off("resize",f),o.off(o.Events.ORIENTATION_DID_CHANGE,u),e=$.Event(o.Events.HIDE_DILAOG),r.trigger(e),l.middle?t.animate?r.animate({opacity:0},250,function(){i(t)}):i(t):t.animate?r.animate({top:-(r.height()+5)},250,function(){i(t)}):i(t))}n.$el=r,n.present=function(t){if(t=_.extend({autoDismissWhenChangingOrientation:!0,closeButton:!0},t),l=t,c){if(!t.dismiss)return;g({animate:!1})}s=new $.Deferred,a&&(clearTimeout(a),a=null),_.isUndefined(r)||_.isNull(r)||0===r.length||(r.remove(),r=null);var e={modalClassName:t.modalClassName||"",maxWidth:t.maxWidth||"",titleIcon:t.titleIcon||"",title:t.title||"",content:t.content||"",leftButtons:t.leftButtons||[],rightButtons:t.rightButtons||[]},i=Mustache.render('<div class="dialog dialog-bar {{modalClassName}}"><div class="container"><div class="dialog-bar-content"><div class="header"><span class="title-icon {{titleIcon}}"></span><div class="title">{{title}}</div><button type="button" class="btn close"><span class="icon_close"></span></button><hr></div><div class="body">{{{content}}}</div><div class="footer"><div class="btn-group">{{#leftButtons}}<button class="dialog-button btn {{className}}" data-button-id="{{id}}">{{#icon}}<span class="{{icon}}"></span>{{/icon}} <span class="btn-title">{{text}}</span></button>{{/leftButtons}}</div><div class="btn-group pull-right">{{#rightButtons}}<button class="dialog-button btn {{className}}" data-button-id="{{id}}">{{#icon}}<span class="{{icon}}"></span>{{/icon}} <span class="btn-title">{{text}}</span></button>{{/rightButtons}}</div></div></div></div></div>',e),e=(r=$(i),$(document.body).append(r),_.isEmpty(e.leftButtons)&&_.isEmpty(e.rightButtons)&&r.find(".footer").hide(),_.isEmpty(e.title)&&r.find(".header").hide(),$(document.body).addClass("show-bookmark-dialog-bar"),t.attrs&&_.each(t.attrs,function(t){r.attr(t)}),t.maxWidth&&r.css("maxWidth",t.maxWidth),t.theme&&r.addClass(t.theme),t.width&&r.find(".container").css("width",t.width),t.textCenter&&r.find(".body").addClass("text-center"),t.closeButton||r.find(".close").remove(),t.middle?(r.addClass("vertical-middle"),r.css("opacity",0)):r.css("top",-r.height()+"px"),!o.isMobileDevice&&o.$el&&(i=(o.$el.width()-o.$bookContainer.width())/2,i-=o.$bookContainer.offset().left,r.css("marginLeft",-i)),r.show(),$.Event(o.Events.SHOW_DILAOG));return r.trigger(e),l.autoDismiss&&$(document).on(o.__eventTypes__.start,d),$(document).on("keydown",h),r.find(".dialog-button").on("click",function(t){var e;e=$(this).attr("data-button-id"),l.buttonClicked?l.buttonClicked(e):g({buttonId:e})}),r.find(".close").on("click",p),o.on(o.Events.ORIENTATION_DID_CHANGE,u),$(window).on("resize",f),f(),t.middle?r.animate({opacity:1},250,function(){var t;r&&(t=$.Event(o.Events.SHOWN_DILAOG),r.trigger(t))}):r.animate({top:0},250,function(){var t;r&&(t=$.Event(o.Events.SHOWN_DILAOG),r.trigger(t))}),c=!0,t.dismissInterval&&(a=setTimeout(function(){a=null,c&&g()},t.dismissInterval)),n.$el=r,s.promise()},n.isPresent=function(){return c},n.dismiss=g,o.DialogBar=n}),define("toast/views_/InputBar",["exports","../core"],function(t,i){"use strict";var n,o,s,a,r=!1;function l(t){switch(t.keyCode){case i.KeyEvent.DOM_VK_RETURN:t.preventDefault(),c();break;case i.KeyEvent.DOM_VK_ESCAPE:h()}}function c(){a=n.find("input").val(),s=!0,h()}function h(){r&&(n.find("input").blur(),i.Book.enableAction(!0),n.find("input").val(""),n.animate({top:-(n.height()+5)},250,function(){TT.$navbar.removeClass("hide"),n.remove(),n=null,i.lazy(function(){s&&!_.isEmpty(a)?o.resolve(a):o.reject(),r=!1},50)}))}t.present=function(t){t=t||{},o=new $.Deferred,i.Book.enableAction(!1),s=!1,a="",_.isUndefined(n)||_.isNull(n)||0===n.length||(n.remove(),n=null);var e=Mustache.render(i.HtmlLoader.InputBar,{Strings:TT.Strings,theme:TT.theme});return n=$(e),t.maxWidth&&n.css("maxWidth",t.maxWidth),TT.$el.append(n),n.find(".btn-ok").on("click",c),n.find("input").on("keydown",l),n.find(".close").on("click",h),TT.$navbar.addClass("hide"),n.animate({top:0},250,function(){n.find("input").focus()}),r=!0,o.promise()},t.isPresent=function(){return r},t.dismiss=h,i.InputBar=t}),define("toast/views_",["./core","./views_/DialogBar","./views_/InputBar"],function(t){}),define("toast/widgets/WidgetDataManager",["exports","../core"],function(t,s){var e,a=new Backbone.Model({metadata:{},pages:[]});function i(t){e&&n(e),_.isEmpty(a.get("pages"))||setTimeout(function(){_.each(t,function(t){var i=s.Book.views[t-1];i.ready(function(){var t=_.find(a.get("pages"),{pageID:i._model.id});t&&t.contents&&t.contents.length&&_.each(t.contents,function(t){var e=i.find("id",t.widgetId);e&&e.view&&e.view.setWidgetData(t)})})})}),e=t}function n(t){var n,i,o={projectID:s.project.id,metadata:a.get("metadata"),pages:[]};_.each(t,function(t){var i,e=s.Book.views[t-1];n={pageID:e._model.id,pageNo:t,contents:[]},_.each(e.findAll(),function(t){var e;t.widget&&(e=t.view.getWidgetData(),i=i||t.view.widgetDataModifed(),t.view.widgetDataModifed(!1),_.isEmpty(e)||n.contents.push(e))}),i&&o.pages.push(n)}),_.isEmpty(o.pages)||(i={projectID:o.projectID,metadata:a.get("metadata"),pages:[]},_.each(o.pages,function(t){var e=_.find(a.get("pages"),{pageID:t.pageID});e?(!t.contents.length&&e.contents.length?i.pages.push(_.extend({empty:!0},t)):i.pages.push(t),_.extend(e,t)):t.contents.length&&(i.pages.push(t),a.get("pages").push(t))}),i.pages.length&&(s.hook.widgetDataManager&&"function"==typeof s.hook.widgetDataManager.save?s.hook.widgetDataManager.save({command:"update",data:JSON.stringify(i),model:a}):$.ajax({url:s.config.widgetDataManager.url,type:"POST",data:{command:"update",data:JSON.stringify(i)}}).done(function(t){s.dev&&t&&tt.log(t)}).fail(function(t){s.dev&&o&&tt.log(t)})))}function o(t,e){i(t)}function r(){var t;_.isEmpty(s.config.widgetDataManager)||_.isEmpty(s.config.widgetDataManager.url)||(s.on(s.Events.WILL_MOVE_PAGE,o),s.hook.widgetDataManager&&"function"==typeof s.hook.widgetDataManager.loadAll?t=s.hook.widgetDataManager.loadAll({url:s.config.widgetDataManager.url,projectID:s.project.id}):!1===s.config.restorePreviousSession?$.ajax({url:s.config.widgetDataManager.url,type:"POST",data:{projectID:s.project.id,command:"empty"}}):t=$.ajax({url:s.config.widgetDataManager.url,type:"POST",data:{projectID:s.project.id,command:"list"}}),t&&(t.done(function(t){s.dev&&t&&tt.log(t);try{(t=t&&"string"==typeof t?JSON.parse(t):t).metadata||(t.metadata={}),t.pages||(t.pages=[]),a=new Backbone.Model(t)}catch(t){a.set("projectID",s.project.id)}i(s.Book.getCurrentPageNumber())}),t.fail(function(){a.set("projectID",s.project.id),i(s.Book.getCurrentPageNumber())})),$(window).blur(function(){n(s.Book.getCurrentPageNumber())}))}s.projectLoaded(function(){__app__||s.isPreview||_.isEmpty(s.config.widgetDataManager.url)||-1===s.config.widgetDataManager.url.indexOf("://")&&"//"!==s.config.widgetDataManager.url.substr(0,2)&&(s.config.widgetDataManager.url="//"+s.config.widgetDataManager.url)}),s.ready(function(){__app__||s.isPreview||r()})}),define("toast/widgets/UIWidgetPrivate",["../core","../views/UIView"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{initialize:function(t){this.style=_.extend({},i.style,this.style),this.label=this.model.label,this.$el.attr("data-widget-private-id",this.model.widgetPrivateID),i.initialize.call(this,t)}}),t.UIWidgetPrivate=e}),define("toast/widgets/UIWidget",["../core","../views/UIView"],function(t,e){"use strict";var i=e.prototype,n=e.extend();return _.extend(n.prototype,i,{widget:!0,widgetDataModifed:function(t){if(!arguments.length)return this._isWidgetDataModifed;this._isWidgetDataModifed=t},setWidgetData:function(t){},getWidgetData:function(){return{}},findWidgetUserProperty:function(e){var i;return _.each(this.model.properties.widgetUserProperty,function(t){if(t.name===e)return i=t,!1}),i},initialize:function(t){i.initialize.call(this,t)},render:function(){return i.render.call(this),this}}),n.MODEL=function(){return _.merge(e.MODEL(),{widget:!0})},t.UIWidget=n}),define("toast/widgets/UIWidgetContainer",["../core","./UIWidget"],function(e,t){"use strict";var i=t.prototype,n=t.extend();return _.extend(n.prototype,i,{style:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"},maintainRatio:!0,initialize:function(t){i.initialize.call(this,t)},render:function(){return i.render.call(this),this},commonRender:function(){i.commonRender.call(this);var t=this.$el.attr("class")||"",t=(this.$el.attr("class",t),this.$el.addClass("container"),this.containerView&&this.containerView.reset(),new e.ViewController({el:this.$el}));t.parentViewController=this.viewController,(t.parentView=this).containerView=t,this.collection=this.containerView.collection},renderContainer:function(){var t=this.model.toJSON();return t.background={},this.containerView.load(t,{showLoader:!0,readyonly:!0,htmlRender:this.viewController.htmlRender,print:this.viewController.print}),e.Book.fitPage(this.containerView),this._setContainerBackground(),this},mount:function(){i.mount.call(this),this.renderContainer()},willAppear:function(){i.willAppear.call(this),this.containerView.willAppear()},appear:function(){i.appear.call(this),this.containerView.appear()},willDisappear:function(){i.willDisappear.call(this),this.containerView.willDisappear()},disappear:function(){i.disappear.call(this),this.containerView.disappear()},scaleDidChange:function(t){i.scaleDidChange.call(this,t),this.containerView.scaleDidChange(t)},size:function(t,e){if(!arguments.length)return i.size.call(this);i.size.call(this,t,e),this.containerView.layout()},remove:function(){this.containerView.reset(),i.remove.call(this)},getBackgroundUrl:function(){var t=this.model.background.url;return _.isEmpty(t)?"":(t=_tt.StringUtils.replaceTemplate(t,"ASSETS_DIR",tt.paths.assets),'url("'+(t=e._.forHTMLPublishing?t:t.encodeFilePath())+'")')},getBackgroundSize:function(){var t,e,i=this.model;return i.properties.customBgSize?(t="100%",_.isUndefined(i.properties.backgroundWidth)||(t=i.properties.backgroundWidth,isNaN(t))||(t+="px"),e="auto",_.isUndefined(i.properties.backgroundHeight)||(e=i.properties.backgroundHeight,isNaN(e))||(e+="px"),t+" "+e):_.isUndefined(i.background.size)?"cover":i.background.size},getBackgroundPosition:function(){var t=this.model.background;return _.isUndefined(t.position)?"50% 50%":t.position},getBackgroundRepeat:function(){var t=this.model.background;return _.isUndefined(t.repeat)?"no-repeat":t.repeat},getBackgroundAttributes:function(t){return{backgroundSize:this.getBackgroundSize(),backgroundPosition:this.getBackgroundPosition(),backgroundRepeat:this.getBackgroundRepeat()}},_setContainerBackground:function(){var t;this.model.background&&(this.style.backgroundColor="",t=this.model.background.color,_.isEmpty(t)?this.style.backgroundColor="transparent":this.style.backgroundColor=t,this.style.backgroundImage=this.getBackgroundUrl(),this.style=_.extend(this.style,this.getBackgroundAttributes()),this.$el.css(this.style))}}),n.MODEL=function(){return _.merge({container:!0,background:{color:""},contents:[],states:[]},t.MODEL(),{})},e.UIWidgetContainer=n}),define("toast/widgets/UIWidgetMultiLayerContainer",["../core","./UIWidget","./UIWidgetContainer"],function(r,t,l){"use strict";r.Strings;var n=t.prototype,e=t.extend();return _.extend(e.prototype,n,{className:"container widget-multi-layer-container",style:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"},maintainRatio:!0,initialize:function(t){n.initialize.call(this,t)},state:function(t){t=n.state.call(this,t);return 0!==arguments.length&&t&&this.showLayer(this._currentState,{force:!0}),t},render:function(){return n.render.call(this),this},commonRender:function(){this.style=_.extend({},n.style,this.style),n.commonRender.call(this);var t=this.$el.attr("class")||"";this.$el.attr("class",t),this.$el.addClass("container"),this.renderLayers()},size:function(e,i){if(!arguments.length)return n.size.call(this);n.size.call(this,e,i),_.each(this.layers,function(t){t.size(e,i)},this)},mount:function(){n.mount.call(this)},willAppear:function(){n.willAppear.call(this),this.activeLayer&&this.activeLayer.willAppear()},appear:function(){n.appear.call(this),this.activeLayer&&this.activeLayer.appear()},willDisappear:function(){n.willDisappear.call(this),this.activeLayer&&this.activeLayer.willDisappear()},disappear:function(){n.disappear.call(this),this.activeLayer&&this.activeLayer.disappear()},scaleDidChange:function(e){n.scaleDidChange.call(this,e),_.each(this.layers,function(t){t.scaleDidChange(e)})},renderLayers:function(){this._setContainerBackground();var a=[];return _.each(this.model.contents,function(t,e){t.background={},t.width=this.model.width,t.height=this.model.height;var i,t=new r.project.model(t),n=this.$el.find("#"+t.get("id")),o=(n.length||(n=this.viewController._createModelElement(t),this.$el.append(n)),this.viewController.htmlRender?n.children().first():null),s=new l({viewController:this.viewController,model:t,el:o,$parent:n,__events__:[]});s.index=e,s.label=t.label,__app__&&!r._.forHTMLPublishing?s.__render__():(i=!0,s.render()),o||n.append(s.el),i?(s.mount(),s.mountAll()):s.__mount__(),s.$parent.hide(),a.push(s)},this),this.layers=a,this},showLayer:function(t,e){var i;e=e||{},this._currentState===t&&!e.force||(this.hideLayer(this.activeLayer),(e=_.find(this.layers,{label:t}))&&(e.$parent.show(),(i=this.viewController.current())&&(e.containerView.current(!0),e.willAppear()),i&&e.appear(),n.state.call(this,t)),this.activeLayer=e,this.hideAllLayer())},hideLayer:function(t){var e;t&&((e=this.viewController.current())&&(t.containerView.current(!1),t.willDisappear()),t.$parent.hide(),e)&&t.disappear()},hideAllLayer:function(){_.each(this.layers,function(t){this.activeLayer&&t.label===this.activeLayer.label||t.$parent.hide()},this)},previousLayer:function(t){if(this.activeLayer){var e=this.layers.indexOf(this.activeLayer);if(-1!==e){if(e--,t&&e<0)e=this.layers.length-1;else if(e<0)return;this.state(this.layers[e].label)}}},nextLayer:function(t){if(this.activeLayer){var e=this.layers.indexOf(this.activeLayer);if(-1!==e){if(e++,t&&this.layers.length<=e)e=0;else if(this.layers.length<=e)return;this.state(this.layers[e].label)}}},_setContainerBackground:function(){var t;this.model.background&&(this.style.backgroundColor="",t=this.model.background.color,_.isEmpty(t)||(this.style.backgroundColor=t),this.style.backgroundImage="",t=this.model.background.url,_.isEmpty(t)||(t=_tt.StringUtils.replaceTemplate(t,"ASSETS_DIR",tt.paths.assets).encodeFilePath(),this.style.backgroundImage='url("'+t+'")'),this.$el.css(this.style))}}),e.MODEL=function(){return _.merge(t.MODEL(),{initState:"",_labelSuffixIndex:1,multilayerContainer:!0,background:{color:""},contents:[],states:[]})},r.UIWidgetMultiLayerContainer=e}),define("toast/widgets/UIWidgetSlideContainer",["../core","./UIWidgetMultiLayerContainer","./UIWidgetContainer"],function(r,t,l){"use strict";r.Strings;var e=t.prototype,i=t.extend();return _.extend(i.prototype,e,{className:"widget-slide-container",initialize:function(t){e.initialize.call(this,t)},render:function(){return e.render.call(this),this},commonRender:function(){e.commonRender.call(this),this.model.initState||(this.model.initState=this.model.states[0].value)},renderLayers:function(){var s,a,n,t;if(this.isRender&&!r._.forHTMLPublishing)return this.$sliderContainer&&this.$sliderContainer.append(this.$el),this._setContainerBackground(),s=[],(a=this.$el.find("ul")).length||(a=$("<ul />"),this.$el.append(a)),_.each(this.model.contents,function(t,e){t.background={},this.renderLayerSize(t);var t=new r.project.model(t),i=this.$el.find("#"+t.get("id")),n=(i.length?i.show():(i=this.viewController._createModelElement(t),this.$el.append(i)),this.viewController.htmlRender?i.children().first():null),o=new l({viewController:this.viewController,model:t,el:n,$parent:i,__events__:[]}),n=(o.index=e,o.label=t.label,n?o.render():i.append(o.render().el),o.mount(),o.mountAll(),a.children().eq(e));n.length||(n=$("<li />"),"vertical"===this.model.properties.direction?n.css("top",t.height*e):n.css("left",t.width*e),n.css("height","100%"),n.append(i),a.append(n)),s.push(o)},this),this.layers=s,n=this,t=(t=_.find(this.layers,{label:this.model.initState}))||this.layers[0],t=this.layers.indexOf(t),this.$slider=a.lightSlider({mode:"slide",itemFixedWidth:this.model.width,itemFixedHeight:this.model.height,vertical:"vertical"===this.model.properties.direction,verticalHeight:this.model.height,adaptiveHeight:!1,controls:!this.model.properties.buttonHidden,pager:!1,item:1,slideMargin:0,thumbMargin:0,galleryMargin:0,speed:300,onSliderLoad:function(t){n.$prev=n.$el.find(".lSPrev"),n.$prev.css({backgroundColor:n.model.properties.buttonBgColor,color:n.model.properties.buttonColor}),"vertical"===n.model.properties.direction&&n.$prev.attr("data-direction","vertical"),n.$next=n.$el.find(".lSNext"),n.$next.css({backgroundColor:n.model.properties.buttonBgColor,color:n.model.properties.buttonColor}),"vertical"===n.model.properties.direction&&n.$next.attr("data-direction","vertical"),n.updateNavigationButtonSize(),n.$prev.on("click",$.proxy(n._arrowButtonTapped,n)),n.$next.on("click",$.proxy(n._arrowButtonTapped,n))},onBeforePrevSlide:function(t,e){n.__slidingInteraction=!0},onBeforeNextSlide:function(t,e){n.__slidingInteraction=!0},onBeforeSlide:function(t,e){n.$el.closest(".video-controls-fix").removeClass("video-controls-fix")},onAfterSlide:function(t,e){n.state(n.layers[e].label);n.__slidingInteraction?r.lazy(function(){r.IS_DRAGGING=n.__slidingInteraction=!1},n.$slider.settings().speed):n.__isSliderContainerDown__&&(r.IS_DRAGGING=!1,n.$slider.isDisableDrag()&&n.$slider.disableDrag(!1),n.__startActiveLayerCID==n.activeLayer.cid&&n.$el.closest(".current").addClass("video-controls-fix"),n.controlsFix=!1,n.__isSliderContainerDown__=!1)}}),this.$el.on(r.__eventTypes__.start,function(t){r.IS_ZOOM||t.stopPropagation(),n.__isSliderContainerDown__=!0,n.__startPageX=t.pageX,n.__startPageY=t.pageY,n.__startActiveLayerCID=n.activeLayer.cid}),this.$el.on(r.__eventTypes__.move,function(t){var e;n.__isSliderContainerDown__&&!r.IS_DRAGGING&&(n.__slideTimeout__&&n.__slideTimeout__.id&&clearTimeout(n.__slideTimeout__.id),r.IS_DRAGGING=!0,n.__slidingInteraction=!0),r.IS_ZOOM&&(r.IS_ZOOM_DRAG_MODE?n.$slider.isDisableDrag()||n.$slider.disableDrag(!0):n.$slider.isDisableDrag()&&n.$slider.disableDrag(!1)),n.__isSliderContainerDown__&&(e=t.pageX,t=t.pageY,n.__startPageX,n.__startPageY,Math.max(Math.abs(e-n.__startPageX),Math.abs(t-n.__startPageY))>n.$slider.settings().swipeThreshold)&&(e=n.$el.closest(".video-controls-fix")).length&&(n.controlsFix=!0,e.removeClass("video-controls-fix"))}),this.$el.on(r.__eventTypes__.end,function(t){n.__slideTimeout__||(n.__slideTimeout__={});var e=t.pageX,i=t.pageY;5<Math.distance(n.__startPageX,n.__startPageY,e,i)?r.lazyOnce(function(){r.IS_DRAGGING=!1},50,n.__slideTimeout__):r.IS_DRAGGING=!1,n.$slider.isDisableDrag()&&n.$slider.disableDrag(!1),n.__isSliderContainerDown__&&n.controlsFix&&(e=t.pageX,i=t.pageY,n.__startPageX,n.__startPageY,Math.max(Math.abs(e-n.__startPageX),Math.abs(i-n.__startPageY))>n.$slider.settings().swipeThreshold)&&r.lazy(function(){n.__startActiveLayerCID==n.activeLayer.cid&&n.$el.closest(".current").addClass("video-controls-fix")},n.$slider.settings().speed),n.controlsFix=!1,n.__isSliderContainerDown__=!1}),n.goToSlide(t),this;e.renderLayers.call(this)},renderLayerSize:function(t){t.width=this.model.width,t.height=this.model.height},willAppear:function(){e.willAppear.call(this),r.lazy(function(){this.updateSlideLayout()},50,this)},show:function(){e.show.call(this),this.updateSlideLayout()},hide:function(){e.hide.call(this)},updateSlideLayout:function(){this.$el.find("ul").height(this.$el.height()),this.$slider&&this.$slider.refresh()},updateNavigationButtonSize:function(){this.$prev=this.$el.find(".lSPrev"),this.$prev.css("zoom",Math.max(Math.min(1.5,this.viewController.contentScale),1-this.viewController.contentScale+1)),this.$next=this.$el.find(".lSNext"),this.$next.css("zoom",Math.max(Math.min(1.5,this.viewController.contentScale),1-this.viewController.contentScale+1))},goToSlide:function(t){this.getActiveSlideIndex()!==t&&(this.$slider.goToSlide(t),this._sliderChangeCallbackFn)&&(this._sliderChangeCallbackContext?this._sliderChangeCallbackFn.bind(this._sliderChangeCallbackContext)(t):this._sliderChangeCallbackFn(t))},getActiveSlideIndex:function(){return this.activeLayer?this.activeLayer.index:0},showLayer:function(t,e){e=e||{},this._currentState===t&&!e.force||(e=(e=_.find(this.layers,{label:t}))||this.layers[0],this.hideLayer(this.activeLayer),(t=this.viewController.current())&&(e.containerView.current(!0),e.willAppear()),this.$slider&&this.goToSlide(e.index),t&&e.appear(),this.activeLayer=e,this.hideAllLayer())},hideLayer:function(t){t&&this.viewController.current()&&(t.containerView.current(!1),t.willDisappear(),t.disappear())},hideAllLayer:function(){},_sliderChangeCallback:function(t,e){this._sliderChangeCallbackFn=t,this._sliderChangeCallbackContext=e},_arrowButtonTapped:function(t){r.IS_ZOOM_LOCKED=!0,this._refreshTimeout||(this._refreshTimeout={}),r.lazyOnce(function(){r.IS_ZOOM_LOCKED=!1},250,this._refreshTimeout)}}),i.MODEL=function(){return _.merge(t.MODEL(),{properties:{buttonBgColor:"rgba(0, 0, 0, 0.40)",buttonColor:"#fff"}})},r.UIWidgetSlideContainer=i}),define("toast/widgets/UIWidgetScrollContainer",["../core","./UIWidgetContainer"],function(e,t){"use strict";var i=e.Strings,n=t.prototype,o=t.extend();return _.extend(o.prototype,n,{className:"container widget-scroll-container",initialize:function(t){n.initialize.call(this,t)},scaleDidChange:function(t){n.scaleDidChange.apply(this,arguments),this._scrollbar&&this._scrollbar.scale(this.viewController.contentScale)},setAutoSizeFit:function(){this.model.properties.autoHeightFit&&(this.updateAutoSizeFit(),e.config.htmlRender)&&$(window).on("resize",this.updateAutoSizeFit.bind(this))},unsetAutoSizeFit:function(){this.model.properties.autoHeightFit&&e.config.htmlRender&&$(window).off("resize",this.updateAutoSizeFit.bind(this))},render:function(){return n.render.call(this),this},renderContainer:function(){return n.renderContainer.call(this),this._renderScrollContentElement(),this._renderScrollbar(),this},_renderScrollContentElement:function(){var t=this.containerView,e=t.bounds();t.$contents.css("width",e.width),t.$contents.css("height",e.height)},_renderScrollbar:function(){var t=this.containerView;e.config.htmlRender&&this.model.properties.fixed&&this.$parent.css("position","fixed"),this.setAutoSizeFit(),e.isMobileDevice?(this.$el.css("overflow-y","auto"),e.config.mobileOnly||e.config.htmlRender||(this._scrollInteraction=new e.ScrollInteraction({view:this,$contentEl:t.$contents}))):e.lazy(function(){this._setCustomScrollbar(),e.config.htmlRender||this._setScrollInteraction()},5,this)},_setCustomScrollbar:function(){this.containerView.$el.addClass("prevent-scroll"),this.containerView.$el.addClass("prevent-pan"),this._scrollbar=new e.PerfectScrollbar(this.containerView.$el[0],this._getScrollSettings()),this._scrollbar.scale(this.viewController.contentScale),"dark"!==this.model.properties.theme&&"drak"!==this.model.properties.theme||this.containerView.$el.addClass("ps-black"),this.containerView.$el.on("ps-scroll-y",function(){e.DialogBar.isPresent()&&e.DialogBar.dismiss()})},_getScrollSettings:function(){return{suppressScrollX:!0}},scrollTo:function(t){if(this._scrollbar){var e=this.containerView,i=e.bounds();switch(t){case"top":t=0;break;case"bottom":t=i.height}e.$el.stop().animate({scrollTop:t}),this._scrollbar.update()}},_setScrollInteraction:function(){var i=this,n=this.containerView.$el,t=this.containerView.$contents;this._scrollInteraction=new e.ScrollInteraction({view:this,$el:n,$contentEl:t,scrollStart:function(t,e){},scrollTo:function(t,e){n[0].scrollTop=t,i._scrollbar.update()},scrollEnd:function(t,e){},isScrollTop:function(){return!n[0].scrollTop||n[0].scrollTop<0},isScrollBottom:function(){var t=n[0].scrollHeight;return Math.ceil(n[0].scrollTop+n.height()+1)>=t}})},appear:function(){n.appear.call(this),this.showScrollTipAlert()},showScrollTipAlert:function(){e.config.htmlRender||this.containerView.bounds().height<=this.model.height+5||"none"===this.model.properties.alert||(e._[this.model.id]||(e._[this.model.id]={}),"always"!==this.model.properties.alert&&e._[this.model.id].showTip)||(e.DialogBar.present({content:'<div class="scroll-tip-content"><img class="tip-icon" src="'+e.config.moduleBaseUrl+'styles/icons/scroll-tip-icon.svg"><span class="tip-text">'+i.ALERT_SCROLL_TIP_TEXT+"</span></div>",autoDismiss:!0,selfClickDismiss:!0,dismissInterval:3e3,textCenter:!0,width:300,theme:"black-translucent"}),e._[this.model.id].showTip=!0)},updateAutoSizeFit:function(){var t=this.$parent,e=this.containerView,i=window.innerHeight-this.model.top;t.css("height",i),e.$el.css("height",i)},remove:function(){this._scrollbar&&(this._scrollbar.destroy(),delete this._scrollbar),this._scrollInteraction&&(this._scrollInteraction.destroy(),delete this._scrollInteraction),this.unsetAutoSizeFit(),n.remove.call(this)}}),o.MODEL=function(){return _.merge({},t.MODEL(),{})},e.UIWidgetScrollContainer=o}),define("toast/widgets/UIWidgetSideSlideContainer",["../core","./UIWidgetScrollContainer"],function(r,t){"use strict";var e=r.Strings,i=[{value:"Open",label:e.OPEN,readonly:!0,checkable:!0},{value:"Close",label:e.CLOSE,readonly:!0,checkable:!0}],n=t.prototype,e=t.extend();return _.extend(e.prototype,n,{autoLayout:!1,requireState:!0,initialize:function(t){n.initialize.call(this,t)},states:function(){return n.states.call(this).concat(i)},state:function(t){if(!arguments.length)return this._currentState;t=n.state.call(this,t);if(0!==arguments.length&&t)switch(this._currentState){case this.model.states[0].value:this.openSide();break;case this.model.states[1].value:this.closeSide()}return t},toggleSide:function(){this._currentState===this.model.states[0].value?this.state(this.model.states[1].value):this.state(this.model.states[0].value)},_toggleSlide:function(){this.isAppeared&&(this.$parent.addClass("animate"),this.layoutSideSlideContainer(),this._animateInterval&&clearTimeout(this._animateInterval),this._animateInterval=setTimeout(function(){this.$parent.removeClass("animate")}.bind(this),250))},openSide:function(){this._currentState!==this.model.states[0].value&&(this._currentState=this.model.states[0].value),this._toggleSlide()},closeSide:function(){this._currentState!==this.model.states[1].value&&(this._currentState=this.model.states[1].value),this._toggleSlide()},layoutSideSlideContainer:function(){var t,e=this.model.properties.sidePosition,i=_.isUndefined(this.model._orgWidth)?this.model.width:this.model._orgWidth,n={};switch(e){case"left":this._currentState===this.model.states[1].value?n.left=-i:n.left=0;break;case"right":t=r.config.htmlRender?window.innerWidth:this.viewController.topParentViewController().collection.width,n.left=t-i,this._currentState===this.model.states[1].value&&(n.left+=i)}n.width=i,this.$parent.css(n),this.containerView.$el.css({width:i}),this.containerView.$contents.css({"transform-origin":"",transform:""}),(this.model.properties.autoWidthFit||this.model.properties.autoHeightFit)&&this.updateAutoSizeFit()},updateAutoSizeFit:function(){var t,e,i,n={},o=this.$parent,s=this.containerView,a=_.isUndefined(this.model._orgWidth)?this.model.width:this.model._orgWidth;e=r.config.htmlRender?(t=window.innerWidth,window.innerHeight):(t=(e=this.viewController.topParentViewController().collection).width,e.height),this.model.properties.autoWithFit&&(n.width=Math.min(a,t)),n.width<a&&(i=n.width/a),this.model.properties.autoHeightFit?n.height=e-this.$parent.offset().top:n.height=Math.min(this.model.height,e-this.$parent.offset().top),!_.isUndefined(i)&&this.model.properties.autoWithFit&&(n.height=n.height/i),o.css(n),s.$el.css(n),this.model.properties.autoWithFit&&(_.isUndefined(i)?s.$contents.css({"transform-origin":"",transform:""}):s.$contents.css({"transform-origin":"left top",transform:"scale("+i+")"}))},responsiveLayoutChanged:function(t){var t=n.responsiveLayoutChanged.call(this,t),e={top:this.model.properties._orgTop};return t&&!_.isUndefined(t.resp_top)&&(e.top=t.resp_top),this.$parent.css(e),this.layoutSideSlideContainer(),t},setAutoSizeFit:function(){(this.model.properties.autoWidthFit||this.model.properties.autoHeightFit)&&(this.updateAutoSizeFit(),r.config.htmlRender)&&$(window).on("resize",this.updateAutoSizeFit.bind(this))},unsetAutoSizeFit:function(){(this.model.properties.autoWidthFit||this.model.properties.autoHeightFit)&&r.config.htmlRender&&$(window).off("resize",this.updateAutoSizeFit.bind(this))},renderContainer:function(){return n.renderContainer.call(this),this.$parent.addClass("side-slide-container"),r.config.htmlRender&&($(document.body).append(this.$parent),this.$parent.css("position","fixed")),this},beforeAutofit:function(t){t.left&&delete t.left,this.position(t)},afterAutofit:function(t){t.left&&delete t.left,this.position(t),this.model.firstOfRow=t.firstOfRow,this.layoutSideSlideContainer()}}),e.MODEL=function(){return _.merge({},t.MODEL(),{initState:"Open",autoLayout:!1})},r.UIWidgetSideSlideContainer=e}),define("toast/widgets/UIWidgetSceneAnimation",["../core","./UIWidgetContainer"],function(i,t){"use strict";var e=i.Strings,n=[{value:"Play",label:e.PLAY,readonly:!0,checkable:!1},{value:"Pause",label:e.PAUSE,readonly:!0,checkable:!1},{value:"Stop",label:e.STOP,readonly:!0,checkable:!1},{value:"Finish",label:e.FINISH,readonly:!0,checkable:!1}],o=t.prototype,e=t.extend();return _.extend(e.prototype,o,{className:"container widget-scene-animation",maintainRatio:!1,initialize:function(t){o.initialize.call(this,t),this._repeatCount=0},states:function(){return o.states.call(this).concat(n)},state:function(t){if(!arguments.length)return this._currentState;if(i._.forHTMLPublishing)return o.state.call(this,t);t=o.state.call(this,t);if(0!==arguments.length&&t)switch(this._currentState){case this.model.states[0].value:this._delayInterval&&clearTimeout(this._delayInterval);var e=this.model.properties.delay;String(e).length&&!isNaN(e)?this._delayInterval=setTimeout(function(){this._playAll()}.bind(this),e):this._playAll();break;case this.model.states[1].value:this.containerView.collection.each(function(t){if(t.__attributes__)return!0;this._pause(t)},this);break;case this.model.states[2].value:this.containerView.collection.each(function(t){if(t.__attributes__)return!0;this._stop(t)},this);break;case this.model.states[3].value:this.containerView.collection.each(function(t){if(t.__attributes__)return!0;this._finish(t)},this)}return t},render:function(){return o.render.call(this),this.model.properties.reverse&&(this.model.properties.count*=2),this},autostart:function(){!this.model.properties.autoplay||this.isPlaying()||this.state(this.model.states[0].value)},autostop:function(){this.model.properties.autoplay&&this.state()!==this.model.states[1].value&&this.state(this.model.states[1].value)},reset:function(){o.reset.call(this),this.containerView.collection.each(function(t){if(t.__attributes__)return!0;this._reset(t)},this),this._isPaused=!1},play:function(){return this.state(this.model.states[0].value),this},_playAll:function(){this.containerView.collection.each(function(t){if(t.__attributes__)return!0;this._isPaused?this._resume(t):this._play(t)},this),this._isPaused=!1},_play:function(n){this._reset(n),n.view.$parent.data("model",n),_.each(this.model.scenes,function(t,e){if(0===e)return!0;var e=this.model.scenes[e-1].duration,i=t[n.id],t=(i.rotateZ=i.rotate,_.isUndefined(i.originX)||_.isUndefined(i.originY)||(i.transformOriginX=i.originX,i.transformOriginY=i.originY),{easing:t.easing,duration:1e3*e,complete:$.proxy(this._complete,this)});(n.hasChildren()||n.container||n.multilayerContainer||!_.isEmpty(String(i.curve))&&!isNaN(i.curve))&&(t.progress=$.proxy(this._progress,this,n,i)),n.view.$parent.velocity(i,t)},this)},_resume:function(t){t.view.$parent.velocity("resume")},isPlaying:function(){return this.state()===this.model.states[0].value},pause:function(){this.state(this.model.states[1].value)},_pause:function(t){this._isPaused=!0,t.view.$parent.velocity("pause")},isPaused:function(){return this._isPaused},stop:function(){return this.state(this.model.states[2].value),this},_stopAll:function(){this.containerView.collection.each(function(t){if(t.__attributes__)return!0;this._stop(t)},this)},_stop:function(t){t.view.$parent.velocity("stop",!0),t.view.$parent.data("count",0),this._repeatCount=0,this._reset(t)},isStopped:function(){return this.state()===this.model.states[2].value},finish:function(){return this.state(this.model.states[3].value),this},_finish:function(t){t.view.$parent.velocity("stop",!0);var e=this.model.scenes[this.model.scenes.length-1],i=(t.view.$parent.data("model",t),e[t.id]);i.rotateZ=i.rotate,_.isUndefined(i.originX)||_.isUndefined(i.originY)||(i.transformOriginX=i.originX,i.transformOriginY=i.originY),t.view.$parent.velocity(i,{easing:e.easing,duration:0}),t.view.$parent.velocity("finish",!0),t.view.$parent.data("count",0)},finishAfterRepeatCount:function(t){this._repeatCount++,this.model.properties.count>this._repeatCount?(this.model.properties.reverse&&(this.model.scenes=this.model.scenes.reverse()),this.containerView.collection.each(function(t){if(t.__attributes__)return!0;t.view.$parent.data("count",0),this._play(t)},this)):this.state()!==this.model.states[3].value&&(this._repeatCount=0,o.state.call(this,this.model.states[3].value))},_reset:function(t){var e=this.model.scenes[0],i=e[t.id];i.rotateZ=i.rotate,_.isUndefined(i.originX)||_.isUndefined(i.originY)||(i.transformOriginX=i.originX,i.transformOriginY=i.originY),t.view.$parent.velocity(i,{easing:e.easing,duration:0})},_complete:function(t){var t=$(t),e=this.model.scenes.length-1,i=t.data("count")||0;t.data("count",++i),this.isStopped()||(!this.model.properties.loop&&e<=i?this.finishAfterRepeatCount(t):this.model.properties.loop&&i==e&&(this.model.properties.reverse&&(this.model.scenes=this.model.scenes.reverse()),this.containerView.collection.each(function(t){if(t.__attributes__)return!0;t.view.$parent.data("count",0),this._play(t)},this)))},_progress:function(t,e,i,n,o,s,a){var r,l;t&&t.view&&(t.hasChildren()||t.container||t.multilayerContainer)&&(r=$(i).width(),l=$(i).height(),t.view.size({width:r,height:l},{save:!1})),_.isUndefined(e.curve)||_.isEmpty(String(e.curve))||isNaN(e.curve)||(t=e.curve,r=parseInt($(i).css("top"))-t,e=parseInt($(i).css("left")),l=$(i).height(),Math.sin(2*n*Math.PI),l=Math.cos(2*n*Math.PI),$(i).css({left:e,top:r+t*l}))},remove:function(){this._stopAll(),o.remove.call(this)}}),e.MODEL=function(){return _.merge({initState:"",sceneAnimation:!0,scenes:[{easing:"ease-in-out",duration:.5}],background:{color:""}},t.MODEL(),{})},i.UIWidgetSceneAnimation=e}),define("toast/widgets/UIWidgetSpriteAnimation",["../core","./UIWidgetMultiLayerContainer"],function(e,t){"use strict";var i=e.Strings,n=[{value:"Play",label:i.PLAY,readonly:!0},{value:"Stop",label:i.STOP,readonly:!0},{value:"Loop",label:i.REPEAT_PLAYBACK,readonly:!0}],o=t.prototype,i=t.extend();return _.extend(i.prototype,o,{className:"widget-sprite-animation",initialize:function(t){o.initialize.call(this,t)},states:function(){return o.states.call(this).concat(n)},state:function(t){if(!arguments.length)return this._currentState;if(e._.forHTMLPublishing)return o.state.call(this,t);t=o.state.call(this,t);if(0!==arguments.length&&t&&!e.isEditor)switch(this._currentState){case this.model.states[0].value:this._play();break;case this.model.states[1].value:this._stop();break;case this.model.states[2].value:this._loop()}return t},render:function(){return o.render.call(this),this},commonRender:function(){o.commonRender.call(this)},autostart:function(){this.current=0,this.model.initState===this.model.states[2].value&&(this.isLooping()?this.isPlaying()||this.play():this.loop())},autostop:function(){this.isPlaying()?this.stop():this._stop()},renderLayers:function(){return o.renderLayers.call(this),this.showLayer(0),this},showLayer:function(t,e){var i=this.layers[t];i&&(this.hideAllLayer(t),i.$parent.show(),(t=this.viewController.current())&&(i.containerView.current(!0),i.willAppear()),t)&&i.appear()},hideLayer:function(t){var e,t=this.layers[t];t&&((e=this.viewController.current())&&(t.containerView.current(!1),t.willDisappear()),t.$parent.hide(),e)&&t.disappear()},hideAllLayer:function(i){_.each(this.layers,function(t,e){if(!_.isUndefined(i)&&i==e)return!0;this.hideLayer(e)},this)},play:function(){return this.state(this.model.states[0].value),this},_play:function(){_.isUndefined(this.current)&&(this.current=0),this._stop(),this.timer()},isPlaying:function(){return this.state()===this.model.states[0].value||this.isLooping()},stop:function(){return this.state(this.model.states[1].value),this},_stop:function(t){this._stopTimer(),this.current=0,this.showLayer(0)},_stopTimer:function(){this._timerObject&&(clearTimeout(this._timerObject),this._timerObject=null)},isStopped:function(){return this.state()===this.model.states[1].value},loop:function(){return this.state(this.model.states[2].value),this},_loop:function(t){this.__loop=!0,this.current=0,this._play()},isLooping:function(){return this.state()===this.model.states[2].value},timer:function(){this._timerObject=setTimeout(function(){if(!this.isStopped()){if(this.current++,this.model.sprites.length<=this.current){if(!this.__loop)return void this.stop();this.current=0}this.showLayer(this.current),this.timer()}}.bind(this),1e3*this.model.sprites[this.current].duration)},remove:function(){o.remove.call(this),this._stopTimer()}}),i.MODEL=function(){return _.merge(t.MODEL(),{animationLayers:!0,sprites:[{duration:.1}]})},e.UIWidgetSpriteAnimation=i}),define("toast/widgets/UIWidgetMediaSyncScene",["../core","./UIWidgetSlideContainer"],function(o,t){"use strict";var e=o.Strings,n=(e.PLAY,e.PAUSE,e.STOP,e.END,t.prototype),e=t.extend();return _.extend(e.prototype,n,{className:"container widget-media-sync-screen",templateCenterPlayButtonHTML:function(){return'<div class="center-icon center-play-btn"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 841.89 595.281" enable-background="new 0 0 841.89 595.281" xml:space="preserve" pointer-events="none" fill="#fff"><path fill="#454545" fill-opacity="0.9" d="M823.566,96.33c-9.656-36.276-30.828-66.98-67.104-76.637  C690.72,2.112,420.945,0.502,420.945,0.502s-269.776,1.61-335.518,19.19C49.151,29.35,28.104,60.054,18.323,96.33  C0.743,162.071,0,297.64,0,297.64s0.743,135.568,18.323,201.311c9.657,36.275,30.828,66.98,67.104,76.637  c65.742,17.58,335.518,19.189,335.518,19.189s269.775-1.609,335.518-19.189c36.275-9.656,57.447-40.361,67.104-76.637  c17.58-65.742,18.324-201.311,18.324-201.311S841.146,162.071,823.566,96.33z"></path><path d="M557.132,297.64L334.28,173.833v247.614"></path></svg></div>'},initialize:function(t){n.initialize.call(this,t)},render:function(){return n.render.call(this),o.config.delegatePlayerInteractions&&o.config.delegatePlayerInteractions.userInteractionDisabled&&(this.userInteractionDisabled=!0),this},commonRender:function(){n.commonRender.call(this)},renderMediaPlayer:function(){},getMediaPlayerInstance:function(){return this._widgetMediaPlayer},renderLayerSize:function(t){},mount:function(){n.mount.call(this),this._widgetMediaPlayer||(this._widgetMediaPlayer=this.renderMediaPlayer()),this._widgetMediaPlayer._timeupdateCallback(this.mediaTimeupdate,this),this._widgetMediaPlayer._mediaStatusChangeCallback(this.mediaStatusChange,this),this._widgetMediaPlayer._changeFullscreenCallback(this.changeFullscreen,this),this._widgetMediaPlayer.mount(),_.each(this.layers,function(t){t.containerView.scaleContent=!0},this),this.updateSlideLayout(),this.updateCenterPlayButton()},mountAll:function(){n.mountAll.call(this),this._widgetMediaPlayer.mountAll()},willAppear:function(){n.willAppear.call(this),this._widgetMediaPlayer.willAppear()},appear:function(){n.appear.call(this),this._widgetMediaPlayer.appear()},willDisappear:function(){n.willDisappear.call(this),this._widgetMediaPlayer.willDisappear()},disappear:function(){n.disappear.call(this),this._widgetMediaPlayer.disappear()},scaleDidChange:function(t){n.scaleDidChange.call(this,t),this._widgetMediaPlayer.scaleDidChange(t),this.isRender&&this.getMediaPlayerInstance().$controlBars&&o.lazy(function(){this.updateSlideLayout()},50,this),this.updateCenterPlayButton()},mediaTimeupdate:function(e){if(!this._reverseContent){this._reverseContent=[];for(var t=this.model.contents.length-1;0<=t;t--)this._reverseContent.push(this.model.contents[t])}var i=_.find(this._reverseContent,function(t){return t.syncTime<=e});i&&!this.__slidingInteraction&&(i=this.model.contents.indexOf(i),this.goToSlide(i,e))},mediaStatusChange:function(t){this._hasCenterPlayButton},updateSlideLayout:function(){var e,i,t;n.updateSlideLayout.call(this),this.getMediaPlayerInstance()&&(this.getMediaPlayerInstance().update(),this.model.playerControlBarHeight=this.getMediaPlayerInstance().$controlBars.height(),o.config.delegatePlayerInteractions&&(this.model.playerControlBarHeight=0),e=this.model.width,i=this.model.height-this.model.playerControlBarHeight,this.$el.height(i),this.$el.find("ul").height("100%"),_.each(this.layers,function(t){t.$parent.width(e),t.$parent.height(i),o.Book.fitPage(t.containerView),t.$el.css({left:(t.$parent.width()-t.$el.width())/2,top:(t.$parent.height()-t.$el.height())/2})},this),this.fullscreenSlideCtrl)&&(t=this.model.playerControlBarHeight,t={height:this.$parent.height()-t},this.fullscreenSlideCtrl.$el.parent().css(t),o.Book.fitPage(this.fullscreenSlideCtrl),this._fullscreenSliderModel.view.updateSlideLayout())},goToSlide:function(t,e){n.goToSlide.call(this,t),this._widgetMediaPlayer&&this.getActiveSlideIndex()!==t&&this._widgetMediaPlayer.isReadyMedia()&&(this._fullscreenSliderModel&&this._fullscreenSliderModel.view.goToSlide(t),this.__slidingInteraction)&&(t=this.model.contents[t])&&!_.isUndefined(t.syncTime)&&String(t.syncTime).length&&(this._widgetMediaPlayer.$media[0].currentTime=Number(t.syncTime))},fullscreenSliderChange:function(t){this.getActiveSlideIndex()!==t&&this._widgetMediaPlayer.isReadyMedia()&&this._fullscreenSliderModel.view.__slidingInteraction&&(t=this.model.contents[t])&&!_.isUndefined(t.syncTime)&&String(t.syncTime).length&&(this._widgetMediaPlayer.$media[0].currentTime=Number(t.syncTime))},startFullscreenSlide:function(){this.fullscreenSlideCtrl&&(this.fullscreenSlideCtrl.reset(),this.fullscreenSlideCtrl.$el.parent().remove(),this.fullscreenSlideCtrl=null);var t=this.getMediaPlayerInstance().$controlBars.height();o.config.delegatePlayerInteractions&&(t=0);var t={height:this.$parent.height()-t},e=$("<div />",{class:"widget-media-sync-screen-slider-container"}),i=$("<div />",{class:"toast-ctrl"}),n=this.model.background.color,t=(e.append(i),e.css(t),e.css("backgroundColor",n),this.$parent.append(e),{width:this.model.width,height:this.model.contents[0].height,contents:[_.extend(this.model.toJSON(),{viewType:"WidgetSlideContainer",left:0,top:0,height:this.model.contents[0].height})]}),n=new o.ViewController({el:i});n._state=o.STATUS_NONE,n.index=-1,n.load(t,{showLoader:!1,readyonly:!0}),this.fullscreenSlideCtrl=n,o.Book.fitPage(n),this._fullscreenSliderModel=n.find("id",this.model.id),this._fullscreenSliderModel.view.goToSlide(this.getActiveSlideIndex()),this._fullscreenSliderModel.view._sliderChangeCallback(this.fullscreenSliderChange,this),n.willAppear(),n.appear(),this.updateSlideLayout()},stopFullscreenSlide:function(){this.fullscreenSlideCtrl&&(this.goToSlide(this._fullscreenSliderModel.view.getActiveSlideIndex()),this.fullscreenSlideCtrl.reset(),this.fullscreenSlideCtrl.$el.parent().remove(),this.fullscreenSlideCtrl=null),this._fullscreenSliderModel=null,this.updateSlideLayout()},changeFullscreen:function(t){t?this.startFullscreenSlide():this.stopFullscreenSlide()},setCenterPlayButton:function(){this._hasCenterPlayButton=!0,this.$el.append(this.templateCenterPlayButtonHTML()),this.$centerPlayBtn=this.$el.find(".center-play-btn"),this.$centerPlayBtnIcon=this.$centerPlayBtn.find("svg"),this.userInteractionDisabled&&this.$centerPlayBtn.hide()},updateCenterPlayButton:function(){var t,e,i,n;this._hasCenterPlayButton&&(e=this.$parent.width(),i=this.$parent.height(),this.$centerPlayBtn.width(),this.$centerPlayBtn.height(),n=o.isMobileDevice?60:80,t=this._widgetMediaPlayer&&this._widgetMediaPlayer._isFullscreen()?(t=Math.min(n,Math.min(e,i))-5,t*=Math.min(this.$parent.width()/this.model.width,this.$parent.height()/this.model.height),Math.min(120,Math.max(n,t))):(t=n/this.viewController.contentScale,Math.min(80,t)),!_.isUndefined(this.model.properties.centerPlayButtonBgColor)&&this.$centerPlayBtnIcon&&this.$centerPlayBtnIcon.length&&this.$centerPlayBtnIcon.find("path").get(0).setAttribute("fill",this.model.properties.centerPlayButtonBgColor),this.$centerPlayBtn.css({width:t+"px",height:t+"px"}))},centerPlayBtnClicked:function(){this.getMediaPlayerInstance().play()},remove:function(){this.stopFullscreenSlide(),this._widgetMediaPlayer&&this._widgetMediaPlayer.remove(),n.remove.call(this)}}),e.MODEL=function(){return _.merge(t.MODEL(),{sceneSync:!0})},o.UIWidgetMediaSyncScene=e}),define("toast/widgets/UIWidgetAudioSyncScene",["../core","./UIWidgetMediaSyncScene"],function(i,t){"use strict";i.Strings;i.const.AUDIO_SYNC_SCENE_PLAYER_CONTROLBAR_HEIGHT=50;var e=t.prototype,n=t.extend();return _.extend(n.prototype,e,{className:"container widget-slide-container widget-audio-sync-screen",style:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 0%"},templateToggleFullscreenButtonHTML:function(){return'<div class="control-btn" data-action="toggleFullScreen"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="fullscreen-icon"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" pointer-events="none" viewBox="0 0 24 24" class="fullscreen-exit-icon"><path d="M0 0h24v24H0z" fill="none"/><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg></div>'},initialize:function(t){this.model.playerControlBarHeight=i.const.AUDIO_SYNC_SCENE_PLAYER_CONTROLBAR_HEIGHT,i.config.delegatePlayerInteractions&&(this.model.playerControlBarHeight=0),e.initialize.call(this,t)},render:function(){return e.render.call(this),this.setCenterPlayButton(),this},renderMediaPlayer:function(){var t=$("<div />",{class:"widget-audio-sync-scene-player-container"}),e=(t.height(this.model.playerControlBarHeight),this.$playerContainer=t,this.$parent.append(t),_.extend(i.UIWidgetAudioPlayer.MODEL(),{id:"player-"+this.model.id,width:this.model.width,height:this.model.height})),e=new i.Model(e),e=(e.properties=_.extend({assets:[this.model.properties.audioFile],autoplay:this.model.properties.playerAutoplay,loop:this.model.properties.playerLoop,disableMediaSeeking:this.model.properties.playerDisableMediaSeeking,backgroundColor:this.model.properties.playerBackgroundColor,buttonIconColor:this.model.properties.playerButtonIconColor,textColor:this.model.properties.playerTextColor,seekbarBgColor:this.model.properties.playerSeekbarBgColor,seekbarColor:this.model.properties.playerSeekbarColor}),new i.UIWidgetAudioPlayer({viewController:this.viewController,model:e,$parent:this.$parent}));return t.append(e.render().el),e.$el.find(".right-control-group").append(this.templateToggleFullscreenButtonHTML()),e._compositionWidgetPlayer=!0,e._initElements(),e},mount:function(){this.$centerPlayBtn.on("click",$.proxy(this.centerPlayBtnClicked,this)),e.mount.call(this)},scaleDidChange:function(t){this.setPlayerBarHeight(),this.getMediaPlayerInstance().controllbarMinSize=null,e.scaleDidChange.call(this,t),this.isRender&&this.getMediaPlayerInstance().$controlBars&&i.isIOS&&this.fullscreenSlideCtrl&&i.lazy(function(){this.updateSlideLayout()},50,this)},mediaStatusChange:function(t){e.mediaStatusChange.call(this,t),"playing"===t?this.$centerPlayBtn.addClass("_hide"):this.$centerPlayBtn.removeClass("_hide")},setPlayerBarHeight:function(){var t;this.viewController.contentScale<1&&(t=this.getMediaPlayerInstance().$controlBars.attr("data-controlbars-height"),t=parseInt(t/this.viewController.contentScale)||""),this.getMediaPlayerInstance().$controlBars.css("height",t)},updateSlideLayout:function(){e.updateSlideLayout.call(this),this.$playerContainer&&this.$playerContainer.height(this.model.playerControlBarHeight)},startFullscreenSlide:function(){e.startFullscreenSlide.call(this),this.$parent.addClass("show-slide"),this.$parent.css("backgroundColor","black")},stopFullscreenSlide:function(){e.stopFullscreenSlide.call(this),this.$parent.removeClass("show-slide"),this.$parent.css("backgroundColor","")}}),n.MODEL=function(){return _.merge(t.MODEL(),{audioSyncScene:!0})},i.UIWidgetAudioSyncScene=n}),define("toast/widgets/UIWidgetMovieSyncScene",["../core","./UIWidgetMediaSyncScene"],function(e,t){"use strict";e.Strings;var i=t.prototype,n=t.extend();return _.extend(n.prototype,i,{className:"container widget-slide-container widget-movie-sync-screen",initialize:function(t){this.model.playerControlBarHeight=e.const.MOVIE_PLAYER_CONTROLBAR_HEIGHT,i.initialize.call(this,t)},templateShowSlideButtonHTML:function(){return'<div class="control-btn" data-action="toggleShowSlide"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"/></svg></div>'},render:function(){return i.render.call(this),this},renderMediaPlayer:function(){var t=_.extend(e.UIWidgetMoviePlayer.MODEL(),{id:"player-"+this.model.id,width:this.model.width,height:this.model.height}),t=new e.Model(t),t=(t.properties=_.extend({asset:this.model.properties.movieFile,autoplay:this.model.properties.playerAutoplay,disableMediaSeeking:this.model.properties.playerDisableMediaSeeking,backgroundColor:this.model.properties.playerBackgroundColor,cover:this.model.properties.playerCover,centerPlayButtonBgColor:this.model.properties.playerCenterPlayButtonBgColor}),new e.UIWidgetMoviePlayer({viewController:this.viewController,model:t,$parent:this.$parent}));return this.$parent.prepend(t.render().el),t.$el.find(".right-control-group").append(this.templateShowSlideButtonHTML()),t.$el.find('[data-action="toggleShowSlide"]').on("click",$.proxy(this.toggleShowSlide,this)),t._initElements(),t},disappear:function(){i.disappear.call(this),this.$parent.hasClass("show-slide")&&this.getMediaPlayerInstance().$controlBars.removeClass("_hide")},toggleShowSlide:function(){this.$parent.hasClass("show-slide")?(this.$parent.removeClass("hide-video"),this.$parent.addClass("show-video"),this.$parent.removeClass("show-slide")):(this.$parent.removeClass("show-video"),this.$parent.addClass("hide-video"),this.$parent.addClass("show-slide"))}}),n.MODEL=function(){return _.merge(t.MODEL(),{})},e.UIWidgetMovieSyncScene=n}),define("toast/widgets/UIWidgetAudio",["../core","./UIWidget"],function(e,t){"use strict";var i=e.Strings,n=[{value:"Play",label:i.PLAY,readonly:!0,checkable:!1},{value:"Pause",label:i.PAUSE,readonly:!0,checkable:!1},{value:"Stop",label:i.STOP,readonly:!0,checkable:!1},{value:"End",label:i.END,readonly:!0,checkable:!1}],o=t.prototype,i=t.extend();return _.extend(i.prototype,o,{tagName:"audio",initialize:function(t){o.initialize.call(this,t)},states:function(){return o.states.call(this).concat(n)},state:function(t){var e=o.state.apply(this,arguments);if(0!==arguments.length&&e)switch(t){case this.model.states[0].value:this._play();break;case this.model.states[1].value:this._pause();break;case this.model.states[2].value:this._stop();break;case this.model.states[3].value:this._end()}return e},render:function(){o.render.call(this),this.$parent.hide(),e.config.sharedAudioPlayer||(this.$el.attr({src:this._getUrl()}),this.$el.on("loadeddata",$.proxy(this._onLoaded,this)),this.$el.on("ended",$.proxy(this._onEnded,this)),this.$el.load())},autostart:function(){e.config.sharedAudioPlayer||this.model.properties.autoplay&&(this.isReadyMedia()||(this._playAfterLoad=!0),this.state()!==this.model.states[0].value?this.state(this.model.states[0].value):this.isReadyMedia()&&this._play())},autostop:function(){e.config.sharedAudioPlayer||(e.common.removeActiveAudio(this),this._playAfterLoad=!1,this.state()!==this.model.states[2].value?this.state(this.model.states[2].value):this._stop())},_onLoaded:function(){this._isLoaded=!0,this._playAfterLoad&&(this._playAfterLoad=!1,this._play())},_onEnded:function(){this.state()!==this.model.states[3].value&&(this.isWillAppear||this.isAppeared)&&this.state(this.model.states[3].value)},_getUrl:function(){var t;return this.model.properties.asset?t=e.AudioAssets.url(this.model.properties.asset):this.model.properties.url&&-1===(t=this.model.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+this.model.properties.url),t=t&&e.StringUtils.replaceTemplate(t).encodeFilePath()},play:function(){return this.state(this.model.states[0].value),this},_play:function(){this.isReadyMedia()&&(e.common.setActiveAudio(this),this.$el[0].play())},pause:function(){return this.state(this.model.states[1].value),this},_pause:function(){this._playAfterLoad&&(this._playAfterLoad=!1),this.$el[0].pause()},stop:function(t){return this.state(this.model.states[2].value),this},_stop:function(){this._playAfterLoad&&(this._playAfterLoad=!1),this.$el[0].pause(),0===this.$el[0].readyState||_.isUndefined(this.$el[0].currentTime)||(this.$el[0].currentTime=0)},toggle:function(){this.isReadyMedia()&&(this.state()===this.model.states[0].value?this.pause():this.play())},end:function(){this.state(this.model.states[3].value)},_end:function(){this._playAfterLoad&&(this._playAfterLoad=!1),this.$el[0].pause(),0===this.$el[0].readyState||_.isUndefined(this.$el[0].currentTime)||(this.$el[0].currentTime=0)},isPlaying:function(){return!!this.isReadyMedia()&&!!(0<this.$el[0].currentTime&&!this.$el[0].paused&&!this.$el[0].ended&&2<this.$el[0].readyState)},isPaused:function(){return!!this.isReadyMedia()&&!!(0<this.$el[0].currentTime&&this.$el[0].paused&&!this.$el[0].ended&&2<this.$el[0].readyState)},isLoaded:function(){return this._isLoaded},isReadyMedia:function(){return _.isUndefined(this.$el[0])?-1:0!==this.$el[0].readyState||0},onActiveAudioChange:function(){if(this.isWillAppear)switch(this.model.properties.actionOnActiveAudioChange){case"pause":this.pause();break;case"stop":this.stop()}},remove:function(){e.common.removeActiveAudio(this),o.remove.apply(this,arguments)}}),i.MODEL=function(){return _.merge(t.MODEL(),{})},e.UIWidgetAudio=i}),define("toast/widgets/UIWidgetMediaPlayer",["../core","./UIWidget","../views/UIMediaPlayer"],function(e,t,i){"use strict";var n=e.Strings,o=[{value:"Play",label:n.PLAY,readonly:!0,checkable:!1},{value:"Pause",label:n.PAUSE,readonly:!0,checkable:!1},{value:"Stop",label:n.STOP,readonly:!0,checkable:!1},{value:"End",label:n.END,readonly:!0,checkable:!1},{value:"Mute",label:n.MUTE,readonly:!0,checkable:!1}],s=i.prototype,a=t.prototype,n=t.extend();return _.extend(n.prototype,s,{className:"widget-media-player",initialize:function(t){s.initialize.call(this,t)},states:function(){return s.states.call(this).concat(a.states.call(this)).concat(o)},state:function(t){if(0!==arguments.length&&!e._.forHTMLPublishing&&this._currentState!=t)switch(t){case this.model.states[0].value:if(this.play())break;return this._currentState;case this.model.states[1].value:if(this.pause())break;return this._currentState;case this.model.states[2].value:if(this.stop())break;return this._currentState;case this.model.states[3].value:if(this.end())break;return this._currentState;case this.model.states[4].value:if(this.mute())break;return this._currentState}return s.state.call(this,t)}}),n.MODEL=function(){return _.merge(t.MODEL(),{})},e.UIWidgetMediaPlayer=n}),define("toast/widgets/UIWidgetAudioPlayer",["../core","./UIWidgetMediaPlayer","../views/UIAudioPlayer"],function(t,e,i){"use strict";t.Strings;var n=i.prototype,o=e.prototype,i=e.extend();return _.extend(i.prototype,n,{className:"widget-audio-player",initialize:function(t){n.initialize.call(this,t)},states:function(){return n.states.call(this).concat(o.states.call(this)).concat([])},state:function(t){return o.state.call(this,t)},render:function(){return n.render.call(this),this},_startFullscreen:function(){t.requestFullScreen(this.$parent[0])||this._fullscreenDidChanged(!0)},_stopFullscreen:function(){t.exitFullScreen(this.$parent[0])||this._fullscreenDidChanged(!1)},play:function(){return!!n.play.apply(this,arguments)&&(n.state.call(this,this.model.states[0].value),!0)},pause:function(t){return!!n.pause.apply(this,arguments)&&(n.state.call(this,this.model.states[1].value),!0)},stop:function(t){return!!n.stop.apply(this,arguments)&&(n.state.call(this,this.model.states[2].value),!0)},mute:function(t){return!!n.mute.apply(this,arguments)&&(n.state.call(this,this.model.states[4].value),!0)},end:function(t){if(!n.end.apply(this,arguments))return!1;n.state.call(this,this.model.states[3].value)},_didEnded:function(){n._didEnded.apply(this,arguments),n.state.call(this,this.model.states[3].value)}}),i.MODEL=function(){return _.merge(e.MODEL(),{})},t.UIWidgetAudioPlayer=i}),define("toast/widgets/UIWidgetAudioSyncPlayer",["../core","./UIWidgetScrollContainer"],function(i,t){"use strict";var e=i.Strings,n=[{value:"Play",label:e.PLAY,readonly:!0,checkable:!1},{value:"Pause",label:e.PAUSE,readonly:!0,checkable:!1},{value:"Stop",label:e.STOP,readonly:!0,checkable:!1},{value:"End",label:e.END,readonly:!0,checkable:!1}],o=t.prototype,e=t.extend();return _.extend(e.prototype,o,{className:"container widget-audio-sync-player",initialize:function(t){o.initialize.call(this,t),this.audioCollection=[]},states:function(){return o.states.call(this).concat(n)},state:function(t){var e=o.state.apply(this,arguments);if(0!==arguments.length&&e)switch(t){case this.model.states[0].value:this._play();break;case this.model.states[1].value:this._pause();break;case this.model.states[2].value:this._stop();break;case this.model.states[3].value:this._end()}return e},render:function(){var t;return o.render.call(this),this.$audio||(t=$("<audio />"),this.$parent.append(t),this.$audio=t),this.$audio.on("loadeddata",$.proxy(this._onLoaded,this)),this.$audio.on("ended",$.proxy(this._onEnded,this)),this},commonRender:function(){o.commonRender.call(this)},renderContainer:function(){o.renderContainer.call(this);var t=this.containerView.controlbar;return t&&(this.$parent.prepend(t.$parent),t.player=this,t.afterRenderContainer(),this.controlbar=t),this},_getScrollSettings:function(){var t=this.model.properties.wheelSpeed;return{suppressScrollX:!0,wheelSpeed:(t=_.isUndefined(t)?10:t)/100}},_renderScrollContentElement:function(){var t=this.containerView,e=t.bounds();t.$contents.css("width",e.width),t.$contents.css("height",e.height)},appear:function(){i._[this.model.id]||(i._[this.model.id]={}),i._[this.model.id].showTip=!0,o.appear.call(this)},mountAll:function(){o.mountAll.call(this),this.activeAudio=this.audioCollection[0],this.$audio.attr({src:this.getAudioUrl()}),this.$audio.load()},update:function(t,e){return o.update.apply(this,arguments),this.controlbar&&this.controlbar.update(),this},getAudioUrl:function(){var t,e;return this.activeAudio?(t="",(e=this.activeAudio).properties.asset?t=i.AudioAssets.url(e.properties.asset):e.properties.url&&-1===(t=e.properties.url).indexOf("../")&&-1===t.indexOf("./")&&"http:"!==t.protocol()&&"https"!==t.protocol()&&(t="http://"+e.properties.url),t&&i.StringUtils.replaceTemplate(t).encodeFilePath()):""},addAudio:function(t){_.find(this.audioCollection,{id:t.get("id")})||(this.audioCollection.push(t),this.audioCollection=_.sortBy(this.audioCollection,function(t){return t.get("top")}))},setActiveAudio:function(t,e){e=e||{},this.itemClicked=e.itemClicked;var i=this.activeAudio,n=(this.activeAudio=t,(e.force||i&&i!==t)&&(i.view.restoreStyle(),this.$audio.attr({src:this.getAudioUrl()}),this.$audio.load()),this.scrollToActiveAudio(),this);this.delayInterval&&clearTimeout(this.delayInterval),this.delayInterval=setTimeout(function(){n.state()===n.model.states[3].value||n.state()!==n.model.states[0].value?n.state(n.model.states[0].value):!e.force&&i&&i===t?n._toggle():n._play()},250)},audioEnded:function(t){t=t||this.activeAudio,this.audioCollection&&(this.activeAudio.view.restoreStyle(),(t=this.audioCollection.indexOf(t))<this.audioCollection.length-1?!0!==this.itemClicked&&(t=this.audioCollection[t+1],this.setActiveAudio(t)):this.end())},play:function(){return this.audioCollection.length&&this.setActiveAudio(this.audioCollection[0]),this},_play:function(){var t;this.activeAudio&&(i.common.setActiveAudio(this.activeAudio.view),this.activeAudio.view.setActiveStyle(),void 0!==(t=this.$audio[0].play()))&&t.then(function(){}).catch(function(t){})},playAgain:function(){this.activeAudio&&this.setActiveAudio(this.audioCollection[0],{force:!0})},pause:function(){return this.state(this.model.states[1].value),this},_pause:function(){this.activeAudio&&this.$audio[0].pause()},stop:function(t){return this.state(this.model.states[2].value),this},_stop:function(){this.activeAudio&&(this.$audio[0].pause(),0===this.$audio[0].readyState||_.isUndefined(this.$audio[0].currentTime)||(this.$audio[0].currentTime=0),this.activeAudio.view.restoreStyle())},toggle:function(){this.state()===this.model.states[0].value?this.pause():this.play()},_toggle:function(){this.isReadyMedia()&&(this.isPlaying()?this._pause():this._play())},end:function(){this.state(this.model.states[3].value)},_end:function(){var t;this.activeAudio&&(this._stop(),this.activeAudio=this.audioCollection[0],t=this.containerView,this.$audio.attr({src:this.getAudioUrl()}),t.$el.stop().animate({scrollTop:0}))},isPlaying:function(){return!!this.isReadyMedia()&&!!(0<this.$audio[0].currentTime&&!this.$audio[0].paused&&!this.$audio[0].ended&&2<this.$audio[0].readyState)},isPaused:function(){return!!this.isReadyMedia()&&!!(0<this.$audio[0].currentTime&&this.$audio[0].paused&&!this.$audio[0].ended&&2<this.$audio[0].readyState)},isReadyMedia:function(){return _.isUndefined(this.$audio[0])?-1:0!==this.$audio[0].readyState||0},isLoaded:function(){return this._isLoaded},_onLoaded:function(){this._isLoaded=!0},_onEnded:function(){this.audioEnded()},scrollToActiveAudio:function(t){var e,i;(this.activeAudio||t)&&(t=t||this.activeAudio,e=this.containerView,i=this.audioCollection[0].view.$parent,t=t.view.$parent,i=i[0].offsetTop,t=t[0].offsetTop-i,e.$el.stop().animate({scrollTop:t}))},remove:function(){o.remove.call(this)}}),e.MODEL=function(){return _.merge({},t.MODEL(),{})},i.UIWidgetAudioSyncPlayer=e}),define("toast/widgets/UIWidgetAudioSyncPlayerControlBar",["../core","../views/UIView"],function(n,t){"use strict";var e=n.Strings,s=t.prototype,t=t.extend();return _.extend(t.prototype,s,{initialize:function(t){s.initialize.call(this,t)},templateHTML:function(){return Mustache.render(n.HtmlLoader.AudioSyncPlayerControlbar,{Strings:e})},initVolumeBar:function(){this.$volumeBar=this.$el.find(".player-volume-bar"),this.$volumeCurrent=this.$volumeBar.find(".player-volume-bar-current"),this.$volumeSlider=this.$volumeBar.find("[data-volume-slider]");var t,e,i=this;this.$volumeSlider.rangeslider({polyfill:!1,onInit:function(){},onSlide:function(t,e){},onSlideEnd:function(t,e){n.IS_SLIDING=!1,i.$parent.hasClass("volume-sliding")&&i.$parent.removeClass("volume-sliding")},onHandleDown:function(t){n.IS_SLIDING=!0,i.$parent.addClass("volume-sliding"),i.player.$audio[0].muted=!1,i.player.$audio[0].volume=t/100,i._didVolumeupdate()},onHandleMove:function(t){i.player.$audio[0].muted=!1,i.player.$audio[0].volume=t/100,i._didVolumeupdate()}}),!__app__&&this.player&&((t=this.player.$audio).on("play",$.proxy(this._didPlayed,this)),t.on("pause",$.proxy(this._didPaused,this)),t.on("ended",$.proxy(this._didEnded,this)),e=t[0].volume,t[0].muted=!1,this.$volumeSlider.attr("value",100*e),this.$volumeSlider.attr("max",100),this.$volumeSlider.rangeslider("update",!0),this._didVolumeupdate())},commonRender:function(){s.commonRender.call(this),this.$parent.addClass("audio-sync-player-controlbar"),this.$parent.css({width:"100%",height:"60px"}),this.$el.append(this.templateHTML()),__app__&&this.initVolumeBar(),this.update()},update:function(t,e){s.update.apply(this,arguments);var i=this.viewController.collection.properties,n=this.$parent,o=(__app__&&__app__.activeEditor.manager.isContainerEditor()&&(n=__app__.activeEditor.$el.find("#"+this.model.id)),!1===i.activeControlbar?n.hide():n.show(),i.controlbarBgColor||""),o=(n.css("background-color",o),i.controlbarIconColor||"");return n.find(".control-btn").css("color",o),n.find(".player-volume-bar-line").css("background-color",o),n.find(".rangeslider__handle").css("background-color",o),this.viewController.controlbar=this},scaleDidChange:function(t){s.scaleDidChange.apply(this,arguments),this.isViewsDidMounted&&(this.$volumeSlider.closest(".contents").length?this.$volumeSlider.attr("data-content-scale",this.viewController.contentScale):this.$volumeSlider.attr("data-content-scale",1),this.$volumeSlider.rangeslider("update",!0))},_onControlButtonClicked:function(t){t.stopPropagation();var t=$(t.target).closest("[data-action]"),e=t.attr("data-action");e&&this._mediaControlAction(e,t)},_mediaControlAction:function(t){switch(t){case"playAndPause":this.isPlaying()?this.pause():this.play();break;case"play":this.play();break;case"pause":this.pause();break;case"stop":this.stop();break;case"mute":this.mute()}},play:function(){this.player.itemClicked=!1,this.player.play()},isPlaying:function(){return this.player.isPlaying()},pause:function(){this.$parent.addClass("paused"),this.$parent.removeClass("playing stopped"),this.player.itemClicked=!1,this.player.pause()},stop:function(){this.$parent.addClass("stopped"),this.$parent.removeClass("playing paused"),this._userInteraction=!0,this.player.itemClicked=!1,this.player.stop()},mute:function(){var t=this.player.$audio;return t[0].muted=!t[0].muted,t[0].volume||(t[0].volume=1),this._didVolumeupdate(),!0},_didPlayed:function(){this.$parent.addClass("playing"),this.$parent.removeClass("paused stopped")},_didPaused:function(){this._userInteraction&&(this._userInteraction=!1,this.$parent.addClass("paused"),this.$parent.removeClass("playing stopped user-action"))},_didEnded:function(){this.$parent.removeClass("playing paused stopped")},_didVolumeupdate:function(){var t,e=this.player.$audio;e[0].muted?(this.$parent.removeClass("volume-down"),this.$parent.addClass("muted")):(t=100*e[0].volume,n.IS_SLIDING||this.$volumeSlider.val(t).change(),70<=t?this.$parent.removeClass("muted volume-down"):0==t?(this.$parent.removeClass("volume-down"),this.$parent.addClass("muted"),e[0].muted=!0):(this.$parent.removeClass("muted"),this.$parent.addClass("volume-down")))},afterRenderContainer:function(){return this.initVolumeBar(),this.update(),this},remove:function(){this.$timeSlider&&this.$timeSlider.length&&(this.$timeSlider.rangeslider("destroy"),this.$timeSlider=null),s.remove.apply(this,arguments)},events:{"click .control-btn":"_onControlButtonClicked"}}),n.UIWidgetAudioSyncPlayerControlBar=t}),define("toast/widgets/UIWidgetAudioSyncText",["../core","../views/UIText","./UIWidget"],function(t,e,i){"use strict";var n=e.prototype,e=i.extend();return _.extend(e.prototype,n,{initialize:function(t){n.initialize.call(this,t)},setActiveStyle:function(){var t=this.player.model,e={color:t.properties.activeFontColor,transform:"scale("+(t.properties.activeFontScale/100).toFixed(2)+")","transform-origin":"left center"};t.properties.activeFontBold&&(e["font-weight"]="bold"),this.$el.css(e)},restoreStyle:function(){this.$el.css({color:this.orgFontColor,"font-weight":this.orgFontWeight,transform:""})},addAudio:function(){var t=this.$parent.closest(".widget-audio-sync-player").parent().data("view");t&&(t.addAudio(this.model),this.player=t)},_onAudioSyncTextClick:function(){t.IS_PANNING||this.player&&this.player.setActiveAudio(this.model,{itemClicked:!0})},render:function(){n.render.call(this),this.addAudio(),this.orgFontSize||(this.orgFontSize=parseInt(this.$el.css("font-size")),this.orgFontColor=this.$el.css("color"),this.orgFontWeight=this.$el.css("font-weight")),this.$parent.on("click",$.proxy(this._onAudioSyncTextClick,this))}}),e.MODEL=function(){return _.merge(i.MODEL(),{})},t.UIWidgetAudioSyncText=e}),define("toast/widgets/UIWidgetMoviePlayer",["../core","./UIWidgetMediaPlayer","../views/UIMoviePlayer"],function(i,t,e){"use strict";var n=i.Strings,o=[{value:"StartFullscreen",label:n.START_FULL_SCREEN,readonly:!0,checkable:!1},{value:"StopFullscreen",label:n.STOP_FULL_SCREEN,readonly:!0,checkable:!1}],s=e.prototype,a=t.prototype,n=t.extend();return _.extend(n.prototype,s,{className:"widget-movie-player",initialize:function(t){s.initialize.call(this,t)},states:function(){return s.states.call(this).concat(a.states.call(this)).concat(o)},state:function(t){if(0===arguments.length||i._.forHTMLPublishing)return s.state.call(this,t);var e=a.state.call(this,t);if(e)switch(t){case this.model.states[5].value:s.startFullscreen.call(this);break;case this.model.states[6].value:s.stopFullscreen.call(this)}return e},render:function(){return s.render.call(this),this},play:function(){return!!s.play.apply(this,arguments)&&(s.state.call(this,this.model.states[0].value),!0)},pause:function(t){return!!s.pause.apply(this,arguments)&&(s.state.call(this,this.model.states[1].value),!0)},stop:function(t){return!!s.stop.apply(this,arguments)&&(s.state.call(this,this.model.states[2].value),!0)},mute:function(t){return!!s.mute.apply(this,arguments)&&(s.state.call(this,this.model.states[4].value),!0)},end:function(t){return!!s.end.apply(this,arguments)&&(s.state.call(this,this.model.states[3].value),!0)},startFullscreen:function(){return!!s.startFullscreen.apply(this,arguments)&&(s.state.call(this,this.model.states[5].value),!0)},stopFullscreen:function(){return!!s.stopFullscreen.apply(this,arguments)&&(s.state.call(this,this.model.states[6].value),!0)},_didEnded:function(){s._didEnded.apply(this,arguments),s.state.call(this,this.model.states[3].value)}}),n.MODEL=function(){return _.merge(t.MODEL(),{})},i.UIWidgetMoviePlayer=n}),define("toast/widgets/UIWidgetTextInput",["../core","./UIWidget"],function(e,t){"use strict";var i=e.Strings,n=[{value:"RightAnswer",label:i.RIGHT_ANSWER,readonly:!0,checkable:!1},{value:"WrongAnswer",label:i.WRONG_ANSWER,readonly:!0,checkable:!1}],o=t.prototype,i=t.extend();return _.extend(i.prototype,o,{tagName:"input",className:"form-control",style:{color:"#999",fontSize:"20px",fontFamily:"Nanum Gothic",padding:"10px"},attributes:{type:"text"},initialize:function(t){_.bindAll(this,"_onRightAnswerInputClicked"),o.initialize.call(this,t)},states:function(){return o.states.call(this).concat(n)},setWidgetData:function(t){(t="string"==typeof(t=t||{})?JSON.parse(t):t).widgetId&&t.widgetId!==this.model.id||(this.widgetDataModifed(!1),!_.isUndefined(t.userInputValue)&&(t=t.userInputValue,this.$el.val(t),this._check(),e.data.set(this.__storageId,t),this.actions.enter||this.animations.enter)&&this._execute("enter"))},getWidgetData:function(){return this.$el.val()?{widgetId:this.model.id,userInputValue:this.$el.val()}:{}},render:function(){return o.render.call(this),this._action="hidden",this.widgetDataModifed(!1),this},commonRender:function(){this.style=_.extend({},o.style,this.style),_.isUndefined(this.model.properties.padding)?this.model.properties.padding=parseInt(this.style.padding):this.style.padding=this.model.properties.padding+"px",o.commonRender.call(this)},mountAll:function(){var t;return o.mountAll.call(this),this.$el.css("cursor",""),e.config.widgetDataManager&&!_.isEmpty(e.config.widgetDataManager.url)||(this.__storageId=e.project.config.publishUniqueId+"-"+this.$parent.attr("id"),t=e.data.get(this.__storageId),_.isNull(t)||_.isEmpty(t)?this._setVal():(this.$el.val(t),e.lazy(function(){this._check()},5,this))),this},reset:function(){o.reset.call(this),this.$el.val(""),e.data.set(this.__storageId,this.$el.val()),this._removeRightAnswerEl()},showRightAnswer:function(t){switch(t){case"toggle":var e=this.$rightAnswerEl?"hidden":"visible";this.executeWidgetAction(e);break;case"visible":this.executeWidgetAction("visible");break;case"hidden":this.executeWidgetAction("hidden")}},executeWidgetAction:function(t){switch(t){case"visible":this.$rightAnswerEl||(this.$rightAnswerEl=this.$el.clone(),this.$rightAnswerEl.on("click",this._onRightAnswerInputClicked),this.$parent.append(this.$rightAnswerEl)),this.$rightAnswerEl.val(this.model.properties.rightAnswer),this.model.properties.rightAnswerColor&&this.$rightAnswerEl.css("color",this.model.properties.rightAnswerColor),this.model.properties.rightAnswerBold&&"bold"!==this.$rightAnswerEl.attr("data-font-weight")&&(this._bold=!0,this.$rightAnswerEl.attr("data-font-weight","bold"),this.$rightAnswerEl.css("fontWeight","bold"));break;case"hidden":this.$rightAnswerEl&&(this.$rightAnswerEl.remove(),this.$rightAnswerEl=null),this._bold=!1}},_update:function(t){this.minsize.width=2*this.model.properties.padding,this.minsize.height=2*this.model.properties.padding,this._setVal(),this.model.get("width")<Number(parseFloat(this.$el.css("width")).toFixed(1))&&this.$parent.css("width",this.$el.css("width")),this.model.get("height")<Number(parseFloat(this.$el.css("height")).toFixed(1))&&this.$parent.css("height",this.$el.css("height")),this.$el.css("pointer-events","none")},_setVal:function(){_.isUndefined(this.model.properties.placeholder)||_.isEmpty(this.model.properties.placeholder)||this.$el.val(this.model.properties.placeholder)},_check:function(){var t=this.model.properties.rightAnswer;if(t=t&&String(t),!_.isEmpty(t)&&!_.isEmpty(this.$el.val())){var t=t.toLowerCase(),e=this.$el.val().toLowerCase(),i=!1;switch(this.model.properties.condition){case"equal":(i=t==e?!0:i)||_.each(this.model.properties.rightAnswerList,function(t){if((t=String(t))==e)return!(i=!0)});break;case"contain":(i=-1!=t.indexOf(e)?!0:i)||_.each(this.model.properties.rightAnswerList,function(t){if(-1!=(t=String(t)).indexOf(e))return!(i=!0)})}i?this.state(this.model.states[0].value,{force:!0}):this.state(this.model.states[1].value,{force:!0})}},_onRightAnswerInputClicked:function(){this._removeRightAnswerEl(),this.$el.focus()},_removeRightAnswerEl:function(){this.$rightAnswerEl&&(this.$rightAnswerEl.remove(),this.$rightAnswerEl=null)},_onClick:function(){this.$el.focus()},_onFocus:function(t){e.IS_ZOOM||e.BookZoom._off(),this.$el.val()===this.model.properties.placeholder&&this.$el.val(""),(this.actions.focusin||this.animations.focusin)&&this._execute("focusin")},_onFocusOut:function(){e.IS_ZOOM||e.BookZoom._on(),_.isEmpty(this.$el.val())&&this._setVal(),(this.actions.focusout||this.animations.focusout)&&this._execute("focusout")},_onChange:function(t){this._check(),e.data.set(this.__storageId,this.$el.val()),this.widgetDataModifed(!0),(this.actions.enter||this.animations.enter)&&this._execute("enter")},events:{focus:"_onFocus",focusout:"_onFocusOut",change:"_onChange"}}),i.MODEL=function(){return _.merge(t.MODEL(),{})},e.UIWidgetTextInput=i}),define("toast/widgets/UIWidgetTextInputBox",["../core","./UIWidgetTextInput"],function(t,e){"use strict";var i=e.prototype,e=e.extend();return _.extend(e.prototype,i,{tagName:"textarea",style:{color:"#999",fontSize:"28px",padding:"10px"},initialize:function(t){i.initialize.call(this,t)},commonRender:function(){this.style=_.extend({},i.style,this.style),i.commonRender.call(this)}}),t.UIWidgetTextInputBox=e}),define("toast/widgets/UIWidgetCheckBox",["../core","./UIWidget"],function(i,t){"use strict";i.Strings;var e=[{value:"Check",label:i.Strings.CHECK,readonly:!0},{value:"Uncheck",label:i.Strings.UNCHECK,readonly:!0}],n=t.prototype,t=t.extend();return _.extend(t.prototype,n,{style:{backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"},initialize:function(t){this.style=_.extend({},n.style,this.style),this.$input=$("<input />",{type:"checkbox",checked:!0}),this.$input.hide(),this.$parent.prepend(this.$input),n.initialize.call(this,t)},states:function(){return n.states.call(this).concat(e)},state:function(t){t=n.state.call(this,t);return 0!==arguments.length&&t&&(this._currentState===this.model.states[0].value?this.checked(!0):this._currentState===this.model.states[1].value&&this.checked(!1)),t},_setImage:function(t){var e;this.model.properties.checked||_.isEmpty(this.model.properties.uncheckImage)||(e=this.model.properties.uncheckImage,this._uncheckImage=this.model.properties.uncheckImage),this.model.properties.checked&&!_.isEmpty(this.model.properties.checkImage)&&(e=this.model.properties.checkImage,this._checkImage=this.model.properties.checkImage),(e=t?e:e||(_.isEmpty(this.model.properties.checkImage)?this.model.properties.uncheckImage:this.model.properties.checkImage))?(t=i.ImageAssets.url(e),this.style.backgroundImage='url("'+t+'")',this.$el.css("backgroundImage",this.style.backgroundImage)):(this.style.backgroundImage="",this.$el.css("backgroundImage",""))},render:function(){return n.render.call(this),this._setImage(!0),0===this.$el.parents('[data-view-type="WidgetGroupCheckBox"]').length&&this.$el.on("click",$.proxy(this.handleClick,this)),this},checked:function(t){if(0===arguments.length)return this.model.properties.checked;this.model.properties.checked!==t&&(this.model.properties.checked=t,this.model.properties.checked?(this.$input.attr("checked",!0),n.state.call(this,this.model.states[0].value)):(this.$input.removeAttr("checked"),n.state.call(this,this.model.states[1].value)),this._setImage(!0))},handleClick:function(t){this.checked(!this.model.properties.checked)}}),i.UIWidgetCheckBox=t}),define("toast/widgets/UIWidgetGroupCheckBox",["../core","./UIWidgetContainer"],function(t,e){"use strict";t.Strings;var i=[{value:"RightAnswer",label:t.Strings.RIGHT_ANSWER,readonly:!0,checkable:!1},{value:"WrongAnswer",label:t.Strings.WRONG_ANSWER,readonly:!0,checkable:!1}],n=e.prototype,o=e.extend();return _.extend(o.prototype,n,{initialize:function(t){n.initialize.call(this,t)},states:function(){return n.states.call(this).concat(i)},setWidgetData:function(t){var e;"string"==typeof(t=t||{})&&(t=JSON.parse(t)),this.widgetDataModifed(!1),t.widgetId&&t.widgetId!==this.model.id||_.isUndefined(t.selectedTarget)||(e=t.selectedTarget,this._check(e),_.isUndefined(t.state))||t.state===this.state()||this.state(t.state)},getWidgetData:function(){return this._widgetData||(this._widgetData={}),_.extend(this._widgetData,{widgetId:this.model.id}),this._widgetData.state!==this.state()&&(this.widgetDataModifed(!0),this._widgetData.state=this.state()),this._widgetData},render:function(){return n.render.call(this),this},mount:function(){n.mount.call(this),this._elements=this.containerView.$contents.children(".toast-object"),_.each(this._elements,function(t){t=$(t);0!==t.find('[data-view-type="WidgetCheckBox"]').length&&t.addClass("check-group")}),this._elements.on("click",$.proxy(this._handleClick,this))},reset:function(){n.reset.call(this),this._checkAll(!1)},showRightAnswer:function(t){if(this.model.properties.targets&&this.model.properties.targets.length)switch(t){case"toggle":this.containerView.find("id",this.model.properties.targets[0],!0).view.checked()?this._checkAll(!1):this._check(this.model.properties.targets[0],{silent:!0});break;case"visible":this._check(this.model.properties.targets[0],{silent:!0});break;case"hidden":this._checkAll(!1)}},_checkAll:function(i,n){n=n||{},_.each(this._elements,function(t){t=$(t).find('[data-view-type="WidgetCheckBox"]');if(0!==t.length){if(t=t.parents(".toast-object"),n.excludes){var e=t.attr("id");if(_.find(n.excludes,function(t){if(t===e)return!0}))return!0}t=this.containerView.find("id",t.attr("id"),!0);t&&(t.view.checked(i),t.view.$el.css("opacity",""))}},this)},_check:function(e,t){t=t||{},this._checkAll(!1,{excludes:[e]});var i=this.containerView.find("id",e,!0);i&&(i.view.checked(!0),i.view._silent=t.silent,t.silent?i.view.$el.css("opacity",.35):((t=i.view.$el.closest(".check-group")).length&&(e=t.attr("id")),i.view.$el.css("opacity",""),_.find(this.model.properties.targets,function(t){if(t===e)return!0})?this.state(this.model.states[0].value):this.state(this.model.states[1].value))),this._widgetData||(this._widgetData={}),this._widgetData.selectedTarget=e},_click:function(e){this.containerView.find("id",e,!0)&&(_.find(this.model.properties.targets,function(t){if(t===e)return!0})?this.state(this.model.states[0].value):this.state(this.model.states[1].value)),this._widgetData||(this._widgetData={}),this._widgetData.selectedTarget=e},_handleClick:function(t){var t=$(t.currentTarget),e=t.find('[data-view-type="WidgetCheckBox"]');0!==e.length?(t=e.closest(".toast-object"),this._check(t.attr("id"))):this._click(t.attr("id")),this.widgetDataModifed(!0)}}),o.MODEL=function(){return _.merge(e.MODEL(),{})},t.UIWidgetGroupCheckBox=o}),define("toast/widgets/UIWidgetDragLineConnector",["../core","./UIWidget","../utils/ImageUtils"],function(n,t,e){"use strict";n.Strings;var i=[{value:"Success",label:n.Strings.SUCCESS,readonly:!0},{value:"Failure",label:n.Strings.FAILURE,readonly:!0}],o=t.prototype,t=t.extend();return _.extend(t.prototype,o,{maintainRatio:!0,initialize:function(t){this.style=_.extend({},o.style,this.style),o.initialize.call(this,t)},states:function(){return o.states.call(this).concat(i)},render:function(){o.render.call(this),this.model.properties.dlc_handleImage&&(t=n.ImageAssets.url(this.model.properties.dlc_handleImage),this.$el.css("backgroundImage",'url("'+t+'")'));var t={left:parseInt(this.$parent[0].style.left),top:parseInt(this.$parent[0].style.top),width:parseInt(this.$parent[0].style.width),height:parseInt(this.$parent[0].style.height)};return this._orgRect=t,this._$line=$("<div />",{class:"line"}),this._$line.css({position:"absolute",left:t.left+(t.width-this.model.properties.dlc_lineWidth)/2,top:t.top+(t.height-this.model.properties.dlc_lineWidth)/2,width:this.model.properties.dlc_lineWidth,height:this.model.properties.dlc_lineWidth,backgroundColor:this.model.properties.dlc_lineColor}),this.$parent.before(this._$line),this._$normalImage=$("<img />",{src:n.ImageAssets.url(this.model.properties.dlc_normalImage)}),this._$normalImage.css({position:"absolute",left:t.left,top:t.top,width:t.width,height:t.height}),this.$parent.before(this._$normalImage),this._$ghost=$("<div />",{id:this.$parent.attr("id")}),this._$ghost.css({position:"absolute",left:t.left,top:t.top,width:t.width,height:t.height,cursor:"pointer"}),this.$parent.before(this._$ghost),this._$ghost.drag("start",$.proxy(this._onGhostDragStart,this),{distance:1,drop:!0}),this._$ghost.drag("drag",$.proxy(this._onGhostDrag,this)),this._$ghost.drag("end",$.proxy(this._onGhostDragEnd,this)),this},reset:function(){var t;o.reset.call(this),this.model.properties.dlc_handleImage&&(t=n.ImageAssets.url(this.model.properties.dlc_handleImage),this.$el.css("backgroundImage",'url("'+t+'")')),this._resetDrag()},setWidgetData:function(t){"string"==typeof(t=t||{})&&(t=JSON.parse(t)),this.widgetDataModifed(!1),t.widgetId&&t.widgetId!==this.model.id||_.isUndefined(t.state)||t.state===this.state()||this.state(t.state)},getWidgetData:function(){return this._widgetData||(this._widgetData={}),_.extend(this._widgetData,{widgetId:this.model.id}),this._widgetData.state!==this.state()&&(this.widgetDataModifed(!0),this._widgetData.state=this.state()),this._widgetData},_onDragStart:function(t,e){o._onDragStart.call(this,t,e)},_onDrag:function(t,e){o._onDrag.call(this,t,e),this._draw()},_onDragEnd:function(t,e){o._onDragEnd.call(this,t,e),this._dragEndHandler()},_doDropAnimations:function(e){var i,t;e.dropAnimations?(i=[],_.each(e.dropAnimations,function(t){(!t.view.model.__autoDropTarget__||t.model.view.model.id===e.dropAnimations.drop.model.id)&&i.push(t)},this),this._executeAnimations(i),delete e.dropAnimations):this.isAnimating||this._hasDropAcceptAnimations(e)||this._hasDropRejectAnimations(e)||(t={left:this.model.left,top:this.model.top},this.$parent.velocity(t,{progress:$.proxy(this._onAanimationProgress,this)}))},_onDrop:function(t,e){t=o._onDrop.call(this,t,e);return t&&(e=$(e.drag).attr("id"),n.$el.data(this.model.id+"-drop",e)),t},_onDropAccept:function(){o._onDropAccept.call(this),this.state(i[0].value,{force:!0})},_onDropReject:function(){o._onDropReject.call(this),this.state(i[1].value,{force:!0})},_onGhostDragStart:function(t,e){o._onDragStart.call(this,t,e),this._resetDrag()},_onGhostDrag:function(t,e){o._onDrag.call(this,t,e);t={left:parseInt(this._$ghost[0].style.left),top:parseInt(this._$ghost[0].style.top),width:parseInt(this._$ghost[0].style.width),height:parseInt(this._$ghost[0].style.height)};this.$parent.css(t),this._draw()},_onGhostDragEnd:function(t,e){this._dragEndHandler(),this._$ghost.css(this._orgRect),o._onDragEnd.call(this,t,e)},_dragEndHandler:function(){},_onAanimationProgress:function(){this._draw()},_resetDrag:function(t){this.$parent.css(this._orgRect),this._draw()},_draw:function(){var t=this._$normalImage[0].getBoundingClientRect(),e=this.$parent[0].getBoundingClientRect(),i=Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2)),e=Math.atan2(e.top-t.top,e.left-t.left);this._$line.css({width:i/this.viewController.contentScale,transform:"rotate("+e+"rad)",transformOrigin:this.model.properties.dlc_lineWidth/2+"px 50% 0px"}),n.$el.data(this.model.id+"-angle",e)}}),n.UIWidgetDragLineConnector=t}),define("toast/widgets/UIWidgetSketchPad",["../core","./UIWidgetContainer","../libs/Sketchpad"],function(i,t,n){"use strict";i.Strings;var o=t.prototype,e=t.extend();return _.extend(e.prototype,o,{initialize:function(t){o.initialize.call(this,t)},widgetDataModifed:function(t){if(!arguments.length)return this._sketchpad.isModified();this._sketchpad._isModified=t},setWidgetData:function(t){!(t="string"==typeof(t=t||{})?JSON.parse(t):t).drawData||t.widgetId&&t.widgetId!==this.model.id||("string"==typeof t.drawData&&(t.drawData=JSON.parse(t.drawData)),i.lazy(function(){this._sketchpad.clear(),this._sketchpad.redraw(t.drawData.strokes)},10,this))},getWidgetData:function(){return this._sketchpad.isEmpty()?{}:_.extend({},{widgetId:this.model.id,drawData:this._sketchpad.toJSON()})},render:function(){return o.render.call(this),this},commonRender:function(){this.style=_.extend({},this.style,this.model.get("style")),o.commonRender.call(this)},mount:function(){if(o.mount.call(this),this.isRender){this._$canvasContainer=this.$el.find('[data-widget-private-id="SketchPad_Canvas_Container"]'),this._$canvasContainer.css({overflow:"hidden"});var t=this._$canvasContainer.find(".SketchPad_Canvas");if(t.length||(t=$("<canvas />",{class:"SketchPad_Canvas"}),this._$canvasContainer.append(t)),i._.forHTMLPublishing)return this;var e=i.project.finds(this.viewController.collection.models,{name:"widgetPrivateID",value:"SketchPad_Canvas_Container"},!0);this._sketchpad=new n({element:t,width:e[0].width,height:e[0].height}),this._sketchpad.scale=this.viewController.contentScale,this.changePenMode(this.model.properties.changePenMode),this.changeColor(this.model.properties.changeColor),this.changePenSize(this.model.properties.changePenSize),this.changeEraserSize(this.model.properties.changeEraserSize)}},scaleDidChange:function(t){o.scaleDidChange.call(this,t),this._sketchpad.scale=t,this._sketchpad.element.attr("data-scale",t)},changePenMode:function(t){var e,i="eraser"===t?(e=this._sketchpad.penModes.eraser,2*this._penSize):(e=this._sketchpad.penModes.draw,this._penSize);e!==this._sketchpad.penMode&&(this._sketchpad.penMode=e,this._sketchpad.penSize=i,this.trigger("changeState","changePenMode",t))},changeColor:function(t){this._sketchpad.color!==t&&(this._sketchpad.color=t,this.trigger("changeState","changeColor",t))},changePenSize:function(t){this._penSize!==t&&(this._penSize=t,this._sketchpad.penSize=this._penSize,this.trigger("changeState","changePenSize",t))},changeEraserSize:function(t){this.trigger("changeState","changeEraserSize",t)},reset:function(){this.trigger("reset"),this._sketchpad.clear({force:!0})}}),e.MODEL=function(){return _.merge(t.MODEL(),{})},i.UIWidgetSketchPad=e}),define("toast/widgets/UIWidgetTimer",["../core","./UIWidget"],function(t,e){"use strict";var i=t.Strings,n=[{value:"Start",label:i.START,readonly:!0},{value:"Stop",label:i.STOP,readonly:!0}],o=e.prototype,i=e.extend();return _.extend(i.prototype,o,{initialize:function(t){o.initialize.call(this,t),this._count=0},states:function(){return o.states.call(this).concat(n)},state:function(){var t=o.state.apply(this,arguments);if(arguments.length&&t)switch(this._currentState){case this.model.states[0].value:this.start();break;case this.model.states[1].value:this.stop()}return t},render:function(){return o.render.call(this),this.$parent.hide(),this},autostart:function(){this.model.properties.autostart&&t.lazyOnce(function(){this.state()!==this.model.states[0].value&&this.state(this.model.states[0].value)},5,this.__refreshTimeout__,this)},autostop:function(){this.state()!==this.model.states[1].value?this.state(this.model.states[1].value):this.stop()},start:function(){var t=this.model.properties.waitForInterval;0<t?this._waitTimerObject=setTimeout(function(){this._start()}.bind(this),t):this._start()},_start:function(){var t=this.model.properties.interval;!_.isUndefined(t)&&(this.stop(),this._executeActions(this.actions.timer),this._executeAnimations(this.animations.timer),1<this.model.properties.count||this.model.properties.repeat)&&this.timer()},stop:function(){this._waitTimerObject&&(clearTimeout(this._waitTimerObject),this._waitTimerObject=null),this._timerObject&&(clearTimeout(this._timerObject),this._timerObject=null),this._count=0,_.isEmpty(this.animations)||this._executeAnimations(this.animations.timer,{stop:!0})},timer:function(){var t,e;this._count++,!this.model.properties.repeat&&this.model.properties.count<=this._count?this.state(this.model.states[1].value):(t=this.model.properties.interval,0!==(e=this.model.properties.intervalOffset)&&(t=this.makeRandom(t-e,t)),this._timerObject=setTimeout(function(){this._executeActions(this.actions.timer),this._executeAnimations(this.animations.timer),this.timer()}.bind(this),t))},makeRandom:function(t,e){e=Math.random()*(e-t)+t;return Math.floor(e)},remove:function(){this.stop(),o.remove.call(this)}}),t.UIWidgetTimer=i}),define("toast/widgets/UIWidgetPartialZoom",["../core","./UIWidget"],function(i,t){"use strict";var e=i.Strings,n=[{value:"Start",label:e.START,readonly:!0,checkable:!1},{value:"Exit",label:e.EXIT,readonly:!0,checkable:!1}],o=t.prototype,e=t.extend();return _.extend(e.prototype,o,{initialize:function(t){o.initialize.call(this,t),this._currentState=this.model.states[1].value},states:function(){return o.states.call(this).concat(n)},state:function(t,e){if(!arguments.length)return this._currentState;if(i._.forHTMLPublishing)return o.state.call(this,t,e);t=o.state.call(this,t);if(0!==arguments.length&&t&&!i.isEditor)switch(this._currentState){case this.model.states[0].value:this._start(e);break;case this.model.states[1].value:this._exit(e)}return t},render:function(){return o.render.call(this),this.$parent.css("zIndex",-1),this._startAnimationCompleteFn=$.proxy(this._startAnimationComplete,this),this._exitAnimationCompleteFn=$.proxy(this._exitAnimationComplete,this),this},autostop:function(){this.model.properties.autoexit&&this.state()===this.model.states[0].value&&this.state(this.model.states[1].value,{animation:!1})},scaleDidChange:function(t){o.scaleDidChange.apply(this,arguments),this.state()==this.model.states[0].value&&this._start({animation:!1})},start:function(){return this.state(this.model.states[0].value),this},_start:function(t){t=_.extend({},t);var e=this.viewController.$el,i=e.parent(),n=this.viewController.$contents,o=(e.width(),e.height(),this.viewController.collection.width),s=this.viewController.collection.height,a=this.model.rect(),r=(a.left<0&&(this.model.width=a.width=a.width-a.left,r=!(this.model.left=a.left=0)),a.top<0&&(this.model.height=a.height=a.height-a.top,r=!(this.model.top=a.top=0)),a.top+a.height>s&&(a.height-=a.top+a.height-s,this.model.height=a.height,r=!0),r&&this.$parent.css(a),Math.min(n.width()/this.$parent.width(),n.height()/this.$parent.height())),n=o/2,o=s/2,s=a.left+a.width/2,a=a.top+a.height/2,l=this.viewController.contentScale,n=l*r*(n-s),s=l*r*(o-a),l=this._animationOptions(),o=(!1!==t.animation&&!e.hasClass("partial-zoom-on")||(l.duration=0),l.complete=this._startAnimationCompleteFn,{x:(i.width()-e.width())/2,y:(i.height()-e.height())/2}),a=(this._isAnimating()||!1===t.animation||(e.css({left:o.x,top:o.y}),e.tt_transform("translate(0, 0)")),{left:o.x+n,top:o.y+s,scale:r}),t={width:e.width()*r,height:e.height()*r};t.left=(i.width()-t.width)/2,t.top=(i.height()-t.height)/2,t.height-Math.abs(t.top+a.top)<i.height()?a.top+=i.height()-(t.height-Math.abs(t.top+a.top)):0<t.top+a.top&&(a.top-=t.top+a.top),t.width<i.width()?a.left=(i.width()-t.width/r)/2:t.width-Math.abs(t.left+a.left)<i.width()&&(a.left+=i.width()-(t.width-Math.abs(t.left+a.left))),e.addClass("animating"),e.velocity("stop",!0),e.velocity(a,l),e.addClass("partial-zoom-on")},exit:function(){return this.state(this.model.states[1].value),this},_exit:function(t){t=_.extend({},t);var e,i=this.viewController.$el,n=i.parent();i.hasClass("partial-zoom-on")&&(e=this._animationOptions(),!1===t.animation&&(e.duration=0),e.complete=this._exitAnimationCompleteFn,n={left:(t={x:(n.width()-i.width())/2,y:(n.height()-i.height())/2}).x,top:t.y,scale:1},i.addClass("animating"),i.velocity("stop",!0),i.velocity(n,e),i.removeClass("partial-zoom-on"))},_animationOptions:function(){var t={},e=this.model;if(e.properties.easing&&(t.easing=e.properties.easing),e.properties.inputDuration)t.duration=e.properties.duration;else if(e.properties.namedDurations)switch(e.properties.namedDurations){case"fast":t.duration=300;break;case"normal":t.duration=i.Animation.DURATION_DEFAULT;break;case"slow":t.duration=800;break;default:t.duration=i.Animation.DURATION_DEFAULT}return t},_isAnimating:function(){return this.viewController.$el.hasClass("animating")},_startAnimationComplete:function(){this.viewController.$el.removeClass("animating")},_exitAnimationComplete:function(){var t=this.viewController.$el;t.removeClass("animating"),t.css({left:"",top:""}),t.tt_transform("")},remove:function(){this._startAnimationCompleteFn&&delete this._startAnimationCompleteFn,this._exitAnimationCompleteFn&&delete this._exitAnimationCompleteFn,this._exit({animation:!1}),this._exitAnimationComplete(),o.remove.call(this)}}),e.MODEL=function(){return _.merge(t.MODEL(),{})},i.UIWidgetPartialZoom=e}),define("toast/widgets/UIWidgetTouchGesture",["../core","./UIWidget"],function(a,t){"use strict";a.Strings;var e=t.prototype,t=t.extend();return _.extend(t.prototype,e,{className:"widget-touch-gesture",initialize:function(t){e.initialize.call(this,t)},render:function(){return e.render.call(this),this.$parent.hide(),this},autostart:function(){this._start()},autostop:function(){this._stop()},_start:function(){if(!(this.model.properties.userSelectionEnabled&&_.isEmpty(this.model.properties.userTargets)||_.isEmpty(this.model.properties.constTarget))){var e=[];if(this.model.properties.userSelectionEnabled)_.each(this.model.properties.userTargets,function(t){t=a.Book.find({id:t});t&&t.view&&e.push(t.view.$parent[0])},this);else switch(this.model.properties.constTarget){case"window":e.push(document.body);break;case"book":e.push(a.$book[0]);break;case"currentpage":e.push(this.viewController.$el[0])}_.isEmpty(e)||(this._stop(),this._gestures=[],_.each(e,function(t){var e={},t=new a.Hammer.Manager(t,{inputClass:a.isMobileDevice?a.Hammer.TouchInput:a.Hammer.MouseInput,cssProps:{userSelect:"inherit"}});(this.actions.tap||this.animations.tap)&&(e._tapRecognizer=new Hammer.Tap({event:"tap",taps:1}),e._tapFn=$.proxy(this._handleTap,this),t.add(e._tapRecognizer),t.on("tap",e._tapFn)),(this.actions.doubletap||this.animations.doubletap)&&(e._doubleTapRecognizer=new Hammer.Tap({event:"doubletap",taps:2}),e._doubleTapFn=$.proxy(this._handleDoubleTap,this),t.add(e._doubleTapRecognizer),t.on("doubletap",e._doubleTapFn)),(this.actions.swipeleft||this.animations.swipeleft||this.actions.swiperight||this.animations.swiperight||this.actions.swipeup||this.animations.swipeup||this.actions.swipedown||this.animations.swipedown)&&(e._swipeRecognizer=new Hammer.Swipe({direction:Hammer.DIRECTION_ALL}),e._swipeLeftFn=$.proxy(this._handleSwipeLeft,this),e._swipeRightFn=$.proxy(this._handleSwipeRight,this),e._swipeUpFn=$.proxy(this._handleSwipeUp,this),e._swipeDownFn=$.proxy(this._handleSwipeDown,this),t.add(e._swipeRecognizer),t.on("swipeleft",e._swipeLeftFn),t.on("swiperight",e._swipeRightFn),t.on("swipeup",e._swipeUpFn),t.on("swipedown",e._swipeDownFn)),e.mc=t,this._gestures.push(e)},this))}},_stop:function(){_.isUndefined(this._gestures)||_.isEmpty(this._gestures)||(_.each(this._gestures,function(t){t._swipeLeftFn&&(t.mc.off("swipeleft",t._swipeLeftFn),delete t._swipeLeftFn),t._swipeRightFn&&(t.mc.off("swiperight",t._swipeRightFn),delete t._swipeRightFn),t._swipeUpFn&&(t.mc.off("swipeup",t._swipeUpFn),delete t._swipeUpFn),t._swipeDownFn&&(t.mc.off("swipedown",t._swipeDownFn),delete t._swipeDownFn),t._tapFn&&(t.mc.off("tap",t._tapFn),delete t._tapFn),t._doubleTapFn&&(t.mc.off("doubletap",t._doubleTapFn),delete t._doubleTapFn),t._swipeRecognizer&&t.mc.remove(t._swipeRecognizer),t._doubleTapRecognizer&&t.mc.remove(t._doubleTapRecognizer),t._tapRecognizer&&t.mc.remove(t._tapRecognizer),t.mc.destroy(),delete t.mc},this),this._gestures=[])},_executes:function(t){this.isAppeared&&(this._doExecutes(this.actions[t],"actions"),this._doExecutes(this.animations[t]))},_doExecutes:function(t,e){var o,s;_.isEmpty(t)||(_.isArray(t)||(t=[t]),o="actions"!==e,s=[],_.each(t,function(t){var e,i=(o?t.model._:t).properties,n=i.stateTargets;n&&n.length&&(e=[],_.each(n,function(t){t=a.api.find({id:t});t&&e.push(t.model)},this),t.states=i.states,t.condition=i.condition,t.models=e,!this._conditionalChangeState(t))||s.push(t)},this),_.each(s,function(t){o?this._executeAnimations(t):this._executeActions(t)},this))},_handleSwipeLeft:function(t){a._isPreventDefault(t)||this._executes("swipeleft")},_handleSwipeRight:function(t){a._isPreventDefault(t)||this._executes("swiperight")},_handleSwipeUp:function(t){a._isPreventDefault(t)||this._executes("swipeup")},_handleSwipeDown:function(t){a._isPreventDefault(t)||this._executes("swipedown")},_handleTap:function(t){a._isPreventDefault(t)||this._executes("tap")},_handleDoubleTap:function(t){a._isPreventDefault(t)||this._executes("doubletap")},remove:function(){this._stop(),e.remove.call(this)}}),a.UIWidgetTouchGesture=t}),define("toast/widgets/UIWidgetLearnControl",["../core","./UIWidget"],function(t,e){"use strict";t.Strings;var n=e.prototype,e=e.extend();return _.extend(e.prototype,n,{className:"widget-learn-control",privateClick:!0,initialize:function(t){n.initialize.call(this,t)},render:function(){return n.render.call(this),this.$parent.hide(),this},mountAll:function(){var i=this.model.actions[0];i.event||(i.event={type:"click"}),"click"===i.event.type&&(_.each(i.properties.targets,function(t){var e,t=this.viewController._deepFind({id:t});t&&(delete(e=_.cloneDeep(i)).properties.targets,t.actions.push(e))},this),this.model.actions=[]),n.mountAll.call(this)}}),t.UIWidgetLearnControl=e}),define("toast/widgets/UIWidgetUserComponent",["../core","./UIWidget"],function(s,t){"use strict";var a=t.prototype,t=t.extend({initialize:function(t){a.initialize.call(this,t)},render:function(){a.render.call(this),this._componentStep="render";var e,t,i=this.model,n=i.properties.component,o=i.properties.baseUrl;return(n||o)&&(e=this,t=_.extend(window.require.s.contexts._.config,{useXhr:!0}),s.isPreview&&i.properties.previewBaseUrl?(o=s.StringUtils.replaceTemplate(i.properties.previewBaseUrl),t.baseUrl=o):o?(o=s.StringUtils.replaceTemplate(i.properties.baseUrl),t.baseUrl=o):(o=s.FolderAssets.url(n)+"/",t.baseUrl="./"),window.require.config(t)([o+"component.js"],function(t){if(e._component=new t({view:e,baseUrl:o,properties:e.model.properties}),e._component.render(),e._component.version)switch(e._componentStep){case"mount":e._component.mount();break;case"mountAll":e._component.mount(),e._component.mountAll();break;case"willAppear":e._component.mount(),e._component.mountAll(),e._component.willAppear();break;case"appear":e._component.mount(),e._component.mountAll(),e._component.willAppear(),e._component.appear();break;case"willDisappear":e._component.mount(),e._component.mountAll(),e._component.willDisappear();break;case"disappear":e._component.mount(),e._component.mountAll(),e._component.willDisappear(),e._component.disappear()}else switch(e._componentStep){case"mount":e._component.viewDidMount();break;case"mountAll":e._component.viewDidMount(),e._component.viewsDidMount();break;case"willAppear":e._component.viewDidMount(),e._component.viewsDidMount(),e._component.viewWillShow();break;case"appear":e._component.viewDidMount(),e._component.viewsDidMount(),e._component.viewWillShow(),e._component.viewDidShow();break;case"willDisappear":e._component.viewDidMount(),e._component.viewsDidMount(),e._component.viewWillHide();break;case"disappear":e._component.viewDidMount(),e._component.viewsDidMount(),e._component.viewWillHide(),e._component.viewDidHide()}})),this},mount:function(){return a.mount.call(this),this._component?this._component.version?this._component.mount():this._component.viewDidMount():this._componentStep="mount",this},mountAll:function(){return a.mountAll.call(this),this._component?this._component.version?this._component.mountAll():this._component.viewsDidMount():this._componentStep="mountAll",this},willAppear:function(){a.willAppear.call(this),this._component?this._component.version?this._component.willAppear():this._component.viewWillShow():this._componentStep="willAppear"},appear:function(){a.appear.call(this),this._component?this._component.version?this._component.appear():this._component.viewDidShow():this._componentStep="appear"},willDisappear:function(){a.willDisappear.call(this),this._component?this._component.version?this._component.willDisappear():this._component.viewWillHide():this._componentStep="willDisappear"},disappear:function(){a.disappear.call(this),this._component?this._component.version?this._component.disappear():this._component.viewDidHide():this._componentStep="disappear"},remove:function(){this._component?this._component.remove():this._componentStep="remove",a.remove.call(this)}});return s.UIWidgetUserComponent=t}),define("toast/widgets",["./core","./widgets/WidgetDataManager","./widgets/UIWidgetPrivate","./widgets/UIWidgetSlideContainer","./widgets/UIWidgetScrollContainer","./widgets/UIWidgetSideSlideContainer","./widgets/UIWidgetMultiLayerContainer","./widgets/UIWidgetSceneAnimation","./widgets/UIWidgetSpriteAnimation","./widgets/UIWidgetAudioSyncScene","./widgets/UIWidgetMovieSyncScene","./widgets/UIWidgetAudio","./widgets/UIWidgetAudioPlayer","./widgets/UIWidgetAudioSyncPlayer","./widgets/UIWidgetAudioSyncPlayerControlBar","./widgets/UIWidgetAudioSyncText","./widgets/UIWidgetMoviePlayer","./widgets/UIWidgetTextInput","./widgets/UIWidgetTextInputBox","./widgets/UIWidgetCheckBox","./widgets/UIWidgetGroupCheckBox","./widgets/UIWidgetDragLineConnector","./widgets/UIWidgetSketchPad","./widgets/UIWidgetTimer","./widgets/UIWidgetPartialZoom","./widgets/UIWidgetTouchGesture","./widgets/UIWidgetLearnControl","./widgets/UIWidgetUserComponent"],function(t){}),define("toast/blocks/UIWidgetBlockBase",["../widgets/UIWidgetContainer"],function(t){"use strict";var n=t.prototype,e=t.extend();return _.extend(e.prototype,n,{properties:function(){return n.properties.call(this).concat([])},resetProperties:function(){return n.resetProperties.call(this).concat([{name:"draggable",hidden:!0}])},render:function(){switch(n.render.call(this),_.isUndefined(this.model.properties._orgItemLayout)&&(this.model.properties._orgItemLayout=this.model.properties.itemLayout),_.isUndefined(this.model.properties._orgItemAlign)&&(this.model.properties._orgItemAlign=this.model.properties.itemAlign),_.isUndefined(this.model.properties._orgPaddingLeft)&&(this.model.properties._orgPaddingLeft=this.model.properties.paddingLeft),_.isUndefined(this.model.properties._orgPaddingRight)&&(this.model.properties._orgPaddingRight=this.model.properties.paddingRight),_.isUndefined(this.model.properties._orgPaddingTop)&&(this.model.properties._orgPaddingTop=this.model.properties.paddingTop),_.isUndefined(this.model.properties._orgPaddingBottom)&&(this.model.properties._orgPaddingBottom=this.model.properties.paddingBottom),_.isUndefined(this.model.properties._orgItemSpacing)&&(this.model.properties._orgItemSpacing=this.model.properties.itemSpacing),this.model.properties.fixed){case"topFixed":this.$parent.addClass("top-fixed");break;case"bottomFixed":break;default:this.$parent.removeClass("top-fixed")}return this},commonRender:function(){n.commonRender.call(this),this.$parent.addClass("block"),this.model.properties.overflow?this.$el.css("overflow","visible"):this.$el.css("overflow","")},size:function(t,e){if(!arguments.length)return{width:this.model.width,height:this.model.height};t=t||{},e=_.extend({save:!0},e);var i={};_.isUndefined(t.width)||(i.width=t.width),_.isUndefined(t.height)||(i.height=t.height),_.isEmpty(i)||(e.save&&this.model.set(i),this.$parent.css(i),this.$el.css(i),_.isUndefined(i.width)||(this.containerView.collection.width=i.width),_.isUndefined(i.height))||(this.containerView.collection.height=i.height)},responsiveLayoutChanged:function(e){var t=n.responsiveLayoutChanged.call(this,e),i=this.model.properties;return t?(i.itemLayout=t.resp_itemLayout,i.itemAlign=t.resp_itemAlign,_.isUndefined(t.resp_paddingLeft)||(i.paddingLeft=t.resp_paddingLeft),_.isUndefined(t.resp_paddingRight)||(i.paddingRight=t.resp_paddingRight),_.isUndefined(t.resp_paddingTop)||(i.paddingTop=t.resp_paddingTop),_.isUndefined(t.resp_paddingBottom)||(i.paddingBottom=t.resp_paddingBottom),_.isUndefined(t.resp_itemSpacing)||(i.itemSpacing=t.resp_itemSpacing),this.$el.attr("text-align",t.resp_textAlign)):(i.itemLayout=i._orgItemLayout,i.itemAlign=i._orgItemAlign,i.paddingLeft=i._orgPaddingLeft,i.paddingRight=i._orgPaddingRight,i.paddingTop=i._orgPaddingTop,i.paddingBottom=i._orgPaddingBottom,i.itemSpacing=i._orgItemSpacing,this.$el[0].hasAttribute("text-align")&&this.$el.removeAttr("text-align")),_.each(this.collection.models,function(t){t.view&&!t.__attributes__&&t.view.responsiveLayoutChanged(e)},this),t},responsiveLayout:function(t){return this.viewController.responsiveLayout(t)},responsiveSize:function(t,e){var i,n=this.model,o=n.layout,s={};return"none"===o.name||n.properties.sizeByUser?(i=t/Toast.view.collection._orgWidth,s.width=n._orgWidth*i,s.height=n._orgHeight*i,n.properties.sizeByUser&&this.position({left:n._orgLeft*i,top:n._orgTopt},{save:!0}),n.fixedHeight&&(s.height=n._orgHeight)):(n=o.padding.left+o.padding.right,o.collection._orgWidth<this.model._orgWidth+n+30?(i=t/this.model._orgWidth,s.width=t,s.height=this.model._orgHeight*i):(this.model.fitWidth=!1,s.width=this.model._orgWidth,s.height=this.model._orgHeight),this.model.fixedHeight&&(s.height=this.model._orgHeight)),s}}),e.MODEL=function(){return _.merge(t.MODEL(),{block:!0,background:{size:"cover",position:"50% 50%",repeat:"no-repeat"}})},Toast.UIWidgetBlockBase=e}),define("toast/blocks/UIWidgetBlock",["../core","./UIWidgetBlockBase"],function(t,e){"use strict";var i=e.prototype,n=e.extend();return _.extend(n.prototype,i,{initialize:function(t){i.initialize.call(this,t)},responsiveLayout:function(t){return i.responsiveLayout.call(this,t)}}),n.MODEL=function(){return _.merge(e.MODEL())},t.UIWidgetBlock=n}),define("toast/blocks/UIWidgetColumn",["../core","./UIWidgetBlock"],function(t,e){"use strict";var i=e.prototype,n=e.extend();return _.extend(n.prototype,i,{initialize:function(t){i.initialize.call(this,t)}}),n.MODEL=function(){return _.merge(e.MODEL(),{copyable:!1,removable:!1,column:!0})},t.UIWidgetColumn=n}),define("toast/blocks/UIWidgetColumns",["../core","./UIWidgetBlockBase","./UIWidgetColumn"],function(i,t,n){"use strict";var e=t.prototype,o=t.extend();return _.extend(o.prototype,e,{initialize:function(t){e.initialize.call(this,t),_.isUndefined(this.model.properties.itemLayout)&&(this.model.properties.itemLayout="column"),this.columns=[]},render:function(){return e.render.call(this),this},commonRender:function(){e.commonRender.call(this),this.initializeColumns()},renderContainer:function(){_.each(this.model.contents,function(t,e){t.properties||(t.properties={}),t.properties.percent=this.model.columns[e]},this),e.renderContainer.call(this)},initializeColumns:function(){var t;_.isEmpty(this.model.contents)&&(t=this.model.columns,_.each(t,function(t){var e=_.extend(n.MODEL(),{});e.id="column-"+i.UUID4(),e.viewType="WidgetColumn",e.top=e.left=0,e.width=this.model.width,e.height=this.model.height,e.properties||(e.properties={}),e.properties.percent=t,this.model.contents.push(e)},this))},responsiveLayoutChanged:function(t){return e.responsiveLayoutChanged.call(this,t)},responsiveLayout:function(t){return this.viewController.responsiveLayout(t)}}),o.MODEL=function(){return _.merge(t.MODEL(),{droppable:!1,columns:[50,50]})},i.UIWidgetColumns=o}),define("toast/blocks/UIWidgetDivisionLineBlock",["../core","./UIWidgetBlockBase","../views/UIShape"],function(e,t,i){"use strict";var n=t.prototype,o=t.extend();return _.extend(o.prototype,n,{initialize:function(t){n.initialize.call(this,t),this.model.properties.itemLayout="block",this.model.properties.itemAlign="center"},render:function(){return n.render.call(this),this},commonRender:function(){var t;this.model.contents.length?t=this.model.contents[0]:(t=_.extend(i.MODEL(),{}),this.model.contents=[t]),t.id="shape-"+e.UUID4(),t.viewType="Shape",t.top=t.left=0,t.width=this.model.width,t.resp_width=100,t.height=this.model.properties.lineWidth,t.fixedHeight=!0,t.style={backgroundColor:this.model.properties.lineColor},n.commonRender.call(this)},renderContainer:function(){return this.containerView.reset(),n.renderContainer.call(this),this}}),o.MODEL=function(){return _.merge(t.MODEL(),{droppable:!1,editable:!1})},e.UIWidgetDivisionLineBlock=o}),define("toast/blocks",["./core","./blocks/UIWidgetBlock","./blocks/UIWidgetColumns","./blocks/UIWidgetDivisionLineBlock"],function(t){}),define("toast/layouts/Layout",["require","exports","module"],function(t,e,i){"use strict";Toast.layout={};function n(t){_.extend(this,t),this.initialize.apply(this,arguments)}return _.extend(n.prototype,{itemSpacing:0,initialize:function(t){var e=this.collection;e.block;this.parentView=e.view.parentView,this.itemAlign=e.properties.itemAlign||"left",this.itemSpacing=e.properties.itemSpacing||0,this.padding={top:e.properties.paddingTop||0,right:e.properties.paddingRight||0,bottom:e.properties.paddingBottom||0,left:e.properties.paddingLeft||0},this.border={top:0,right:0,bottom:0,left:0},e.style&&(_.isUndefined(e.style.borderTopWidth)||(this.border.top=parseFloat(e.style.borderTopWidth)),_.isUndefined(e.style.borderRightWidth)||(this.border.right=parseFloat(e.style.borderRightWidth)),_.isUndefined(e.style.borderBottomWidth)||(this.border.bottom=parseFloat(e.style.borderBottomWidth)),_.isUndefined(e.style.borderLeftWidth)||(this.border.left=parseFloat(e.style.borderLeftWidth)))},update:function(){var t=this.collection,e=t.models,i=t.block,e=(t.properties.itemLayout,i?Array.prototype.slice.call(e,1):_.filter(e,function(t){return!t.__attributes__&&t.block&&t.view}));return this._models=e,e=[],_.each(this._models,function(t){t.layout=this,_.isUndefined(t._orgLeft)&&(t._orgLeft=t.left),_.isUndefined(t._orgTop)&&(t._orgTop=t.top),_.isUndefined(t._orgWidth)&&(t._orgWidth=t.width),_.isUndefined(t._orgHeight)&&(t._orgHeight=t.height),(__app__||t.properties.visible)&&e.push(t)},this),this._models=e,_.isUndefined(t._orgLeft)&&(t._orgLeft=t.left),_.isUndefined(t._orgTop)&&(t._orgTop=t.top),_.isUndefined(t._orgWidth)&&(t._orgWidth=t.width),_.isUndefined(t._orgHeight)&&(t._orgHeight=t.height),this},autofit:function(t){var e=this.collection.block,i=t.model,n=t.props,o=t.size,s=t.innerWidth,a=t.padding,t=t.border;i.properties.keepLayout;return i.block&&i.view.containerView?(i.properties.sizeByUser?this.interaction&&n.left<20&&-20<n.left&&s-20<i.width+n.left&&s+20>i.width+n.left?(i.left=i.view.containerView.collection.left=n.left=0,i.width=i.view.containerView.collection.width=n.width=o.width-(a.left+a.right+t.left+t.right),i.fitWidth=n.fitWidth=!0):this.interaction&&s-20<i.width+n.left&&s+20>i.width+n.left?i.width=i.view.containerView.collection.width=n.width=o.width-n.left:this.interaction&&n.left<20&&-20<n.left?i.left=i.view.containerView.collection.left=n.left=0:this.interaction?(i.view.containerView.collection.width=n.width=i.width,i.view.containerView.collection.height=n.height=i.height,i.fitWidth=n.fitWidth=!1):(i.view.containerView.collection.width=n.width=i.width,i.view.containerView.collection.height=n.height=i.height):i.width=i.view.containerView.collection.width=n.width=e?o.width-(a.left+a.right+t.left+t.right):o.width,e=i.view.containerView.collection,Toast.viewLayout({sizeUpdated:this.sizeUpdated,fromParent:this.fromParent,collection:e,onUpdate:function(t,e){n.width=e.contentSize.width,n.height=e.contentSize.height,i.set(n),i.view.$parent.css(n),i.view.$el.height("100%")}}),!0):this.sizeUpdated&&i.fitWidth?(_.extend(n,this.setNaturalHeight(i,s,i.prevInnerWidth)),i.fitWidth=n.fitWidth=!0):this.sizeUpdated&&!1!==i.view.autoMaintainRatio?(_.extend(n,this.setNaturalSize(i,s,i.prevInnerWidth)),parseInt(s)<=i.width+2?i.fitWidth=n.fitWidth=!0:i.fitWidth=n.fitWidth=!1,!0):void 0},align:function(t,e,i){var n,o,s,a,r,l;return _.isEmpty(e)||(n=e[0],e[e.length-1],e.length,o=this.itemSpacing,"center"===t?1===e.length?(s={left:n.left+(i.width-n.width)/2,top:n.top},n.set(s),n.view.$parent.css(s)):(a=0,_.each(e,function(t,e){a+=t.width,0<e&&(a+=o)}),r=n.left+(i.width-a)/2,_.each(e,function(t,e){var i=l?{left:l.left+o+l.width,top:t.top}:{left:r,top:t.top};t.set(i),t.view.$parent.css(i),l=t},this)):"right"===t&&(r=parseInt(n.left+i.width),_.each(e.reverse(),function(t){var e={left:r-t.width,top:t.top};t.set(e),t.view.$parent.css(e),r-=t.width+o},this))),this},setNaturalHeight:function(t,e,i){return t.width=parseInt(e),t.height=parseInt(t.height*(e/i)),{width:t.width,height:t.height}},setNaturalSize:function(t,e,i){e/=i,i=t.width;return t.width=parseInt(t.width*e),e=t.width/i,t.height=parseInt(t.height*e),{width:t.width,height:t.height}},empty:function(){return!!_.isEmpty(this._models)}}),n.extend=Toast.extend,Toast.layout.Layout=n}),define("toast/layouts/Block",["./Layout"],function(t){"use strict";var d=t.prototype,t=t.extend({initialize:function(t){d.initialize.call(this,t)},update:function(){var n,o,s,a,r,l,c,h,t;return d.update.call(this),this.empty()||(n=Toast.project.at(0),(o=this.collection).block,s=this.padding,a=this.border,r=this.itemSpacing,l={width:o.width,height:0},c=l.width-(a.left+a.right+s.left+s.right),_.each(this._models,function(t,e){var i={left:(t.properties.sizeByUser?t:s).left};h?i.top=h.top+h.height+r:t.properties.sizeByUser&&n.id!==o.id?i.top=t.top:i.top=s.top,__app__?t.view.__beforeAutofit__(i):t.view.beforeAutofit(i),this.autofit({model:t,props:i,size:l,innerWidth:c,padding:s,border:a}),__app__?t.view.__afterAutofit__(i):t.view.afterAutofit(i),l.height<i.top+t.height&&(l.height=i.top+t.height),t.properties.sizeByUser||this.align(this.itemAlign,[t],{left:i.left,top:i.top,width:c,height:l.height-i.top}),t.prevInnerWidth=c,h=t},this),l.height+=s.bottom+a.top+a.bottom,(o.height<l.height||o.parent)&&(t=!0,o.view.updateItemLayout({width:Number(l.width),height:Number(l.height)},{silent:!0})),!this.fromParent&&this.onUpdate&&this.onUpdate(this,{contentSize:l,doResize:t}),o.parent&&o.parent.view.responsiveLayout({fromParent:!0,sizeUpdated:this.sizeUpdated})),this},autofit:function(t){var e=this.collection,i=(e.block,t.model),n=t.props,o=(t.size,t.innerWidth),s=t.padding,a=t.border;return i.resp_width?(i.width=n.width=e.width*(i.resp_width/100)-(s.left+s.right+a.left+a.right),!0):!!d.autofit.call(this,t)||(this.interaction&&o-20<i.width&&o+20>i.width||o<=i.width+1||i.fitWidth&&!this.interaction?(e=i.width,i.width=n.width=s=o,i.fitWidth=n.fitWidth=!0,(this.interaction&&this.interactionMaintainRatio||!this.interaction&&!1!==i.view.autoMaintainRatio)&&_.extend(n,this.setNaturalHeight(i,s,e)),!0):void(this.interaction&&(i.fitWidth=n.fitWidth=!1)))},align:function(t,e,i){var e=e[0],n=this.padding,o=this.border,s={};return"center"===t?s={left:e.left+(i.width-e.width)/2,top:e.top}:"right"===t&&(s={left:o.left+n.left+i.width-e.width,top:e.top}),e.set(s),e.view.$parent.css(s),this}},{NAME:"block"});return Toast.layout.Block=t}),define("toast/layouts/Inline",["./Layout"],function(t){"use strict";var p=t.prototype,t=t.extend({initialize:function(t){p.initialize.call(this,t)},update:function(){var t,o,s,a,r,l,c,h,d,u,e;return p.update.call(this),this.empty()||((t=this.collection).block,o=this.padding,s=this.border,a=this.itemSpacing,r={width:t.width,height:0},l=r.width-(s.left+s.right+o.left+o.right),c=this._models.length,u=[],_.each(this._models,function(t,e){var i,n={};h?(n.left=h.left+h.width+a,n.top=h.top,n.firstOfRow=t.firstOfRow=!1):(d=n.left=o.left,n.top=o.top,n.firstOfRow=t.firstOfRow=!0),__app__?t.view.__beforeAutofit__(n):t.view.beforeAutofit(n),this.autofit({model:t,props:n,size:r,innerWidth:l,padding:o,border:s}),r.width<t.width+n.left+o.right&&(t.properties.sizeByUser&&!e?n.top=r.height:n.top=r.height+a,n.left=o.left,i=n.firstOfRow=t.firstOfRow=!0),__app__?t.view.__afterAutofit__(n):t.view.afterAutofit(n),r.height<n.top+t.height&&(r.height=n.top+t.height),i?(this.align(this.itemAlign,u,{left:d,top:n.top,width:l,height:r.height-n.top}),u=[t]):u.push(t),c===e+1&&u.length&&this.align(this.itemAlign,u,{left:d,top:n.top,width:l,height:r.height-n.top}),t.prevInnerWidth=l,h=t},this),r.height+=o.bottom+s.bottom+s.top,(t.height<r.height||t.parent)&&(e=!0,t.view.updateItemLayout({width:Number(r.width),height:Number(r.height)},{silent:!0})),!this.fromParent&&this.onUpdate&&this.onUpdate(this,{contentSize:r,doResize:e}),t.parent&&t.parent.view.responsiveLayout({fromParent:!0,sizeUpdated:this.sizeUpdated})),this},autofit:function(t){var e,i,n;return!!p.autofit.call(this,t)||(this.collection.block,e=t.model,i=t.props,t.size,n=t.innerWidth,t.padding,t.border,this.interaction&&n-20<i.left+e.width&&n+20>i.left+e.width||n<=e.width+1||e.fitWidth?(t=e.width,n<e.width+1||e.fitWidth&&!this.interaction?(e.width=i.width=n,e.fitWidth=i.fitWidth=!0):n>e.width+1&&(e.fitWidth=i.fitWidth=!1),n=e.width,e.width!==t&&(this.interaction&&this.interactionMaintainRatio||!this.interaction&&!1!==e.view.autoMaintainRatio)&&_.extend(i,this.setNaturalHeight(e,n,t)),!0):void(i.fitWidth=!1))}},{NAME:"inline"});return Toast.layout.Inline=t}),define("toast/layouts/Column",["./Layout"],function(u){"use strict";var t=u.extend({initialize:function(t){u.prototype.initialize.call(this,t)},update:function(){var t,n,e,o,s,i,a,r,l,c,h,d;return u.prototype.update.call(this),this.empty()||((t=this.collection).block,n=this.padding,e=this.border,o=this.itemSpacing,s={width:t.width,height:0},i=this._models.length,t.columns,a=s.width-(e.left+e.right+n.left+n.right)-(i-1)*o,c=0,_.each(this._models,function(t){c+=t.properties.percent}),h=Number(((100-c)/this._models.length).toFixed(3)),d=0,_.each(this._models,function(t,e){var i={};r?(i.left=r.left+r.width+o,i.top=r.top):(i.left=n.left,i.top=n.top),i.width=parseFloat(Math.min(a,(t.properties.percent+h)/100*a)),__app__?t.view.__beforeAutofit__(i):t.view.beforeAutofit(i),this.autofit({model:t,props:i}),__app__?t.view.__afterAutofit__(i):t.view.afterAutofit(i),d<t.height&&!t.view.collection.isEmpty()&&(d=t.height),s.height<i.top+t.height&&(s.height=i.top+t.height),t.prevInnerWidth=a,r=t},this),_.each(this._models,function(t,e){t.height<d||0<d&&t.view.collection.isEmpty()?t.view.size({height:d},{save:!1}):_.isUndefined(t.beforeAutoHeight)?t.beforeAutoHeight=t.height:(t.view.size({height:t.beforeAutoHeight},{save:!1}),delete t.beforeAutoHeight)}),s.height+=n.bottom+e.bottom+e.top,(t.height<s.height||t.parent)&&(l=!0,t.view.updateItemLayout({width:Number(s.width),height:Number(s.height)},{silent:!0})),!this.fromParent&&this.onUpdate&&this.onUpdate(this,{contentSize:s,doResize:l}),t.parent&&t.parent.view.responsiveLayout({fromParent:!0,sizeUpdated:this.sizeUpdated})),this},autofit:function(t){this.collection.block;var i=t.model,n=t.props;if(i.block&&i.view.containerView)return i.view.containerView.collection.width=n.width,t=i.view.containerView.collection,Toast.viewLayout({sizeUpdated:this.sizeUpdated,fromParent:this.fromParent,collection:t,onUpdate:function(t,e){n.width=e.contentSize.width,n.height=e.contentSize.height,i.set(n),i.view.$parent.css(n),i.view.$el.height("100%")}}),!0}},{NAME:"column"});return Toast.layout.Column=t}),define("toast/layouts/Grid",["./Layout"],function(e){"use strict";var t=e.extend({initialize:function(t){e.prototype.initialize.call(this,t)},update:function(){var t,n;return e.prototype.update.call(this),this.empty()||(t=this.collection,this.padding,this.itemSpacing,n={width:t.width,height:0},_.each(this._models,function(t,e){var i={};n.height<i.top+t.height&&(n.height=i.top+t.height)},this)),this}},{NAME:"grid"});return Toast.layout.Grid=t}),define("toast/layouts/None",["./Layout"],function(e){"use strict";var t=e.extend({initialize:function(t){e.prototype.initialize.call(this,t)},update:function(){var s,a,r,t,l;return e.prototype.update.call(this),this.empty()||(this.interaction?_.each(this._models,function(i,t){var n;i._orgLeft=i.left,i._orgTop=i.top,i._orgWidth=i.width,i._orgHeight=i.height,i.block&&i.view.containerView&&(n=i.view.containerView.collection,Toast.viewLayout({sizeUpdated:this.sizeUpdated,fromParent:this.fromParent,collection:n,onUpdate:function(t,e){e.contentSize.width=n.width,i.set(e.contentSize),i.view.$parent.css(e.contentSize),i.view.$el.height("100%")}}))},this):((s=this.collection).block,a=s.properties.keepLayout,this.padding,this.itemSpacing,r={width:s.width,height:0},l=s.width/s._orgWidth,!__app__&&a&&(s.height=s._orgHeight,s.view.$el.css({height:s.height}),s.view.$contents)&&s.view.$contents.css({height:s.height}),__app__||(_.each(this._models,function(i){var t,n,e={},o=s._orgWidth/2;if(e.top=i._orgTop*l,o<i._orgLeft+i._orgWidth/2&&window.innerWidth+20>s.width?(t=(s._orgWidth-(i._orgLeft+i._orgWidth))*l,e.left=s.width-(i._orgWidth+t)):e.left=i._orgLeft*l,a&&!__app__&&window.innerWidth+20>s.width&&(e.width=i._orgWidth,e.height=i._orgHeight,e.top=i._orgTop,o>i._orgLeft+i._orgWidth/2?e.left=i._orgLeft:e.left=i._orgLeft-(s._orgWidth-s.width)),i.block&&a&&(i._orgWidth<s._orgWidth||(0<=i._orgLeft&&i._orgLeft<=5&&(e.left=0),s._orgWidth<i._orgWidth)?e.width=i._orgWidth:(l=r.width/i._orgWidth,e.width=i._orgWidth*l),e.height=i._orgHeight),__app__?i.view.__beforeAutofit__(e):i.view.beforeAutofit(e),i.block&&i.view.containerView&&(n=i.view.containerView.collection,Toast.viewLayout({sizeUpdated:this.sizeUpdated,fromParent:this.fromParent,collection:n,onUpdate:function(t,e){e.contentSize.width=n.width,i.set(e.contentSize),i.view.$parent.css(e.contentSize),i.view.$el.height("100%")}})),__app__?i.view.__afterAutofit__(e):i.view.afterAutofit(e),!i.block)return!0;r.height<e.top+i.height&&(r.height=e.top+i.height)},this),__app__)||(r.height=s.height,(s.height<r.height||s.parent)&&(t=!0,s.view.updateItemLayout({width:Number(r.width),height:Number(r.height)},{silent:!0})),!this.fromParent&&this.onUpdate&&this.onUpdate(this,{contentSize:r,doResize:t}),s.parent&&s.parent.view.responsiveLayout({fromParent:!0,sizeUpdated:this.sizeUpdated})))),this}},{NAME:"none"});return Toast.layout.None=t}),define("toast/layouts",["./core","./layouts/Block","./layouts/Inline","./layouts/Column","./layouts/Grid","./layouts/None"],function(t){"use strict";var n={};_.each(Array.prototype.slice.call(arguments,1),function(t,e){n[t.NAME]=t}),t.viewLayout=function(t){var e=(t=_.extend({},t)).collection,i=e.block,e=e.properties.itemLayout,i=n[e=e||(i?"inline":"block")]||n.none;return new i(_.extend({name:i.NAME},t)).update()}}),define("toast/functions/_prepare",["exports","../core"],function(t,r){function l(){if(r.project.config.limitedPeriodOn){var t,e,i,n,o=r.CryptoJS.AES;if(_.isUndefined(r.project.config.lockAlert)||o.decrypt(r.project.config.lockAlert,r.secretkey).toString(r.CryptoJS.enc.Utf8),_.isUndefined(r.project.config.year)||(i=o.decrypt(r.project.config.year,r.secretkey).toString(r.CryptoJS.enc.Utf8),0),_.isUndefined(r.project.config.month)||((n=o.decrypt(r.project.config.month,r.secretkey).toString(r.CryptoJS.enc.Utf8)).length<2&&(n="0"+n),0),_.isUndefined(r.project.config.days)||((t=o.decrypt(r.project.config.days,r.secretkey).toString(r.CryptoJS.enc.Utf8)).length<2&&(t="0"+t),0),_.isUndefined(r.project.config.hours)||(1<(e=o.decrypt(r.project.config.hours,r.secretkey).toString(r.CryptoJS.enc.Utf8)).length&&"0"==e.charAt(0)&&(e=e.substr(1)),0),!(_.isUndefined(i)||_.isUndefined(n)||_.isUndefined(t)))return o=new Date(i+"-"+n+"-"+t),i=new Date,n=!1,!!(o.getFullYear()<i.getFullYear()||o.getFullYear()==i.getFullYear()&&o.getMonth()<i.getMonth()||o.getFullYear()==i.getFullYear()&&o.getMonth()==i.getMonth()&&o.getDate()<i.getDate()||e&&o.getFullYear()==i.getFullYear()&&o.getMonth()==i.getMonth()&&o.getDate()==i.getDate()&&(Number(e)<i.getHours()||Number(e)==i.getHours()&&1<i.getMinutes()))||n}}return function(t,e){var i=new $.Deferred;if(r.isNative?(n=window.require.s.contexts._.config.locale,$("html").attr("lang",n)):$("html").attr("lang",r.config.language),(n=(n=r.urlParams.get("preview"))&&n.trim().toLowerCase())&&"true"===n&&(r.isPreview=!0),t&&i.promise().done(t),r.RUNENV_ERROR!==r.RUNENV_ERROR_NO)i.reject();else{var n=[],o=new $.Deferred;if(n.push(o.promise()),r.config.htmlRender)o.resolve();else if(r.load(["text!"+r.config.moduleBaseUrl+"config.json"],function(t){try{r.config=_.extend(JSON.parse(t),r.config)}catch(t){}o.resolve()},function(){o.resolve()}),__app__)return r.Async.waitForAll(n).done(function(){i.resolve()}),void i.resolve();var s,a=new $.Deferred;n.push(a.promise()),o.always(function(){r.project=r.Project.initialize(),r.config.projectLoader?r.load([r.config.projectLoader],function(t){t.init().done(function(){a.resolve()})}):_.isUndefined(window.project)?r.project.__load__().done(function(){r.project.config.passwordOn&&r.project.config.password||l()?r.projectLoaded(function(){var t,e,i;$(".indigator").hide(),l()?(e=r.CryptoJS.AES,_.isUndefined(r.project.config.lockAlert)||(bytes=e.decrypt(r.project.config.lockAlert,r.secretkey),t=bytes.toString(r.CryptoJS.enc.Utf8)),r.DialogBar.present({autoDismiss:!1,closeButton:!1,middle:!r.isMobile,titleIcon:"fa fa-lock",title:r.Strings.ALERT_TITLE,content:t||r.Strings.LOCK_ALERT})):r.project.config.passwordOn&&r.project.config.password&&(i=r.CryptoJS.AES.decrypt(r.project.config.password,r.secretkey).toString(r.CryptoJS.enc.Utf8),r.DialogBar.present({autoDismiss:!1,closeButton:!1,middle:!r.isMobile,titleIcon:"fa fa-lock",title:r.Strings.PASSWORD,content:'<input type="password" class="form-control" autocomplete="off" placeholder="'+r.Strings.ENTER_USER_PASSWORD+'"><div class="alert alert-danger" role="alert" style="margin-top: 15px; margin-bottom: 0; border-radius: 0; display: none">'+r.Strings.ERROR_INCORRECT_PASSWORD+"</div>",rightButtons:[{className:r.Dialog.DIALOG_BTN_CLASS_PRIMARY,id:r.Dialog.DIALOG_BTN_OK,text:r.Strings.OK}],buttonClicked:function(){var t=r.DialogBar.$el.find('input[type="password"]');i!=t.val()?(r.DialogBar.$el.find(".alert").show(),t.val(""),t.focus()):($(".indigator").show(),r.DialogBar.dismiss(),setTimeout(function(){a.resolve()},250))}}),r.DialogBar.$el.find('input[type="password"]').focus())}):a.resolve()}):r.project.__load__({data:window.project}).done(function(){a.resolve()})}),r.config.htmlRender||(s=new $.Deferred,n.push(s.promise()),a.always(function(){r.FontLoader.load().always(function(){s.resolve()})})),r.Async.waitForAll(n).done(function(){i.resolve()})}}}),define("toast/functions/mobile",["exports","../core"],function(t,e){function i(){$(".navbar-collapse").css("top",$(".navbar").outerHeight()),$(".main-navbar-nav").css("margin-bottom",$(".navbar").outerHeight()),$(".main-cont").css("padding-top",$(".navbar").outerHeight())}function n(){$(event.currentTarget);var t=$(document.body),e="navbar-collapse-open";t.hasClass(e)?t.removeClass(e):t.addClass(e)}function o(){window.location.hash&&(window.location.hash="")}function s(){e.view.mlayout()}t.start=function(){$(document).ready(i),$(".navbar-toggle").on("click",n),$(document.body).on("scroll",o),$(window).on("resize",s)}}),define("toast/functions/responsive",["exports","../core"],function(t,n){var o;function e(){var t=$(".navbar");t.length&&($(".navbar-collapse").css("top",t.outerHeight()),$(".main-navbar-nav").css("margin-bottom",t.outerHeight()),$(".main-cont").css("padding-top",t.outerHeight()),$(".navbar-toggle").on("click",i))}function i(){var t=$(document.body),e="navbar-collapse-open";t.hasClass(e)?t.removeClass(e):t.addClass(e)}function s(){window.location.hash&&(window.location.hash="")}function a(){window.innerHeight<o.height()&&(t=!0);var t,e,i=Math.min(n.view.collection._orgWidth,o.width());n.isMobile&&(i=o.width()),n.view.responsiveLayout({responsiveWidth:i}),window.innerHeight<o.height()&&(e=!0),n.isMobile||t||!e||(i=Math.min(n.view.collection._orgWidth,o.width()),n.view.responsiveLayout({responsiveWidth:i}))}t.start=function(){o=$(".main-cont"),n.view.collection._orgWidth=n.view.collection.width,$(document).ready(e),a(),$(document.body).on("scroll",s),$(window).on("resize",a)}}),define("toast/functions/start",["exports","../core","./_prepare","./mobile","./responsive"],function(t,n,e,o,s){function a(){$(document.body).attr("data-version",n.version),n.isMobileDevice?(n.$el&&n.$el.addClass("mobile"),$(document.body).addClass("mobile"),n.isTablet?(n.$el&&n.$el.addClass("tablet"),$(document.body).addClass("tablet")):(n.$el&&n.$el.addClass("phone"),$(document.body).addClass("phone"))):(n.$el&&n.$el.addClass("desktop"),$(document.body).addClass("desktop"))}n.start=function(i){i=i||{},$(document).ready(function(){if(i.module){if(window.__app__=TT,!n.__dev__&&n.inBrowser)return void $("html").remove()}else window.__app__=void 0;e(function(){var t,e;i.module?(_.isArray(i.module)||(i.module=[i.module]),i.preload?(_.isArray(i.preload)||(i.preload=[i.preload]),require(i.preload,function(){n.load(i.module)})):n.load(i.module)):n.config.htmlRender?(!_.isEmpty(window.document.title)&&-1===window.document.title.indexOf("{title}")||(window.document.title=n.project.title),a(),t=$(document.body).hasClass("responsive"),e=$(document.body).hasClass("for-mobile"),n.view=new n.ViewController({el:$(".toast-ctrl")}),n.view.load(n.project.models[0].toJSON(),{htmlRender:!0,showLoader:!0,_reset:!1,readyonly:!0}),n.view.willAppear(),n.view.ready(function(){e&&n.view.mlayout(),$(document.body).addClass("ready"),n.view.$el.css("opacity",1),n.view.appear(),n.dispatchReady(n.READY),$(document.body).find(".custom-indigator").remove(),n.showLoading(!1)}),e?o.start():t&&s.start()):n.ThemeLoader.load(n.config.theme,n.config.moduleBaseUrl+"styles/themes/"+n.config.theme+"/","theme").done(function(){var t=i,e=(!_.isEmpty(window.document.title)&&-1===window.document.title.indexOf("{title}")||(window.document.title=n.project.title),a(),(e=(e=n.urlParams.get("hiddenbar"))&&e.trim().toLowerCase())&&"true"===e&&n.$el.addClass("hiddenbar"),n.isMobileDevice&&n._setOrientation(n.orientation()),n.config.print||n.$el.addClass("no-print"),n.config.share||n.$el.addClass("no-share"),_.isEmpty(n.config.pdfUrl)||n.$el.addClass("pdf-url"),["toast/extensions"]);_.isUndefined(n.config.extensions)||_.isEmpty(n.config.extensions)||(e=e.concat(n.config.extensions)),n.load(e,function(){n.dispatchReady(n.EXTENSIONS_LOADED),n.Storage.loadAll().always(function(){n.Book.start(t,function(){setTimeout(function(){n.Book.layout(),n.hook.dispatchReady?n.hook.dispatchReady(function(){n.$el.css("opacity",1),$(document.body).find(".custom-indigator").remove(),n.showLoading(!1)}):(n.dispatchReady(n.READY),n.$el.css("opacity",1),$(document.body).find(".custom-indigator").remove(),n.showLoading(!1))})})})})})})})}}),define("toast/functions/paths",["exports","../core"],function(t,n){n.setPaths=function(t){t=t||{},n.paths||(n.paths={});var e,i=n.urlParams;n.paths.projectRoot="",n.paths.projectFile="project.json",n.paths.assetsDirectoryName="assets",n.paths=_.extend(n.paths,t),i.get("projectRoot")&&(n.paths.projectRoot=i.get("projectRoot")),i.get("projectFile")&&(t=encodeURIComponent(i.get("projectFile")),-1!==(e=(t=n.paths.projectFile=t).lastIndexOf("."))&&(t=t.slice(0,e)),n.paths.assetsDirectoryName=t),__app__||"true"==i.get("preview")?(n.paths.assets=n.paths.projectRoot+n.paths.assetsDirectoryName+"/",n.paths.data=n.paths.assets):(_.isEmpty(n.config.dataBaseUrl)||(n.paths.projectRoot=n.config.dataBaseUrl),n.paths.assets=n.paths.projectRoot+"assets/",n.paths.data=n.paths.projectRoot+"data/"),n.paths.shared=n.paths.assets+"shared/",n.paths.workspace=n.paths.assets+"workspace/",_.isUndefined(n.paths.application_dir)&&(n.paths.application_dir=(e=(e=decodeURI(window.location.pathname)).substr(0,e.lastIndexOf("/")),(e=-1!==(e=unescape(e)).indexOf(":")&&"/"===e[0]?e.substr(1):e)+"/")),n.StringUtils.templateStrings.APP_DIR=n.paths.application_dir,n.StringUtils.templateStrings.ASSETS_DIR=n.paths.assets,n.StringUtils.templateStrings.DATA_DIR=n.paths.data,n.StringUtils.templateStrings.SHARED_DIR=n.paths.shared,n.StringUtils.templateStrings.MODULE_BASE_DIR=n.config.moduleBaseUrl}}),define("toast/functions/common",["exports","../core"],function(t,n){"use strict";n.common.setActiveAudio=function(t){n.common.activeAudio&&n.common.activeAudio!==t&&"function"==typeof n.common.activeAudio.onActiveAudioChange&&n.common.activeAudio.onActiveAudioChange(),n.common.activeAudio=t},n.common.removeActiveAudio=function(t){n.common.activeAudio===t&&(n.common.activeAudio=null)},n.common.setActivePopupMenu=function(t){n.common.popupmenu&&n.common.popupmenu!==t&&"function"==typeof n.common.popupmenu.close&&n.common.popupmenu.close(),n.common.popupmenu=t},$(document).on("click",function(t){var t=$(t.target),e=t.closest(".toast-object");if(e.length){var i=e.data("view");if(i&&i.actions&&(i.actions.click||i.actions.mouseover))return}(e=t.closest(".__popup__")).length||n.common.popupmenu&&n.common.setActivePopupMenu(null)})}),define("toast/functions/orientation",["exports","../core"],function(t,n){n.orientation=function(){return n.isAndroid?screen.width>screen.height?"landscape":"portrait":window.innerWidth>window.innerHeight?"landscape":"portrait"},n.isLandscape=function(){return"landscape"===n.orientation()},n._setOrientation=function(t){n.$el.removeClass("portrait landscape"),n.$el.addClass(t),n.$el.attr("data-orientation",t),$(document.body).removeClass("portrait landscape"),$(document.body).addClass(t),n._orientation=t,n.send(n.Events.ORIENTATION_DID_CHANGE,t)},n.ready(function(){var t,i;n.config.htmlRender||(t="onorientationchange"in window,window.innerWidth,window.innerHeight,n.isMobileDevice&&window.addEventListener(t?"orientationchange":"resize",function(t){i&&clearTimeout(i),n._deviceRotating=!0,n.isInputBoxFocused()&&$("input, textarea").blur();var e=n.orientation();n._setOrientation(e),n.Book._changeSize({orientationChanged:!0}),n.lazy(function(){e!==n.orientation()&&(n._setOrientation(n.orientation()),n.Book._changeSize({orientationChanged:!0}))},150),i=setTimeout(function(){e!==n.orientation()&&(n._setOrientation(n.orientation()),n.Book._changeSize({orientationChanged:!0})),n._deviceRotating=!1,i=null},500)},!1))})}),define("toast/functions/fullscreen",["exports","../core"],function(t,e){e.executeToggleFullScreen=function(){e.isFullScreen()?e.exitFullScreen():e.requestFullScreen()},e.isFullScreen=function(t){return(t=arguments.length?t:parent?parent.document:document).fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.webkitDisplayingFullscreen||!1},e.requestFullScreen=function(t){return(t=arguments.length?t:e.topDocument().documentElement).requestFullscreen?(t.requestFullscreen(),!0):t.msRequestFullscreen?(t.msRequestFullscreen(),!0):t.mozRequestFullScreen?(t.mozRequestFullScreen(),!0):t.webkitRequestFullscreen?(t.webkitRequestFullscreen(),!0):t.webkitRequestFullScreen?(t.webkitRequestFullScreen(),!0):t.webkitEnterFullscreen?(t.webkitEnterFullscreen(),!0):void 0},e.exitFullScreen=function(t){return(t=arguments.length?t:e.topDocument()).exitFullscreen?(t.exitFullscreen(),!0):t.msExitFullscreen?(t.msExitFullscreen(),!0):t.mozCancelFullScreen?(t.mozCancelFullScreen(),!0):t.webkitExitFullscreen?(t.webkitExitFullscreen(),!0):void 0},e.ready(function(){var t;e.config.htmlRender||(e.topDocument(),e.parentAccessDenied?e.$el.find('[command="fullscreen"]').hide():("function"!=typeof e.hook[e.Commands.FULLSCREEN]&&((e.isMobileDevice||e._msieVersion&&e._msieVersion<11)&&e.$fullscreen.hide(),e.CommandManager.registerInternal(e.Commands.FULLSCREEN,e.executeToggleFullScreen)),t=e.topDocument(),$(t).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(t){e.isFullScreen()?e.$el.addClass("fullscreen"):e.$el.removeClass("fullscreen"),e.$fullscreen.hasClass("btn-toggle-active")&&(e.isFullScreen()?e.$fullscreen.addClass("active"):e.$fullscreen.removeClass("active")),e.send(e.Events.FULLSCREEN_DID_CHANGE,e.isFullScreen())})))})}),define("toast/functions/commands",["exports","../core"],function(t,o){"use strict";function e(t){t.preventDefault();var e,t=$(t.currentTarget),i=t.attr("command"),n=t.attr("parameters");t.hasClass("disabled")||t.attr("disabled")||_.isUndefined(i)||(_.isEmpty(n)?o.executeCommand(i):(n=n.split(","),e=[i],_.each(n,function(t){"true"===(t=t.trim())||"false"===t?e.push("true"===t):isNaN(t)?e.push(t):e.push(Number(t))}),n=e,o.executeCommand.apply(o,Array.prototype.slice.call(n,0))))}var i;function n(t){o.isMobileDevice&&(o.$startMenuDropdown.hasClass("open")&&o.$startMenuDropdown.children(".dropdown-toggle").dropdown("toggle"),o.BookZoom.isActivated()&&o.BookZoom.deactivate(),o.config.mobile.landscapeDoublePage&&!0!==o.config.mobile.doublepage?"landscape"===t?o.executeCommand(o.Commands.DOUBLEPAGE,!0):o.executeCommand(o.Commands.DOUBLEPAGE,!1):o.Book.layout())}function s(){i.attr("data-playing",!0),i[0].play(),o.$toggleBgSound&&o.$toggleBgSound.addClass("on")}function a(){i.attr("data-playing",""),i[0].pause(),o.$toggleBgSound&&o.$toggleBgSound.removeClass("on")}function r(){("true"===i.attr("data-playing")?a:s)()}function l(){var t,e;_.isEmpty(o.config.pdfUrl)||(e=(t=o.StringUtils.replaceTemplate(o.config.pdfUrl)).getBaseName(),o.saveToDisk(t,e))}function c(){o.topWindow().close()}o.themeReady(function(){}),o.ready(function(){var t;o.$el&&o.$el.find("[command]").on("click",e),o.isMobileDevice||_.isEmpty(o.config.bgSound)?o.$toggleBgSound&&o.$toggleBgSound.remove():_.isEmpty(o.config.bgSound)||_.isEmpty(o.config.bgSound)||_.isUndefined(i)&&(t=o.StringUtils.replaceTemplate(o.config.bgSound.url).encodeFilePath(),i=$("<audio>",{id:"tt-bgsound",src:t,loop:"loop"}),$(".toast").append(i),s()),o.CommandManager.registerInternal(o.Commands.PLAY_BGSOUND,s),o.CommandManager.registerInternal(o.Commands.PAUSE_BGSOUND,a),o.CommandManager.registerInternal(o.Commands.TOGGLE_BGSOUND,r),o.CommandManager.registerInternal(o.Commands.PDF_DOWNLOAD,l),o.CommandManager.registerInternal(o.Commands.CLOSE_POPUP_WINDOW,c),o.on(o.Events.ORIENTATION_DID_CHANGE,n)})}),define("toast/functions/config_disposer",["exports","../core"],function(t,n){"use strict";n.themeReady(function(){var t,e,i;n.config.doublepage?n.$toggleDoublePage&&n.$toggleDoublePage.addClass("active"):n.$toggleDoublePage&&n.$toggleDoublePage.removeClass("active"),n.isMobileDevice&&n.$print&&n.$print.remove(),_.isEmpty(n.config.logo)||_.isEmpty(n.config.logo)||(t=$("<img />"),void 0!==n.config.logo.src?t[0].src=n.config.logo.src:void 0!==n.config.logo.url&&(i=n.StringUtils.replaceTemplate(n.config.logo.url).encodeFilePath(),t[0].src=i),_.isEmpty(n.config.homepageUrl)||("http:"!==(i=n.config.homepageUrl).protocol()&&"https"!==i.protocol()&&(i="http://"+i),(e=$("<a />",{href:i,target:n.config.homepageNewWindow?"_blank":"_self"})).append(t)),(i=$(".toast").find(".navbar-brand")).length&&(e?i.html(e):i.html(t))),_.isEmpty(n.config.bgImage)||_.isEmpty(n.config.bgImage)||(e=$(".toast")).length&&(i=n.StringUtils.replaceTemplate(n.config.bgImage.url).encodeFilePath(),!0===n.config.bgImage.pattern?e.css({backgroundImage:'url("'+i+'")',backgroundPosition:"50% 50%",backgroundRepeat:"repeat"}):e.css({backgroundImage:'url("'+i+'")',backgroundSize:"cover",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"})),_.isEmpty(n.config.bgColor)||n.$el.css("backgroundColor",n.config.bgColor)})}),define("toast/functions/LocalStorage",["exports","../core2"],function(t){"use strict";var i=!Toast.config.htmlRender&&void 0!==window.localStorage,n=new Backbone.Model({});function o(t,e){1!=i?n.set(t,e):window.localStorage.setItem(t,e)}function e(t){1!=i?n.unset(t,{silent:!0}):window.localStorage.removeItem(t)}function s(t){return 1!=i?n.get(t):window.localStorage.getItem(t)}var a=Toast.Storage.Collection.prototype,r=Toast.Storage.Collection.extend();_.extend(r.prototype,a,{load:function(t){var e=s(this.attributes.id);e&&this.reset(JSON.parse(e)),t&&t.done&&t.done()},addItem:function(t,e){return t=a.add.call(this,t,e),o(this.attributes.id,this.stringify()),t},updateItem:function(t){this.set(t,{merge:!0,remove:!1}),o(this.attributes.id,this.stringify())},removeItem:function(t,e){t=a.remove.call(this,t,e);return o(this.attributes.id,this.stringify()),t},empty:function(){this.reset(),e(this.attributes.id)}}),Toast.projectLoaded(function(){var t;__app__||(t=Toast.isPreview?Toast.project.config.publishUniqueId:Toast.project.id,Toast.Storage.register(new r(null,{attributes:{id:t+"-"+Toast.Storage.BOOKMARK,name:Toast.Storage.BOOKMARK,priority:0},model:Toast.Storage.Model.extend()})),Toast.Storage.register(new r(null,{attributes:{id:t+"-"+Toast.Storage.MEMO,name:Toast.Storage.MEMO,priority:0},model:Toast.Storage.Model.extend()})),Toast.Storage.register(new r(null,{attributes:{id:t+"-"+Toast.Storage.CONTENT,name:Toast.Storage.CONTENT,priority:0,preload:!0},model:Toast.Storage.Model.extend()})))}),t.set=o,t.remove=e,t.get=s,Toast.LocalStorageCollection=r,Toast.LocalStorage=Toast.PainterStorage=t}),define("toast/functions/native_helper",["exports","../core"],function(t,e){"use strict";var i,r,l;e.config.htmlRender||"undefined"!=typeof external&&void 0!==external.isNative&&external.isNative()&&(i=!1,$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(t){external.isFullscreen()&&!0!==i||((t=t.target).fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement?(external.requestFullscreen(),i=!0,e.$el.addClass("fullscreen")):(i=!1,external.exitFullscreen(),e.$el.removeClass("fullscreen")))}),jQuery.ajaxSettings.xhr=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}},r=0,l={0:200,1223:204},jQuery.ajaxTransport("* text html xml json svg data",function(s,t,e){var a;return{send:function(t,i){var e,n=s.xhr(),o=++r;if(n.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(e in s.xhrFields)n[e]=s.xhrFields[e];for(e in s.mimeType&&n.overrideMimeType&&n.overrideMimeType(s.mimeType),s.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(e,t[e]);a=function(t){return function(){var t,e;4===n.readyState&&(t=n.status||0,/^(file):/.test(window.location.protocol)&&(0===t||200<=t&&t<300)||200<=t&&t<300||(e="error"),a)&&(o,a=null,"abort"===e?n.abort():"error"===e?i(n.status,n.statusText):i(l[n.status]||n.status,n.statusText,"string"==typeof n.responseText?{text:n.responseText}:void 0,n.getAllResponseHeaders()))}},n.onreadystatechange=a(),a=(o,a("abort"));try{n.send(null)}catch(t){if(a)throw t}},abort:function(){a&&a()}}}))}),define("toast/functions/api",["exports","../core"],function(t,e){"use strict";e.api.gotoPage=function(t){e.Book.move(t,{isLogical:!0,silent:!1})},e.api.find=function(t){t=e.Book.find(t);return t?t.view:null}}),define("toast/functions",["./functions/start","./functions/paths","./functions/common","./functions/orientation","./functions/fullscreen","./functions/commands","./functions/config_disposer","./functions/LocalStorage","./functions/native_helper","./functions/api"],function(){Toast.executeCommand=function(t){var e;return"function"==typeof Toast.hookExecuteCommand?!1===(e=Toast.hookExecuteCommand.apply(Toast,Array.prototype.slice.call(arguments,0)))?Toast.CommandManager.execute(t,arguments):e:"function"==typeof Toast.hook[t]?Toast.hook[t](t,arguments):(e=Toast.CommandManager.get(t))?e.execute.apply(e,Array.prototype.slice.call(arguments,1)):(new $.Deferred).reject().promise()},Toast.cookie={},Toast.cookie.set=function(t,e,i){i=i||365;var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),document.cookie=t+"="+e+";expires="+n.toUTCString()+";path=/"},Toast.cookie.get=function(t){t=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return t?t[2]:null},Toast.cookie.remove=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";t=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return t?t[2]:null},Toast.optionalGoToPreviousPage=function(){Toast.config.reversePageTurnDirection?Toast.executeCommand(Toast.Commands.NEXT_PAGE):Toast.executeCommand(Toast.Commands.PREVIOUS_PAGE)},Toast.optionalGoToNextPage=function(){Toast.config.reversePageTurnDirection?Toast.executeCommand(Toast.Commands.PREVIOUS_PAGE):Toast.executeCommand(Toast.Commands.NEXT_PAGE)},Toast._isPreventDefault=function(t){t=$(t.target);return!!t.closest("[command]").length||!(!t.closest('.toast-object[data-prevent-event="click"]').length&&!t.closest(".modal").length&&!t.closest(".dialog").length&&(t.closest(".main-cont").length||t.closest(".toast ").length))},Toast.secretkey="1f72bbec04c8eb9a1f5ef8e34e0dba3b"}),define("toast",["exports","toast/core","toast/core2","toast/utils","toast/dialogs","toast/views","toast/views_","toast/widgets","toast/blocks","toast/layouts","toast/actions","toast/animations","toast/functions"],function(t,e){return e}),define("toast/extensions/defaults/Thumbnail",["exports","../../core"],function(t,a){"use strict";var i,r,l,c,n,h,d,u="ontouchstart"in window?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},p=[];function e(){p=[];var o=[],t=$("<div />",{class:"toast-thumbnail"}),s=(a.$el.append(t),Math.min(t.height(),150)),t=(t.remove(),l=$("<div />",{class:"overlay"}),_.each(a.project.models,function(t,e){var i=$.extend(!0,{},t.get("thumbnail")),n=i.url?a.StringUtils.replaceTemplate(i.url):i.src,t=((_.isEmpty(n)||_.isUndefined(n))&&(i.backgroundColor=t.background.color||"#fff"),i.url=n,i.width=i.width,i.height=i.height,i.height/s);i.width=i.width/t,i.height=i.height/t,i._displayPageNumber=a.Book.toLogicalPageNumber(e+1),i.displayPageNumber=a.Book.getDisplayPageNumber(i._displayPageNumber),o.push(i),!a.config.doublepage||a.config.cover&&0===e?(p.push({itemWidth:"100%",width:i.width,height:i.height,items:o}),o=[]):2!==o.length&&e!==a.project.length-1||(n=i.width,t=i.height,o.length&&o[0].width>i.width&&(n=o[0].width,t=o[0].height),p.push({itemWidth:"50%",width:n*Math.min(2,o.length),height:t,items:o}),o=[])}),Mustache.render(i,{Strings:a.Strings,theme:a.theme,thumbs:p})),t=(r=a.$el.find(".toast-thumbnail"),(n=r.length)?r.append($(t).html()):(r=$(t),a.$el.append(r)),r.find(".thumb-nav-prev")),t=(t.length&&(h=h||t[0].outerHTML,t.remove()),r.find(".thumb-nav-next")),e=(t.length&&(d=d||t[0].outerHTML,t.remove()),a.Book.getCurrentPageNumber()[0]);a.config.doublepage&&(e=parseInt(e/2+.5),!a.Book.isCoverPage())&&a.config.cover&&(e+=1),c=r.find(".carousel").lightSlider({autoWidth:!0,pager:!1,slideMargin:5,slideMove:5,thumbMargin:50,prevHtml:h||"",nextHtml:d||"",onSliderLoad:function(){var i,n,o;r.find(".close").on("click",f),r.animate({bottom:0},200,function(){c.refresh()}),c.children().eq(e-1).append(l),o=n=-1,c.children("li").on(u.start,function(t){i=t.clientX;t=c.children(".item.active");n=t.index()}).on(u.end,function(t){var e;5<=Math.abs(t.clientX-i)||(t=$(t.currentTarget),o=t.index(),e=c.children(".item.active").index(),n===e&&(t.append(l),a.Book.move(p[o].items[0]._displayPageNumber,{isLogical:!0,silent:!1})))})}}),r.find(".svg-icon").tt_replaceSvgIcon(),a.config.reversePageTurnDirection?c.goToSlide(p.length-1):c.goToSlide(e-1),a.Book.$getBook().turn("disabled",!0),a.$thumbnail.hasClass("btn-toggle-active")&&a.$thumbnail.addClass("active"),a.$el.addClass("present-thumbnail")}function f(){a.$el.removeClass("present-thumbnail"),r.animate({bottom:-r.height()+"px"},200,function(){c.destroy(),l.remove(),l=null,n?r.empty():r.remove(),r=null,p=[],a.Book.$getBook().turn("disabled",!1),a.$thumbnail.hasClass("btn-toggle-active")&&a.$thumbnail.removeClass("active")})}a.CommandManager.registerInternal(a.Commands.THUMBNAIL,function(t){_.isUndefined(i)&&(i=a.HtmlLoader.Thumbnail),(r?f:e)()})}),define("toast/extensions/defaults/TOC",["exports","../../core"],function(t,a){"use strict";a.Strings;var e,i,r,l,c,h,n={icons:!0};function o(){return i=$(e),a.$el.append(i),r=i.find(".container"),function(){var n=new $.Deferred,o=$("<ul />");var s=!1;function e(t){$(t).find(":root").children().each(function(t,e){var i,e=$(e),n=a.isMobileDevice?$('<li data-jstree={"opened":true} />'):$("<li />");n.html("<span>"+e.children("subject").text()+"</span>"),e.attr("pageNo")?n.attr("data-page",e.attr("pageNo")):n.attr("data-page",e.children("pageNo").text().trim()),o.append(n),0<e.children("toc").length?(!0!==s&&(r.addClass("has-folder"),s=!0),i=$("<ul />"),n.append(i),function o(t,s){t.children("toc").each(function(t,e){var i,e=$(e),n=$("<li />");n.html("<span>"+e.children("subject").text()+"</span>"),e.attr("pageNo")?n.attr("data-page",e.attr("pageNo")):n.attr("data-page",e.children("pageNo").text().trim()),s.append(n),0<e.children("toc").length?(i=$("<ul />"),n.append(i),o(e,i)):n.attr("data-jstree",'{"icon": "jstree-file"}')})}(e,i)):n.attr("data-jstree",'{"icon": "jstree-file"}')})}l?(e(l),n.resolve(o)):!0!==h?$.ajax({type:"GET",url:c,dataType:"xml",success:function(t){e(t),n.resolve(o)},error:function(t,e,i){n.reject("code: "+t.status+"\nmessage: "+t.responseText+"\nerror: "+i)}}):n.resolve(o);return n.promise()}().done(function(t){r.append(t),r.jstree({core:{animation:0,themes:{icons:n.icons},dblclick_toggle:!1},plugins:["wholerow","wholerowex","pageno","svgoclicon","svgfileicon","svgfoldericon"]}).on("ready.jstree",function(){!0===a.config.tocOpenAll&&r.jstree("open_all"),a.isMobileDevice||new a.PerfectScrollbar(r[0],{suppressScrollX:!0,resize:!0})})}).fail(function(t){i.animate({left:0},250)}),a.lazy(function(){i.animate({left:0},250)},100),r.css("height",$(window).innerHeight()-r.offset().top+"px"),$(window).on("resize",s),i}function s(){var t=a.isMobileDevice?50:0;a.lazy(function(){r.css("height",$(window).innerHeight()-r.offset().top+"px")},t)}function d(){i.animate({left:-i.width()},250,function(){$(window).off("resize",s),i.remove(),i=null})}function u(t){var e=$(t.target);e.hasClass("jstree-ocl")||e.closest(".toc-svg-ocl-icon").length||e.closest(".toc-svg-folder-icon").length||(e=("LI"==t.target.tagName?$(t.target):$(t.target).parents("li")).attr("data-page"),a.isUrlValid(e)?("http:"!==(t=e).protocol()&&"https"!==t.protocol()&&(t="http://"+t),window.open(t,"_blank")):_.isUndefined(e)||(isNaN(e)?a.Book.move(e,{silent:!1}):a.Book.move(Number(e),{isLogical:!0,silent:!1}),a.isMobileDevice&&d()))}a.CommandManager.registerInternal(a.Commands.TOC,function(){c=c||n.toclistUrl||a.paths.data+"toclist.xml",h=(_.isUndefined(l)||_.isNull(l))&&!0!==a.config.toclist,!_.isNumber(a.config.tocPageNumber)||a.isMobileDevice&&!h?(_.isUndefined(e)&&(e=Mustache.render(a.HtmlLoader.TOC,{Strings:a.Strings,theme:a.theme})),i||(o().children(".panel-heading").find(".close").on("click",d),r.on("click.jstree",u))):a.Book.move(Number(a.config.tocPageNumber),{isLogical:!0,silent:!1})}),t.configure=function(t){t=t||{},n=_.extend(n,t)},t.setXMLData=function(t){l=t},a.extensions.TOC=t}),define("toast/extensions/defaults/Search",["exports","../../core"],function(t,f){"use strict";var o,e,i,n,s,a,r,l=f.Strings,c=!1,h=new Backbone.Collection,g=[],d=new $.Deferred,u=null,p="";function m(t,e){var o,i=t,s=e||"EM",a=new RegExp("^(?:"+s+"|SCRIPT|FORM)$"),r=["#ff6","#a0ffff","#9f9","#f99","#f6f"],l=[],c=0,h="";this.setRegex=function(t){h=new RegExp("("+t+")","i"),0},this.getRegex=function(){return h.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," ")},this.hiliteWords=function(t){if(null!=t&&t&&h&&!a.test(t.nodeName)){if(t.hasChildNodes())for(var e=0;e<t.childNodes.length;e++)this.hiliteWords(t.childNodes[e]);var i,n;3==t.nodeType&&(o=t.nodeValue)&&(o=h.exec(o))&&(l[o[0].toLowerCase()]||(l[o[0].toLowerCase()]=r[c++%r.length]),(i=document.createElement(s)).appendChild(document.createTextNode(o[0])),i.style.backgroundColor=l[o[0].toLowerCase()],i.style.fontStyle="inherit",i.style.color="#000",(n=t.splitText(o.index)).nodeValue=n.nodeValue.substring(o[0].length),t.parentNode)&&t.parentNode.insertBefore(i,n)}},this.remove=function(){for(var t,e=document.getElementsByTagName(s);e.length&&(t=e[0]);)t.parentNode.replaceChild(t.firstChild,t)},this.apply=function(t){null!=t&&t&&(this.remove(),t=t.split(" "),_.each(t,function(t){this.setRegex(t),_.isArray(i)?_.each(i,function(t){this.hiliteWords(t[0])},this):this.hiliteWords(i[0])},this))}}function v(){var i,n;$("<ul />");this.apply=function(t){var r,l,c,h,d,u=[],p=0,e=t.toLowerCase().split(" "),t=(_.each(g,function(a){_.any(e,function(t){try{var e,i,n,o,s;if("?"===t.substr(0,1)&&(t=t.substr(1)),r=new RegExp("("+t+")","i"),l=a.get("text"),c=r.exec(l))return h=Math.max(0,c.index-50),d=Math.min(l.length-h,80),l=l.substr(h,d)+" ...",e=document.createTextNode(l),(i=$("<span />")).append(e),(n={}).index=p,s=(o=f.project.models[a.get("index")].get("thumbnail")).url?f.StringUtils.replaceTemplate(o.url):o.src,n.thumbUrl=s,n.thumbWidth=o.width,n.thumbHeight=o.height,n.html=i.html(),n.displayPageNumber=f.Book.getDisplayPageNumber(f.Book.toLogicalPageNumber(a.get("index")+1)),u.push(n),p++,!0}catch(t){}})}),Mustache.render(o,{searchResults:f.config.reversePageTurnDirection?u.reverse():u,Strings:TT.Strings,theme:TT.theme}));i=$(t),$(".toast").append(i),n=i.find(".container"),_.each(e,function(t){i.find(".panel-body > .container").tt_highlight(t)}),i.find(".panel-heading .btn.close").on("click",this.hide),i.find(".panel-body > .container > .row").on("click",this.click),n.css("height",$(window).height()-n.offset().top+"px"),$(window).on("resize",this.windowRsize)},this.click=function(t){t=$(t.currentTarget),r=Number(t.attr("data-index")),t=g[r].get("index");f.Book.move(f.Book.toLogicalPageNumber(t+1),{isLogical:!0,silent:!1}),S(t),x(),f.isMobileDevice&&!f.isTablet&&a.hide()},this.show=function(){i.animate({left:0},250)},this.hide=function(){i.animate({left:-(i.width()+100)},250)},this.remove=function(){$(window).off("resize",this.windowRsize),i.remove()},this.windowRsize=function(){n.css("height",$(window).height()-n.offset().top+"px")}}function y(){A(function(){var n;p=e.find(".searchinput").val(),_.isEmpty(p)||(r=0,E(),a&&(a.remove(),a=null),g=[],n=p.toLowerCase().split(" "),_.each(h.models,function(t){var e=t.get("text").toLowerCase(),i=0;_.any(n,function(t){!0===_.contains(e,t)&&i++}),i===n.length&&g.push(t)}),_.isEmpty(g)?(f.DialogBar.present({autoDismiss:!0,dismissInterval:3e3,titleIcon:"glyphicon glyphicon-info-sign",title:l.ALERT_TITLE,content:"<b>"+l.ALERT_NO_SEARCH_RESULT+"</b>"}),e.removeClass("has-search-result")):((a=new v).apply(p),b(),S(),e.addClass("has-search-result"),TT.isMobileDevice&&e.find(".searchinput").blur()),x())})}function w(t){switch(t.keyCode){case f.KeyEvent.DOM_VK_RETURN:t.preventDefault(),y();break;case f.KeyEvent.DOM_VK_ESCAPE:C()}}function b(){a.show()}function S(t){var e,i,n,o;t||(e=f.Book.getCurrentPageNumber(),i=-1,_.any(g,function(t){return t.get("index")===e[0]-1||1<e.length&&t.get("index")===e[1]-1?(i=t.get("index"),!0):void 0}),t=i),-1!=t&&(!0!==f.Book.isDoublePage()?f.Book.views[t].ready(function(){T()}):(n=f.Book.views[t],(o=Math.min(f.project.models.length-1,t+1))!==t?f.Book.views[o].ready(function(){n.ready(function(){T()})}):n.ready(function(){T()})))}function T(){var t=f.Book.getCurrentPage();if(0<t.length&&c)if(1<t.length){if(_.isUndefined(t[0].html())||_.isUndefined(t[1].html()))return void TT.lazy(T,10)}else if(_.isUndefined(t[0].html()))return void TT.lazy(T,10);(s=new m(t)).apply(p)}function E(){s&&(s.remove(),s=null),_.isUndefined(u)||_.isNull(u)||(clearInterval(u),u=null)}function C(){c&&(e.find(".searchinput").blur(),f.Book.enableAction(!0),TT.__resizeBlock__=!1,E(),a&&(a.remove(),a=null),g=[],e.find(".searchinput").val(""),e.animate({top:-(e.height()+5)},100),f.lazy(function(){TT.$navbar.removeClass("hide")},50),f.$el.removeClass("show-searchbar"),c=!1)}function x(){_.isEmpty(g)?(i.hide(),n.text("0")):(i.show(),n.text(g.length))}function A(t){var i,n,e,a,r;d.promise().done(t),d._success_?d.resolve():(t=[],i=new $.Deferred,n=new $.Deferred,h.reset(),e=0,_.each(f.project.models,function(t){h.add({index:e,text:""}),e++}),a=new Backbone.Collection,t.push(i.promise()),_.each(f.project.models,function(t){a.add({text:""})}),(new Backbone.Collection).fetch({url:f.paths.data+"searchwords.json",success:function(t,e){a.reset(f.config.reversePageTurnDirection?t.models.reverse():t.models),i.resolve()},error:function(t,e){i.reject()}}),r=new Backbone.Collection,t.push(n.promise()),_.each(f.project.models,function(t){r.add({text:""})}),(new Backbone.Collection).fetch({url:f.paths.data+"searchwords-extra.json",success:function(t,e){r.reset(f.config.reversePageTurnDirection?t.models.reverse():t.models),n.resolve()},error:function(t,e){n.reject()}}),TT.Async.waitForAll(t).always(function(){for(var t,e,i=a,n=r,o=f.project.models.length,s=0;s<o;s++)e="",t=h.at(s),_.isUndefined(i.at(s))||(e=i.at(s).get("text")),_.isUndefined(n.at(s))||_.isEmpty(n.at(s).get("text"))||(e+=" "+n.at(s).get("text")),t.set("text",e);t=h.at(0),d._success_=!0,d.resolve()}))}function I(){var t;f.CommandManager.execute(f.Commands.STOP_AUTO_SLIDE),c?C():(f.Book.enableAction(!1),f.__resizeBlock__=!0,_.isUndefined(e)||_.isUndefined(e[0])||(e.remove(),e=null),o=f.HtmlLoader.Searchlist,t=Mustache.render(f.HtmlLoader.Searchbar,{Strings:f.Strings,theme:f.theme}),(e=$(t)).find(".btn-search").on("click",y),e.find(".searchinput").on("keydown",w),e.find(".btn.close").on("click",C),f.isMobileDevice||(t=(f.$el.width()-f.$bookContainer.width())/2,t-=f.$bookContainer.offset().left,e.css("marginLeft",-t)),f.$el.append(e),f.$el.addClass("show-searchbar"),i=e.find(".btn-list"),n=e.find(".badge"),i.on("click",b),f.$navbar.addClass("hide"),e.animate({top:0},100),f.lazy(function(){e.find(".searchinput").focus()},100),c=!0)}f.on(f.Events.PAGE_DID_LOAD,function(e){c&&!_.isEmpty(g)&&_.each(g,function(t){t.get("index")===e-1&&S()})}),f.on(f.Events.PAGE_DID_CHANGE,function(e,t){c&&!_.isEmpty(g)&&_.any(g,function(t){return t.get("index")===e[0]-1||1<e.length&&t.get("index")===e[1]-1?(S(),!0):void 0})}),f.on(f.Events.ORIENTATION_DID_CHANGE,function(t){C(),f.isMobileDevice&&f.lazy(function(){f.Book.layout()},150)}),f.ready(function(){A(),f.CommandManager.registerInternal(f.Commands.SEARCH,I)})}),define("toast/extensions/defaults/Bookmark",["exports","../../core"],function(t,s){"use strict";var a,r,l,c=s.Strings;function h(t){t=a.findWhere({page:t});return _.isUndefined(t)?"":t.get("text")}function i(){TT.$toggleBookmark.removeClass("on"),d()&&TT.$toggleBookmark.addClass("on")}function d(){var t=s.Book.getCurrentPageNumber(),e=a.findWhere({page:t[0]});return!_.isUndefined(e)||1!=t.length&&(e=a.findWhere({page:t[1]}),!_.isUndefined(e))}function u(t,e){a.addItem({page:t,text:e}),i()}function p(t){t=a.findWhere({page:t});_.isUndefined(t)||(a.removeItem(t),i())}function o(){var i,t,n,o;r&&(i=[],t=s.Book.getCurrentPageNumber(),n=[],o=s.DialogBar.$el.find('input[type="checkbox"]'),_.each(t,function(t,e){a.findWhere({page:t})?(i.push(t),o[e].checked=!0,n.push(o[e])):o[e].checked=!1}),!s.config.doublepage||s.Book.isCoverPage()?(s.DialogBar.$el.find(".body .page-form-group").hide(),o[0].checked=!0,o[1].checked=!1):s.DialogBar.$el.find(".body .page-form-group").show(),0===i.length?(0===n.length?s.DialogBar.$el.find(".header .title").text(c.BOOKMARK):s.DialogBar.$el.find(".header .title").text(c.ADD_BOOKMARK_TITILE),s.DialogBar.$el.find(".header .title-icon").css("color",""),s.DialogBar.$el.find('.btn[data-button-id="remove"]').hide(),s.DialogBar.$el.find("textarea").val(l)):(s.DialogBar.$el.find(".header .title-icon").css("color","red"),s.DialogBar.$el.find(".header .title").text(c.MODIFY_BOOKMARK_TITILE),s.DialogBar.$el.find('.btn[data-button-id="remove"]').show(),s.DialogBar.$el.find("textarea").val(h(i[0]))),!s.config.doublepage||s.Book.isCoverPage()||0<n.length?s.DialogBar.$el.find('.btn[data-button-id="'+s.Dialog.DIALOG_BTN_OK+'"]').tt_enable():s.DialogBar.$el.find('.btn[data-button-id="'+s.Dialog.DIALOG_BTN_OK+'"]').tt_disable())}function f(){d()||(l=$(this).val())}function g(t){var i=[],n=s.Book.getCurrentPageNumber(),o=[],e=s.DialogBar.$el.find('input[type="checkbox"]');_.each(e,function(t,e){t=$(t);t[0].checked&&(o.push(t),a.findWhere({page:n[e]}))&&i.push(n[e])}),d()||(l=s.DialogBar.$el.find("textarea").val()),0===i.length?(0===o.length?s.DialogBar.$el.find(".header .title").text(c.BOOKMARK):s.DialogBar.$el.find(".header .title").text(c.ADD_BOOKMARK_TITILE),s.DialogBar.$el.find('.btn[data-button-id="remove"]').tt_disable(),s.DialogBar.$el.find(".header .title-icon").css("color",""),s.DialogBar.$el.find('.btn[data-button-id="remove"]').hide(),s.DialogBar.$el.find("textarea").val(l)):(s.DialogBar.$el.find('.btn[data-button-id="remove"]').tt_enable(),s.DialogBar.$el.find(".header .title-icon").css("color","red"),s.DialogBar.$el.find(".header .title").text(c.MODIFY_BOOKMARK_TITILE),s.DialogBar.$el.find('.btn[data-button-id="remove"]').show(),s.DialogBar.$el.find("textarea").val(h(i[0]))),!s.config.doublepage||0<o.length?s.DialogBar.$el.find('.btn[data-button-id="'+s.Dialog.DIALOG_BTN_OK+'"]').tt_enable():s.DialogBar.$el.find('.btn[data-button-id="'+s.Dialog.DIALOG_BTN_OK+'"]').tt_disable()}function m(t){var n,e,i,o;r=!1,l="",t&&_.isString(t)&&t!==s.Dialog.DIALOG_BTN_CANCEL&&(o=s.DialogBar.$el.find("textarea"),n=(n=o.val()).replace(/<\/?[^>]+(>|$)/g,""),e=[],i=s.Book.getCurrentPageNumber(),o=s.DialogBar.$el.find('input[type="checkbox"]'),_.each(o,function(t){t=$(t);t[0].checked&&"left-page"===t.attr("name")?e.push(i[0]):t[0].checked&&"right-page"===t.attr("name")&&1<i.length&&e.push(i[1])}),0!==e.length)&&(t===s.Dialog.DIALOG_BTN_OK?_.each(e,function(t){var e,i=a.findWhere({page:t});_.isObject(i)?(i=t,e=n,i=a.findWhere({page:i}),_.isUndefined(i)||(i.set("text",e),a.updateItem(i))):u(t,n)}):"remove"===t&&_.each(e,function(t){p(t)}),s.send(s.Events.BOOKMARK_DID_CHANGE,a))}function e(t){var e,i,n;r||(e='<form class="form-horizontal"><textarea class="form-control" placeholder="'+c.ENTER_TEXT+'"></textarea><div class="form-group page-form-group"><label class="col-sm-3 page-title">'+c.SELECT_PAGE_TITLE+'</label><div class="col-sm-8"><div class="input-group"><label class="checkbox-label"><input type="checkbox" name="left-page"><span class="checkbox"><span class="check-icon  glyphicon glyphicon-ok"></span></span><span class="checkbox-title">'+c.LEFT_PAGE_TITLE+'</span></label><label class="checkbox-label"><input type="checkbox" name="right-page"><span class="checkbox"><span class="check-icon  glyphicon glyphicon-ok"></span></span><span class="checkbox-title">'+c.RIGHT_PAGE_TITLE+"</span></label></div></div></div></form>",e={modalClassName:"bookmarks",titleIcon:"fa fa-bookmark",title:c.BOOKMARK,content:e},n=[{className:s.Dialog.DIALOG_BTN_CLASS_NORMAL,id:s.Dialog.DIALOG_BTN_CANCEL,text:c.CANCEL}],d()&&(n.push({className:s.Dialog.DIALOG_BTN_CLASS_DANGER,id:"remove",text:c.DELETE,icon:"glyphicon glyphicon-trash"}),e.title=c.MODIFY_BOOKMARK_TITILE),i=[{className:s.Dialog.DIALOG_BTN_CLASS_PRIMARY,id:s.Dialog.DIALOG_BTN_OK,text:c.OK}],e.leftButtons=n,e.rightButtons=i,e.dismiss=!0,e.modal=!0,(n=s.DialogBar.present(e)).done(m),n.fail(m),s.DialogBar.$el.find('input[type="checkbox"]').on("change",g),s.DialogBar.$el.find("textarea").on("change",f),s.DialogBar.$el.find("textarea").val(h(s.Book.getCurrentPageNumber()[0])),s.DialogBar.$el.find("textarea").focus(),r=!0,o())}s.ready(function(){(a=s.Storage.get(s.Storage.BOOKMARK)).ready(function(){i(),s.on(s.Events.PAGE_DID_CHANGE,function(t,e){i(),r&&(l="",o())}),s.on(s.Events.DOUBLEPAGE_DID_CHANGE,function(t){i(),r&&(l="",o())}),s.CommandManager.registerInternal(s.Commands.TOGGLE_BOOKMARK,e)})}),t.addItem=u,t.removeItem=p,t.empty=function(){a.empty(),i(),TT.send(s.Events.BOOKMARK_DID_CHANGE,a)},t.getAll=function(){return a.toJSON()},t.has=d,s.Bookmark=t}),define("toast/extensions/defaults/Memo",["exports","toast/core/book/BookZoom"],function(t,e){"use strict";var c,h,s=Toast.Strings;Toast.Book;function i(t){t=!_.isArray(t)?[t]:t;var e=[],n=(_.each(t,function(t){t=c.where({page:t},!1);t&&(e=e.concat(t))}),0);_.each(e,function(t){var t=t.attributes,e=Toast.Book.views[t.page-1];if(0!==e.$contents.children("#"+t.id).length)return!0;var i=$('<div class="memo-icon" />');i.attr("id",t.id),i.css({position:"absolute",left:t.offset.left+"px",top:t.offset.top+"px",width:"60px",height:"60px",zIndex:999+n}),e.$contents.append(i),d(i),n++})}function n(t){var e=[];t?(t=!_.isArray(t)?[t]:t,_.each(t,function(t){t=c.where({page:t},!1);t&&(e=e.concat(t))})):e=c.models,_.each(e,function(t){t=t.attributes,t=Toast.Book.views[t.page-1].$contents.find(".memo-icon");t.off("draginit drag dragstart dragend click dblclick"),t.remove()})}function d(t){t.off("draginit drag dragstart dragend click dblclick"),t.on("click",o),t.on("dblclick",a),t.drag("init",r),t.drag("start",l,{distance:1}),t.drag("drag",p),t.drag("end",f)}function u(){return Toast.IS_ZOOM?$(".bookzoom"):$(".book")}function o(t){t=$(t.currentTarget),t=c.findWhere({id:t.attr("id")});_.isUndefined(t)||v(t.get("text"),t.get("id"))}function a(t){}function r(t,e){}function l(t,e){var i=$(e.drag);i.closest("section");e.__startLeft__=parseInt(i.css("left"),10),e.__startTop__=parseInt(i.css("top"),10),e.__bookScale__=u().tt_scale(),e.__pageScale__=i.parent().tt_scale(),Toast.IS_DRAGGING=!0}function p(t,e){var i=$(e.drag),n={};n.left=e.__startLeft__+e.deltaX/e.__bookScale__/e.__pageScale__,n.top=e.__startTop__+e.deltaY/e.__bookScale__/e.__pageScale__,i.css(n)}function f(t,e){var i=$(e.drag);e.translate&&delete e.translate,e=i,i=c.findWhere({id:e.attr("id")}),_.isUndefined(i)||(i.set("offset",{left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)}),c.updateItem(i)),Toast.IS_DRAGGING=!1}function g(t){var t=$(t.currentTarget),e=(t.attr("name"),t[0].checked),i=Toast.DialogBar.$el.find('input[type="radio"]');_.each(i,function(t){$(t)[0].checked=!1}),t[0].checked=e}function m(t){var e,i,n,o,s,a,r,l;h=!1,t&&_.isString(t)&&t!==Toast.Dialog.DIALOG_BTN_CANCEL&&(n=(n=Toast.DialogBar.$el.find("textarea").val()).replace(/<\/?[^>]+(>|$)/g,""),e=Toast.Book.getCurrentPageNumber(),i=Toast.DialogBar.$el.find('input[type="radio"]'),_.each(i,function(t){t=$(t);t[0].checked&&"left-page"===t.attr("name")?e=e[0]:t[0].checked&&"right-page"===t.attr("name")&&(e=e[1])}),i=Toast.DialogBar.$el.attr("data-id"),t===Toast.Dialog.DIALOG_BTN_OK?i?(r=n,l=i,l=c.findWhere({id:l}),_.isUndefined(l)||(l.set("text",r),c.updateItem(l))):(r=e,l=n,n=Toast.Book.views[r-1],o=parseInt(n._model.width/2-30),s=parseInt(n._model.height/2-30),r={id:Toast.UUID8(),page:r,text:l,offset:{left:o,top:s}},l=$('<div class="memo-icon" />'),a=0<n.$contents.children(".memo-icon").length?Number(n.$contents.children(".memo-icon").last().css("zIndex"))+1:999,l.attr("id",r.id),l.css({position:"absolute",left:o,top:s,width:"60px",height:"60px",zIndex:a}),n.$contents.append(l),d(l),!(a=c.addItem(r))||(n=a.get("offset")).left==o&&n.top==s||l.css({left:n.left,top:n.top})):"remove"===t&&(a=i,o=c.findWhere({id:a}),_.isUndefined(o)||(c.removeItem(o),u().find("#"+a).remove())),TT.send(Toast.Events.MEMO_DID_CHANGE,c))}function v(t,e){var i,n,o;h||(i='<form class="form-horizontal"><textarea class="form-control" placeholder="'+s.ENTER_TEXT+'"></textarea><div class="form-group page-form-group"><label class="col-sm-3 page-title">'+s.SELECT_PAGE_TITLE+'</label><div class="col-sm-8"><div class="input-group"><label class="checkbox-label"><input type="radio" name="left-page" checked><span class="radio"></span><span class="checkbox-title">'+s.LEFT_PAGE_TITLE+'</span></label><label class="checkbox-label"><input type="radio" name="right-page"><span class="radio"></span><span class="checkbox-title">'+s.RIGHT_PAGE_TITLE+"</span></label></div></div></div></form>",i={modalClassName:e?"memos modify":"memos",titleIcon:"fa fa-sticky-note",title:e?s.MODIFY_MEMO_TITILE:s.ADD_MEMO_TITILE,content:i},o=[{className:Toast.Dialog.DIALOG_BTN_CLASS_NORMAL,id:Toast.Dialog.DIALOG_BTN_CANCEL,text:s.CANCEL}],e&&(i.attrs=[{"data-id":e}],o.push({className:Toast.Dialog.DIALOG_BTN_CLASS_DANGER,id:"remove",text:s.DELETE,icon:"glyphicon glyphicon-trash"})),n=[{className:Toast.Dialog.DIALOG_BTN_CLASS_PRIMARY,id:Toast.Dialog.DIALOG_BTN_OK,text:s.OK}],i.leftButtons=o,i.rightButtons=n,i.dismiss=!0,i.modal=!0,(o=Toast.DialogBar.present(i)).done(m),o.fail(m),Toast.DialogBar.$el.find('input[type="radio"]').on("change",g),Toast.DialogBar.$el.find("textarea").val(t),Toast.isAndroid&&!Toast.isChrome||Toast.DialogBar.$el.find("textarea").focus(),!e&&Toast.config.doublepage&&!Toast.Book.isCoverPage()||Toast.DialogBar.$el.find(".body .page-form-group").hide(),h=!0)}Toast.ready(function(){(c=Toast.Storage.get(Toast.Storage.MEMO)).ready(function(){var t;t=Toast.Book.getVisiblePages(),_.each(t,function(t){i(t)}),Toast.on(Toast.Events.PAGE_DID_LOAD,function(t){i(t)}),Toast.on(Toast.Events.PAGE_DID_UNLOAD,function(t){n(t)}),Toast.on(Toast.Events.PAGE_DID_CHANGE,function(t,e){h&&Toast.DialogBar.dismiss()}),Toast.on(Toast.Events.DOUBLEPAGE_DID_CHANGE,function(t){h&&Toast.DialogBar.dismiss()}),Toast.on(Toast.Events.ZOOM_MODE_DID_CHANGE,function(t){var e=Toast.Book.getCurrentPageNumber();n(e),i(e)}),Toast.CommandManager.registerInternal(Toast.Commands.ADD_MEMO,function(){Toast.CommandManager.execute(Toast.Commands.STOP_AUTO_SLIDE),v()})})}),t.getAll=function(){return c.toJSON()},t.empty=function(){n(),c.empty(),TT.send(Toast.Events.MEMO_DID_CHANGE,c)}}),define("toast/extensions/defaults/Share",["exports","../../core"],function(t,r){var i,e=TT.Strings;function n(){var t=r.PathUtils.parseUrl(document.location.href).hrefNoSearch;return t+="?startpage="+r.Book.getCurrentPageNumber({isLogical:!0})[0]}function o(t){t.preventDefault(),t.stopPropagation();t=$(t.currentTarget).attr("command");t&&r.executeCommand(t)}function s(t){t.preventDefault(),t.stopPropagation(),r.isMobileDevice&&!r.isAndroid||(i.find(".input-url").focus(),i.find(".input-url").select(),document.execCommand("Copy"),alert(e.COPY_URL_SUCCESS_ALERT))}function a(t){var e=$(t.target).parents(".modal-content");($(t.target).hasClass("close")||_.isUndefined(e[0]))&&i.remove()}function l(t){window.open(t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}r.CommandManager.registerInternal("share",function(){var t;_.isEmpty($(document.body).children(".share-modal-wrapper"))&&(i=$(Mustache.render(r.HtmlLoader.Share,{Strings:TT.Strings,theme:TT.theme})),t=(r.$el.width()-r.$bookContainer.width())/2,t-=r.$bookContainer.offset().left,i.find(".modal-content").css("left",-t),$(document.body).append(i),r.isMobileDevice&&!r.isAndroid&&(i.find(".group-copy-url").hide(),i.find(".group-copy-url-ios").show()),i.click(a),i.find(".close").click(a),i.find(".btn-group > button").on("click",o),i.find(".input-url").val(n()),i.find(".btn-copy-url").attr("href",n()),i.find(".btn-copy-url").text(n()),!r.isMobileDevice||r.isAndroid?i.find(".copy-url-addon").on("click",s):(i.find(".copy-url-addon").hide(),i.find(".btn-copy-url").on("click",function(t){t.preventDefault(),t.stopPropagation()})))}),r.CommandManager.registerInternal("sendGoogleplus",function(){l("https://plus.google.com/share?url="+n())}),r.CommandManager.registerInternal("sendFacebook",function(){l("https://www.facebook.com/sharer/sharer.php?u="+n())}),r.CommandManager.registerInternal("sendTwitter",function(){l("https://twitter.com/intent/tweet?text="+encodeURIComponent(window.document.title)+"&url="+n())}),r.CommandManager.registerInternal("sendKakaotalk",function(){var t,e,i=window.document.title,n=$('meta[property="og:description"]').attr("content"),o=$('meta[property="og:image"]').attr("content"),s=(s=r.config.kakaotalk_sender)||"http://itoast.kr/webservices/sendkakaotalk",a="url="+r.PathUtils.parseUrl(document.location.href).hrefNoSearch,a=(a+="&startpage="+r.Book.getCurrentPageNumber({isLogical:!0})[0])+("&title="+i)+("&text="+n);r.me?(t=r.project.config.thumbnail.width,e=r.project.config.thumbnail.height):_.isEmpty(o)&&(r.project.config.thumbnail&&!_.isEmpty(r.project.config.thumbnail.url)?(o=r.StringUtils.replaceTemplate(r.project.config.thumbnail.url).encodeFilePath(),t=r.project.config.thumbnail.width,e=r.project.config.thumbnail.height):(i=r.project.at(0))&&!_.isEmpty(i.thumbnail.url)&&(o=r.StringUtils.replaceTemplate(i.thumbnail.url).encodeFilePath())),r.me&&"http"!==o.substr(0,4)&&"//"!==o.substr(0,2)?o=window.location.host+"/"+o:_.isEmpty(o)||"http"!==o.substr(0,4)&&"//"!==o.substr(0,2)&&(o=window.location.host+((n=window.location.pathname).lastIndexOf("/")===n.length-1?n:n.substring(0,n.lastIndexOf("/",n.length-2)+1))+o),_.isEmpty(o)||(a+="&imageUrl="+o),_.isUndefined(t)||_.isUndefined(e)||(a+="&imageWidth="+t+"&imageHeight="+e),window.open(s+"?"+a)}),r.CommandManager.registerInternal("sendKakaostory",function(){l("https://story.kakao.com/share?url="+n())})}),define("toast/extensions/defaults/Draw",["exports"],function(t){}),define("toast/extensions/defaults/MyStorage",["require","exports","module","./Bookmark","./Memo","./Draw"],function(t,e,i,o,s,n){"use strict";var a,r,l,c=Toast.Strings;Toast.Dialog;function h(){l.css("height",$(window).height()-l.offset().top+"px")}function d(){var t=_.clone(o.getAll()),e=(_.each(t,function(t){if(Toast.project.models.length<t.page)return!0;var e=Toast.project.models[t.page-1].get("thumbnail"),i=e.url?Toast.StringUtils.replaceTemplate(e.url):e.src;t.displayPageNumber=Toast.Book.getDisplayPageNumber(Toast.Book.toLogicalPageNumber(t.page)),t.thumbUrl=i,t.thumbWidth=e.width,t.thumbHeight=e.height,t.text&&(i=Math.min(t.text.length,150),t.text=t.text.substr(0,i)+" ...")}),_.clone(s.getAll())),i=(_.each(e,function(t){if(Toast.project.models.length<t.page)return!0;var e=Toast.project.models[t.page-1].get("thumbnail"),i=e.url?Toast.StringUtils.replaceTemplate(e.url):e.src;t.displayPageNumber=Toast.Book.getDisplayPageNumber(Toast.Book.toLogicalPageNumber(t.page)),t.thumbUrl=i,t.thumbWidth=e.width,t.thumbHeight=e.height,t.text&&(i=Math.min(t.text.length,150),t.text=t.text.substr(0,i)+" ...")}),{bookmarks:t,memos:e,Strings:Toast.Strings}),i=$(Mustache.render(a,i)),n=i.find("#mystorage-bookmarks > .container").children(),n=(r.find("#mystorage-bookmarks > .container").children().remove(),r.find("#mystorage-bookmarks > .container").append(n),r.find("#mystorage-bookmarks > .container > .row").on("click",f),i.find("#mystorage-memos > .container").children());r.find("#mystorage-memos > .container").children().remove(),r.find("#mystorage-memos > .container").append(n),r.find("#mystorage-memos > .container > .row").on("click",g),_.isEmpty(t)&&_.isEmpty(e)?r.children(".panel-heading").find(".trash").tt_disable():r.children(".panel-heading").find(".trash").tt_enable()}function u(){r.animate({left:-500},250,function(){$(window).off("resize",h),r.remove(),r=null}),$(document.body).removeClass("show-mystorage"),TT.off(Toast.Events.BOOKMARK_DID_CHANGE,d),TT.off(Toast.Events.MEMO_DID_CHANGE,d)}function p(t){Toast.DialogBar.present({dismiss:!0,titleIcon:"glyphicon glyphicon-inbox",title:c.ALERT_TITLE,leftButtons:[{className:Toast.Dialog.DIALOG_BTN_CLASS_NORMAL,id:Toast.Dialog.DIALOG_BTN_CANCEL,text:c.CANCEL}],rightButtons:[{className:Toast.Dialog.DIALOG_BTN_CLASS_DANGER,id:Toast.Dialog.DIALOG_BTN_OK,text:c.DELETE,icon:"glyphicon glyphicon-trash"}],content:"<b>"+c.REMOVE_ALL_MY_STORAGE+"</b>"}).done(function(t){t===Toast.Dialog.DIALOG_BTN_OK&&(o.empty(),s.empty())})}function f(t){t=$(t.currentTarget).closest(".row"),t=Toast.Book.toLogicalPageNumber(Number(t.attr("data-page")));Toast.Book.move(t,{isLogical:!0,silent:!1}),Toast.isMobileDevice&&u()}function g(t){t=$(t.currentTarget).closest(".row"),t=Toast.Book.toLogicalPageNumber(Number(t.attr("data-page")));Toast.Book.move(t,{isLogical:!0,silent:!1}),Toast.isMobileDevice&&u()}Toast.CommandManager.registerInternal(Toast.Commands.MY_STORAGE,function(){_.isUndefined(a)&&(a=Toast.HtmlLoader.MyStorage),r||(r=$(Mustache.render(a,{Strings:TT.Strings,theme:TT.theme})),l=r.find(".container"),TT.$el.append(r),d(),r.animate({left:0},250),TT.on(Toast.Events.BOOKMARK_DID_CHANGE,d),TT.on(Toast.Events.MEMO_DID_CHANGE,d),$(document.body).addClass("show-mystorage"),r.children(".panel-heading").find(".close").on("click",u),r.children(".panel-heading").find(".trash").on("click",p))})}),define("toast/extensions/defaults/AutoSlide",["exports","../../core"],function(t,i){"use strict";i.Strings;function e(t,e){this.requestAnimationFrameMethod=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,this.diameter=50,this.thickness=2,this.playing=!1,this.progress=0,this.progressOffset=1,this.progressCheck=e,null!==t&&(this.canvas=t,this.canvas.width=this.diameter,this.canvas.height=this.diameter,this.context=this.canvas.getContext("2d"),this.thickness=Number(t.getAttribute("data-thickness")||2),this.backgroundColor=t.getAttribute("data-background-color")||"rgba( 255, 255, 255, 0.4 )",this.strokeColor=t.getAttribute("data-stroke-color")||"#ddd",this.fillStrokeColor=t.getAttribute("data-fill-stroke-color")||"#3f3f3f",this.canvas.style.display="block"),this.render()}e.prototype.setPlaying=function(t){var e=this.playing;this.playing=t,!e&&this.playing?this.animate():this.render()},e.prototype.animate=function(){var t=this.progress;this.progress=this.progressCheck(),.8<t&&this.progress<.2&&(this.progressOffset=this.progress),this.render(),this.playing&&this.requestAnimationFrameMethod.call(window,this.animate.bind(this))},e.prototype.render=function(){var t,e,i,n,o;this.context&&(n=this.playing?this.progress:0,t=this.diameter/2-this.thickness,e=this.diameter/2,i=this.diameter/2,this.progressOffset+=.1*(1-this.progressOffset),n=-Math.PI/2+n*(2*Math.PI),o=-Math.PI/2+this.progressOffset*(2*Math.PI),this.context.save(),this.context.clearRect(0,0,this.diameter,this.diameter),this.context.beginPath(),this.context.arc(e,i,2+t,0,2*Math.PI,!1),this.context.fillStyle=this.backgroundColor,this.context.fill(),this.context.beginPath(),this.context.arc(e,i,t,0,2*Math.PI,!1),this.context.lineWidth=this.thickness,this.context.strokeStyle=this.strokeColor,this.context.stroke(),this.playing&&(this.context.beginPath(),this.context.arc(e,i,t,o,n,!1),this.context.lineWidth=this.thickness+this.thickness/2,this.context.strokeStyle=this.fillStrokeColor,this.context.stroke()),this.context.translate(e-7,i-7),this.playing?(this.context.fillStyle="#3f3f3f",this.context.fillRect(0,0,2*this.thickness,14),this.context.fillRect(9,0,2*this.thickness,14)):(this.context.beginPath(),this.context.translate(2,0),this.context.moveTo(0,0),this.context.lineTo(12,7),this.context.lineTo(0,14),this.context.fillStyle="#3f3f3f",this.context.fill()),this.context.restore())},e.prototype.on=function(t,e){this.canvas&&this.canvas.addEventListener(t,e,!1)},e.prototype.off=function(t,e){this.canvas&&this.canvas.removeEventListener(t,e,!1)};var n=null,o=0,s=-1,a=!(e.prototype.destroy=function(){this.playing=!1,this.canvas&&(this.canvas.style.display="none")}),r=3e3,l=!0;function c(){d();var t=r,e=i.Book.getCurrentPage();_.each(e,function(t){t=t.find("video, audio");0<t.length&&_.each(t,function(t){t.hasAttribute("data-autoplay")&&r&&1e3*t.duration>r&&(r=1e3*t.duration+1e3)})}),i.config.reversePageTurnDirection?!r||a||!i.Book.availablePageNavigation().prev&&!0!==l?i.Book.availablePageNavigation().prev||(d(),p()):(o=setTimeout(i.Book.availablePageNavigation().prev?i.Book.previous:i.Book.moveToLast,r),s=Date.now()):!r||a||!i.Book.availablePageNavigation().next&&!0!==l?i.Book.availablePageNavigation().next||(d(),p()):(o=setTimeout(i.Book.availablePageNavigation().next?i.Book.next:i.Book.moveToFirst,r),s=Date.now()),n&&n.setPlaying(-1!==o),r=t}function h(){r&&a&&(a=!1,i.send(i.Events.AUTOSLIDE_DID_RESUME),c())}function d(){clearTimeout(o),o=-1}function u(){return 0<o}function p(){n&&(n.destroy(),n=null)}function f(){i.Book.getTotalPageNumber()<1||0<o||(TT.$toggleAutoSlide.addClass("on"),(!i._msieVersion||i._msieVersion&&9<i._msieVersion)&&(p(),(n=new e(document.querySelector(".toast").querySelector(".autoslide"),function(){return Math.min(Math.max((Date.now()-s)/r,0),1)})).on("click",m)),a=!1,c())}function g(){i.Book.getTotalPageNumber()<1||0<o&&(TT.$toggleAutoSlide.removeClass("on"),d(),p())}function m(t){i.Book.isLastPage()&&!1===l?(i.Book.moveToFirst(),h()):a?h():r&&!a&&(a=!0,i.send(i.Events.AUTOSLIDE_DID_PAUSE),clearTimeout(o),n)&&n.setPlaying(!1)}i.on(i.Events.PAGE_DID_CHANGE,function(t,e){0<o&&c()}),i.on(i.Events.ZOOM_MODE_DID_CHANGE,function(t){0<o&&g()}),i.CommandManager.registerInternal(i.Commands.TOGGLE_AUTO_SLIDE,function(){i.Book.getTotalPageNumber()<1||(0<o?g:f)()}),i.CommandManager.registerInternal(i.Commands.START_AUTO_SLIDE,f),i.CommandManager.registerInternal(i.Commands.STOP_AUTO_SLIDE,g),t.isAutoSliding=u}),define("toast/extensions/defaults/Print",["exports","../../core"],function(t,h){"use strict";var e,s,a,n,d,o=h.Strings,u=(TT.Dialog,[]);function i(){var t,e,i=a.contents().find("head"),n=(window.location.origin||(window.location.origin=location.protocol+"//"+location.host),n=h.config.baseUrl||(h.me?window.location.origin+h.config.moduleBaseUrl:(n=(n=window.location.pathname).substring(0,n.lastIndexOf("/")),window.location.origin+n+"/")),$("<base />",{href:n})),n=(i.append(n),["styles/toast.css"]);h.debug&&n.push("styles/publish.css"),_.each(n,function(t){t=$("<link/>").attr({type:"text/css",rel:"stylesheet",href:t});i.append(t)}),_.each(h.config.userStylesheets,function(t){_.isEmpty(i.children("#"+t.id))&&(t={id:t.id,type:"text/css",rel:"stylesheet",href:h.paths.assets+t.src},($link=$('<link class="userStylesheet" />').attr(t)).appendTo(i))}),n="portrait",t=h.Book.getCurrentPageNumber()[0],(t=h.Book.views[t-1]).collection.width>t.collection.height&&(n="landscape"),t=s.find("#orientation-menu"),e=t.find('li[data-orientation="'+n+'"]'),t.attr("data-orientation",n),t.children("li").find("a > span").removeClass("fa fa-check-square-o"),e.find("a > span").addClass("fa fa-check-square-o"),s.find(".btn-orientation").html(e.children("a").text()),p(),s.find("#orientation-menu").children("li").on("click",r)}function r(t){var t=$(t.currentTarget),e=t.attr("data-orientation"),i=s.find("#orientation-menu");i.attr("data-orientation",e),i.children("li").find("a > span").removeClass("fa fa-check-square-o"),t.find("a > span").addClass("fa fa-check-square-o"),s.find(".btn-orientation").html(t.children("a").text()),p()}function l(){var t,e,i,n,o=new $.Deferred;return t=new $.Deferred,e=s.find("#orientation-menu").attr("data-orientation"),i=a.contents().find("head"),0===(n=i.find("#page-orientation")).length&&(n=$("<style />",{id:"page-orientation"}),i.append(n)),"landscape"===e?n.html("@page { size: landscape; }"):n.html("@page { size: portrait; }"),h.lazy(function(){t.resolve(e)},5),t.promise().then(function(t){var e=a.contents().find("body"),i=$("<page />"),t=(e.attr("data-orientation",t),e.addClass(t),e.append(i),{width:i.width(),height:i.height()});i.remove(),o.resolve(t)}),o.promise()}function c(t){if(t=t||{},d=[],n){d=[];for(var e=1;e<=h.Book.getTotalPageNumber();e++)d.push(e);h.config.reversePageTurnDirection&&d.reverse()}else{var i=(i=s.find('input[name="input-pages"]').val()).split(",");_.each(i,function(t){var e="",t=("-"===(t=t.trim()).substr(0,1)&&(e="-",t=t.substr(1)),t.split("-")),e=e+t[0],i=t[1];if(e=e&&e.trim(),"-"===(i=i&&i.trim())&&(i="-"+t[2]),e&&!isNaN(e)&&(e=Number(e),1<=(o=h.Book.pageFromLogicalPageNumber(e)))&&o<=h.Book.getTotalPageNumber()&&d.push(o),!isNaN(e)&&i&&!isNaN(i))for(var i=Number(i),n=e+1;n<=i;n++){var o=h.Book.pageFromLogicalPageNumber(n);1<=(o=Math.max(1,Math.min(o,h.Book.getTotalPageNumber())))&&o<=h.Book.getTotalPageNumber()&&d.push(o)}})}s.find("header .print-total-page").html(d.length+h.Strings.PAGE),d.length?s.find(".btn-print").tt_enable():s.find(".btn-print").tt_disable(),d.length||t.silent||(s.find('input[name="input-pages"]').focus().select(),i=s.find('input[name="input-pages"]').val(),h.DialogBar.present({titleIcon:"fa fa-exclamation-triangle",autoDismiss:!0,dismissInterval:5e3,title:o.ERROR,content:"<b>"+h.StringUtils.format(o.ERROR_NOT_VALID_PAGE_NUMBER,i)+"</b>"}))}function p(){c(),d.length&&l().then(function(r){f();var n=a.contents().find("head"),l=($("head").find("[webfont]").each(function(t,e){var i=e.getAttribute("name"),e=e.getAttribute("href");n.find('[webfont][name="'+i+'"]').length||(e=$("<link/>").attr({type:"text/css",rel:"stylesheet",href:e,name:i,webfont:!0}),n.append(e))}),a.contents().find("body")),c=(l.addClass("preview"),l.children("page").remove(),h.project.models.length);_.each(d,function(t,e){var i,n,o,s,a;return!(c<t)&&(!(a=h.project.models[t-1])||(a.attributes,t=$("<page />",{"data-page-no":t}),l.append(t),s=$("<section />"),i=$("<div />",{id:a.id,class:"toast-ctrl","data-index":e}),n=new h.ViewController({el:i}),(o=(new $.Deferred).promise()).view=n,u.push(o),s.css("width",r.width+"px"),s.css("height",r.height+"px"),s.append(i),t.append(s),n._state=h.STATUS_NONE,n.index=e,n.load(a.toJSON(),{showLoader:!1,readyonly:!0,print:!0}),o=i,t={width:n.collection.width,height:n.collection.height},s=Math.min(o.parent().width()/t.width,o.parent().height()/t.height),e=Math.round(t.width*s),a=Math.round(t.height*s),o.css({left:(o.parent().width()-e)/2+"px",top:(o.parent().height()-a)/2+"px",width:e+"px",height:a+"px"}),(o=o.children(".contents")).css({width:t.width+"px",height:t.height+"px"}),s=Math.max(e/t.width,a/t.height),e=(e-t.width)/2/s,a=(a-t.height)/2/s,void o.tt_transform("scale("+s+") translate("+e+"px, "+a+"px)")))})})}function f(){_.each(u,function(t){t.view&&t.view.reset(),t.$defer&&t.$defer.reject()}),u=[]}function g(){s.hide(),h.SpinDialog.show(h.Strings.PREPARE_PRINTING).always(function(){a.contents().find("body").removeClass("preview"),h.Async.doInParallel(u,function(t){var e=new $.Deferred;return t.view&&t.view.ready(function(){e.resolve()}),e.promise()}).always(function(){var t=a[0].contentWindow;t.onafterprint=m,h.isFirefox&&"function"==typeof t.print?t.print():t.document.execCommand("print",!1,null)})})}function m(){h.lazy(function(){h.SpinDialog.hide().always(function(){f(),S()})},100)}function v(t){t=$(t.currentTarget).find('input[name="print-target-pages"]'),s.find('input[name="print-target-pages"]').prop("checked",!1),t.prop("checked",!0),t=t.attr("value");"all"===t&&n||"all"!==t&&!n||(n="all"===t,c({silent:!0}),d.length&&p())}var y,w={};function b(t){t.keyCode===h.KeyEvent.DOM_VK_RETURN||t.keyCode===h.KeyEvent.DOM_VK_ENTER?(c({silent:!0}),d.length&&p()):(y=t.currentTarget.value,h.lazyOnce(function(){t.currentTarget.value===y&&(c({silent:!0}),d.length)&&p()},500,w))}function S(){s.remove(),s=null,h.Book.enableAction(!0)}h.CommandManager.registerInternal(h.Commands.PRINT,function(){n=!1,f(),_.isUndefined(e)&&(e=h.HtmlLoader.PrintModal),s=$(Mustache.render(e,{Strings:h.Strings,theme:h.theme})),$(document.body).append(s),s.on("mousemove",function(t){t.stopPropagation()}),s.find(".btn-print").on("click",g),s.find(".btn-cancel").on("click",S),s.find(".form-group-print-target-pages").on("click",v),s.find('input[name="input-pages"]').on("keyup",b);var t=h.Book.getCurrentPageNumber({isLogical:!0});h.config.reversePageTurnDirection&&t.reverse(),t=t.join("-"),s.find('input[name="input-pages"]').val(t),f(),c(),t=s.find("#print-document-container"),(a=t.find("#print-document")).on("load",i),h.Book.enableAction(!1)})}),define("toast/extensions/defaults/ZoomBar",["exports","../../core"],function(t,a){"use strict";var e,r,i,n,o=0,s=o,l=!0,c=!1;function h(){e=e||Mustache.render(a.HtmlLoader.ZoomBar,{Strings:a.Strings,theme:a.theme}),r=a.$el.find(".zoom-bar"),(i=r.length)?r.append($(e).html()):(r=$(e),a.$el.append(r)),r.find(".svg-icon").tt_replaceSvgIcon(),r.find(".location-btn-group .btn").on(a.Book.BookCommon.events.start,d),r.find(".location-btn-group .btn").on(a.Book.BookCommon.events.end,u),r.find(".location-btn-group .btn").on("mouseout",u),r.find("[data-drag-mode]").on("click",p),r.find("[data-scale-mode]").on("click",f),r.find(".btn-zoombar-plus").on("click",g),r.find(".btn-zoombar-minus").on("click",m),r.find(".btn-zoombar-exit").on("click",_),r.find(".btn-zoombar-plus").attr("title","+"+a.config.bookZoom.zoomInOutStepPercent+"%"),r.find(".btn-zoombar-minus").attr("title","-"+a.config.bookZoom.zoomInOutStepPercent+"%"),a.lazy(function(){(s=a.BookZoom.getScaleMode())!==o&&r.find('[data-scale-mode="'+s+'"]').addClass("active")},50);var t=a.BookZoom.getCurrentScales(),t=1-(t.zoom-t.min)/(t.max-t.min);new a.Dragdealer("zoom-slider",{horizontal:!1,vertical:!0,y:t,dragStartCallback:function(t,e){},dragStopCallback:function(t,e){},animationCallback:function(t,e){var i,n;e=e,c&&(s!==o&&(s=o,a.BookZoom.setScaleMode(s),r.find("[data-scale-mode]").removeClass("active")),i=a.BookZoom.getCurrentScales(),n=i.max-i.min,e=Number(i.max+i.min-(e*n+i.min)),a.BookZoom.setZoomScale(e))}}),c=l=!0}function d(t){var e,t=$(t.currentTarget);t.hasClass("btn-move-up")?e="up":t.hasClass("btn-move-down")?e="down":t.hasClass("btn-move-left")?e="left":t.hasClass("btn-move-right")&&(e="right"),n&&(clearInterval(n),n=null),n=setInterval(function(){a.BookZoom.moveTo(e)},50)}function u(t){n&&(clearInterval(n),n=null)}function p(t){(l=!l)?$(t.currentTarget).addClass("active"):$(t.currentTarget).removeClass("active"),a.BookZoom.setDragMode(l)}function f(t){r.find("[data-scale-mode]").not($(t.currentTarget)).removeClass("active"),s=$(t.currentTarget).hasClass("active")?($(t.currentTarget).removeClass("active"),o):($(t.currentTarget).addClass("active"),$(t.currentTarget).attr("data-scale-mode")),a.BookZoom.setScaleMode(s)}function g(){s!==o&&(s=o,a.BookZoom.setScaleMode(s),r.find("[data-scale-mode]").removeClass("active"));var t=a.BookZoom.getCurrentScales(),e=Math.min(t.max,Number(parseFloat(t.zoom+t.max/10).toFixed(2)));t.zoom!==e&&a.BookZoom.zoomIn()}function m(){s!==o&&(s=o,a.BookZoom.setScaleMode(s),r.find("[data-scale-mode]").removeClass("active"));var t=a.BookZoom.getCurrentScales(),e=Math.max(t.min,Number(parseFloat(t.zoom-t.max/10).toFixed(2)));t.zoom!==e&&a.BookZoom.zoomOut()}function _(){a.BookZoom.deactivate()}a.on(a.Events.ZOOM_MODE_DID_CHANGE,function(t){t?h():(i?r.empty():r.remove(),r=null,c=!1)}),a.on(a.Events.ZOOM_SCALE_DID_CHANGE,function(t){var e,i,n,o,s;e=r.find(".vertical-bar"),i=r.find(".handle-drag"),n=a.BookZoom.getCurrentScales(),o=parseFloat(n.zoom/n.max*100),s=parseFloat(100-n.min/n.max*100),n=parseFloat(n.min/n.max*100),o=parseFloat((o-n)/s),n=e.height()-i.height()/2,i.css("transform","translateY("+(n-n*o)+"px)")})}),define("toast/extensions/defaults/Help",["exports","module","../../core"],function(t,e,i){var n,o;function s(){n.remove(),i.$el.removeClass("help"),n.off("click",s),i.off(i.Events.ORIENTATION_DID_CHANGE,r),i.lazy(function(){i.send(i.Events.HIDDEN_HELP)},10)}function a(){o.contents().find("body").removeClass("landscape"),o.contents().find("body").removeClass("portrait"),o.contents().find("body").addClass(i._orientation)}function r(t){a()}function l(){n=$("<div />",{class:"help"}),i.isMobileDevice&&n.addClass("mobile"),(o=$('<iframe src="'+i.paths.themeUrl+"help/"+i.config.language+'.html" frameborder="0">')).load(function(t){i.isMobileDevice&&(o.contents().find("body").addClass("mobile"),a())}),n.append(o),n.append('<div class="backdrop"></div>'),$(document.body).append(n),i.$el.addClass("help"),n.on("click",s),i.on(i.Events.ORIENTATION_DID_CHANGE,r),i.send(i.Events.SHOWN_HELP)}i.ready(function(){i.CommandManager.get(i.Commands.HELP)||(!!i.theme.config.help&&i.theme.config.help[i.config.language]?(i.CommandManager.registerInternal(i.Commands.HELP,l),i.cookie.get("toast.shown.help")||(i.cookie.set("toast.shown.help","true"),l())):i.$el.find('[command="help"]').remove())})}),define("toast/extensions/defaults/Settings",["exports","../../core"],function(t,e){var i,n;e.Strings;function o(t){t=$(t.target).closest(".input-group").find("[data-pagefit-mode]");switch(n=t.attr("data-pagefit-mode"),i.find(".pagefit-mode-form-group input").prop("checked",!1),t.prop("checked",!0),n){case"view-all":e.Book.pageFit("view-all");break;case"screen-width":e.Book.pageFit("screen-width")}}function s(t){var e=$(t.target).parents(".modal-content");($(t.target).hasClass("close")||_.isUndefined(e[0]))&&i.remove()}e.projectLoaded(function(){"screen-width"===(n=n||(!e.isMobileDevice&&e.config.setDefaultFitWidth?"screen-width":"view-all"))&&(e.config.setDefaultFitWidth=!0)}),e.CommandManager.registerInternal("settings",function(){i=$(Mustache.render(e.HtmlLoader.Settings,{Strings:e.Strings,theme:e.theme})),$(document.body).append(i),i.find('[data-pagefit-mode="'+n+'"]').prop("checked",!0),i.find(".pagefit-mode-form-group .input-group").on("click",o),i.click(s),i.find(".close").click(s)})}),define("toast/extensions",["./extensions/defaults/Thumbnail","./extensions/defaults/TOC","./extensions/defaults/Search","./extensions/defaults/Bookmark","./extensions/defaults/Memo","./extensions/defaults/Share","./extensions/defaults/Draw","./extensions/defaults/MyStorage","./extensions/defaults/AutoSlide","./extensions/defaults/Print","./extensions/defaults/ZoomBar","./extensions/defaults/Help","./extensions/defaults/Settings"],function(){});