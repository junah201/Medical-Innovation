!function(a,b){"function"==typeof define&&define.amd?define(["exports"],function(c){b(a,c)}):b(a,{})}(this,function(a,b){"use strict";function c(a){try{a()}catch(a){b.log("Exception when calling a 'toast done loading' handler: "+a),b.log(a.stack)}}function d(a,b){var d=t[a];d&&c(b),d&&!u[a]||v[a].push(b)}function e(a){var b,d=v[a];for(t[a]=!0,b=0;b<d.length;b++)c(d[b]);u[a]||(v[a]=[])}function f(a){d(m,a)}function g(a){d(n,a)}function h(a){d(o,a)}function i(a){d(q,a)}function j(a){d(p,a)}function k(a){d(r,a)}function l(a){d(s,a)}window.Toast=window.TOAST=window.TT=window.tt=window._tt=window._t=b,b.config={moduleBaseUrl:"",dataBaseUrl:""},b.const={},b.extensions={},b.common={},b.api={},b.context={},b._={},b.metadata={},b.log=function(){},b.hook={};var m="htmlReady",n="coreReady",o="extensionsLoaded",p="ready",q="appReady",r="projectLoaded",s="themeReady",t={HTML_READY:!1,CORE_READY:!1,EXTENSIONS_LOADED:!1,READY:!1,APP_READY:!1,PROJECT_LOADED:!1,THEME_READY:!1},u={};u[s]=!0;var v={};v[m]=[],v[n]=[],v[o]=[],v[p]=[],v[q]=[],v[r]=[],v[s]=[],b.htmlReady=f,b.coreReady=g,b.extensionsLoaded=h,b.ready=j,b.appReady=i,b.projectLoaded=k,b.themeReady=l,b.dispatchReady=e,b.addListener=d,b.HTML_READY=m,b.CORE_READY=n,b.EXTENSIONS_LOADED=o,b.READY=p,b.APP_READY=q,b.PROJECT_LOADED=r,b.THEME_READY=s}),function(a,b){"function"==typeof define&&define.amd?define(["exports",Toast],function(c,d){b(a,c)}):b(a,Toast)}(this,function(a,b){var c=b.UrlParams=function(){this._store={}};return _.extend(c.prototype,{parse:function(a){var b,c,d="",e=this;e._store={},a?-1!==a.indexOf("?")&&(d=a.substring(a.indexOf("?")+1)):d=window.document.location.search.substring(1),(d=d.trim())&&(b=d.split("&"),b.forEach(function(a){c=a.split("="),c[1]=c[1]||"",e._store[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}))},put:function(a,b){this._store[a]=b},get:function(a){return this._store[a]},remove:function(a){delete this._store[a]},isEmpty:function(a){return _.isEmpty(this._store)},toString:function(){var a=[],b=this;return _.forEach(b._store,function(b,c){a.push(encodeURIComponent(c)+"="+encodeURIComponent(b))}),a.join("&")}}),c}),function(a,b){"function"==typeof define&&define.amd?define(["exports",Toast],function(c,d){b(a,c)}):b(a,Toast)}(this,function(a,b){"use strict";b.RUNENV_ERROR_NO=0,b.RUNENV_ERROR_UNSUPPORTED_BROWSER=1,b.RUNENV_ERROR_UNSUPPORTED_PROTOCOL=2,b.RUNENV_ERROR=b.RUNENV_ERROR_NO,b.urlParams=new b.UrlParams,b.urlParams.parse();var c=document.getElementsByTagName("html")[0];if("object"==typeof brackets?b.isEditor=b.isNative=b.isBrackets=!0:"object"==typeof app?(b.player=!0,c.setAttribute("class",c.getAttribute("class")+" player")):"undefined"!=typeof navigator&&"ReactNative"==navigator.product?b.player=!0:"undefined"!=typeof external&&void 0!==external.isNative?external.isNative()&&(b.player=!0,c.setAttribute("class",c.getAttribute("class")+" player")):c.hasAttribute("application")&&(b.isEditor=b.isNative=!0),b.inBrowser=!b.isBrackets,"MacIntel"===window.navigator.platform||"MacPPC"===window.navigator.platform?b.platform="mac":window.navigator.platform.indexOf("Linux")>=0?b.platform="linux":window.navigator.platform.indexOf("Win")>=0&&(b.platform="win"),b.os={name:b.platform},/windows/i.test(navigator.userAgent)){var d=navigator.userAgent.toString().toLowerCase(),e=/(windows nt) ([\w.]+)/.exec(d)||["",null,-1];b.os.version=e[2],b.os.version&&(b.os.version=Number(b.os.version))}if(b.isMobile=b.isMobileDevice=window.navigator.userAgent.match(/mobile|ip(ad|hone|od)|android/i),b.isMobileDevice&&(b.isMobileDevice=!0,b.isTablet=window.navigator.userAgent.match(/tablet|ipad/i)),b.isIOS=window.navigator.userAgent.match(/ip(ad|hone|od)/i),b.isIOS&&(b.isIOS=!0),b.isAndroid=window.navigator.userAgent.match(/android/i),b.isAndroid&&(b.isAndroid=!0),b.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),b.isFirefox=/Firefox/.test(navigator.userAgent),b.isEdge=/Edge/.test(navigator.userAgent),b.isIE=/msie|trident/i.test(navigator.userAgent),/msie|trident/i.test(navigator.userAgent)){var d=navigator.userAgent.toString().toLowerCase(),e=/(msie) ([\w.]+)/.exec(d)||/(trident)(?:.*rv:([\w.]+))?/.exec(d)||["",null,-1];b._msieVersion=e[2],b._msieVersion&&(b._msieVersion=Number(b._msieVersion))}if(/msie|trident/i.test(navigator.userAgent)){var d=navigator.userAgent.toString().toLowerCase(),e=/(msie) ([\w.]+)/.exec(d)||/(trident)(?:.*rv:([\w.]+))?/.exec(d)||["",null,-1];b._msieVersion=e[2],b._msieVersion&&(b._msieVersion=Number(b._msieVersion))}b.isFileProtocol=/^(file):/.test(window.location.protocol),b.isAppProtocol=/^(app):/.test(window.location.protocol);var f=c.getAttribute("lang");f&&"{{language}}"!==f||c.setAttribute("lang","ko"),"html"===c.getAttribute("data-publish-type")&&(b.config.htmlRender=!0),b._msieVersion&&b._msieVersion<9?(c.setAttribute("class",c.getAttribute("class")+" unsupported-browser"),b.RUNENV_ERROR=b.RUNENV_ERROR_UNSUPPORTED_BROWSER):b.config.htmlRender||b.allowFileAccessFromFileURLs||b.player||b.isNative||!b.isFileProtocol||(c.setAttribute("class",c.getAttribute("class")+" file-protocal"),b.RUNENV_ERROR=b.RUNENV_ERROR_UNSUPPORTED_PROTOCOL)}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c;if(void 0!==e[b])return b}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,(e=e&&e.firstChild)&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});d.radius,d.length,d.width;if(e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),void 0===d.useCssAnimations&&(d.useCssAnimations=!0),!j||!1===d.useCssAnimations){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function a(){h++;for(var b=0;b<d.lines;b++)g=Math.max(1-(h+(d.lines-b)*n)%l*m,d.opacity),c.opacity(f,b*d.direction+i,g,d);c.timeout=c.el&&setTimeout(a,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a.eg=a.eg||{},a.eg.Flicking=b())}(this,function(){"use strict";function a(a,b){a.prototype=Object.create(b.prototype),(a.prototype.constructor=a).__proto__=b}function b(a){return void 0===a}function c(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(){return(d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function e(a,b){a.prototype=Object.create(b.prototype),(a.prototype.constructor=a).__proto__=b}function f(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function g(a,b){for(var c,d,e=b[0].toUpperCase()+b.slice(1),f=0;f<S.length;){if((d=(c=S[f])?c+e:b)in a)return d;f++}}function h(a,b,c){var d;if(a)if(a.forEach)a.forEach(b,c);else if(void 0!==a.length)for(d=0;d<a.length;)b.call(c,a[d],d,a),d++;else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function i(a,b){return typeof a===U?a.apply(b&&b[0]||void 0,b):a}function j(a,b){return-1<a.indexOf(b)}function k(a,b){for(;a;){if(a===b)return!0;a=a.parentNode}return!1}function l(a){var b=a.length;if(1===b)return{x:V(a[0].clientX),y:V(a[0].clientY)};for(var c=0,d=0,e=0;e<b;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:V(c/b),y:V(d/b)}}function m(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:V(a.pointers[c].clientX),clientY:V(a.pointers[c].clientY)},c++;return{timeStamp:X(),pointers:b,center:l(b),deltaX:a.deltaX,deltaY:a.deltaY}}function n(a,b,c){c||(c=wa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function o(a,b,c){c||(c=wa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function p(a,b){return a===b?oa:W(a)>=W(b)?a<0?pa:qa:b<0?ra:sa}function q(a,b,c){return{x:b/a||0,y:c/a||0}}function r(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=m(b)),1<e&&!c.firstMultiple?c.firstMultiple=m(b):1===e&&(c.firstMultiple=!1);var f,g,h,i,j,r,s=c.firstInput,t=c.firstMultiple,u=t?t.center:s.center,v=b.center=l(d);b.timeStamp=X(),b.deltaTime=b.timeStamp-s.timeStamp,b.angle=o(u,v),b.distance=n(u,v),f=c,h=(g=b).center,i=f.offsetDelta||{},j=f.prevDelta||{},r=f.prevInput||{},g.eventType!==la&&r.eventType!==ma||(j=f.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=f.offsetDelta={x:h.x,y:h.y}),g.deltaX=j.x+(h.x-i.x),g.deltaY=j.y+(h.y-i.y),b.offsetDirection=p(b.deltaX,b.deltaY);var w,x,y,z,A=q(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=A.x,b.overallVelocityY=A.y,b.overallVelocity=W(A.x)>W(A.y)?A.x:A.y,b.scale=t?(w=t.pointers,n((x=d)[0],x[1],xa)/n(w[0],w[1],xa)):1,b.rotation=t?(y=t.pointers,o((z=d)[1],z[0],xa)+o(y[1],y[0],xa)):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,function(a,b){var c,d,e,f,g=a.lastInterval||b,h=b.timeStamp-g.timeStamp;if(b.eventType!==na&&(ka<h||void 0===g.velocity)){var i=b.deltaX-g.deltaX,j=b.deltaY-g.deltaY,k=q(h,i,j);d=k.x,e=k.y,c=W(k.x)>W(k.y)?k.x:k.y,f=p(i,j),a.lastInterval=b}else c=g.velocity,d=g.velocityX,e=g.velocityY,f=g.direction;b.velocity=c,b.velocityX=d,b.velocityY=e,b.direction=f}(c,b);var B=a.element;k(b.srcEvent.target,B)&&(B=b.srcEvent.target),b.target=B}function s(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&la&&d-e==0,g=b&(ma|na)&&d-e==0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,r(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function t(a){return a.trim().split(/\s+/g)}function u(a,b,c){h(t(b),function(b){a.addEventListener(b,c,!1)})}function v(a,b,c){h(t(b),function(b){a.removeEventListener(b,c,!1)})}function w(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow||window}function x(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function y(a){return Array.prototype.slice.call(a,0)}function z(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];x(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function A(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY},d=this.lastTouches;this.lastTouches.push(c),setTimeout(function(){var a=d.indexOf(c);-1<a&&d.splice(a,1)},Ka)}}function B(a,b,c){return!!Array.isArray(a)&&(h(a,c[b],c),!0)}function C(a,b){var c=b.manager;return c?c.get(a):a}function D(a){return 16&a?"cancel":8&a?"end":4&a?"move":2&a?"start":""}function E(a,b){var c,d=a.element;d.style&&(h(a.options.cssProps,function(e,f){c=g(d.style,f),d.style[c]=b?(a.oldCssProps[c]=d.style[c],e):a.oldCssProps[c]||""}),b||(a.oldCssProps={}))}function F(a){return a===sa?"down":a===ra?"up":a===pa?"left":a===qa?"right":""}function G(a,b,c,d){var e=a,f=[c[0]?b[0]:d?b[0]-d[0]:b[0],c[1]?b[1]:d?b[1]+d[1]:b[1]];return e=Math.max(f[0],e),+(e=Math.min(f[1],e)).toFixed(5)}function H(a,b){return a<b[0]||a>b[1]}function I(a,b,c){return c[1]&&a>b[1]||c[0]&&a<b[0]}function J(a,b,c){var d=a,e=b[0],f=b[1],g=f-e;return c[1]&&f<a&&(d=(d-f)%g+e),c[0]&&a<e&&(d=(d-e)%g+f),+d.toFixed(5)}function K(a,b){for(var c in a)if(a[c]!==b[c])return!1;return!0}function L(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function M(a,b,c){return Math.max(Math.min(a,c),b)}function N(a,b){return b.reduce(function(b,c,d){return a[d]&&(b[a[d]]=c),b},{})}function O(a,b,c){return c?!!(b===va||b&a&&c&a):!!(b&a)}var P,Q=function(){var a=function(){function a(){this._eventHandler={},this.options={}}var c=a.prototype;return c.trigger=function(a,b){void 0===b&&(b={});var c=this._eventHandler[a]||[];if(!(0<c.length))return!0;c=c.concat(),b.eventType=a;var d=!1,e=[b],f=0;b.stop=function(){d=!0},b.currentTarget=this;for(var g=arguments.length,h=new Array(2<g?g-2:0),i=2;i<g;i++)h[i-2]=arguments[i];for(1<=h.length&&(e=e.concat(h)),f=0;c[f];f++)c[f].apply(this,e);return!d},c.once=function(a,c){if("object"==typeof a&&b(c)){var d,e=a;for(d in e)this.once(d,e[d]);return this}if("string"==typeof a&&"function"==typeof c){var f=this;this.on(a,function b(){for(var d=arguments.length,e=new Array(d),g=0;g<d;g++)e[g]=arguments[g];c.apply(f,e),f.off(a,b)})}return this},c.hasOn=function(a){return!!this._eventHandler[a]},c.on=function(a,c){if("object"==typeof a&&b(c)){var d,e=a;for(d in e)this.on(d,e[d]);return this}if("string"==typeof a&&"function"==typeof c){var f=this._eventHandler[a];b(f)&&(this._eventHandler[a]=[],f=this._eventHandler[a]),f.push(c)}return this},c.off=function(a,c){if(b(a))return this._eventHandler={},this;if(b(c)){if("string"==typeof a)return this._eventHandler[a]=void 0,this;var d,e=a;for(d in e)this.off(d,e[d]);return this}var f,g,h=this._eventHandler[a];if(h)for(f=0;void 0!==(g=h[f]);f++)if(g===c){h=h.splice(f,1);break}return this},a}();return a.VERSION="2.1.2",a}(),R="function"!=typeof Object.assign?function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(null!=d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b}:Object.assign,S=["","webkit","Moz","MS","ms","o"],T="undefined"==typeof document?{style:{}}:document.createElement("div"),U="function",V=Math.round,W=Math.abs,X=Date.now;P="undefined"==typeof window?{}:window;var Y=g(T.style,"touchAction"),Z=void 0!==Y,$="compute",_="auto",aa="manipulation",ba="none",ca="pan-x",da="pan-y",ea=function(){if(!Z)return!1;var a={},b=P.CSS&&P.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(c){return a[c]=!b||P.CSS.supports("touch-action",c)}),a}(),fa="ontouchstart"in P,ga=void 0!==g(P,"PointerEvent"),ha=fa&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ia="touch",ja="mouse",ka=25,la=1,ma=4,na=8,oa=1,pa=2,qa=4,ra=8,sa=16,ta=pa|qa,ua=ra|sa,va=ta|ua,wa=["x","y"],xa=["clientX","clientY"],ya=function(){function a(a,b){this.manager=a,this.set(b)}var b=a.prototype;return b.set=function(a){a===$&&(a=this.compute()),Z&&this.manager.element.style&&ea[a]&&(this.manager.element.style[Y]=a),this.actions=a.toLowerCase().trim()},b.update=function(){this.set(this.manager.options.touchAction)},b.compute=function(){var a=[];return h(this.manager.recognizers,function(b){i(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),function(a){if(j(a,ba))return ba;var b=j(a,ca),c=j(a,da);return b&&c?ba:b||c?b?ca:da:j(a,aa)?aa:_}(a.join(" "))},b.preventDefaults=function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)b.preventDefault();else{var d=this.actions,e=j(d,ba)&&!ea[ba],f=j(d,da)&&!ea[da],g=j(d,ca)&&!ea[ca];if(e){var h=1===a.pointers.length,i=a.distance<2,k=a.deltaTime<250;if(h&&i&&k)return}if(!g||!f)return e||f&&c&ta||g&&c&ua?this.preventSrc(b):void 0}},b.preventSrc=function(a){this.manager.session.prevented=!0,a.preventDefault()},a}(),za=function(){function a(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){i(a.options.enable,[a])&&c.handler(b)},this.init()}var b=a.prototype;return b.handler=function(){},b.init=function(){this.evEl&&u(this.element,this.evEl,this.domHandler),this.evTarget&&u(this.target,this.evTarget,this.domHandler),this.evWin&&u(w(this.element),this.evWin,this.domHandler)},b.destroy=function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(w(this.element),this.evWin,this.domHandler)},a}(),Aa={pointerdown:la,pointermove:2,pointerup:ma,pointercancel:na,pointerout:na},Ba={2:ia,3:"pen",4:ja,5:"kinect"},Ca="pointerdown",Da="pointermove pointerup pointercancel";P.MSPointerEvent&&!P.PointerEvent&&(Ca="MSPointerDown",Da="MSPointerMove MSPointerUp MSPointerCancel");var Ea,Fa=function(a){function b(){var c,d=b.prototype;return d.evEl=Ca,d.evWin=Da,(c=a.apply(this,arguments)||this).store=c.manager.session.pointerEvents=[],c}return e(b,a),b.prototype.handler=function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Aa[d],f=Ba[a.pointerType]||a.pointerType,g=f===ia,h=x(b,a.pointerId,"pointerId");e&la&&(0===a.button||g)?h<0&&(b.push(a),h=b.length-1):e&(ma|na)&&(c=!0),h<0||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))},b}(za),Ga={touchstart:la,touchmove:2,touchend:ma,touchcancel:na},Ha=function(a){function b(){return b.prototype.evTarget="touchstart touchmove touchend touchcancel",b.prototype.targetIds={},a.apply(this,arguments)||this}return e(b,a),b.prototype.handler=function(a){var b=Ga[a.type],c=function(a,b){var c,d,e=y(a.touches),f=this.targetIds;if(b&(2|la)&&1===e.length)return f[e[0].identifier]=!0,[e,e];var g=y(a.changedTouches),h=[],i=this.target;if(d=e.filter(function(a){return k(a.target,i)}),b===la)for(c=0;c<d.length;)f[d[c].identifier]=!0,c++;for(c=0;c<g.length;)f[g[c].identifier]&&h.push(g[c]),b&(ma|na)&&delete f[g[c].identifier],c++;return h.length?[z(d.concat(h),"identifier",!0),h]:void 0}.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ia,srcEvent:a})},b}(za),Ia={mousedown:la,mousemove:2,mouseup:ma},Ja=function(a){function b(){var c,d=b.prototype;return d.evEl="mousedown",d.evWin="mousemove mouseup",(c=a.apply(this,arguments)||this).pressed=!1,c}return e(b,a),b.prototype.handler=function(a){var b=Ia[a.type];b&la&&0===a.button&&(this.pressed=!0),2&b&&1!==a.which&&(b=ma),this.pressed&&(b&ma&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:ja,srcEvent:a}))},b}(za),Ka=2500,La=25,Ma=function(){return function(a){function b(b,d){var e;return c(f(f(e=a.call(this,b,d)||this)),"handler",function(a,b,c){var d=c.pointerType===ia,g=c.pointerType===ja;if(!(g&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)(function(a,b){a&la?(this.primaryTouch=b.changedPointers[0].identifier,A.call(this,b)):a&(ma|na)&&A.call(this,b)}).call(f(f(e)),b,c);else if(g&&function(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(f<=La&&g<=La)return!0}return!1}.call(f(f(e)),c))return;e.callback(a,b,c)}}),e.touch=new Ha(e.manager,e.handler),e.mouse=new Ja(e.manager,e.handler),e.primaryTouch=null,e.lastTouches=[],e}return e(b,a),b.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},b}(za)}(),Na=1,Oa=function(){function a(a){void 0===a&&(a={}),this.options=d({enable:!0},a),this.id=Na++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var b=a.prototype;return b.set=function(a){return R(this.options,a),this.manager&&this.manager.touchAction.update(),this},b.recognizeWith=function(a){if(B(a,"recognizeWith",this))return this;var b=this.simultaneous;return b[(a=C(a,this)).id]||(b[a.id]=a).recognizeWith(this),this},b.dropRecognizeWith=function(a){return B(a,"dropRecognizeWith",this)||(a=C(a,this),delete this.simultaneous[a.id]),this},b.requireFailure=function(a){if(B(a,"requireFailure",this))return this;var b=this.requireFail;return-1===x(b,a=C(a,this))&&(b.push(a),a.requireFailure(this)),this},b.dropRequireFailure=function(a){if(B(a,"dropRequireFailure",this))return this;a=C(a,this);var b=x(this.requireFail,a);return-1<b&&this.requireFail.splice(b,1),this},b.hasRequireFailures=function(){return 0<this.requireFail.length},b.canRecognizeWith=function(a){return!!this.simultaneous[a.id]},b.emit=function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;d<8&&b(c.options.event+D(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),8<=d&&b(c.options.event+D(d))},b.tryEmit=function(a){if(this.canEmit())return this.emit(a);this.state=32},b.canEmit=function(){for(var a=0;a<this.requireFail.length;){if(!(33&this.requireFail[a].state))return!1;a++}return!0},b.recognize=function(a){var b=R({},a);if(!i(this.options.enable,[this,b]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(b),30&this.state&&this.tryEmit(b)},b.process=function(a){},b.getTouchAction=function(){},b.reset=function(){},a}(),Pa={domEvents:!1,touchAction:$,enable:!0,inputTarget:null,inputClass:null,preset:[],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Qa=function(){function a(a,b){var c,d=this;this.options=R({},Pa,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=new((c=this).options.inputClass||(ga?Fa:ha?Ha:fa?Ma:Ja))(c,s),this.touchAction=new ya(this,this.options.touchAction),E(this,!0),h(this.options.recognizers,function(a){var b=d.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}var b=a.prototype;return b.set=function(a){return R(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},b.stop=function(a){this.session.stopped=a?2:1},b.recognize=function(a){var b=this.session;if(!b.stopped){var c;this.touchAction.preventDefaults(a);var d=this.recognizers,e=b.curRecognizer;(!e||e&&8&e.state)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],2===b.stopped||e&&c!==e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&14&c.state&&(e=b.curRecognizer=c),f++}},b.get=function(a){if(a instanceof Oa)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event===a)return b[c];return null},b.add=function(a){if(B(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),(a.manager=this).touchAction.update(),a},b.remove=function(a){if(B(a,"remove",this))return this;var b=this.get(a);if(a){var c=this.recognizers,d=x(c,b);-1!==d&&(c.splice(d,1),this.touchAction.update())}return this},b.on=function(a,b){if(void 0===a||void 0===b)return this;var c=this.handlers;return h(t(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},b.off=function(a,b){if(void 0===a)return this;var c=this.handlers;return h(t(a),function(a){b?c[a]&&c[a].splice(x(c[a],b),1):delete c[a]}),this},b.emit=function(a,b){var c,d,e;this.options.domEvents&&(c=a,d=b,(e=document.createEvent("Event")).initEvent(c,!0,!0),(e.gesture=d).target.dispatchEvent(e));var f=this.handlers[a]&&this.handlers[a].slice();if(f&&f.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var g=0;g<f.length;)f[g](b),g++}},b.destroy=function(){this.element&&E(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},a}(),Ra=function(a){function b(b){return void 0===b&&(b={}),a.call(this,d({pointers:1},b))||this}e(b,a);var c=b.prototype;return c.attrTest=function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},c.process=function(a){var b=this.state,c=a.eventType,d=6&b,e=this.attrTest(a);return d&&(c&na||!e)?16|b:d||e?c&ma?8|b:2&b?4|b:2:32},b}(Oa),Sa=function(a){function b(b){var c;return void 0===b&&(b={}),(c=a.call(this,d({event:"pan",threshold:10,pointers:1,direction:va},b))||this).pX=null,c.pY=null,c}e(b,a);var c=b.prototype;return c.getTouchAction=function(){var a=this.options.direction,b=[];return a&ta&&b.push(da),a&ua&&b.push(ca),b},c.directionTest=function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(d=b.direction&ta?(e=0===f?oa:f<0?pa:qa,c=f!==this.pX,Math.abs(a.deltaX)):(e=0===g?oa:g<0?ra:sa,c=g!==this.pY,Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},c.attrTest=function(a){return Ra.prototype.attrTest.call(this,a)&&(2&this.state||!(2&this.state)&&this.directionTest(a))},c.emit=function(b){this.pX=b.deltaX,this.pY=b.deltaY;var c=F(b.direction);c&&(b.additionalEvent=this.options.event+c),a.prototype.emit.call(this,b)},b}(Ra),Ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},Ua=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a},Va=function(){function a(a,b){var c=this;this.axis=a,this.options=b,this._complementOptions(),this._pos=Object.keys(this.axis).reduce(function(a,b){return a[b]=c.axis[b].range[0],a},{})}var b=a.prototype;return b._complementOptions=function(){var a=this;Object.keys(this.axis).forEach(function(b){a.axis[b]=Ua({range:[0,100],bounce:[0,0],circular:[!1,!1]},a.axis[b]),["bounce","circular"].forEach(function(c){var d=a.axis,e=d[b][c];/string|number|boolean/.test(typeof e)&&(d[b][c]=[e,e])})})},b.getDelta=function(a,b){var c=this.get(a);return this.map(this.get(b),function(a,b){return a-c[b]})},b.get=function(a){var b=this;return a&&Array.isArray(a)?a.reduce(function(a,c){return c&&c in b._pos&&(a[c]=b._pos[c]),a},{}):Ua({},this._pos,a||{})},b.moveTo=function(a){var b=this,c=this.map(this._pos,function(c,d){return a[d]?a[d]-b._pos[d]:0});return this.set(a),{pos:Ua({},this._pos),delta:c}},b.set=function(a){for(var b in a)b&&b in this._pos&&(this._pos[b]=a[b])},b.every=function(a,b){var c=this.axis;for(var d in a)if(d&&!b(a[d],d,c[d]))return!1;return!0},b.filter=function(a,b){var c={},d=this.axis;for(var e in a)e&&b(a[e],e,d[e])&&(c[e]=a[e]);return c},b.map=function(a,b){var c={},d=this.axis;for(var e in a)e&&(c[e]=b(a[e],e,d[e]));return c},b.isOutside=function(a){return!this.every(a?this.get(a):this._pos,function(a,b,c){return!H(a,c.range)})},a}();(Ea="undefined"==typeof window?{document:{},navigator:{userAgent:""}}:window).document;var Wa=Ea.requestAnimationFrame||Ea.webkitRequestAnimationFrame,Xa=Ea.cancelAnimationFrame||Ea.webkitCancelAnimationFrame;if(Wa&&!Xa){var Ya={},Za=Wa;Wa=function(a){var b=Za(function(c){Ya[b]&&a(c)});return Ya[b]=!0,b},Xa=function(a){delete Ya[a]}}else Wa&&Xa||(Wa=function(a){return Ea.setTimeout(function(){a(Ea.performance&&Ea.performance.now&&Ea.performance.now()||(new Date).getTime())},16)},Xa=Ea.clearTimeout);var $a,_a=function(){function a(a){var b=a.options,c=a.itm,d=a.em,e=a.axm;this.options=b,this.itm=c,this.em=d,this.axm=e,this.animationEnd=this.animationEnd.bind(this)}var b=a.prototype;return b.getDuration=function(a,b,c){var d,e=this;if(void 0!==c)d=c;else{var f=this.axm.map(b,function(b,c){return d=Math.abs(Math.abs(b)-Math.abs(a[c])),f=e.options.deceleration,(g=Math.sqrt(d/f*2))<100?0:g;var d,f,g});d=Object.keys(f).reduce(function(a,b){return Math.max(a,f[b])},-1/0)}return M(d,this.options.minimumDuration,this.options.maximumDuration)},b.createAnimationParam=function(a,b,c){var d=this.axm.get(),e=a,f=c&&c.event||null;return{depaPos:d,destPos:e,duration:M(b,this.options.minimumDuration,this.options.maximumDuration),delta:this.axm.getDelta(d,e),inputEvent:f,input:c&&c.input||null,isTrusted:!!f,done:this.animationEnd}},b.grab=function(a,b){if(this._animateParam&&a.length){var c=this.axm.get(a),d=this.axm.map(c,function(a,b,c){return J(a,c.range,c.circular)});this.axm.every(d,function(a,b){return c[b]===a})||this.em.triggerChange(d,b,!!b),this._animateParam=null,this._raf&&(e=this._raf,Xa(e)),this._raf=null,this.em.triggerAnimationEnd(!(!b||!b.event))}var e},b.getEventInfo=function(){return this._animateParam&&this._animateParam.input&&this._animateParam.inputEvent?{input:this._animateParam.input,event:this._animateParam.inputEvent}:null},b.restore=function(a){var b=this.axm.get(),c=this.axm.map(b,function(a,b,c){return Math.min(c.range[1],Math.max(c.range[0],a))});this.animateTo(c,this.getDuration(b,c),a)},b.animationEnd=function(){var a=this.getEventInfo();this._animateParam=null;var b=this.axm.filter(this.axm.get(),function(a,b,c){return I(a,c.range,c.circular)});0<Object.keys(b).length&&this.setTo(this.axm.map(b,function(a,b,c){return J(a,c.range,c.circular)})),this.itm.setInterrupt(!1),this.em.triggerAnimationEnd(!!a),this.axm.isOutside()?this.restore(a):this.em.triggerFinish(!!a)},b.animateLoop=function(a,b){if(this._animateParam=Ua({},a),this._animateParam.startTime=(new Date).getTime(),a.duration){var c=this._animateParam,d=this;!function e(){if(d._raf=null,1<=d.frame(c))return K(a.destPos,d.axm.get(Object.keys(a.destPos)))||d.em.triggerChange(a.destPos),void b();d._raf=Wa(e)}()}else this.em.triggerChange(a.destPos),b()},b.getUserControll=function(a){var b=a.setTo();return b.destPos=this.axm.get(b.destPos),b.duration=M(b.duration,this.options.minimumDuration,this.options.maximumDuration),b},b.animateTo=function(a,b,c){var d=this,e=this.createAnimationParam(a,b,c),f=Ua({},e.depaPos),g=this.em.triggerAnimationStart(e),h=this.getUserControll(e);if(!g&&this.axm.every(h.destPos,function(a,b,c){return I(a,c.range,c.circular)})&&console.warn("You can't stop the 'animation' event when 'circular' is true."),g&&!K(h.destPos,f)){var i=c&&c.event||null;this.animateLoop({depaPos:f,destPos:h.destPos,duration:h.duration,delta:this.axm.getDelta(f,h.destPos),isTrusted:!!i,inputEvent:i,input:c&&c.input||null},function(){return d.animationEnd()})}},b.frame=function(a){var b=(new Date).getTime()-a.startTime,c=this.easing(b/a.duration),d=a.depaPos;return d=this.axm.map(d,function(b,d,e){return J(b+=a.delta[d]*c,e.range,e.circular)}),this.em.triggerChange(d),c},b.easing=function(a){return 1<a?1:this.options.easing(a)},b.setTo=function(a,b){void 0===b&&(b=0);var c=Object.keys(a);this.grab(c);var d=this.axm.get(c);if(K(a,d))return this;this.itm.setInterrupt(!0);var e=this.axm.filter(a,function(a,b){return d[b]!==a});return Object.keys(e).length&&(K(e=this.axm.map(e,function(a,c,d){return d.circular&&(d.circular[0]||d.circular[1])?0<b?a:J(a,d.range,d.circular):G(a,d.range,d.circular)}),d)||(0<b?this.animateTo(e,b):(this.em.triggerChange(e),this.itm.setInterrupt(!1)))),this},b.setBy=function(a,b){return void 0===b&&(b=0),this.setTo(this.axm.map(this.axm.get(Object.keys(a)),function(b,c){return b+a[c]}),b)},a}(),ab=function(){function a(a){this.axes=a}var b=a.prototype;return b.triggerHold=function(a,b){this.axes.trigger("hold",{pos:a,input:b.input||null,inputEvent:b.event||null,isTrusted:!0})},b.triggerRelease=function(a){a.setTo=this.createUserControll(a.destPos,a.duration),this.axes.trigger("release",a)},b.triggerChange=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=!1);var d=this.am.getEventInfo(),e=this.am.axm.moveTo(a),f=b&&b.event||d&&d.event||null,g={pos:e.pos,delta:e.delta,holding:c,inputEvent:f,isTrusted:!!f,input:b&&b.input||d&&d.input||null,set:f?this.createUserControll(e.pos):function(){}};this.axes.trigger("change",g),f&&this.am.axm.set(g.set().destPos)},b.triggerAnimationStart=function(a){return a.setTo=this.createUserControll(a.destPos,a.duration),this.axes.trigger("animationStart",a)},b.triggerAnimationEnd=function(a){void 0===a&&(a=!1),this.axes.trigger("animationEnd",{isTrusted:a})},b.triggerFinish=function(a){void 0===a&&(a=!1),this.axes.trigger("finish",{isTrusted:a})},b.createUserControll=function(a,b){void 0===b&&(b=0);var c={destPos:Ua({},a),duration:b};return function(a,b){return a&&(c.destPos=Ua({},a)),void 0!==b&&(c.duration=b),c}},b.setAnimationManager=function(a){this.am=a},b.destroy=function(){this.axes.off()},a}(),bb=function(){function a(a){this.options=a,this._prevented=!1}var b=a.prototype;return b.isInterrupting=function(){return this.options.interruptable||this._prevented},b.isInterrupted=function(){return!this.options.interruptable&&this._prevented},b.setInterrupt=function(a){!this.options.interruptable&&(this._prevented=a)},a}(),cb=function(){function a(a){var b=a.options,c=a.itm,d=a.em,e=a.axm,f=a.am;this.isOutside=!1,this.moveDistance=null,this.options=b,this.itm=c,this.em=d,this.axm=e,this.am=f}var b=a.prototype;return b.atOutside=function(a){var b=this;if(this.isOutside)return this.axm.map(a,function(a,b,c){var d=c.range[0]-c.bounce[0],e=c.range[1]+c.bounce[1];return e<a?e:a<d?d:a});var c=this.am.easing(1e-5)/1e-5;return this.axm.map(a,function(a,d,e){var f=e.range[0],g=e.range[1],h=e.bounce;return a<f?f-b.am.easing((f-a)/(h[0]*c))*h[0]:g<a?g+b.am.easing((a-g)/(h[1]*c))*h[1]:a})},b.get=function(a){return this.axm.get(a.axes)},b.hold=function(a,b){if(!this.itm.isInterrupted()&&a.axes.length){var c={input:a,event:b};this.itm.setInterrupt(!0),this.am.grab(a.axes,c),!this.moveDistance&&this.em.triggerHold(this.axm.get(),c),this.isOutside=this.axm.isOutside(a.axes),this.moveDistance=this.axm.get(a.axes)}},b.change=function(a,b,c){if(this.itm.isInterrupting()&&!this.axm.every(c,function(a){return 0===a})){var d,e=this.axm.get(a.axes);d=this.axm.map(this.moveDistance||e,function(a,b){return a+(c[b]||0)}),this.moveDistance&&(this.moveDistance=d),d=this.axm.map(d,function(a,b,c){return J(a,c.range,c.circular)}),this.isOutside&&this.axm.every(e,function(a,b,c){return!H(a,c.range)})&&(this.isOutside=!1),d=this.atOutside(d),this.em.triggerChange(d,{input:a,event:b},!0)}},b.release=function(a,b,c,d){if(this.itm.isInterrupting()&&this.moveDistance){var e=this.axm.get(a.axes),f=this.axm.get(),g=this.axm.get(this.axm.map(c,function(a,b,c){return c.circular&&(c.circular[0]||c.circular[1])?e[b]+a:G(e[b]+a,c.range,c.circular,c.bounce)})),h=this.am.getDuration(g,e,d);0===h&&(g=Ua({},f));var i={depaPos:f,destPos:g,duration:h,delta:this.axm.getDelta(f,g),inputEvent:b,input:a,isTrusted:!0};this.em.triggerRelease(i),this.moveDistance=null;var j=this.am.getUserControll(i),k=K(j.destPos,f),l={input:a,event:b};k||0===j.duration?(!k&&this.em.triggerChange(j.destPos,l,!0),this.itm.setInterrupt(!1),this.axm.isOutside()?this.am.restore(l):this.em.triggerFinish(!0)):this.am.animateTo(j.destPos,j.duration,l)}},a}(),db=function(){if("undefined"==typeof document)return"";for(var a=(document.head||document.getElementsByTagName("head")[0]).style,b=["transform","webkitTransform","msTransform","mozTransform"],c=0,d=b.length;c<d;c++)if(b[c]in a)return b[c];return""}(),eb=function(a){function b(b,c,d){void 0===b&&(b={});var e=a.call(this)||this;return e.axis=b,e._inputs=[],e.options=Ua({easing:function(a){return 1-Math.pow(1-a,3)},interruptable:!0,maximumDuration:1/0,minimumDuration:0,deceleration:6e-4},c),e.itm=new bb(e.options),e.axm=new Va(e.axis,e.options),e.em=new ab(e),e.am=new _a(e),e.io=new cb(e),e.em.setAnimationManager(e.am),d&&e.em.triggerChange(d),e}!function(a,b){function c(){this.constructor=a}Ta(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}(b,a);var c=b.prototype;return c.connect=function(a,b){var c;if(c="string"==typeof a?a.split(" "):a.concat(),~this._inputs.indexOf(b)&&this.disconnect(b),"hammer"in b){var d=this._inputs.filter(function(a){return a.hammer&&a.element===b.element});d.length&&(b.hammer=d[0].hammer)}return b.mapAxes(c),b.connect(this.io),this._inputs.push(b),this},c.disconnect=function(a){if(a){var b=this._inputs.indexOf(a);0<=b&&(this._inputs[b].disconnect(),this._inputs.splice(b,1))}else this._inputs.forEach(function(a){return a.disconnect()}),this._inputs=[];return this},c.get=function(a){return this.axm.get(a)},c.setTo=function(a,b){return void 0===b&&(b=0),this.am.setTo(a,b),this},c.setBy=function(a,b){return void 0===b&&(b=0),this.am.setBy(a,b),this},c.isBounceArea=function(a){return this.axm.isOutside(a)},c.destroy=function(){this.disconnect(),this.em.destroy()},b.VERSION="2.5.7-snapshot",b.TRANSFORM=db,b.DIRECTION_NONE=oa,b.DIRECTION_LEFT=pa,b.DIRECTION_RIGHT=qa,b.DIRECTION_UP=ra,b.DIRECTION_DOWN=sa,b.DIRECTION_HORIZONTAL=ta,b.DIRECTION_VERTICAL=ua,b.DIRECTION_ALL=va,b}(Q),fb="PointerEvent"in Ea||"MSPointerEvent"in Ea,gb="ontouchstart"in Ea,hb="_EGJS_AXES_INPUTTYPE_",ib=function(){function a(a,b){if(this.axes=[],this.hammer=null,this.element=null,this.panRecognizer=null,void 0===Qa)throw new Error("The Hammerjs must be loaded before eg.Axes.PanInput.\nhttp://hammerjs.github.io/");this.element=function a(b,c){var d;if(void 0===c&&(c=!1),"string"==typeof b){if(b.match(/^<([a-z]+)\s*([^>]*)>/)){var e=document.createElement("div");e.innerHTML=b,d=L(e.childNodes)}else d=L(document.querySelectorAll(b));c||(d=1<=d.length?d[0]:void 0)}else b===Ea?d=b:!b.nodeName||1!==b.nodeType&&9!==b.nodeType?"jQuery"in Ea&&b instanceof jQuery||b.constructor.prototype.jquery?d=c?b.toArray():b.get(0):Array.isArray(b)&&(d=b.map(function(b){return a(b)}),c||(d=1<=d.length?d[0]:void 0)):d=b;return d}(a),this.options=Ua({inputType:["touch","mouse","pointer"],scale:[1,1],thresholdAngle:45,threshold:0,hammerManagerOptions:{cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",userDrag:"none"}}},b),this.onHammerInput=this.onHammerInput.bind(this),this.onPanmove=this.onPanmove.bind(this),this.onPanend=this.onPanend.bind(this)}var b=a.prototype;return b.mapAxes=function(a){var b=!!a[0],c=!!a[1];this._direction=b&&c?va:b?ta:c?ua:oa,this.axes=a},b.connect=function(a){var b={direction:this._direction,threshold:this.options.threshold};if(this.hammer)this.removeRecognizer(),this.dettachEvent();else{var c=this.element[hb];c||(c=String(Math.round(Math.random()*(new Date).getTime())));var d=function(a){void 0===a&&(a=[]);var b=!1,c=!1,d=!1;return a.forEach(function(a){switch(a){case"mouse":c=!0;break;case"touch":b=gb;break;case"pointer":d=fb}}),d?Fa:b&&c?Ma:b?Ha:c?Ja:null}(this.options.inputType);if(!d)throw new Error("Wrong inputType parameter!");this.hammer=function(a,b){try{return new Qa(a,Ua({},b))}catch(a){return null}}(this.element,Ua({inputClass:d},this.options.hammerManagerOptions)),this.element[hb]=c}return this.panRecognizer=new Sa(b),this.hammer.add(this.panRecognizer),this.attachEvent(a),this},b.disconnect=function(){return this.removeRecognizer(),this.hammer&&this.dettachEvent(),this._direction=oa,this},b.destroy=function(){this.disconnect(),this.hammer&&0===this.hammer.recognizers.length&&this.hammer.destroy(),delete this.element[hb],this.element=null,this.hammer=null},b.enable=function(){return this.hammer&&(this.hammer.get("pan").options.enable=!0),this},b.disable=function(){return this.hammer&&(this.hammer.get("pan").options.enable=!1),this},b.isEnable=function(){return!(!this.hammer||!this.hammer.get("pan").options.enable)},b.removeRecognizer=function(){this.hammer&&this.panRecognizer&&(this.hammer.remove(this.panRecognizer),this.panRecognizer=null)},b.onHammerInput=function(a){this.isEnable()&&(a.isFirst?this.observer.hold(this,a):a.isFinal&&this.onPanend(a))},b.onPanmove=function(a){var b=function(a,b){if(b<0||90<b)return oa;var c=Math.abs(a);return b<c&&c<180-b?ua:ta}(a.angle,this.options.thresholdAngle),c=this.hammer.session.prevInput;a.offsetY=c?(a.offsetX=a.deltaX-c.deltaX,a.deltaY-c.deltaY):a.offsetX=0;var d=this.getOffset([a.offsetX,a.offsetY],[O(ta,this._direction,b),O(ua,this._direction,b)]),e=d.some(function(a){return 0!==a});e&&(a.srcEvent.preventDefault(),a.srcEvent.stopPropagation()),(a.preventSystemEvent=e)&&this.observer.change(this,a,N(this.axes,d))},b.onPanend=function(a){var b,c,d,e,f=this.getOffset([Math.abs(a.velocityX)*(a.deltaX<0?-1:1),Math.abs(a.velocityY)*(a.deltaY<0?-1:1)],[O(ta,this._direction),O(ua,this._direction)]);b=f,c=this.observer.options.deceleration,d=Math.sqrt(b[0]*b[0]+b[1]*b[1]),e=Math.abs(d/-c),f=[b[0]/2*e,b[1]/2*e],this.observer.release(this,a,N(this.axes,f))},b.attachEvent=function(a){this.observer=a,this.hammer.on("hammer.input",this.onHammerInput).on("panstart panmove",this.onPanmove)},b.dettachEvent=function(){this.hammer.off("hammer.input",this.onHammerInput).off("panstart panmove",this.onPanmove),this.observer=null},b.getOffset=function(a,b){var c=[0,0],d=this.options.scale;return b[0]&&(c[0]=a[0]*d[0]),b[1]&&(c[1]=a[1]*d[1]),c},a}(),jb=($a="undefined"==typeof window?{document:{},navigator:{userAgent:""}}:window).document,kb={$:function(a){var b=null;if("string"==typeof a){var c=a.match(/^<([a-z]+)\s*([^>]*)>/);c?(b=jb.createElement(c[1]),3===c.length&&c[2].split(" ").forEach(function(a){var c=a.split("=");b.setAttribute(c[0],c[1].trim().replace(/(^["']|["']$)/g,""))})):(b=jb.querySelectorAll(a)).length?1===b.length&&(b=b[0]):b=null}else a.nodeName&&1===a.nodeType&&(b=a);return b},toArray:function(a){return[].slice.call(a)},isArray:function(a){return a&&a.constructor===Array},isObject:function(a){return a&&!a.nodeType&&"object"==typeof a&&!this.isArray(a)},extend:function(a){for(var b=this,c=arguments.length,d=new Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(!d.length||1===d.length&&!d[0])return a;var f=d.shift();return this.isObject(a)&&this.isObject(f)&&Object.keys(f).forEach(function(c){var d=f[c];b.isObject(d)?(!a[c]&&(a[c]={}),a[c]=b.extend(a[c],d)):a[c]=b.isArray(d)?d.concat():d}),this.extend.apply(this,[a].concat(d))},css:function(a,b,c){if("string"==typeof b){var d=a.style[b];return(!d||"auto"===d||/\d/.test(d)&&!/\d(px)?$/.test(d))&&(d=$a.getComputedStyle(a)[b]),c?this.getNumValue(d):d}var e=function(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]})};return this.isArray(a)?a.forEach(function(a){return e(a.style,b)}):e(a.style,b),a},classList:function(a,b,c){var d,e="boolean"==typeof c;return a.classList?d=a.classList[e&&(c?"add":"remove")||"contains"](b):(d=a.className,e?c&&-1===d.indexOf(b)?d=a.className=(d+" "+b).replace(/\s{2,}/g," "):c||(d=a.className=d.replace(b,"")):d=new RegExp("\\b"+b+"\\b").test(d)),d},getNumValue:function(a,b){var c=a;return isNaN(c=parseFloat(c))?b:c},getUnitValue:function(a){return(parseFloat(a)||0)+(String(a).match(/(?:[a-z]{2,}|%)$/)||"px")},getOuter:function(a,b){var c=this,d=0;return("outerWidth"===b?["Left","Right"]:["Top","Bottom"]).forEach(function(b){["padding","margin"].forEach(function(e){d+=c.css(a,""+e+b,!0)})}),this.css(a,b.replace("outer","").toLocaleLowerCase(),!0)+d},outerWidth:function(a){return this.getOuter(a,"outerWidth")},outerHeight:function(a){return this.getOuter(a,"outerHeight")},translate:function(a,b,c){return c?"translate3d("+a+","+b+",0)":"translate("+a+","+b+")"},hasClickBug:function(){var a=$a.navigator.userAgent,b=/iPhone|iPad/.test(a);return this.hasClickBug=function(){return b},b}},lb=function(){function a(a){this.superclass=a||function(){return function(){}}()}return a.prototype.with=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return b(a)},this.superclass)},a}(),mb={beforeFlickStart:"beforeFlickStart",beforeRestore:"beforeRestore",flick:"flick",flickEnd:"flickEnd",restore:"restore"},nb={name:"transform"};nb.support=function(){if(!jb.documentElement)return!1;var a=jb.documentElement.style;return nb.name in a||(nb.name="webkitTransform")in a}();var ob=$a.CSS&&$a.CSS.supports&&$a.CSS.supports("will-change","transform"),pb=/Android 2\./.test($a.navigator.userAgent),qb="data-height",rb={panel:{$list:null,index:0,no:0,currIndex:0,currNo:0,size:0,count:0,origCount:0,changed:!1,animating:!1,minCount:3},touch:{holdPos:0,destPos:0,distance:0,direction:null,lastPos:0,holding:!1,isTrusted:!1},customEvent:{flick:!0,restore:!1,restoreCall:!1},dirData:[],indexToMove:0,$dummyAnchor:null},sb={hwAccelerable:!0,prefix:"eg-flick",deceleration:6e-4,horizontal:!0,circular:!1,previewPadding:null,bounce:null,threshold:40,duration:100,panelEffect:function(a){return 1-Math.pow(1-a,3)},defaultIndex:0,inputType:["touch","mouse"],thresholdAngle:45,adaptiveHeight:!1,zIndex:2e3,useTranslate:!0},tb=function(b){return function(b){function c(){return b.apply(this,arguments)||this}a(c,b);var d=c.prototype;return d._holdHandler=function(a){var b=this._conf,c=b.touch,d=a.pos.flick;c.holdPos=d,c.holding=!0,c.isTrusted=!0,b.panel.changed=!1,this._adjustContainerCss("start",d)},d._changeHandler=function(a){var b,c,d=this._conf,e=d.touch,f=a.pos.flick,g=e.holdPos,h=null;this._setPointerEvents(a),a.inputEvent?(b=a.inputEvent.direction,c=a.inputEvent[this.options.horizontal?"deltaX":"deltaY"],~d.dirData.indexOf(b)||(b=d.dirData[+(Math.abs(e.lastPos)<=c)]),e.lastPos=c):e.lastPos=null,d.customEvent.flick&&(h=this._triggerEvent(mb.flick,{pos:f,holding:a.holding,direction:b||e.direction,distance:e.isTrusted?f-g:null})),(h||null===h)&&this._setTranslate([-f,0])},d._releaseHandler=function(a){var b=this._conf,c=b.touch,d=c.holdPos,e=b.panel.size,f=b.customEvent,g=c.holdPos<a.depaPos.flick;c.distance=a.depaPos.flick-d,c.direction=b.dirData[+!g],c.destPos=d+(g?e:-e);var h=c.distance,i=this.options.duration,j=d;this._isMovable()?(!f.restoreCall&&(f.restore=!1),j=c.destPos):0<Math.abs(h)?this._triggerBeforeRestore(a):i=0,a.setTo({flick:j},i),0===h&&this._adjustContainerCss("end"),c.holding=!1,this._setPointerEvents()},d._animationStartHandler=function(a){var b=this._conf,c=b.panel,d=b.customEvent,e=a.inputEvent||b.touch.lastPos;!d.restoreCall&&e&&!1===this._setPhaseValue("start",{depaPos:a.depaPos.flick,destPos:a.destPos.flick})&&a.stop(),e&&(a.duration=this.options.duration,a.destPos.flick=c.size*(c.index+b.indexToMove)),c.animating=!0},d._animationEndHandler=function(){var a=this._conf;a.panel.animating=!1,this._setPhaseValue("end"),this._triggerRestore(),a.touch.isTrusted=!1},c}(b)};return function(){var b,c=function(b){function c(a,c,d){var e;(e=b.call(this)||this).$wrapper=kb.$(a),e.plugins=[];var f=e.$wrapper&&e.$wrapper.children;if(!e.$wrapper||!f||!f.length)throw new Error("Given base element doesn't exist or it hasn't proper DOM structure to be initialized.");return e._setOptions(c),e._setConfig(f,d),!kb.hasClickBug()&&(e._setPointerEvents=function(){}),e._build(),e._bindEvents(!0),e._applyPanelsCss(),e._arrangePanels(),e.options.hwAccelerable&&ob&&e._setHint(),e.options.adaptiveHeight&&e._setAdaptiveHeight(),e._adjustContainerCss("end"),e}a(c,b);var d=c.prototype;return d._setOptions=function(a){var b={previewPadding:[0,0],bounce:[10,10]};for(var c in this.options=kb.extend(kb.extend({},sb),b,a),b){var d=this.options[c];/(number|string)/.test(typeof d)?d=[d,d]:kb.isArray(d)||(d=b[c]),this.options[c]=d}pb&&(this.options.useTranslate=!1)},d._setConfig=function(a,b){var c=this.options,d=c.previewPadding,e=a;kb.classList(e[0],c.prefix+"-container")&&(e=e[0],e=(this.$container=e).children),e=kb.toArray(e);var f=this._conf=kb.extend(kb.extend({},rb),{panel:{$list:e,minCount:0<d[0]+d[1]?5:3},origPanelStyle:{wrapper:{className:this.$wrapper.getAttribute("class")||null,style:this.$wrapper.getAttribute("style")||null},container:{className:this.$container&&this.$container.getAttribute("class")||null,style:this.$container&&this.$container.getAttribute("style")||null},list:e.map(function(a){return{className:a.getAttribute("class")||null,style:a.getAttribute("style")||null}})},useLayerHack:c.hwAccelerable&&!ob,eventPrefix:b||""});[["LEFT","RIGHT"],["UP","DOWN"]][+!c.horizontal].forEach(function(a){return f.dirData.push(eb["DIRECTION_"+a])})},d._build=function(){var a=this._conf.panel,b=this.options,c=a.$list,d=b.previewPadding.concat(),e=b.prefix,f=b.horizontal,g=a.count=a.origCount=c.length,h=b.bounce;this._setPadding(d,!0);var i=this._getDataByDirection([a.size,"100%"]),j={position:"relative",zIndex:b.zIndex||2e3,width:"100%",height:"100%"};if(f&&(j.top="0px"),this.$container)kb.css(this.$container,j);else{var k=c[0].parentNode,l=jb.createElement("div");l.className=e+"-container",kb.css(l,j),c.forEach(function(a){return l.appendChild(a)}),k.appendChild(l),this.$container=l}c.forEach(function(a){kb.classList(a,e+"-panel",!0),kb.css(a,{position:"absolute",width:kb.getUnitValue(i[0]),height:kb.getUnitValue(i[1]),boxSizing:"border-box",top:0,left:0})}),this._addClonePanels()&&(g=a.count=(a.$list=kb.toArray(this.$container.children)).length),this._axesInst=new eb({flick:{range:[0,a.size*(g-1)],bounce:h}},{easing:b.panelEffect,deceleration:b.deceleration,interruptable:!1}),this._setDefaultPanel(b.defaultIndex)},d._setPadding=function(a,b){var c=this.$wrapper,d=this.options.horizontal,e=this._conf.panel,f={};!a.reduce(function(a,b){return parseFloat(a)+parseFloat(b)})&&b||(d&&a.reverse(),f.padding=(d?"0 ":"")+a.map(function(a){return isNaN(a)?a:a+"px"}).join(" 0 ")),b&&(f.overflow="hidden",f.boxSizing="border-box"),Object.keys(f).length&&kb.css(c,f);var g=d?["Left","Right"]:["Top","Bottom"],h=Math.max(c["offset"+(d?"Width":"Height")],kb.css(c,d?"width":"height",!0));e.size=h-(kb.css(c,"padding"+g[0],!0)+kb.css(c,"padding"+g[1],!0))},d._addClonePanels=function(){var a,b=this,c=this._conf.panel,d=c.origCount,e=c.minCount-d,f=c.$list;if(this.options.circular&&d<c.minCount){for(a=f.map(function(a){return a.cloneNode(!0)});a.length<e;)a=a.concat(f.map(function(a){return a.cloneNode(!0)}));return a.forEach(function(a){return b.$container.appendChild(a)}),!!a.length}return!1},d._movePanelPosition=function(a,b){var c=this._conf.panel,d=c.$list,e=d.splice(b?0:c.count-a,a);c.$list=b?d.concat(e):e.concat(d)},d._setDefaultPanel=function(a){var b,c,d=this._conf.panel,e=d.count-1;this.options.circular?(0<a&&a<=e&&this._movePanelPosition(a,!0),c=this._getBasePositionIndex(),this._movePanelPosition(c,!1),this._setPanelNo({no:a,currNo:a})):0<a&&a<=e&&(this._setPanelNo({index:a,no:a,currIndex:a,currNo:a}),b=[-d.size*a,0],this._setTranslate(b),this._setAxes("setTo",Math.abs(b[0]),0))},d._arrangePanels=function(a,b){var c,d=this._conf,e=d.panel,f=d.touch,g=d.dirData;this.options.circular&&(d.customEvent.flick=!1,a&&(b&&(f.direction=g[+!(0<b)]),this._arrangePanelPosition(f.direction,b)),c=this._getBasePositionIndex(),this._setPanelNo({index:c,currIndex:c}),d.customEvent.flick=!!this._setAxes("setTo",e.size*e.index,0)),this._applyPanelsPos()},d._applyPanelsPos=function(){this._conf.panel.$list.forEach(this._applyPanelsCss.bind(this))},d._setMoveStyle=function(a,b){var c=nb,d=this._conf.useLayerHack;this._setMoveStyle=c.support?function(a,b){var e;kb.css(a,((e={})[c.name]=kb.translate(b[0],b[1],d),e))}:function(a,b){kb.css(a,{left:b[0],top:b[1]})},this._setMoveStyle(a,b)},d._applyPanelsCss=function(){var a=this._conf,b="__dummy_anchor",c=this.options.useTranslate;this._applyPanelsCss=c?function(a,b){var c=this._getDataByDirection([nb.support?100*b+"%":this._conf.panel.size*b+"px",0]);this._setMoveStyle(a,c)}:(pb&&(a.$dummyAnchor=kb.$("."+b),!a.$dummyAnchor&&this.$wrapper.appendChild(a.$dummyAnchor=kb.$('<a href="javascript:void(0)" class="'+b+'" style="position:absolute;height:0px;width:0px">'))),function(a,b){var c=this._getDataByDirection([this._conf.panel.size*b+"px",0]);kb.css(a,{left:c[0],top:c[1]})})},d._adjustContainerCss=function(a,b){var c,d=this._conf,e=d.panel,f=this.options,g=f.useTranslate,h=f.horizontal,i=f.previewPadding[0],j=this.$container,k=b;if(!g)if(k||(k=-e.size*e.index),"start"===a)j=j.style,c=parseFloat(j[h?"left":"top"]),h?c&&(j.left="0px"):c!==i&&(j.top="0px"),this._setTranslate([-k,0]);else if("end"===a){var l;k=this._getCoordsValue([k,0]),kb.css(j,((l={left:k.x,top:k.y})[nb.name]=kb.translate(0,0,d.useLayerHack),l)),d.$dummyAnchor&&d.$dummyAnchor.focus()}},d._setAxes=function(a,b,c){return this._axesInst[a]({flick:b},c)},d._setHint=function(){var a={willChange:"transform"};kb.css(this.$container,a),kb.css(this._conf.panel.$list,a)},d._getDataByDirection=function(a){var b=a.concat();return!this.options.horizontal&&b.reverse(),b},d._arrangePanelPosition=function(a,b){var c=a===this._conf.dirData[0];this._movePanelPosition(Math.abs(b||1),c)},d._getBasePositionIndex=function(){return Math.floor(this._conf.panel.count/2-.1)},d._bindEvents=function(a){var b=this.options,c=this.$wrapper,d=this._axesInst;a?(this._panInput=new ib(c,{inputType:b.inputType,thresholdAngle:b.thresholdAngle,scale:this._getDataByDirection([-1,0])}),d.on({hold:this._holdHandler.bind(this),change:this._changeHandler.bind(this),release:this._releaseHandler.bind(this),animationStart:this._animationStartHandler.bind(this),animationEnd:this._animationEndHandler.bind(this)}).connect(this._getDataByDirection(["flick",""]),this._panInput)):(this.disableInput(),d.off())},d._setAdaptiveHeight=function(a){var b,c,d=this._conf,e=d.indexToMove,f=0===e?this["get"+((a===eb.DIRECTION_LEFT?"Next":a===eb.DIRECTION_RIGHT&&"Prev")||"")+"Element"]():d.panel.$list[d.panel.currIndex+e],g=f.querySelector(":first-child");g&&((c=g.getAttribute(qb))||(b=f.children,0<(c=kb.outerHeight(1<b.length?(f.style.height="auto",f):g))&&g.setAttribute(qb,c)),0<c&&(this.$wrapper.style.height=c+"px"))},d._triggerBeforeRestore=function(a){var b=this._conf,c=b.touch;c.direction=+b.dirData.join("").replace(c.direction,""),b.customEvent.restore=this._triggerEvent(mb.beforeRestore,{depaPos:a.depaPos.flick,destPos:a.destPos.flick}),b.customEvent.restore||("stop"in a&&a.stop(),b.panel.animating=!1)},d._triggerRestore=function(){var a=this._conf.customEvent;a.restore&&this._triggerEvent(mb.restore),a.restore=a.restoreCall=!1},d._setPhaseValue=function(a,b){var c=this._conf,d=this.options,e=c.panel,f=d.useTranslate;if("start"===a&&(e.changed=this._isMovable())){if(!this._triggerEvent(mb.beforeFlickStart,b))return e.changed=e.animating=!1,!1;d.adaptiveHeight&&this._setAdaptiveHeight(c.touch.direction),0===c.indexToMove&&this._setPanelNo()}else"end"===a&&(d.circular&&e.changed&&this._arrangePanels(!0,c.indexToMove),f&&this._setTranslate([-e.size*e.index,0]),c.touch.distance=c.indexToMove=0,e.changed&&this._triggerEvent(mb.flickEnd));return this._adjustContainerCss(a),!0},d._getNumByDirection=function(){var a=this._conf;return a.touch.direction===a.dirData[0]?1:-1},d._revertPanelNo=function(){var a=this._conf.panel,b=this._getNumByDirection(),c=0<=a.currIndex?a.currIndex:a.index-b,d=0<=a.currNo?a.currNo:a.no-b;this._setPanelNo({index:c,no:d})},d._setPanelNo=function(a){var b=this._conf.panel,c=b.origCount-1,d=this._getNumByDirection();if(kb.isObject(a))for(var e in a)b[e]=a[e];else b.currIndex=b.index,b.currNo=b.no,b.index+=d,b.no+=d;b.no>c?b.no=0:b.no<0&&(b.no=c)},d._setPointerEvents=function(a){var b,c=this.$container,d=kb.css(c,"pointerEvents");a&&a.holding&&a.inputEvent&&a.inputEvent.preventSystemEvent&&"none"!==d?b="none":a||"auto"===d||(b="auto"),b&&kb.css(c,{pointerEvents:b})},d._getCoordsValue=function(a){var b=this._getDataByDirection(a);return{x:kb.getUnitValue(b[0]),y:kb.getUnitValue(b[1])}},d._setTranslate=function(a){var b=this._getCoordsValue(a);this._setMoveStyle(this.$container,[b.x,b.y])},d._isMovable=function(){var a,b,c=this.options,d=this._axesInst,e=Math.abs(this._conf.touch.distance)>=c.threshold;return!(!c.circular&&e&&(a=d.axis.flick.range[1],(b=d.get().flick)<0||a<b))&&e},d._triggerEvent=function(a,b){var c=this._conf,d=c.panel;return a===mb.flickEnd&&(d.currNo=d.no,d.currIndex=d.index),this.trigger(c.eventPrefix+a,kb.extend({eventType:a,no:d.currNo,direction:c.touch.direction,isTrusted:c.touch.isTrusted},b))},d._getElement=function(a,b,c){var d,e,f=this._conf.panel,g=this.options.circular,h=f.currIndex,i=a===this._conf.dirData[0],j=null,k=e=c?(d=f.count,h):(d=f.origCount,f.currNo);return i?e<d-1?e++:g&&(e=0):0<e?e--:g&&(e=d-1),k!==e&&(j=b?f.$list[i?h+1:h-1]:e),j},d._setValueToMove=function(a){var b=this._conf;b.touch.distance=this.options.threshold+1,b.touch.direction=b.dirData[+!a]},d.getIndex=function(a){return this._conf.panel[a?"currIndex":"currNo"]},d.getElement=function(){var a=this._conf.panel;return a.$list[a.currIndex]},d.getNextElement=function(){return this._getElement(this._conf.dirData[0],!0)},d.getNextIndex=function(a){return this._getElement(this._conf.dirData[0],!1,a)},d.getAllElements=function(){return this._conf.panel.$list},d.getPrevElement=function(){return this._getElement(this._conf.dirData[1],!0)},d.getPrevIndex=function(a){return this._getElement(this._conf.dirData[1],!1,a)},d.isPlaying=function(){return this._conf.panel.animating},d._movePanelByPhase=function(a,b,c){var d=kb.getNumValue(c,this.options.duration);!1!==this._setPhaseValue("start")&&(this._setAxes(a,b,d),!d&&this._setPhaseValue("end"))},d.next=function(a){var b=this.getNextIndex();return"number"!=typeof b?this:this._moveTo(b,a,eb.DIRECTION_RIGHT)},d.prev=function(a){var b=this.getPrevIndex();return"number"!=typeof b?this:this._moveTo(b,a,eb.DIRECTION_LEFT)},d.moveTo=function(a,b){return this._moveTo(a,b)},d._moveTo=function(a,b,c){var d,e,f=this._conf,g=f.panel,h=this.options.circular,i=g.index,j=a;return(j=kb.getNumValue(j,-1))<0||j>=g.origCount||j===g.no||g.animating||f.touch.holding||(d=j-(h?g.no:i),c===eb.DIRECTION_RIGHT&&d<0?d+=g.origCount:c===eb.DIRECTION_LEFT&&0<d&&(d-=g.origCount),e=0<d,h&&Math.abs(d)>(e?g.count-(i+1):i)&&(e=0<(d+=(e?-1:1)*g.count)),this._setPanelNo(h?{no:j}:{no:j,index:j}),this._conf.indexToMove=d,this._setValueToMove(e),this._movePanelByPhase(h?"setBy":"setTo",g.size*(h?d:j),b)),this},d.resize=function(){var a,b=this._conf,c=this.options,d=b.panel,e=c.horizontal,f=c.useTranslate;if(!this.isPlaying()){var g;if(kb.isArray(c.previewPadding)&&"number"==typeof+c.previewPadding.join("")?(this._setPadding(c.previewPadding.concat()),a=d.size):e&&(a=d.size=kb.css(this.$wrapper,"width",!0)),kb.css(d.$list,((g={})[e?"width":"height"]=kb.getUnitValue(a),g)),c.adaptiveHeight){var h=this.$container.querySelectorAll("["+qb+"]");h.length&&(kb.toArray(h).forEach(function(a){return a.removeAttribute(qb)}),this._setAdaptiveHeight())}this._axesInst.axis.flick.range=[0,a*(d.count-1)],this._setAxes("setTo",a*d.index,0),f||(this._applyPanelsPos(),this._adjustContainerCss("end"))}return this},d.restore=function(a){var b,c=this._conf,d=c.panel,e=this._axesInst.get().flick,f=a;return e!==d.currIndex*d.size?(c.customEvent.restoreCall=!0,f=kb.getNumValue(f,this.options.duration),this._revertPanelNo(),b=d.size*d.index,this._triggerBeforeRestore({depaPos:e,destPos:b}),this._setAxes("setTo",b,f),f||(this._adjustContainerCss("end"),this._triggerRestore())):d.changed&&(this._revertPanelNo(),c.touch.distance=c.indexToMove=0),this},d.enableInput=function(){return this._panInput.enable(),this},d.disableInput=function(){return this._panInput.disable(),this},d.getStatus=function(a){var b=this._conf.panel,c=/((?:-webkit-)?transform|left|top|will-change|box-sizing|width):[^;]*;/g,d={panel:{index:b.index,no:b.no,currIndex:b.currIndex,currNo:b.currNo},$list:b.$list.map(function(a){return{style:a.style.cssText.replace(c,"").trim(),className:a.className,html:a.innerHTML}})};return a?JSON.stringify(d):d},d.setStatus=function(a){var b=this._conf.panel,c=this.options.adaptiveHeight,d="string"==typeof a?JSON.parse(a):a;if(d){for(var e in d.panel)e in b&&(b[e]=d.panel[e]);b.$list.forEach(function(a,b){var c=d.$list[b],e=c.style,f=c.className,g=c.html;e&&(a.style.cssText+=e),f&&(a.className=f),g&&(a.innerHTML=g)}),c&&this._setAdaptiveHeight()}},d.destroy=function(){var a=this,b=this._conf.origPanelStyle,c=b.wrapper,d=b.container,e=b.list;this._bindEvents(!1),this.off(),this._axesInst.destroy(),this._panInput.destroy();var f=this.$wrapper;f.setAttribute("class",c.className),f[c.style?"setAttribute":"removeAttribute"]("style",c.style);var g=this.$container,h=[].slice.call(g.children);b.container.className?(g.setAttribute("class",d.className),g[d.style?"setAttribute":"removeAttribute"]("style",d.style)):(h.forEach(function(a){return f.appendChild(a)}),g.parentNode.removeChild(g));for(var i,j=0;i=h[j];j++)if(j>e.length-1)i.parentNode.removeChild(i);else{var k=e[j].className,l=e[j].style;i[k?"setAttribute":"removeAttribute"]("class",k),i[l?"setAttribute":"removeAttribute"]("style",l)}for(var m in this.plugins.forEach(function(b){a.plugins[b].$componentWillUnmount()}),this)this[m]=null},d.plugin=function(a){var b=this;return a.forEach(function(a){0===b.plugins.filter(function(b){return b.constructor===a.constructor}).length&&b.plugins.push(a.$componentWillMount(b))}),this},c}((b=Q,new lb(b)).with(tb));return c.utils=kb,c.VERSION="2.4.3",c.consts={EVENTS:mb,TRANSFORM:nb,SUPPORT_WILLCHANGE:ob,IS_ANDROID2:pb},c.DIRECTION_NONE=eb.DIRECTION_NONE,c.DIRECTION_LEFT=eb.DIRECTION_LEFT,c.DIRECTION_RIGHT=eb.DIRECTION_RIGHT,c.DIRECTION_UP=eb.DIRECTION_UP,c.DIRECTION_DOWN=eb.DIRECTION_DOWN,c.DIRECTION_HORIZONTAL=eb.DIRECTION_HORIZONTAL,c.DIRECTION_VERTICAL=eb.DIRECTION_VERTICAL,c.DIRECTION_ALL=eb.DIRECTION_ALL,c}()}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("@egjs/flicking")):"function"==typeof define&&define.amd?define(["@egjs/flicking"],b):(a.eg=a.eg||{},a.eg.Flicking=a.eg.Flicking||{},a.eg.Flicking.plugin=a.eg.Flicking.plugin||{},a.eg.Flicking.plugin.OpacityEffect=b(a.eg.Flicking))}(this,function(a){"use strict";var b=a.utils,c=b.extend(b.extend({},a.consts),{DIRECTION_NONE:a.DIRECTION_NONE,DIRECTION_LEFT:a.DIRECTION_LEFT,DIRECTION_RIGHT:a.DIRECTION_RIGHT,DIRECTION_UP:a.DIRECTION_UP,DIRECTION_DOWN:a.DIRECTION_DOWN,DIRECTION_HORIZONTAL:a.DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:a.DIRECTION_VERTICAL,DIRECTION_ALL:a.DIRECTION_ALL}),d=function(){var a=function(){function a(a){void 0===a&&(a={}),this.options=a}var b=a.prototype;return b.$componentWillMount=function(a){return this.$$=a,this.useWillChange="transform"===a.$container.style.willChange,this.useLayerHack=this.getInstanceConf().useLayerHack,this.bindEvents(),this.$componentMount(),this.$componentDidMount(),this},b.$componentDidMount=function(){return this},b.$componentWillUnmount=function(){var a=this;Object.keys(this).forEach(function(b){a[b]=null})},b.getInstanceConf=function(){return this.$$._conf},b.bindEvents=function(){this.$$.on({flick:this._onFlick.bind(this),flickEnd:this._onFlickEnd.bind(this),restore:this._onRestore.bind(this)})},b._onFlick=function(a){var b=a.pos,c=a.distance||b-this.$$._conf.panel.size;this.onFlick&&this.onFlick(a,c)},b._onFlickEnd=function(a){var b=(a.direction&c.DIRECTION_LEFT?"next":a.direction&c.DIRECTION_RIGHT&&"prev")||"";b&&this.arrange&&this.arrange(b),this.onFlickEnd&&this.onFlickEnd(a)},b._onRestore=function(a){this.onRestore&&this.onRestore(a)},a}();return a.utils=b,a.consts=c,a.VERSION="2.4.3",a}();return function(a){function b(b){return a.call(this,{selector:b})||this}var c,e;e=a,(c=b).prototype=Object.create(e.prototype),(c.prototype.constructor=c).__proto__=e;var f=b.prototype;return f.$componentMount=function(){return this.details=d.utils.toArray(this.$$.$wrapper.querySelectorAll(this.options.selector)),this._build(),this.resize(),this},f._build=function(){this.details=[this.details.pop()].concat(this.details)},f._setSelected=function(a,b){var c=d.utils;c.classList(c.css(this.details[a],{opacity:""}),"selected",b)},f.resize=function(){this.size=this.getInstanceConf().panel.size,this.onRestore("resize")},f.arrange=function(a){"resize"!==a&&(this.details="next"===a?this.details.concat(this.details.shift()):[this.details.pop()].concat(this.details)),this._setSelected(1,!0),/next|resize/.test(a)&&this._setSelected(0,!1),/prev|resize/.test(a)&&this._setSelected(2,!1)},f.onFlick=function(a,b){var c=a.pos%this.size/this.size,e=d.utils;if(!(Math.abs(b)>=this.size)){var f=0<b&&c<=.5&&1-2*c||b<0&&.5<c&&2*(c-.5);void 0!==f&&e.css(this.details[1],{opacity:f})}},f.onRestore=function(){this.arrange("resize")},f.get=function(){return this.details[1]},b}(d)}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("@egjs/flicking")):"function"==typeof define&&define.amd?define(["@egjs/flicking"],b):(a.eg=a.eg||{},a.eg.Flicking=a.eg.Flicking||{},a.eg.Flicking.plugin=a.eg.Flicking.plugin||{},a.eg.Flicking.plugin.ParallaxEffect=b(a.eg.Flicking))}(this,function(a){"use strict";var b=a.utils,c=b.extend(b.extend({},a.consts),{DIRECTION_NONE:a.DIRECTION_NONE,DIRECTION_LEFT:a.DIRECTION_LEFT,DIRECTION_RIGHT:a.DIRECTION_RIGHT,DIRECTION_UP:a.DIRECTION_UP,DIRECTION_DOWN:a.DIRECTION_DOWN,DIRECTION_HORIZONTAL:a.DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:a.DIRECTION_VERTICAL,DIRECTION_ALL:a.DIRECTION_ALL}),d=function(){var a=function(){function a(a){void 0===a&&(a={}),this.options=a}var b=a.prototype;return b.$componentWillMount=function(a){return this.$$=a,this.useWillChange="transform"===a.$container.style.willChange,this.useLayerHack=this.getInstanceConf().useLayerHack,this.bindEvents(),this.$componentMount(),this.$componentDidMount(),this},b.$componentDidMount=function(){return this},b.$componentWillUnmount=function(){var a=this;Object.keys(this).forEach(function(b){a[b]=null})},b.getInstanceConf=function(){return this.$$._conf},b.bindEvents=function(){this.$$.on({flick:this._onFlick.bind(this),flickEnd:this._onFlickEnd.bind(this),restore:this._onRestore.bind(this)})},b._onFlick=function(a){var b=a.pos,c=a.distance||b-this.$$._conf.panel.size;this.onFlick&&this.onFlick(a,c)},b._onFlickEnd=function(a){var b=(a.direction&c.DIRECTION_LEFT?"next":a.direction&c.DIRECTION_RIGHT&&"prev")||"";b&&this.arrange&&this.arrange(b),this.onFlickEnd&&this.onFlickEnd(a)},b._onRestore=function(a){this.onRestore&&this.onRestore(a)},a}();return a.utils=b,a.consts=c,a.VERSION="2.4.3",a}();return function(a){function b(b){return a.call(this,{selector:b})||this}var c,e;e=a,(c=b).prototype=Object.create(e.prototype),(c.prototype.constructor=c).__proto__=e;var f=b.prototype;return f.$componentMount=function(){var a=this;return this.imgs=this.$$.getAllElements().map(function(b){return b.querySelector(a.options.selector)}),this.resize(),this._build(),this},f._build=function(){var a=this,b=d.utils,c=this._getCurrIndex();b.css(this.getInstanceConf().panel.$list,{overflow:"hidden"}),this.imgs.forEach(function(d,e){var f=-50;e<c?f=50:c===e&&(f=0),a.useWillChange&&b.css(d,{willChange:"transform"}),a._setTranslate(d,f+"%",0)})},f._setTranslate=function(a,b,c){return a&&d.utils.css(a,{transform:d.utils.translate.apply(null,this.$$._getDataByDirection([b,c]).concat(this.useLayerHack))}),a},f._getCurrIndex=function(){return this.getInstanceConf().panel.currIndex},f._getPanel=function(){var a=this._getCurrIndex();return{prev:this.imgs[a-1],curr:this.imgs[a],next:this.imgs[a+1]}},f.arrange=function(a){this.$$.options.circular&&"resize"!==a&&(this.imgs="next"===a?this.imgs.concat(this.imgs.shift()):[this.imgs.pop()].concat(this.imgs));var b=this._getPanel();this._setTranslate(b.curr,0,0),/next|resize/.test(a)&&this._setTranslate(b.next,"50%",0),/prev|resize/.test(a)&&this._setTranslate(b.prev,"-50%",0)},f.onFlick=function(a,b){var c=this,d=a.pos,e=this.size,f=d%e/2,g=-(e/2-f);if(!(Math.abs(b)>=e)){var h=this._getPanel(),i=[];0<b&&h.next?(i.push({el:h.curr,x:f}),i.push({el:h.next,x:g})):b<0&&h.prev&&(i.push({el:h.curr,x:g}),i.push({el:h.prev,x:f})),i.forEach(function(a){return c._setTranslate(a.el,a.x+"px",0)})}},f.onRestore=function(){this.arrange("resize")},f.resize=function(){this.size=this.getInstanceConf().panel.size,this.onRestore("resize")},f.get=function(){return this.imgs[this._getCurrIndex()]},b}(d)}),function(a,b){"function"==typeof define&&define.amd?define(["exports",Toast],function(c,d){b(a,c)}):b(a,Toast)}(this,function(a,b){"use strict";b.Spinner=Spinner;var c={},d={width:2,lines:10,length:5,opacity:0,color:"black"};b.showLoading=function(a,b){b=_.extend({modal:!0},b),b.el&&(b.modal=!1);var e=b.el?b.el.data("indigator"):c;if(!e&&a){var f=$(document.body).children(".indigator").clone();f.removeClass("modal in"),e={el:f,spinner:new Spinner(_.extend(d,{useCssAnimations:b.useCssAnimations}))},b.el.append(e.el),b.el.data("indigator",e)}a?e&&(e.spinner.spin(e.el.find(".indigator-container > .spinner")[0]),b.modal&&e.el.addClass("modal in"),b.text&&e.el.children(".indigator-container > .text").text(b.text).show(),e.el.show()):e&&(e.spinner.stop(),e.el.children(".indigator-container > .text").text(""),e.el.removeClass("modal in"),e.el.hide(),b.el&&(delete e.spinner,b.el.removeData("indigator"),e.el.remove()))},$(document).ready(function(){var a=$(document.body).children(".indigator"),e=a.find(".spinner").attr("data-color");e&&(d.color=e),b.isNative||(d.width=3),c={el:a,spinner:new Spinner(d)}})}),function(a){"function"==typeof define&&define.amd?define(a):a(jQuery)}(function(){"use strict";function a(a,b,c,d,e,f){a=String(a);for(var g=0,h=0,i=a.length,j="",k=0;h<i;){var l=a.charCodeAt(h);for(l=l<256?c[l]:-1,g=(g<<e)+l,k+=e;k>=f;){k-=f;var m=g>>k;j+=d.charAt(m),g^=m<<k}++h}return!b&&k>0&&(j+=d.charAt(g<<f-k)),j}for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="",d=[256],e=[256],f=0,g={encode:function(a){return a.replace(/[\u0080-\u07ff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(192|b>>6,128|63&b)}).replace(/[\u0800-\uffff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(224|b>>12,128|b>>6&63,128|63&b)})},decode:function(a){return a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){var b=(15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2);return String.fromCharCode(b)}).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){var b=(31&a.charCodeAt(0))<<6|63&a.charCodeAt(1);return String.fromCharCode(b)})}};f<256;){var h=String.fromCharCode(f);c+=h,e[f]=f,d[f]=b.indexOf(h),++f}var i=$.base64=function(a,b,c){return b?i[a](b,c):a?null:this};i.btoa=i.encode=function(c,d){return c=!1===i.raw||i.utf8encode||d?g.encode(c):c,(c=a(c,!1,e,b,8,6))+"====".slice(c.length%4||4)},i.atob=i.decode=function(b,e){b=String(b).split("=");var f=b.length;do{--f,b[f]=a(b[f],!0,d,c,6,8)}while(f>0);return b=b.join(""),!1===i.raw||i.utf8decode||e?g.decode(b):b}}),function(a){"function"==typeof define&&define.amd?define(a):a(jQuery)}(function(){var a=function(a,b){return a<<b|a>>>32-b},b=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},c=function(a,b,c){return a&b|~a&c},d=function(a,b,c){return a&c|b&~c},e=function(a,b,c){return a^b^c},f=function(a,b,c){return b^(a|~c)},g=function(d,e,f,g,h,i,j){return d=b(d,b(b(c(e,f,g),h),j)),b(a(d,i),e)},h=function(c,e,f,g,h,i,j){return c=b(c,b(b(d(e,f,g),h),j)),b(a(c,i),e)},i=function(c,d,f,g,h,i,j){return c=b(c,b(b(e(d,f,g),h),j)),b(a(c,i),d)},j=function(c,d,e,g,h,i,j){return c=b(c,b(b(f(d,e,g),h),j)),b(a(c,i),d)},k=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;i<c;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},l=function(a){var b,c,d="",e="";for(c=0;c<=3;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},m=function(a){a=a.replace(/\x0d\x0a/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b};$.extend({md5:function(a){var c,d,e,f,n,o,p,q,r,s=Array(),t=7,u=12,v=17,w=22,x=5,y=9,z=14,A=20,B=4,C=11,D=16,E=23,F=6,G=10,H=15,I=21;for(a=m(a),s=k(a),o=1732584193,p=4023233417,q=2562383102,r=271733878,c=0;c<s.length;c+=16)d=o,e=p,f=q,n=r,o=g(o,p,q,r,s[c+0],t,3614090360),r=g(r,o,p,q,s[c+1],u,3905402710),q=g(q,r,o,p,s[c+2],v,606105819),p=g(p,q,r,o,s[c+3],w,3250441966),o=g(o,p,q,r,s[c+4],t,4118548399),r=g(r,o,p,q,s[c+5],u,1200080426),q=g(q,r,o,p,s[c+6],v,2821735955),p=g(p,q,r,o,s[c+7],w,4249261313),o=g(o,p,q,r,s[c+8],t,1770035416),r=g(r,o,p,q,s[c+9],u,2336552879),q=g(q,r,o,p,s[c+10],v,4294925233),p=g(p,q,r,o,s[c+11],w,2304563134),o=g(o,p,q,r,s[c+12],t,1804603682),r=g(r,o,p,q,s[c+13],u,4254626195),q=g(q,r,o,p,s[c+14],v,2792965006),p=g(p,q,r,o,s[c+15],w,1236535329),o=h(o,p,q,r,s[c+1],x,4129170786),r=h(r,o,p,q,s[c+6],y,3225465664),q=h(q,r,o,p,s[c+11],z,643717713),p=h(p,q,r,o,s[c+0],A,3921069994),o=h(o,p,q,r,s[c+5],x,3593408605),r=h(r,o,p,q,s[c+10],y,38016083),q=h(q,r,o,p,s[c+15],z,3634488961),p=h(p,q,r,o,s[c+4],A,3889429448),o=h(o,p,q,r,s[c+9],x,568446438),r=h(r,o,p,q,s[c+14],y,3275163606),q=h(q,r,o,p,s[c+3],z,4107603335),p=h(p,q,r,o,s[c+8],A,1163531501),o=h(o,p,q,r,s[c+13],x,2850285829),r=h(r,o,p,q,s[c+2],y,4243563512),q=h(q,r,o,p,s[c+7],z,1735328473),p=h(p,q,r,o,s[c+12],A,2368359562),o=i(o,p,q,r,s[c+5],B,4294588738),r=i(r,o,p,q,s[c+8],C,2272392833),q=i(q,r,o,p,s[c+11],D,1839030562),p=i(p,q,r,o,s[c+14],E,4259657740),o=i(o,p,q,r,s[c+1],B,2763975236),r=i(r,o,p,q,s[c+4],C,1272893353),q=i(q,r,o,p,s[c+7],D,4139469664),p=i(p,q,r,o,s[c+10],E,3200236656),o=i(o,p,q,r,s[c+13],B,681279174),r=i(r,o,p,q,s[c+0],C,3936430074),q=i(q,r,o,p,s[c+3],D,3572445317),p=i(p,q,r,o,s[c+6],E,76029189),o=i(o,p,q,r,s[c+9],B,3654602809),r=i(r,o,p,q,s[c+12],C,3873151461),q=i(q,r,o,p,s[c+15],D,530742520),p=i(p,q,r,o,s[c+2],E,3299628645),o=j(o,p,q,r,s[c+0],F,4096336452),r=j(r,o,p,q,s[c+7],G,1126891415),q=j(q,r,o,p,s[c+14],H,2878612391),p=j(p,q,r,o,s[c+5],I,4237533241),o=j(o,p,q,r,s[c+12],F,1700485571),r=j(r,o,p,q,s[c+3],G,2399980690),q=j(q,r,o,p,s[c+10],H,4293915773),p=j(p,q,r,o,s[c+1],I,2240044497),o=j(o,p,q,r,s[c+8],F,1873313359),r=j(r,o,p,q,s[c+15],G,4264355552),q=j(q,r,o,p,s[c+6],H,2734768916),p=j(p,q,r,o,s[c+13],I,1309151649),o=j(o,p,q,r,s[c+4],F,4149444226),r=j(r,o,p,q,s[c+11],G,3174756917),q=j(q,r,o,p,s[c+2],H,718787259),p=j(p,q,r,o,s[c+9],I,3951481745),o=b(o,d),p=b(p,e),q=b(q,f),r=b(r,n);return(l(o)+l(p)+l(q)+l(r)).toLowerCase()}})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||n<f)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a,b){"use strict";a.jstree;var c,d,e=0,f=!1,g=!1,h=!1,i=[],j=a("script:last").attr("src"),k=window.document,l=k.createElement("LI");l.setAttribute("role","treeitem"),c=k.createElement("I"),c.className="jstree-icon jstree-ocl",c.setAttribute("role","presentation"),l.appendChild(c),c=k.createElement("A"),c.className="jstree-anchor",c.setAttribute("href","#"),c.setAttribute("tabindex","-1"),d=k.createElement("I"),d.className="jstree-icon jstree-themeicon",d.setAttribute("role","presentation"),c.appendChild(d),l.appendChild(c),c=d=null,a.jstree={version:"3.1.1",defaults:{plugins:[]},plugins:{},path:j&&-1!==j.indexOf("/")?j.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},a.jstree.create=function(b,c){var d=new a.jstree.core(++e),f=c;return c=a.extend(!0,{},a.jstree.defaults,c),f&&f.plugins&&(c.plugins=f.plugins),a.each(c.plugins,function(a,b){"core"!==a&&(d=d.plugin(b,c[b]))}),a(b).data("jstree",d),d.init(b,c),d},a.jstree.destroy=function(){a(".jstree:jstree").jstree("destroy"),a(k).off(".jstree")},a.jstree.core=function(a){this._id=a,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},a.jstree.reference=function(b){var c=null,d=null;if(!b||!b.id||b.tagName&&b.nodeType||(b=b.id),!d||!d.length)try{d=a(b)}catch(a){}if(!d||!d.length)try{d=a("#"+b.replace(a.jstree.idregex,"\\$&"))}catch(a){}return d&&d.length&&(d=d.closest(".jstree")).length&&(d=d.data("jstree"))?c=d:a(".jstree").each(function(){var d=a(this).data("jstree");if(d&&d._model.data[b])return c=d,!1}),c},a.fn.jstree=function(c){var d="string"==typeof c,e=Array.prototype.slice.call(arguments,1),f=null;return!(!0===c&&!this.length)&&(this.each(function(){var g=a.jstree.reference(this),h=d&&g?g[c]:null;if(f=d&&h?h.apply(g,e):null,g||d||c!==b&&!a.isPlainObject(c)||a.jstree.create(this,c),(g&&!d||!0===c)&&(f=g||!1),null!==f&&f!==b)return!1}),null!==f&&f!==b?f:this)},a.expr[":"].jstree=a.expr.createPseudo(function(c){return function(c){return a(c).hasClass("jstree")&&a(c).data("jstree")!==b}}),a.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:a.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},a.jstree.core.prototype={plugin:function(b,c){var d=a.jstree.plugins[b];return d?(this._data[b]={},d.prototype=this,new d(c,this)):this},init:function(b,c){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=a(b).addClass("jstree jstree-"+this._id),this.settings=c,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(a){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(a){}a||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var b="",c=null,d=0;this.element.on("dblclick.jstree",function(a){if(a.target.tagName&&"input"===a.target.tagName.toLowerCase())return!0;if(k.selection&&k.selection.empty)k.selection.empty();else if(window.getSelection){var b=window.getSelection();try{b.removeAllRanges(),b.collapse()}catch(a){}}}).on("mousedown.jstree",a.proxy(function(a){a.target===this.element[0]&&(a.preventDefault(),d=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(a){a.preventDefault()}).on("click.jstree",".jstree-ocl, :not('.jstree-leaf') .jstree-icon",a.proxy(function(a){this.toggle_node(a.target)},this)).on("dblclick.jstree",".jstree-anchor",a.proxy(function(a){if(a.target.tagName&&"input"===a.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(a.target)},this)).on("click.jstree",".jstree-anchor",a.proxy(function(b){b.preventDefault(),b.currentTarget!==k.activeElement&&a(b.currentTarget).focus(),this.activate_node(b.currentTarget,b)},this)).on("keydown.jstree",".jstree-anchor",a.proxy(function(b){if(b.target.tagName&&"input"===b.target.tagName.toLowerCase())return!0;if(32!==b.which&&13!==b.which&&(b.shiftKey||b.ctrlKey||b.altKey||b.metaKey))return!0;var c=null;switch(this._data.core.rtl&&(37===b.which?b.which=39:39===b.which&&(b.which=37)),b.which){case 32:b.ctrlKey&&(b.type="click",a(b.currentTarget).trigger(b));break;case 13:b.type="click",a(b.currentTarget).trigger(b);break;case 37:b.preventDefault(),this.is_open(b.currentTarget)?this.close_node(b.currentTarget):(c=this.get_parent(b.currentTarget))&&"#"!==c.id&&this.get_node(c,!0).children(".jstree-anchor").focus();break;case 38:b.preventDefault(),c=this.get_prev_dom(b.currentTarget),c&&c.length&&c.children(".jstree-anchor").focus();break;case 39:b.preventDefault(),this.is_closed(b.currentTarget)?this.open_node(b.currentTarget,function(a){this.get_node(a,!0).children(".jstree-anchor").focus()}):this.is_open(b.currentTarget)&&(c=this.get_node(b.currentTarget,!0).children(".jstree-children")[0])&&a(this._firstChild(c)).children(".jstree-anchor").focus();break;case 40:b.preventDefault(),c=this.get_next_dom(b.currentTarget),c&&c.length&&c.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:b.preventDefault(),c=this._firstChild(this.get_container_ul()[0]),c&&a(c).children(".jstree-anchor").filter(":visible").focus();break;case 35:b.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",a.proxy(function(b,c){c.status&&("#"!==c.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(a.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var b,c,d=[];for(b=0,c=this._data.core.selected.length;b<c;b++)d=d.concat(this._model.data[this._data.core.selected[b]].parents);for(d=a.vakata.array_unique(d),b=0,c=d.length;b<c;b++)this.open_node(d[b],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",a.proxy(function(d){if(d.target.tagName&&"input"===d.target.tagName.toLowerCase())return!0;c&&clearTimeout(c),c=setTimeout(function(){b=""},500);var e=String.fromCharCode(d.which).toLowerCase(),f=this.element.find(".jstree-anchor").filter(":visible"),g=f.index(k.activeElement)||0,h=!1;if(b+=e,b.length>1){if(f.slice(g).each(a.proxy(function(c,d){if(0===a(d).text().toLowerCase().indexOf(b))return a(d).focus(),h=!0,!1},this)),h)return;if(f.slice(0,g).each(a.proxy(function(c,d){if(0===a(d).text().toLowerCase().indexOf(b))return a(d).focus(),h=!0,!1},this)),h)return}if(new RegExp("^"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(b)){if(f.slice(g+1).each(a.proxy(function(b,c){if(a(c).text().toLowerCase().charAt(0)===e)return a(c).focus(),h=!0,!1},this)),h)return;if(f.slice(0,g+1).each(a.proxy(function(b,c){if(a(c).text().toLowerCase().charAt(0)===e)return a(c).focus(),h=!0,!1},this)),h)return}},this)).on("init.jstree",a.proxy(function(){var a=this.settings.core.themes;this._data.core.themes.dots=a.dots,this._data.core.themes.stripes=a.stripes,this._data.core.themes.icons=a.icons,this.set_theme(a.name||"default",a.url),this.set_theme_variant(a.variant)},this)).on("loading.jstree",a.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",a.proxy(function(b){this._data.core.focused=null,a(b.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",a.proxy(function(b){var c=this.get_node(b.currentTarget);c&&c.id&&(this._data.core.focused=c.id),this.element.find(".jstree-hovered").not(b.currentTarget).mouseleave(),a(b.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",a.proxy(function(){if(+new Date-d>500&&!this._data.core.focused){d=0;var a=this.get_node(this.element.attr("aria-activedescendant"),!0);a&&a.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",a.proxy(function(a){this.hover_node(a.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",a.proxy(function(a){this.dehover_node(a.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),a(k).off(".jstree-"+this._id)},trigger:function(a,b){b||(b={}),b.instance=this,this.element.triggerHandler(a.replace(".jstree","")+".jstree",b)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(b){var c=this.settings.core.strings;return a.isFunction(c)?c.call(this,b):c&&c[b]?c[b]:b},_firstChild:function(a){for(a=a?a.firstChild:null;null!==a&&1!==a.nodeType;)a=a.nextSibling;return a},_nextSibling:function(a){for(a=a?a.nextSibling:null;null!==a&&1!==a.nodeType;)a=a.nextSibling;return a},_previousSibling:function(a){for(a=a?a.previousSibling:null;null!==a&&1!==a.nodeType;)a=a.previousSibling;return a},get_node:function(b,c){b&&b.id&&(b=b.id);var d;try{if(this._model.data[b])b=this._model.data[b];else if("string"==typeof b&&this._model.data[b.replace(/^#/,"")])b=this._model.data[b.replace(/^#/,"")];else if("string"==typeof b&&(d=a("#"+b.replace(a.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[d.closest(".jstree-node").attr("id")])b=this._model.data[d.closest(".jstree-node").attr("id")];else if((d=a(b,this.element)).length&&this._model.data[d.closest(".jstree-node").attr("id")])b=this._model.data[d.closest(".jstree-node").attr("id")];else{if(!(d=a(b,this.element)).length||!d.hasClass("jstree"))return!1;b=this._model.data["#"]}return c&&(b="#"===b.id?this.element:a("#"+b.id.replace(a.jstree.idregex,"\\$&"),this.element)),b}catch(a){return!1}},get_path:function(a,b,c){if(!(a=a.parents?a:this.get_node(a))||"#"===a.id||!a.parents)return!1;var d,e,f=[];for(f.push(c?a.id:a.text),d=0,e=a.parents.length;d<e;d++)f.push(c?a.parents[d]:this.get_text(a.parents[d]));return f=f.reverse().slice(1),b?f.join(b):f},get_next_dom:function(b,c){var d;if(b=this.get_node(b,!0),b[0]===this.element[0]){for(d=this._firstChild(this.get_container_ul()[0]);d&&0===d.offsetHeight;)d=this._nextSibling(d);return!!d&&a(d)}if(!b||!b.length)return!1;if(c){d=b[0];do{d=this._nextSibling(d)}while(d&&0===d.offsetHeight);return!!d&&a(d)}if(b.hasClass("jstree-open")){for(d=this._firstChild(b.children(".jstree-children")[0]);d&&0===d.offsetHeight;)d=this._nextSibling(d);if(null!==d)return a(d)}d=b[0];do{d=this._nextSibling(d)}while(d&&0===d.offsetHeight);return null!==d?a(d):b.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(b,c){var d;if(b=this.get_node(b,!0),b[0]===this.element[0]){for(d=this.get_container_ul()[0].lastChild;d&&0===d.offsetHeight;)d=this._previousSibling(d);return!!d&&a(d)}if(!b||!b.length)return!1;if(c){d=b[0];do{d=this._previousSibling(d)}while(d&&0===d.offsetHeight);return!!d&&a(d)}d=b[0];do{d=this._previousSibling(d)}while(d&&0===d.offsetHeight);if(null!==d){for(b=a(d);b.hasClass("jstree-open");)b=b.children(".jstree-children").first().children(".jstree-node:visible:last");return b}return!(!(d=b[0].parentNode.parentNode)||!d.className||-1===d.className.indexOf("jstree-node"))&&a(d)},get_parent:function(a){return!(!(a=this.get_node(a))||"#"===a.id)&&a.parent},get_children_dom:function(a){return a=this.get_node(a,!0),a[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!a||!a.length)&&a.children(".jstree-children").children(".jstree-node")},is_parent:function(a){return(a=this.get_node(a))&&(!1===a.state.loaded||a.children.length>0)},is_loaded:function(a){return(a=this.get_node(a))&&a.state.loaded},is_loading:function(a){return(a=this.get_node(a))&&a.state&&a.state.loading},is_open:function(a){return(a=this.get_node(a))&&a.state.opened},is_closed:function(a){return(a=this.get_node(a))&&this.is_parent(a)&&!a.state.opened},is_leaf:function(a){return!this.is_parent(a)},load_node:function(b,c){var d,e,f,g,h;if(a.isArray(b))return this._load_nodes(b.slice(),c),!0;if(!(b=this.get_node(b)))return c&&c.call(this,b,!1),!1;if(b.state.loaded){for(b.state.loaded=!1,d=0,e=b.children_d.length;d<e;d++){for(f=0,g=b.parents.length;f<g;f++)this._model.data[b.parents[f]].children_d=a.vakata.array_remove_item(this._model.data[b.parents[f]].children_d,b.children_d[d]);this._model.data[b.children_d[d]].state.selected&&(h=!0,this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,b.children_d[d])),delete this._model.data[b.children_d[d]]}b.children=[],b.children_d=[],h&&this.trigger("changed",{action:"load_node",node:b,selected:this._data.core.selected})}return b.state.failed=!1,b.state.loading=!0,this.get_node(b,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(b,a.proxy(function(a){b=this._model.data[b.id],b.state.loading=!1,b.state.loaded=a,b.state.failed=!b.state.loaded;var d=this.get_node(b,!0);b.state.loaded&&!b.children.length&&d&&d.length&&!d.hasClass("jstree-leaf")&&d.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),d.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:b,status:a}),c&&c.call(this,b,a)},this)),!0},_load_nodes:function(a,b,c){var d,e,f=!0,g=function(){this._load_nodes(a,b,!0)},h=this._model.data,i=[];for(d=0,e=a.length;d<e;d++)!h[a[d]]||(h[a[d]].state.loaded||h[a[d]].state.failed)&&c||(this.is_loading(a[d])||this.load_node(a[d],g),f=!1);if(f){for(d=0,e=a.length;d<e;d++)h[a[d]]&&h[a[d]].state.loaded&&i.push(a[d]);b&&!b.done&&(b.call(this,i),b.done=!0)}},load_all:function(a,b){if(a||(a="#"),!(a=this.get_node(a)))return!1;var c,d,e=[],f=this._model.data,g=f[a.id].children_d;for(a.state&&!a.state.loaded&&e.push(a.id),c=0,d=g.length;c<d;c++)f[g[c]]&&f[g[c]].state&&!f[g[c]].state.loaded&&e.push(g[c]);e.length?this._load_nodes(e,function(){this.load_all(a,b)}):(b&&b.call(this,a),this.trigger("load_all",{node:a}))},_load_node:function(b,c){var d,e=this.settings.core.data;return e?a.isFunction(e)?e.call(this,b,a.proxy(function(d){!1===d&&c.call(this,!1),this["string"==typeof d?"_append_html_data":"_append_json_data"](b,"string"==typeof d?a(a.parseHTML(d)).filter(function(){return 3!==this.nodeType}):d,function(a){c.call(this,a)})},this)):"object"==typeof e?e.url?(e=a.extend(!0,{},e),a.isFunction(e.url)&&(e.url=e.url.call(this,b)),a.isFunction(e.data)&&(e.data=e.data.call(this,b)),a.ajax(e).done(a.proxy(function(d,e,f){var g=f.getResponseHeader("Content-Type");return g&&-1!==g.indexOf("json")||"object"==typeof d?this._append_json_data(b,d,function(a){c.call(this,a)}):g&&-1!==g.indexOf("html")||"string"==typeof d?this._append_html_data(b,a(a.parseHTML(d)).filter(function(){return 3!==this.nodeType}),function(a){c.call(this,a)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:b.id,xhr:f})},this.settings.core.error.call(this,this._data.core.last_error),c.call(this,!1))},this)).fail(a.proxy(function(a){c.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:b.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(d=a.isArray(e)||a.isPlainObject(e)?JSON.parse(JSON.stringify(e)):e,"#"===b.id?this._append_json_data(b,d,function(a){c.call(this,a)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:b.id})},this.settings.core.error.call(this,this._data.core.last_error),c.call(this,!1))):"string"==typeof e?"#"===b.id?this._append_html_data(b,a(a.parseHTML(e)).filter(function(){return 3!==this.nodeType}),function(a){c.call(this,a)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:b.id})},this.settings.core.error.call(this,this._data.core.last_error),c.call(this,!1)):c.call(this,!1):"#"===b.id?this._append_html_data(b,this._data.core.original_container_html.clone(!0),function(a){c.call(this,a)}):c.call(this,!1)},_node_changed:function(a){(a=this.get_node(a))&&this._model.changed.push(a.id)},_append_html_data:function(b,c,d){b=this.get_node(b),b.children=[],b.children_d=[];var e,f,g,h=c.is("ul")?c.children():c,i=b.id,j=[],k=[],l=this._model.data,m=l[i],n=this._data.core.selected.length;for(h.each(a.proxy(function(b,c){(e=this._parse_model_from_html(a(c),i,m.parents.concat()))&&(j.push(e),k.push(e),l[e].children_d.length&&(k=k.concat(l[e].children_d)))},this)),m.children=j,m.children_d=k,f=0,g=m.parents.length;f<g;f++)l[m.parents[f]].children_d=l[m.parents[f]].children_d.concat(k);this.trigger("model",{nodes:k,parent:i}),"#"!==i?(this._node_changed(i),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==n&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),d.call(this,!0)},_append_json_data:function(b,c,d,e){if(null!==this.element){b=this.get_node(b),b.children=[],b.children_d=[],c.d&&"string"==typeof(c=c.d)&&(c=JSON.parse(c)),a.isArray(c)||(c=[c]);var f=null,g={df:this._model.default_state,dat:c,par:b.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},h=function(a,b){a.data&&(a=a.data);var c,d,e,f,g=a.dat,h=a.par,i=[],j=[],k=[],l=a.df,m=a.t_id,n=a.t_cnt,o=a.m,p=o[h],q=a.sel,r=function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e,f,g,h,i=a.id.toString(),j={id:i,text:a.text||"",icon:a.icon===b||a.icon,parent:c,parents:d,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in l)l.hasOwnProperty(e)&&(j.state[e]=l[e]);if(a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(j.icon=a.data.jstree.icon),j.icon!==b&&null!==j.icon&&""!==j.icon||(j.icon=!0),a&&a.data&&(j.data=a.data,a.data.jstree))for(e in a.data.jstree)a.data.jstree.hasOwnProperty(e)&&(j.state[e]=a.data.jstree[e]);if(a&&"object"==typeof a.state)for(e in a.state)a.state.hasOwnProperty(e)&&(j.state[e]=a.state[e]);if(a&&"object"==typeof a.li_attr)for(e in a.li_attr)a.li_attr.hasOwnProperty(e)&&(j.li_attr[e]=a.li_attr[e]);if(j.li_attr.id||(j.li_attr.id=i),a&&"object"==typeof a.a_attr)for(e in a.a_attr)a.a_attr.hasOwnProperty(e)&&(j.a_attr[e]=a.a_attr[e]);for(a&&a.children&&!0===a.children&&(j.state.loaded=!1,j.children=[],j.children_d=[]),o[j.id]=j,e=0,f=j.children.length;e<f;e++)g=r(o[j.children[e]],j.id,d),h=o[g],j.children_d.push(g),h.children_d.length&&(j.children_d=j.children_d.concat(h.children_d));return delete a.data,delete a.children,o[j.id].original=a,j.state.selected&&k.push(j.id),j.id},s=function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e,f,g,h,i,j=!1;do{j="j"+m+"_"+ ++n}while(o[j]);i={id:!1,text:"string"==typeof a?a:"",icon:"object"!=typeof a||a.icon===b||a.icon,parent:c,parents:d,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in l)l.hasOwnProperty(e)&&(i.state[e]=l[e]);if(a&&a.id&&(i.id=a.id.toString()),a&&a.text&&(i.text=a.text),a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(i.icon=a.data.jstree.icon),i.icon!==b&&null!==i.icon&&""!==i.icon||(i.icon=!0),a&&a.data&&(i.data=a.data,a.data.jstree))for(e in a.data.jstree)a.data.jstree.hasOwnProperty(e)&&(i.state[e]=a.data.jstree[e]);if(a&&"object"==typeof a.state)for(e in a.state)a.state.hasOwnProperty(e)&&(i.state[e]=a.state[e]);if(a&&"object"==typeof a.li_attr)for(e in a.li_attr)a.li_attr.hasOwnProperty(e)&&(i.li_attr[e]=a.li_attr[e]);if(i.li_attr.id&&!i.id&&(i.id=i.li_attr.id.toString()),i.id||(i.id=j),i.li_attr.id||(i.li_attr.id=i.id),a&&"object"==typeof a.a_attr)for(e in a.a_attr)a.a_attr.hasOwnProperty(e)&&(i.a_attr[e]=a.a_attr[e]);if(a&&a.children&&a.children.length){for(e=0,f=a.children.length;e<f;e++)g=s(a.children[e],i.id,d),h=o[g],i.children.push(g),h.children_d.length&&(i.children_d=i.children_d.concat(h.children_d));i.children_d=i.children_d.concat(i.children)}return a&&a.children&&!0===a.children&&(i.state.loaded=!1,i.children=[],i.children_d=[]),delete a.data,delete a.children,i.original=a,o[i.id]=i,i.state.selected&&k.push(i.id),i.id};if(g.length&&g[0].id!==b&&g[0].parent!==b){for(d=0,e=g.length;d<e;d++)g[d].children||(g[d].children=[]),o[g[d].id.toString()]=g[d];for(d=0,e=g.length;d<e;d++)o[g[d].parent.toString()].children.push(g[d].id.toString()),p.children_d.push(g[d].id.toString());for(d=0,e=p.children.length;d<e;d++)c=r(o[p.children[d]],h,p.parents.concat()),j.push(c),o[c].children_d.length&&(j=j.concat(o[c].children_d));for(d=0,e=p.parents.length;d<e;d++)o[p.parents[d]].children_d=o[p.parents[d]].children_d.concat(j);f={cnt:n,mod:o,sel:q,par:h,dpc:j,add:k}}else{for(d=0,e=g.length;d<e;d++)(c=s(g[d],h,p.parents.concat()))&&(i.push(c),j.push(c),o[c].children_d.length&&(j=j.concat(o[c].children_d)));for(p.children=i,p.children_d=j,d=0,e=p.parents.length;d<e;d++)o[p.parents[d]].children_d=o[p.parents[d]].children_d.concat(j);f={cnt:n,mod:o,sel:q,par:h,dpc:j,add:k}}if("undefined"!=typeof window&&void 0!==window.document)return f;postMessage(f)},i=function(b,c){if(null!==this.element){if(this._cnt=b.cnt,this._model.data=b.mod,c){var e,f,g=b.add,h=b.sel,i=this._data.core.selected.slice(),j=this._model.data;if(h.length!==i.length||a.vakata.array_unique(h.concat(i)).length!==h.length){for(e=0,f=h.length;e<f;e++)-1===a.inArray(h[e],g)&&-1===a.inArray(h[e],i)&&(j[h[e]].state.selected=!1);for(e=0,f=i.length;e<f;e++)-1===a.inArray(i[e],h)&&(j[i[e]].state.selected=!0)}}b.add.length&&(this._data.core.selected=this._data.core.selected.concat(b.add)),this.trigger("model",{nodes:b.dpc,parent:b.par}),"#"!==b.par?(this._node_changed(b.par),this.redraw()):this.redraw(!0),b.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),d.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+h.toString()],{type:"text/javascript"}))),!this._data.core.working||e?(this._data.core.working=!0,f=new window.Worker(this._wrk),f.onmessage=a.proxy(function(a){i.call(this,a.data,!0);try{f.terminate(),f=null}catch(a){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),g.par?f.postMessage(g):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([b,c,d,!0])}catch(a){i.call(this,h(g),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else i.call(this,h(g),!1)}},_parse_model_from_html:function(c,d,e){e=e?[].concat(e):[],d&&e.unshift(d);var f,g,h,i,j,k=this._model.data,l={id:!1,text:!1,icon:!0,parent:d,parents:e,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(h in this._model.default_state)this._model.default_state.hasOwnProperty(h)&&(l.state[h]=this._model.default_state[h]);if(i=a.vakata.attributes(c,!0),a.each(i,function(b,c){if(c=a.trim(c),!c.length)return!0;l.li_attr[b]=c,"id"===b&&(l.id=c.toString())}),i=c.children("a").first(),i.length&&(i=a.vakata.attributes(i,!0),a.each(i,function(b,c){c=a.trim(c),c.length&&(l.a_attr[b]=c)})),i=c.children("a").first().length?c.children("a").first().clone():c.clone(),i.children("ins, i, ul").remove(),i=i.html(),i=a("<div />").html(i),l.text=this.settings.core.force_text?i.text():i.html(),i=c.data(),l.data=i?a.extend(!0,{},i):null,l.state.opened=c.hasClass("jstree-open"),l.state.selected=c.children("a").hasClass("jstree-clicked"),l.state.disabled=c.children("a").hasClass("jstree-disabled"),l.data&&l.data.jstree)for(h in l.data.jstree)l.data.jstree.hasOwnProperty(h)&&(l.state[h]=l.data.jstree[h]);i=c.children("a").children(".jstree-themeicon"),i.length&&(l.icon=!i.hasClass("jstree-themeicon-hidden")&&i.attr("rel")),l.state.icon!==b&&(l.icon=l.state.icon),l.icon!==b&&null!==l.icon&&""!==l.icon||(l.icon=!0),i=c.children("ul").children("li");do{j="j"+this._id+"_"+ ++this._cnt}while(k[j]);return l.id=l.li_attr.id?l.li_attr.id.toString():j,i.length?(i.each(a.proxy(function(b,c){f=this._parse_model_from_html(a(c),l.id,e),g=this._model.data[f],l.children.push(f),g.children_d.length&&(l.children_d=l.children_d.concat(g.children_d))},this)),l.children_d=l.children_d.concat(l.children)):c.hasClass("jstree-closed")&&(l.state.loaded=!1),l.li_attr.class&&(l.li_attr.class=l.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),l.a_attr.class&&(l.a_attr.class=l.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),k[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_flat_json:function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e,f,g,h,i=a.id.toString(),j=this._model.data,k=this._model.default_state,l={id:i,text:a.text||"",icon:a.icon===b||a.icon,parent:c,parents:d,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in k)k.hasOwnProperty(e)&&(l.state[e]=k[e]);if(a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(l.icon=a.data.jstree.icon),l.icon!==b&&null!==l.icon&&""!==l.icon||(l.icon=!0),a&&a.data&&(l.data=a.data,a.data.jstree))for(e in a.data.jstree)a.data.jstree.hasOwnProperty(e)&&(l.state[e]=a.data.jstree[e]);if(a&&"object"==typeof a.state)for(e in a.state)a.state.hasOwnProperty(e)&&(l.state[e]=a.state[e]);if(a&&"object"==typeof a.li_attr)for(e in a.li_attr)a.li_attr.hasOwnProperty(e)&&(l.li_attr[e]=a.li_attr[e]);if(l.li_attr.id||(l.li_attr.id=i),a&&"object"==typeof a.a_attr)for(e in a.a_attr)a.a_attr.hasOwnProperty(e)&&(l.a_attr[e]=a.a_attr[e]);for(a&&a.children&&!0===a.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),j[l.id]=l,e=0,f=l.children.length;e<f;e++)g=this._parse_model_from_flat_json(j[l.children[e]],l.id,d),h=j[g],l.children_d.push(g),h.children_d.length&&(l.children_d=l.children_d.concat(h.children_d));return delete a.data,delete a.children,j[l.id].original=a,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e,f,g,h,i,j=!1,k=this._model.data,l=this._model.default_state;do{j="j"+this._id+"_"+ ++this._cnt}while(k[j]);i={id:!1,text:"string"==typeof a?a:"",icon:"object"!=typeof a||a.icon===b||a.icon,parent:c,parents:d,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in l)l.hasOwnProperty(e)&&(i.state[e]=l[e]);if(a&&a.id&&(i.id=a.id.toString()),a&&a.text&&(i.text=a.text),a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(i.icon=a.data.jstree.icon),i.icon!==b&&null!==i.icon&&""!==i.icon||(i.icon=!0),a&&a.data&&(i.data=a.data,a.data.jstree))for(e in a.data.jstree)a.data.jstree.hasOwnProperty(e)&&(i.state[e]=a.data.jstree[e]);if(a&&"object"==typeof a.state)for(e in a.state)a.state.hasOwnProperty(e)&&(i.state[e]=a.state[e]);if(a&&"object"==typeof a.li_attr)for(e in a.li_attr)a.li_attr.hasOwnProperty(e)&&(i.li_attr[e]=a.li_attr[e]);if(i.li_attr.id&&!i.id&&(i.id=i.li_attr.id.toString()),i.id||(i.id=j),i.li_attr.id||(i.li_attr.id=i.id),a&&"object"==typeof a.a_attr)for(e in a.a_attr)a.a_attr.hasOwnProperty(e)&&(i.a_attr[e]=a.a_attr[e]);if(a&&a.children&&a.children.length){for(e=0,f=a.children.length;e<f;e++)g=this._parse_model_from_json(a.children[e],i.id,d),h=k[g],i.children.push(g),h.children_d.length&&(i.children_d=i.children_d.concat(h.children_d));i.children_d=i.children_d.concat(i.children)}return a&&a.children&&!0===a.children&&(i.state.loaded=!1,i.children=[],i.children_d=[]),delete a.data,delete a.children,i.original=a,k[i.id]=i,i.state.selected&&this._data.core.selected.push(i.id),i.id},_redraw:function(){var a,b,c,d=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),e=k.createElement("UL"),f=this._data.core.focused;for(b=0,c=d.length;b<c;b++)(a=this.redraw_node(d[b],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&e.appendChild(a);this._model.force_full_redraw&&(e.className=this.get_container_ul()[0].className,e.setAttribute("role","group"),this.element.empty().append(e)),null!==f&&(a=this.get_node(f,!0),a&&a.length&&a.children(".jstree-anchor")[0]!==k.activeElement?a.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:d})},redraw:function(a){a&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(a){var b=this.get_node(a),c=!1,d=!1,e=!1,f=k;if(!b)return!1;if("#"===b.id)return this.redraw(!0);if(!(a=this.get_node(a,!0))||!a.length)return!1;if(a.children(".jstree-children").remove(),a=a[0],b.children.length&&b.state.loaded){for(e=f.createElement("UL"),e.setAttribute("role","group"),e.className="jstree-children",c=0,d=b.children.length;c<d;c++)e.appendChild(this.redraw_node(b.children[c],!0,!0));a.appendChild(e)}},redraw_node:function(b,c,d,e){var f=this.get_node(b),g=!1,h=!1,i=!1,j=!1,m=!1,n=!1,o="",p=k,q=this._model.data,r=!1,s=null,t=0,u=0;if(!f)return!1;if("#"===f.id)return this.redraw(!0);if(c=c||0===f.children.length,b=k.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(f.id[0])?"\\3"+f.id[0]+" "+f.id.substr(1).replace(a.jstree.idregex,"\\$&"):f.id.replace(a.jstree.idregex,"\\$&"))):k.getElementById(f.id))b=a(b),d||(g=b.parent().parent()[0],g===this.element[0]&&(g=null),h=b.index()),c||!f.children.length||b.children(".jstree-children").length||(c=!0),c||(i=b.children(".jstree-children")[0]),r=b.children(".jstree-anchor")[0]===k.activeElement,b.remove();else if(c=!0,!d){if(!(null===(g="#"!==f.parent?a("#"+f.parent.replace(a.jstree.idregex,"\\$&"),this.element)[0]:null)||g&&q[f.parent].state.opened))return!1;h=a.inArray(f.id,null===g?q["#"].children:q[f.parent].children)}b=l.cloneNode(!0),o="jstree-node ";for(j in f.li_attr)if(f.li_attr.hasOwnProperty(j)){if("id"===j)continue;"class"!==j?b.setAttribute(j,f.li_attr[j]):o+=f.li_attr[j]}f.a_attr.id||(f.a_attr.id=f.id+"_anchor"),b.setAttribute("aria-selected",!!f.state.selected),b.setAttribute("aria-level",f.parents.length),b.setAttribute("aria-labelledby",f.a_attr.id),f.state.disabled&&b.setAttribute("aria-disabled",!0),f.state.loaded&&!f.children.length?o+=" jstree-leaf":(o+=f.state.opened&&f.state.loaded?" jstree-open":" jstree-closed",b.setAttribute("aria-expanded",f.state.opened&&f.state.loaded)),null!==f.parent&&q[f.parent].children[q[f.parent].children.length-1]===f.id&&(o+=" jstree-last"),b.id=f.id,b.className=o,o=(f.state.selected?" jstree-clicked":"")+(f.state.disabled?" jstree-disabled":"");for(m in f.a_attr)if(f.a_attr.hasOwnProperty(m)){if("href"===m&&"#"===f.a_attr[m])continue;"class"!==m?b.childNodes[1].setAttribute(m,f.a_attr[m]):o+=" "+f.a_attr[m]}if(o.length&&(b.childNodes[1].className="jstree-anchor "+o),(f.icon&&!0!==f.icon||!1===f.icon)&&(!1===f.icon?b.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===f.icon.indexOf("/")&&-1===f.icon.indexOf(".")?b.childNodes[1].childNodes[0].className+=" "+f.icon+" jstree-themeicon-custom":(b.childNodes[1].childNodes[0].style.backgroundImage="url("+f.icon+")",b.childNodes[1].childNodes[0].style.backgroundPosition="center center",b.childNodes[1].childNodes[0].style.backgroundSize="auto",b.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?b.childNodes[1].appendChild(p.createTextNode(f.text)):b.childNodes[1].innerHTML+=f.text,c&&f.children.length&&(f.state.opened||e)&&f.state.loaded){for(n=p.createElement("UL"),n.setAttribute("role","group"),n.className="jstree-children",j=0,m=f.children.length;j<m;j++)n.appendChild(this.redraw_node(f.children[j],c,!0));b.appendChild(n)}if(i&&b.appendChild(i),!d){for(g||(g=this.element[0]),j=0,m=g.childNodes.length;j<m;j++)if(g.childNodes[j]&&g.childNodes[j].className&&-1!==g.childNodes[j].className.indexOf("jstree-children")){s=g.childNodes[j];break}s||(s=p.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",g.appendChild(s)),g=s,h<g.childNodes.length?g.insertBefore(b,g.childNodes[h]):g.appendChild(b),r&&(t=this.element[0].scrollTop,u=this.element[0].scrollLeft,b.childNodes[1].focus(),this.element[0].scrollTop=t,this.element[0].scrollLeft=u)}return f.state.opened&&!f.state.loaded&&(f.state.opened=!1,setTimeout(a.proxy(function(){this.open_node(f.id,!1,0)},this),0)),b},open_node:function(c,d,e){var f,g,h,i;if(a.isArray(c)){for(c=c.slice(),f=0,g=c.length;f<g;f++)this.open_node(c[f],d,e);return!0}if(!(c=this.get_node(c))||"#"===c.id)return!1;if(e=e===b?this.settings.core.animation:e,!this.is_closed(c))return d&&d.call(this,c,!1),!1;if(this.is_loaded(c))h=this.get_node(c,!0),i=this,h.length&&(e&&h.children(".jstree-children").length&&h.children(".jstree-children").stop(!0,!0),c.children.length&&!this._firstChild(h.children(".jstree-children")[0])&&this.draw_children(c),e?(this.trigger("before_open",{node:c}),h.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(e,function(){this.style.display="",i.trigger("after_open",{node:c})})):(this.trigger("before_open",{node:c}),h[0].className=h[0].className.replace("jstree-closed","jstree-open"),h[0].setAttribute("aria-expanded",!0))),c.state.opened=!0,d&&d.call(this,c,!0),h.length||this.trigger("before_open",{node:c}),this.trigger("open_node",{node:c}),e&&h.length||this.trigger("after_open",{node:c});else{if(this.is_loading(c))return setTimeout(a.proxy(function(){this.open_node(c,d,e)},this),500);this.load_node(c,function(a,b){return b?this.open_node(a,d,e):!!d&&d.call(this,a,!1)})}},_open_to:function(b){if(!(b=this.get_node(b))||"#"===b.id)return!1;var c,d,e=b.parents;for(c=0,d=e.length;c<d;c+=1)"#"!==c&&this.open_node(e[c],!1,0);return a("#"+b.id.replace(a.jstree.idregex,"\\$&"),this.element)},close_node:function(c,d){var e,f,g,h;if(a.isArray(c)){for(c=c.slice(),e=0,f=c.length;e<f;e++)this.close_node(c[e],d);return!0}return!(!(c=this.get_node(c))||"#"===c.id)&&(!this.is_closed(c)&&(d=d===b?this.settings.core.animation:d,g=this,h=this.get_node(c,!0),h.length&&(d?h.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(d,function(){this.style.display="",h.children(".jstree-children").remove(),g.trigger("after_close",{node:c})}):(h[0].className=h[0].className.replace("jstree-open","jstree-closed"),h.attr("aria-expanded",!1).children(".jstree-children").remove())),c.state.opened=!1,this.trigger("close_node",{node:c}),void(d&&h.length||this.trigger("after_close",{node:c}))))},toggle_node:function(b){var c,d;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.toggle_node(b[c]);return!0}return this.is_closed(b)?this.open_node(b):this.is_open(b)?this.close_node(b):void 0},open_all:function(a,b,c){if(a||(a="#"),!(a=this.get_node(a)))return!1;var d,e,f,g="#"===a.id?this.get_container_ul():this.get_node(a,!0);if(!g.length){for(d=0,e=a.children_d.length;d<e;d++)this.is_closed(this._model.data[a.children_d[d]])&&(this._model.data[a.children_d[d]].state.opened=!0);return this.trigger("open_all",{node:a})}c=c||g,f=this,g=this.is_closed(a)?g.find(".jstree-closed").addBack():g.find(".jstree-closed"),g.each(function(){f.open_node(this,function(a,d){d&&this.is_parent(a)&&this.open_all(a,b,c)},b||0)}),0===c.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(c)})},close_all:function(b,c){if(b||(b="#"),!(b=this.get_node(b)))return!1;var d,e,f="#"===b.id?this.get_container_ul():this.get_node(b,!0),g=this;for(f.length&&(f=this.is_open(b)?f.find(".jstree-open").addBack():f.find(".jstree-open"),a(f.get().reverse()).each(function(){g.close_node(this,c||0)})),d=0,e=b.children_d.length;d<e;d++)this._model.data[b.children_d[d]].state.opened=!1;this.trigger("close_all",{node:b})},is_disabled:function(a){return(a=this.get_node(a))&&a.state&&a.state.disabled},enable_node:function(b){var c,d;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.enable_node(b[c]);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;b.state.disabled=!1,this.get_node(b,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:b})},disable_node:function(b){var c,d;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.disable_node(b[c]);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;b.state.disabled=!0,this.get_node(b,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:b})},activate_node:function(a,c){if(this.is_disabled(a))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==b?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(c.metaKey||c.ctrlKey||c.shiftKey)&&(!c.shiftKey||this._data.core.last_clicked&&this.get_parent(a)&&this.get_parent(a)===this._data.core.last_clicked.parent))if(c.shiftKey){var d,e,f=this.get_node(a).id,g=this._data.core.last_clicked.id,h=this.get_node(this._data.core.last_clicked.parent).children,i=!1;for(d=0,e=h.length;d<e;d+=1)h[d]===f&&(i=!i),h[d]===g&&(i=!i),this.is_disabled(h[d])||!i&&h[d]!==f&&h[d]!==g?this.deselect_node(h[d],!0,c):this.select_node(h[d],!0,!1,c);this.trigger("changed",{action:"select_node",node:this.get_node(a),selected:this._data.core.selected,event:c})}else this.is_selected(a)?this.deselect_node(a,!1,c):this.select_node(a,!1,!1,c);else!this.settings.core.multiple&&(c.metaKey||c.ctrlKey||c.shiftKey)&&this.is_selected(a)?this.deselect_node(a,!1,c):(this.deselect_all(!0),this.select_node(a,!1,!1,c),this._data.core.last_clicked=this.get_node(a));this.trigger("activate_node",{node:this.get_node(a)})},hover_node:function(a){if(!(a=this.get_node(a,!0))||!a.length||a.children(".jstree-hovered").length)return!1;var b=this.element.find(".jstree-hovered"),c=this.element;b&&b.length&&this.dehover_node(b),a.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(a)}),setTimeout(function(){c.attr("aria-activedescendant",a[0].id)},0)},dehover_node:function(a){if(!(a=this.get_node(a,!0))||!a.length||!a.children(".jstree-hovered").length)return!1;a.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(a)})},select_node:function(b,c,d,e){var f,g,h;if(a.isArray(b)){for(b=b.slice(),g=0,h=b.length;g<h;g++)this.select_node(b[g],c,d,e);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;f=this.get_node(b,!0),b.state.selected||(b.state.selected=!0,this._data.core.selected.push(b.id),d||(f=this._open_to(b)),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:b,selected:this._data.core.selected,event:e}),c||this.trigger("changed",{action:"select_node",node:b,selected:this._data.core.selected,event:e}))},deselect_node:function(b,c,d){var e,f,g;if(a.isArray(b)){for(b=b.slice(),e=0,f=b.length;e<f;e++)this.deselect_node(b[e],c,d);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;g=this.get_node(b,!0),b.state.selected&&(b.state.selected=!1,this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,b.id),g.length&&g.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:b,selected:this._data.core.selected,event:d}),c||this.trigger("changed",{action:"deselect_node",node:b,selected:this._data.core.selected,event:d}))},select_all:function(a){var b,c,d=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),b=0,c=this._data.core.selected.length;b<c;b++)this._model.data[this._data.core.selected[b]]&&(this._model.data[this._data.core.selected[b]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),a||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:d})},deselect_all:function(a){var b,c,d=this._data.core.selected.concat([]);for(b=0,c=this._data.core.selected.length;b<c;b++)this._model.data[this._data.core.selected[b]]&&(this._model.data[this._data.core.selected[b]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:d}),a||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:d})},is_selected:function(a){return!(!(a=this.get_node(a))||"#"===a.id)&&a.state.selected},get_selected:function(b){return b?a.map(this._data.core.selected,a.proxy(function(a){return this.get_node(a)},this)):this._data.core.selected.slice()},get_top_selected:function(b){var c,d,e,f,g=this.get_selected(!0),h={};for(c=0,d=g.length;c<d;c++)h[g[c].id]=g[c];for(c=0,d=g.length;c<d;c++)for(e=0,f=g[c].children_d.length;e<f;e++)h[g[c].children_d[e]]&&delete h[g[c].children_d[e]];g=[];for(c in h)h.hasOwnProperty(c)&&g.push(c);return b?a.map(g,a.proxy(function(a){return this.get_node(a)},this)):g},get_bottom_selected:function(b){var c,d,e=this.get_selected(!0),f=[];for(c=0,d=e.length;c<d;c++)e[c].children.length||f.push(e[c].id);return b?a.map(f,a.proxy(function(a){return this.get_node(a)},this)):f},get_state:function(){var a,b={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(a in this._model.data)this._model.data.hasOwnProperty(a)&&"#"!==a&&(this._model.data[a].state.opened&&b.core.open.push(a),this._model.data[a].state.selected&&b.core.selected.push(a));return b},set_state:function(c,d){if(c){if(c.core){var e,f;if(c.core.open)return a.isArray(c.core.open)&&c.core.open.length?this._load_nodes(c.core.open,function(a){this.open_node(a,!1,0),delete c.core.open,this.set_state(c,d)},!0):(delete c.core.open,this.set_state(c,d)),!1;if(c.core.scroll)return c.core.scroll&&c.core.scroll.left!==b&&this.element.scrollLeft(c.core.scroll.left),c.core.scroll&&c.core.scroll.top!==b&&this.element.scrollTop(c.core.scroll.top),delete c.core.scroll,this.set_state(c,d),!1;if(c.core.selected)return e=this,this.deselect_all(),a.each(c.core.selected,function(a,b){e.select_node(b,!1,!0)}),delete c.core.selected,this.set_state(c,d),!1;for(f in c)c.hasOwnProperty(f)&&"core"!==f&&-1===a.inArray(f,this.settings.plugins)&&delete c[f];if(a.isEmptyObject(c.core))return delete c.core,this.set_state(c,d),!1}return!a.isEmptyObject(c)||(c=null,d&&d.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(b,c){this._data.core.state=!0===c?{}:this.get_state(),c&&a.isFunction(c)&&(this._data.core.state=c.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var d=this.get_container_ul()[0].className;b||(this.element.html("<ul class='"+d+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(b,c){c&&(this.get_container_ul()[0].className=d,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(a.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(b){if(!(b=this.get_node(b))||"#"===b.id)return!1;var c=[],d=[];this._data.core.selected.concat([]);d.push(b.id),!0===b.state.opened&&c.push(b.id),this.get_node(b,!0).find(".jstree-open").each(function(){c.push(this.id)}),this._load_nodes(d,a.proxy(function(a){this.open_node(c,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:b,nodes:a})},this))},set_id:function(b,c){if(!(b=this.get_node(b))||"#"===b.id)return!1;var d,e,f=this._model.data;for(c=c.toString(),f[b.parent].children[a.inArray(b.id,f[b.parent].children)]=c,d=0,e=b.parents.length;d<e;d++)f[b.parents[d]].children_d[a.inArray(b.id,f[b.parents[d]].children_d)]=c;for(d=0,e=b.children.length;d<e;d++)f[b.children[d]].parent=c;for(d=0,e=b.children_d.length;d<e;d++)f[b.children_d[d]].parents[a.inArray(b.id,f[b.children_d[d]].parents)]=c;return d=a.inArray(b.id,this._data.core.selected),-1!==d&&(this._data.core.selected[d]=c),d=this.get_node(b.id,!0),d&&(d.attr("id",c).children(".jstree-anchor").attr("id",c+"_anchor").end().attr("aria-labelledby",c+"_anchor"),this.element.attr("aria-activedescendant")===b.id&&this.element.attr("aria-activedescendant",c)),delete f[b.id],b.id=c,b.li_attr.id=c,f[c]=b,!0},get_text:function(a){return!(!(a=this.get_node(a))||"#"===a.id)&&a.text},set_text:function(b,c){var d,e;if(a.isArray(b)){for(b=b.slice(),d=0,e=b.length;d<e;d++)this.set_text(b[d],c);return!0}return!(!(b=this.get_node(b))||"#"===b.id)&&(b.text=c,this.get_node(b,!0).length&&this.redraw_node(b.id),this.trigger("set_text",{obj:b,text:c}),!0)},get_json:function(b,c,d){if(!(b=this.get_node(b||"#")))return!1;c&&c.flat&&!d&&(d=[]);var e,f,g={id:b.id,text:b.text,icon:this.get_icon(b),li_attr:a.extend(!0,{},b.li_attr),a_attr:a.extend(!0,{},b.a_attr),state:{},data:(!c||!c.no_data)&&a.extend(!0,{},b.data)};if(c&&c.flat?g.parent=b.parent:g.children=[],!c||!c.no_state)for(e in b.state)b.state.hasOwnProperty(e)&&(g.state[e]=b.state[e]);if(c&&c.no_id&&(delete g.id,g.li_attr&&g.li_attr.id&&delete g.li_attr.id,g.a_attr&&g.a_attr.id&&delete g.a_attr.id),c&&c.flat&&"#"!==b.id&&d.push(g),!c||!c.no_children)for(e=0,f=b.children.length;e<f;e++)c&&c.flat?this.get_json(b.children[e],c,d):g.children.push(this.get_json(b.children[e],c));return c&&c.flat?d:"#"===b.id?g.children:g},create_node:function(c,d,e,f,g){if(null===c&&(c="#"),!(c=this.get_node(c)))return!1;if(e=e===b?"last":e,!e.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(c))return this.load_node(c,function(){this.create_node(c,d,e,f,!0)});d||(d={text:this.get_string("New node")}),"string"==typeof d&&(d={text:d}),d.text===b&&(d.text=this.get_string("New node"));var h,i,j,k;switch("#"===c.id&&("before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":h=this.get_node(c.parent),e=a.inArray(c.id,h.children),c=h;break;case"after":h=this.get_node(c.parent),e=a.inArray(c.id,h.children)+1,c=h;break;case"inside":case"first":e=0;break;case"last":e=c.children.length;break;default:e||(e=0)}if(e>c.children.length&&(e=c.children.length),d.id||(d.id=!0),!this.check("create_node",d,c,e))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===d.id&&delete d.id,!(d=this._parse_model_from_json(d,c.id,c.parents.concat())))return!1;for(h=this.get_node(d),i=[],i.push(d),i=i.concat(h.children_d),this.trigger("model",{nodes:i,parent:c.id}),c.children_d=c.children_d.concat(i),j=0,k=c.parents.length;j<k;j++)this._model.data[c.parents[j]].children_d=this._model.data[c.parents[j]].children_d.concat(i);for(d=h,h=[],j=0,k=c.children.length;j<k;j++)h[j>=e?j+1:j]=c.children[j];return h[e]=d.id,c.children=h,this.redraw_node(c,!0),f&&f.call(this,this.get_node(d)),this.trigger("create_node",{node:this.get_node(d),parent:c.id,position:e}),d.id},rename_node:function(b,c){var d,e,f;if(a.isArray(b)){for(b=b.slice(),d=0,e=b.length;d<e;d++)this.rename_node(b[d],c);return!0}return!(!(b=this.get_node(b))||"#"===b.id)&&(f=b.text,this.check("rename_node",b,this.get_parent(b),c)?(this.set_text(b,c),this.trigger("rename_node",{node:b,text:c,old:f}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(b){var c,d,e,f,g,h,i,j,k,l;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.delete_node(b[c]);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;if(e=this.get_node(b.parent),f=a.inArray(b.id,e.children),l=!1,!this.check("delete_node",b,e,f))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==f&&(e.children=a.vakata.array_remove(e.children,f)),g=b.children_d.concat([]),g.push(b.id),j=0,k=g.length;j<k;j++){for(h=0,i=b.parents.length;h<i;h++)-1!==(f=a.inArray(g[j],this._model.data[b.parents[h]].children_d))&&(this._model.data[b.parents[h]].children_d=a.vakata.array_remove(this._model.data[b.parents[h]].children_d,f));this._model.data[g[j]].state.selected&&(l=!0,-1!==(f=a.inArray(g[j],this._data.core.selected))&&(this._data.core.selected=a.vakata.array_remove(this._data.core.selected,f)))}for(this.trigger("delete_node",{node:b,parent:e.id}),l&&this.trigger("changed",{action:"delete_node",node:b,selected:this._data.core.selected,parent:e.id}),j=0,k=g.length;j<k;j++)delete this._model.data[g[j]];return this.redraw_node(e,!0),!0},check:function(b,c,d,e,f){c=c&&c.id?c:this.get_node(c),d=d&&d.id?d:this.get_node(d);var g=b.match(/^move_node|copy_node|create_node$/i)?d:c,h=this.settings.core.check_callback;return"move_node"!==b&&"copy_node"!==b||f&&f.is_multi||c.id!==d.id&&a.inArray(c.id,d.children)!==e&&-1===a.inArray(d.id,c.children_d)?(g&&g.data&&(g=g.data),g&&g.functions&&(!1===g.functions[b]||!0===g.functions[b])?(!1===g.functions[b]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+b,data:JSON.stringify({chk:b,pos:e,obj:!(!c||!c.id)&&c.id,par:!(!d||!d.id)&&d.id})}),g.functions[b]):!(!1===h||a.isFunction(h)&&!1===h.call(this,b,c,d,e,f)||h&&!1===h[b])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+b,data:JSON.stringify({chk:b,pos:e,obj:!(!c||!c.id)&&c.id,par:!(!d||!d.id)&&d.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:b,pos:e,obj:!(!c||!c.id)&&c.id,par:!(!d||!d.id)&&d.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(d=this.get_node(d),e=e===b?0:e,!d)return!1;if(!e.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(d))return this.load_node(d,function(){this.move_node(c,d,e,f,!0,!1,i)});if(a.isArray(c)){if(1!==c.length){for(j=0,k=c.length;j<k;j++)(r=this.move_node(c[j],d,e,f,g,!1,i))&&(d=r,e="after");return this.redraw(),!0}c=c[0]}if(!(c=c&&c.id?c:this.get_node(c))||"#"===c.id)return!1;if(l=(c.parent||"#").toString(),n=e.toString().match(/^(before|after)$/)&&"#"!==d.id?this.get_node(d.parent):d,o=i||(this._model.data[c.id]?this:a.jstree.reference(c.id)),p=!o||!o._id||this._id!==o._id,m=o&&o._id&&l&&o._model.data[l]&&o._model.data[l].children?a.inArray(c.id,o._model.data[l].children):-1,o&&o._id&&(c=o._model.data[c.id]),p)return!!(r=this.copy_node(c,d,e,f,g,!1,i))&&(o&&o.delete_node(c),r);switch("#"===d.id&&("before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":e=a.inArray(d.id,n.children);break;case"after":e=a.inArray(d.id,n.children)+1;break;case"inside":case"first":e=0;break;case"last":e=n.children.length;break;default:e||(e=0)}if(e>n.children.length&&(e=n.children.length),!this.check("move_node",c,n,e,{core:!0,origin:i,is_multi:o&&o._id&&o._id!==this._id,is_foreign:!o||!o._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(c.parent===n.id){for(q=n.children.concat(),r=a.inArray(c.id,q),-1!==r&&(q=a.vakata.array_remove(q,r),e>r&&e--),r=[],s=0,t=q.length;s<t;s++)r[s>=e?s+1:s]=q[s];r[e]=c.id,n.children=r,this._node_changed(n.id),this.redraw("#"===n.id)}else{for(r=c.children_d.concat(),r.push(c.id),s=0,t=c.parents.length;s<t;s++){for(q=[],w=o._model.data[c.parents[s]].children_d,u=0,v=w.length;u<v;u++)-1===a.inArray(w[u],r)&&q.push(w[u]);o._model.data[c.parents[s]].children_d=q}for(o._model.data[l].children=a.vakata.array_remove_item(o._model.data[l].children,c.id),s=0,t=n.parents.length;s<t;s++)this._model.data[n.parents[s]].children_d=this._model.data[n.parents[s]].children_d.concat(r);for(q=[],s=0,t=n.children.length;s<t;s++)q[s>=e?s+1:s]=n.children[s];for(q[e]=c.id,n.children=q,n.children_d.push(c.id),n.children_d=n.children_d.concat(c.children_d),c.parent=n.id,r=n.parents.concat(),r.unshift(n.id),w=c.parents.length,c.parents=r,r=r.concat(),s=0,t=c.children_d.length;s<t;s++)this._model.data[c.children_d[s]].parents=this._model.data[c.children_d[s]].parents.slice(0,-1*w),Array.prototype.push.apply(this._model.data[c.children_d[s]].parents,r);"#"!==l&&"#"!==n.id||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(l),this._node_changed(n.id)),h||this.redraw()}return f&&f.call(this,c,n,e),this.trigger("move_node",{node:c,parent:n.id,position:e,old_parent:l,old_position:m,is_multi:o&&o._id&&o._id!==this._id,is_foreign:!o||!o._id,old_instance:o,new_instance:this}),c.id},copy_node:function(c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s;if(d=this.get_node(d),e=e===b?0:e,!d)return!1;if(!e.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(d))return this.load_node(d,function(){this.copy_node(c,d,e,f,!0,!1,i)});if(a.isArray(c)){if(1!==c.length){for(j=0,k=c.length;j<k;j++)(m=this.copy_node(c[j],d,e,f,g,!0,i))&&(d=m,e="after");return this.redraw(),!0}c=c[0]}if(!(c=c&&c.id?c:this.get_node(c))||"#"===c.id)return!1;switch(q=(c.parent||"#").toString(),r=e.toString().match(/^(before|after)$/)&&"#"!==d.id?this.get_node(d.parent):d,s=i||(this._model.data[c.id]?this:a.jstree.reference(c.id)),!s||!s._id||this._id!==s._id,s&&s._id&&(c=s._model.data[c.id]),"#"===d.id&&("before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":e=a.inArray(d.id,r.children);break;case"after":e=a.inArray(d.id,r.children)+1;break;case"inside":case"first":e=0;break;case"last":e=r.children.length;break;default:e||(e=0)}if(e>r.children.length&&(e=r.children.length),!this.check("copy_node",c,r,e,{core:!0,origin:i,is_multi:s&&s._id&&s._id!==this._id,is_foreign:!s||!s._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(p=s?s.get_json(c,{no_id:!0,no_data:!0,no_state:!0}):c))return!1;if(!0===p.id&&delete p.id,!(p=this._parse_model_from_json(p,r.id,r.parents.concat())))return!1;for(m=this.get_node(p),c&&c.state&&!1===c.state.loaded&&(m.state.loaded=!1),l=[],l.push(p),l=l.concat(m.children_d),this.trigger("model",{nodes:l,parent:r.id}),n=0,o=r.parents.length;n<o;n++)this._model.data[r.parents[n]].children_d=this._model.data[r.parents[n]].children_d.concat(l);for(l=[],n=0,o=r.children.length;n<o;n++)l[n>=e?n+1:n]=r.children[n];return l[e]=m.id,r.children=l,r.children_d.push(m.id),r.children_d=r.children_d.concat(m.children_d),"#"===r.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(r.id),h||this.redraw("#"===r.id),f&&f.call(this,m,r,e),this.trigger("copy_node",{node:m,original:c,parent:r.id,position:e,old_parent:q,old_position:s&&s._id&&q&&s._model.data[q]&&s._model.data[q].children?a.inArray(c.id,s._model.data[q].children):-1,is_multi:s&&s._id&&s._id!==this._id,is_foreign:!s||!s._id,old_instance:s,new_instance:this}),m.id},cut:function(b){if(b||(b=this._data.core.selected.concat()),a.isArray(b)||(b=[b]),!b.length)return!1;var c,d,e,i=[];for(d=0,e=b.length;d<e;d++)(c=this.get_node(b[d]))&&c.id&&"#"!==c.id&&i.push(c);if(!i.length)return!1;f=i,h=this,g="move_node",this.trigger("cut",{node:b})},copy:function(b){if(b||(b=this._data.core.selected.concat()),a.isArray(b)||(b=[b]),!b.length)return!1;var c,d,e,i=[];for(d=0,e=b.length;d<e;d++)(c=this.get_node(b[d]))&&c.id&&"#"!==c.id&&i.push(c);if(!i.length)return!1;f=i,h=this,g="copy_node",this.trigger("copy",{node:b})},get_buffer:function(){return{mode:g,node:f,inst:h}},can_paste:function(){return!1!==g&&!1!==f},paste:function(a,b){if(!((a=this.get_node(a))&&g&&g.match(/^(copy_node|move_node)$/)&&f))return!1;this[g](f,a,b,!1,!1,!1,h)&&this.trigger("paste",{parent:a.id,node:f,mode:g}),f=!1,g=!1,h=!1},clear_buffer:function(){f=!1,g=!1,h=!1,this.trigger("clear_buffer")},edit:function(b,c,d){var e,f,g,h,i,j,k,l,m;return!!(b=this.get_node(b))&&(!1===this.settings.core.check_callback?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(m=b,c="string"==typeof c?c:b.text,this.set_text(b,""),b=this._open_to(b),m.text=c,e=this._data.core.rtl,f=this.element.width(),g=b.children(".jstree-anchor"),h=a("<span>"),i=c,j=a("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),k=a("<input />",{value:i,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:a.proxy(function(){var c,e=h.children(".jstree-rename-input"),f=e.val(),k=this.settings.core.force_text;""===f&&(f=i),j.remove(),h.replaceWith(g),h.remove(),i=k?i:a("<div></div>").append(a.parseHTML(i)).html(),this.set_text(b,i),c=!!this.rename_node(b,k?a("<div></div>").text(f).text():a("<div></div>").append(a.parseHTML(f)).html()),c||this.set_text(b,i),d&&d.call(this,m,c)},this),keydown:function(a){var b=a.which;27===b&&(this.value=i),27!==b&&13!==b&&37!==b&&38!==b&&39!==b&&40!==b&&32!==b||a.stopImmediatePropagation(),27!==b&&13!==b||(a.preventDefault(),this.blur())},click:function(a){a.stopImmediatePropagation()},mousedown:function(a){a.stopImmediatePropagation()},keyup:function(a){k.width(Math.min(j.text("pW"+this.value).width(),f))},keypress:function(a){if(13===a.which)return!1}}),l={fontFamily:g.css("fontFamily")||"",fontSize:g.css("fontSize")||"",fontWeight:g.css("fontWeight")||"",fontStyle:g.css("fontStyle")||"",fontStretch:g.css("fontStretch")||"",fontVariant:g.css("fontVariant")||"",letterSpacing:g.css("letterSpacing")||"",wordSpacing:g.css("wordSpacing")||""},h.attr("class",g.attr("class")).append(g.contents().clone()).append(k),g.replaceWith(h),j.css(l),void k.css(l).width(Math.min(j.text("pW"+k[0].value).width(),f))[0].select()))},set_theme:function(b,c){if(!b)return!1;if(!0===c){var d=this.settings.core.themes.dir;d||(d=a.jstree.path+"/themes"),c=d+"/"+b+"/style.css"}c&&-1===a.inArray(c,i)&&(a("head").append('<link rel="stylesheet" href="'+c+'" type="text/css" />'),i.push(c)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=b,this.element.addClass("jstree-"+b),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+b+"-responsive"),this.trigger("set_theme",{theme:b})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(a){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=a,a&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(c,d){var e,f,g,h;if(a.isArray(c)){for(c=c.slice(),e=0,f=c.length;e<f;e++)this.set_icon(c[e],d);return!0}return!(!(c=this.get_node(c))||"#"===c.id)&&(h=c.icon,c.icon=!0===d||null===d||d===b||""===d||d,g=this.get_node(c,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===d?this.hide_icon(c):!0===d||null===d||d===b||""===d?(g.removeClass("jstree-themeicon-custom "+h).css("background","").removeAttr("rel"),!1===h&&this.show_icon(c)):-1===d.indexOf("/")&&-1===d.indexOf(".")?(g.removeClass(h).css("background",""),g.addClass(d+" jstree-themeicon-custom").attr("rel",d),!1===h&&this.show_icon(c)):(g.removeClass(h).css("background",""),g.addClass("jstree-themeicon-custom").css("background","url('"+d+"') center center no-repeat").attr("rel",d),!1===h&&this.show_icon(c)),!0)},get_icon:function(a){return!(!(a=this.get_node(a))||"#"===a.id)&&a.icon},hide_icon:function(b){var c,d;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.hide_icon(b[c]);return!0}return!(!(b=this.get_node(b))||"#"===b)&&(b.icon=!1,this.get_node(b,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(b){var c,d,e;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.show_icon(b[c]);return!0}return!(!(b=this.get_node(b))||"#"===b)&&(e=this.get_node(b,!0),b.icon=!e.length||e.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),b.icon||(b.icon=!0),e.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},a.vakata={},a.vakata.attributes=function(b,c){b=a(b)[0];var d=c?{}:[];return b&&b.attributes&&a.each(b.attributes,function(b,e){-1===a.inArray(e.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==e.value&&""!==a.trim(e.value)&&(c?d[e.name]=e.value:d.push(e.name))}),d},a.vakata.array_unique=function(a){var c,d,e=[],f={};for(c=0,d=a.length;c<d;c++)f[a[c]]===b&&(e.push(a[c]),f[a[c]]=!0);return e},a.vakata.array_remove=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=b<0?a.length+b:b,a.push.apply(a,d),a},a.vakata.array_remove_item=function(b,c){var d=a.inArray(c,b);return-1!==d?a.vakata.array_remove(b,d):b};var m=k.createElement("I");m.className="jstree-icon jstree-checkbox",m.setAttribute("role","presentation"),a.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},a.jstree.plugins.checkbox=function(c,d){this.bind=function(){d.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",a.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",a.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",a.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(a.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",a.proxy(function(a,b){var c,d,e=this._model.data,f=(e[b.parent],b.nodes);for(c=0,d=f.length;c<d;c++)e[f[c]].state.checked=e[f[c]].state.checked||e[f[c]].original&&e[f[c]].original.state&&e[f[c]].original.state.checked,e[f[c]].state.checked&&this._data.checkbox.selected.push(f[c])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",a.proxy(function(b,c){var d,e,f,g,h,i,j=this._model.data,k=j[c.parent],l=c.nodes,m=[],n=this.settings.checkbox.cascade,o=this.settings.checkbox.tie_selection;if(-1!==n.indexOf("down"))if(k.state[o?"selected":"checked"]){for(e=0,f=l.length;e<f;e++)j[l[e]].state[o?"selected":"checked"]=!0;this._data[o?"core":"checkbox"].selected=this._data[o?"core":"checkbox"].selected.concat(l)}else for(e=0,f=l.length;e<f;e++)if(j[l[e]].state[o?"selected":"checked"]){for(g=0,h=j[l[e]].children_d.length;g<h;g++)j[j[l[e]].children_d[g]].state[o?"selected":"checked"]=!0;this._data[o?"core":"checkbox"].selected=this._data[o?"core":"checkbox"].selected.concat(j[l[e]].children_d)}if(-1!==n.indexOf("up")){for(e=0,f=k.children_d.length;e<f;e++)j[k.children_d[e]].children.length||m.push(j[k.children_d[e]].parent);for(m=a.vakata.array_unique(m),g=0,h=m.length;g<h;g++)for(k=j[m[g]];k&&"#"!==k.id;){for(d=0,e=0,f=k.children.length;e<f;e++)d+=j[k.children[e]].state[o?"selected":"checked"];if(d!==f)break;k.state[o?"selected":"checked"]=!0,this._data[o?"core":"checkbox"].selected.push(k.id),(i=this.get_node(k,!0))&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass(o?"jstree-clicked":"jstree-checked"),k=this.get_node(k.parent)}}this._data[o?"core":"checkbox"].selected=a.vakata.array_unique(this._data[o?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",a.proxy(function(b,c){var d,e,f,g,h=c.node,i=this._model.data,j=this.get_node(h.parent),k=this.get_node(h,!0),l=this.settings.checkbox.cascade,m=this.settings.checkbox.tie_selection;if(-1!==l.indexOf("down"))for(this._data[m?"core":"checkbox"].selected=a.vakata.array_unique(this._data[m?"core":"checkbox"].selected.concat(h.children_d)),d=0,e=h.children_d.length;d<e;d++)g=i[h.children_d[d]],g.state[m?"selected":"checked"]=!0,g&&g.original&&g.original.state&&g.original.state.undetermined&&(g.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(;j&&"#"!==j.id;){for(f=0,d=0,e=j.children.length;d<e;d++)f+=i[j.children[d]].state[m?"selected":"checked"];if(f!==e)break;j.state[m?"selected":"checked"]=!0,this._data[m?"core":"checkbox"].selected.push(j.id),(g=this.get_node(j,!0))&&g.length&&g.attr("aria-selected",!0).children(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked"),j=this.get_node(j.parent)}-1!==l.indexOf("down")&&k.length&&k.find(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",a.proxy(function(a,b){var c,d,e,f=this.get_node("#"),g=this._model.data;for(c=0,d=f.children_d.length;c<d;c++)(e=g[f.children_d[c]])&&e.original&&e.original.state&&e.original.state.undetermined&&(e.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",a.proxy(function(b,c){var d,e,f,g=c.node,h=this.get_node(g,!0),i=this.settings.checkbox.cascade,j=this.settings.checkbox.tie_selection;if(g&&g.original&&g.original.state&&g.original.state.undetermined&&(g.original.state.undetermined=!1),-1!==i.indexOf("down"))for(d=0,e=g.children_d.length;d<e;d++)f=this._model.data[g.children_d[d]],f.state[j?"selected":"checked"]=!1,f&&f.original&&f.original.state&&f.original.state.undetermined&&(f.original.state.undetermined=!1);if(-1!==i.indexOf("up"))for(d=0,e=g.parents.length;d<e;d++)f=this._model.data[g.parents[d]],f.state[j?"selected":"checked"]=!1,f&&f.original&&f.original.state&&f.original.state.undetermined&&(f.original.state.undetermined=!1),(f=this.get_node(g.parents[d],!0))&&f.length&&f.attr("aria-selected",!1).children(".jstree-anchor").removeClass(j?"jstree-clicked":"jstree-checked");for(f=[],d=0,e=this._data[j?"core":"checkbox"].selected.length;d<e;d++)-1!==i.indexOf("down")&&-1!==a.inArray(this._data[j?"core":"checkbox"].selected[d],g.children_d)||-1!==i.indexOf("up")&&-1!==a.inArray(this._data[j?"core":"checkbox"].selected[d],g.parents)||f.push(this._data[j?"core":"checkbox"].selected[d]);this._data[j?"core":"checkbox"].selected=a.vakata.array_unique(f),-1!==i.indexOf("down")&&h.length&&h.find(".jstree-anchor").removeClass(j?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",a.proxy(function(a,b){for(var c,d,e,f,g=this.get_node(b.parent),h=this._model.data,i=this.settings.checkbox.tie_selection;g&&"#"!==g.id;){for(e=0,c=0,d=g.children.length;c<d;c++)e+=h[g.children[c]].state[i?"selected":"checked"];if(e!==d)break;g.state[i?"selected":"checked"]=!0,this._data[i?"core":"checkbox"].selected.push(g.id),(f=this.get_node(g,!0))&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(i?"jstree-clicked":"jstree-checked"),g=this.get_node(g.parent)}},this)).on("move_node.jstree",a.proxy(function(b,c){var d,e,f,g,h,i=c.is_multi,j=c.old_parent,k=this.get_node(c.parent),l=this._model.data,m=this.settings.checkbox.tie_selection;if(!i)for(d=this.get_node(j);d&&"#"!==d.id;){for(e=0,f=0,g=d.children.length;f<g;f++)e+=l[d.children[f]].state[m?"selected":"checked"];if(e!==g)break;d.state[m?"selected":"checked"]=!0,this._data[m?"core":"checkbox"].selected.push(d.id),(h=this.get_node(d,!0))&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}for(d=k;d&&"#"!==d.id;){for(e=0,f=0,g=d.children.length;f<g;f++)e+=l[d.children[f]].state[m?"selected":"checked"];if(e===g)d.state[m?"selected":"checked"]||(d.state[m?"selected":"checked"]=!0,this._data[m?"core":"checkbox"].selected.push(d.id),(h=this.get_node(d,!0))&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked"));else{if(!d.state[m?"selected":"checked"])break;d.state[m?"selected":"checked"]=!1,this._data[m?"core":"checkbox"].selected=a.vakata.array_remove_item(this._data[m?"core":"checkbox"].selected,d.id),(h=this.get_node(d,!0))&&h.length&&h.attr("aria-selected",!1).children(".jstree-anchor").removeClass(m?"jstree-clicked":"jstree-checked")}d=this.get_node(d.parent)}},this))},this._undetermined=function(){if(null!==this.element){var a,c,d,e,f={},g=this._model.data,h=this.settings.checkbox.tie_selection,i=this._data[h?"core":"checkbox"].selected,j=[],k=this;for(a=0,c=i.length;a<c;a++)if(g[i[a]]&&g[i[a]].parents)for(d=0,e=g[i[a]].parents.length;d<e;d++)f[g[i[a]].parents[d]]===b&&"#"!==g[i[a]].parents[d]&&(f[g[i[a]].parents[d]]=!0,j.push(g[i[a]].parents[d]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var h,i=k.get_node(this);if(i.state.loaded){for(a=0,c=i.children_d.length;a<c;a++)if(h=g[i.children_d[a]],!h.state.loaded&&h.original&&h.original.state&&h.original.state.undetermined&&!0===h.original.state.undetermined)for(f[h.id]===b&&"#"!==h.id&&(f[h.id]=!0,j.push(h.id)),d=0,e=h.parents.length;d<e;d++)f[h.parents[d]]===b&&"#"!==h.parents[d]&&(f[h.parents[d]]=!0,j.push(h.parents[d]))}else if(i.original&&i.original.state&&i.original.state.undetermined&&!0===i.original.state.undetermined)for(f[i.id]===b&&"#"!==i.id&&(f[i.id]=!0,j.push(i.id)),d=0,e=i.parents.length;d<e;d++)f[i.parents[d]]===b&&"#"!==i.parents[d]&&(f[i.parents[d]]=!0,j.push(i.parents[d]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),a=0,c=j.length;a<c;a++)g[j[a]].state[h?"selected":"checked"]||(i=this.get_node(j[a],!0))&&i.length&&i.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(b,c,e,f){if(b=d.redraw_node.apply(this,arguments)){var g,h,i=null,j=null;for(g=0,h=b.childNodes.length;g<h;g++)if(b.childNodes[g]&&b.childNodes[g].className&&-1!==b.childNodes[g].className.indexOf("jstree-anchor")){i=b.childNodes[g];break}i&&(!this.settings.checkbox.tie_selection&&this._model.data[b.id].state.checked&&(i.className+=" jstree-checked"),j=m.cloneNode(!1),this._model.data[b.id].state.checkbox_disabled&&(j.className+=" jstree-checkbox-disabled"),i.insertBefore(j,i.childNodes[0]))}return e||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(a.proxy(this._undetermined,this),50)),b},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(b){b=this.get_node(b);var c,d,e=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection,g=this._data[f?"core":"checkbox"].selected,h=this._model.data;if(!b||!0===b.state[f?"selected":"checked"]||-1===e.indexOf("undetermined")||-1===e.indexOf("down")&&-1===e.indexOf("up"))return!1;if(!b.state.loaded&&!0===b.original.state.undetermined)return!0;for(c=0,d=b.children_d.length;c<d;c++)if(-1!==a.inArray(b.children_d[c],g)||!h[b.children_d[c]].state.loaded&&h[b.children_d[c]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(b){var c,d,e;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.disable_checkbox(b[c]);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;e=this.get_node(b,!0),b.state.checkbox_disabled||(b.state.checkbox_disabled=!0,e&&e.length&&e.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:b}))},this.enable_checkbox=function(b){var c,d,e;if(a.isArray(b)){for(b=b.slice(),c=0,d=b.length;c<d;c++)this.enable_checkbox(b[c]);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;e=this.get_node(b,!0),b.state.checkbox_disabled&&(b.state.checkbox_disabled=!1,e&&e.length&&e.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:b}))},this.activate_node=function(b,c){return!a(c.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||a(c.target).hasClass("jstree-checkbox"))&&(c.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!a(c.target).hasClass("jstree-checkbox")?d.activate_node.call(this,b,c):!this.is_disabled(b)&&(this.is_checked(b)?this.uncheck_node(b,c):this.check_node(b,c),void this.trigger("activate_node",{node:this.get_node(b)})))},this.check_node=function(b,c){if(this.settings.checkbox.tie_selection)return this.select_node(b,!1,!0,c);var d,e,f;if(a.isArray(b)){for(b=b.slice(),e=0,f=b.length;e<f;e++)this.check_node(b[e],c);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;d=this.get_node(b,!0),b.state.checked||(b.state.checked=!0,this._data.checkbox.selected.push(b.id),d&&d.length&&d.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:b,selected:this._data.checkbox.selected,event:c}))},this.uncheck_node=function(b,c){if(this.settings.checkbox.tie_selection)return this.deselect_node(b,!1,c);var d,e,f;if(a.isArray(b)){for(b=b.slice(),d=0,e=b.length;d<e;d++)this.uncheck_node(b[d],c);return!0}if(!(b=this.get_node(b))||"#"===b.id)return!1;f=this.get_node(b,!0),b.state.checked&&(b.state.checked=!1,this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,b.id),f.length&&f.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:b,selected:this._data.checkbox.selected,event:c}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var a,b;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),a=0,b=this._data.checkbox.selected.length;a<b;a++)this._model.data[this._data.checkbox.selected[a]]&&(this._model.data[this._data.checkbox.selected[a]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var a,b,c=this._data.checkbox.selected.concat([]);for(a=0,b=this._data.checkbox.selected.length;a<b;a++)this._model.data[this._data.checkbox.selected[a]]&&(this._model.data[this._data.checkbox.selected[a]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:c})},this.is_checked=function(a){return this.settings.checkbox.tie_selection?this.is_selected(a):!(!(a=this.get_node(a))||"#"===a.id)&&a.state.checked},this.get_checked=function(b){return this.settings.checkbox.tie_selection?this.get_selected(b):b?a.map(this._data.checkbox.selected,a.proxy(function(a){return this.get_node(a)},this)):this._data.checkbox.selected},this.get_top_checked=function(b){if(this.settings.checkbox.tie_selection)return this.get_top_selected(b);var c,d,e,f,g=this.get_checked(!0),h={};for(c=0,d=g.length;c<d;c++)h[g[c].id]=g[c];for(c=0,d=g.length;c<d;c++)for(e=0,f=g[c].children_d.length;e<f;e++)h[g[c].children_d[e]]&&delete h[g[c].children_d[e]];g=[];for(c in h)h.hasOwnProperty(c)&&g.push(c);return b?a.map(g,a.proxy(function(a){return this.get_node(a)},this)):g},this.get_bottom_checked=function(b){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(b);var c,d,e=this.get_checked(!0),f=[];for(c=0,d=e.length;c<d;c++)e[c].children.length||f.push(e[c].id);return b?a.map(f,a.proxy(function(a){return this.get_node(a)},this)):f},this.load_node=function(b,c){var e,f,g;if(!a.isArray(b)&&!this.settings.checkbox.tie_selection&&(g=this.get_node(b))&&g.state.loaded)for(e=0,f=g.children_d.length;e<f;e++)this._model.data[g.children_d[e]].state.checked&&(!0,this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,g.children_d[e]));return d.load_node.apply(this,arguments)},this.get_state=function(){var a=d.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?a:(a.checkbox=this._data.checkbox.selected.slice(),a)},this.set_state=function(b,c){var e=d.set_state.apply(this,arguments);if(e&&b.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var f=this;a.each(b.checkbox,function(a,b){f.check_node(b)})}return delete b.checkbox,this.set_state(b,c),!1}return e},this.refresh=function(a,b){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),d.refresh.apply(this,arguments)}},a.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(b,c){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.create_node(d,{},"last",function(a){setTimeout(function(){c.edit(a)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.edit(d)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.is_selected(d)?c.delete_node(c.get_selected()):c.delete_node(d)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.is_selected(d)?c.cut(c.get_top_selected()):c.cut(d)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.is_selected(d)?c.copy(c.get_top_selected()):c.copy(d)}},paste:{separator_before:!1,icon:!1,_disabled:function(b){return!a.jstree.reference(b.reference).can_paste()},separator_after:!1,label:"Paste",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.paste(d)}}}}}}},a.jstree.plugins.contextmenu=function(c,d){this.bind=function(){d.bind.call(this);var b,c,e=0,f=null;this.element.on("contextmenu.jstree",".jstree-anchor",a.proxy(function(a,b){a.preventDefault(),e=a.ctrlKey?+new Date:0,(b||f)&&(e=+new Date+1e4),f&&clearTimeout(f),this.is_loading(a.currentTarget)||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY,a)},this)).on("click.jstree",".jstree-anchor",a.proxy(function(b){this._data.contextmenu.visible&&(!e||+new Date-e>250)&&a.vakata.context.hide(),e=0},this)).on("touchstart.jstree",".jstree-anchor",function(d){d.originalEvent&&d.originalEvent.changedTouches&&d.originalEvent.changedTouches[0]&&(b=d.pageX,c=d.pageY,f=setTimeout(function(){a(d.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(a){f&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(Math.abs(b-a.pageX)>50||Math.abs(c-a.pageY)>50)&&clearTimeout(f)}).on("touchend.vakata.jstree",function(a){f&&clearTimeout(f)}),a(k).on("context_hide.vakata.jstree",a.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&&a.vakata.context.hide(),d.teardown.call(this)},this.show_contextmenu=function(c,d,e,f){if(!(c=this.get_node(c))||"#"===c.id)return!1;var g=this.settings.contextmenu,h=this.get_node(c,!0),i=h.children(".jstree-anchor"),j=!1,k=!1;(g.show_at_node||d===b||e===b)&&(j=i.offset(),d=j.left,e=j.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(c)&&this.activate_node(c,f),k=g.items,a.isFunction(k)&&(k=k.call(this,c,a.proxy(function(a){this._show_contextmenu(c,d,e,a)},this))),a.isPlainObject(k)&&this._show_contextmenu(c,d,e,k)},this._show_contextmenu=function(b,c,d,e){var f=this.get_node(b,!0),g=f.children(".jstree-anchor");a(k).one("context_show.vakata.jstree",a.proxy(function(b,c){var d="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";a(c.element).addClass(d)},this)),this._data.contextmenu.visible=!0,a.vakata.context.show(g,{x:c,y:d},e),this.trigger("show_contextmenu",{node:b,x:c,y:d})}},function(a){var b=!1,c={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};a.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(b){a(k).triggerHandler("context_"+b+".vakata",{reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}})},_execute:function(b){return!(!(b=c.items[b])||b._disabled&&(!a.isFunction(b._disabled)||b._disabled({item:b,reference:c.reference,element:c.element}))||!b.action)&&b.action.call(null,{item:b,reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}})},_parse:function(b,d){if(!b)return!1;d||(c.html="",c.items=[]);var e,f="",g=!1;return d&&(f+="<ul>"),a.each(b,function(b,d){if(!d)return!0;c.items.push(d),!g&&d.separator_before&&(f+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),g=!1,f+="<li class='"+(d._class||"")+(!0===d._disabled||a.isFunction(d._disabled)&&d._disabled({item:d,reference:c.reference,element:c.element})?" vakata-contextmenu-disabled ":"")+"' "+(d.shortcut?" data-shortcut='"+d.shortcut+"' ":"")+">",f+="<a href='#' rel='"+(c.items.length-1)+"'>",a.vakata.context.settings.icons&&(f+="<i ",d.icon&&(-1!==d.icon.indexOf("/")||-1!==d.icon.indexOf(".")?f+=" style='background:url(\""+d.icon+"\") center center no-repeat' ":f+=" class='"+d.icon+"' "),f+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),f+=(a.isFunction(d.label)?d.label({item:b,reference:c.reference,element:c.element}):d.label)+(d.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+d.shortcut+'">'+(d.shortcut_label||"")+"</span>":"")+"</a>",d.submenu&&(e=a.vakata.context._parse(d.submenu,!0))&&(f+=e),f+="</li>",d.separator_after&&(f+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",g=!0)}),f=f.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),d&&(f+="</ul>"),d||(c.html=f,a.vakata.context._trigger("parse")),f.length>10&&f},_show_submenu:function(c){if(c=a(c),c.length&&c.children("ul").length){var d=c.children("ul"),e=c.offset().left+c.outerWidth(),f=c.offset().top,g=d.width(),h=d.height(),i=a(window).width()+a(window).scrollLeft(),j=a(window).height()+a(window).scrollTop();b?c[e-(g+10+c.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):c[e+g+10>i?"addClass":"removeClass"]("vakata-context-right"),f+h+10>j&&d.css("bottom","-1px"),d.show()}},show:function(d,e,f){var g,h,i,j,k,l,m,n;switch(c.element&&c.element.length&&c.element.width(""),!0){case!e&&!d:return!1;case!!e&&!!d:c.reference=d,c.position_x=e.x,c.position_y=e.y;break;case!e&&!!d:c.reference=d,g=d.offset(),c.position_x=g.left+d.outerHeight(),c.position_y=g.top;break;case!!e&&!d:c.position_x=e.x,c.position_y=e.y}d&&!f&&a(d).data("vakata_contextmenu")&&(f=a(d).data("vakata_contextmenu")),a.vakata.context._parse(f)&&c.element.html(c.html),c.items.length&&(c.element.appendTo("body"),h=c.element,i=c.position_x,j=c.position_y,k=h.width(),l=h.height(),m=a(window).width()+a(window).scrollLeft(),n=a(window).height()+a(window).scrollTop(),b&&(i-=h.outerWidth()-a(d).outerWidth())<a(window).scrollLeft()+20&&(i=a(window).scrollLeft()+20),i+k+20>m&&(i=m-(k+20)),j+l+20>n&&(j=n-(l+20)),c.element.css({left:i,top:j}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),c.is_visible=!0,a.vakata.context._trigger("show"))},hide:function(){c.is_visible&&(c.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),c.is_visible=!1,a.vakata.context._trigger("hide"))}},a(function(){b="rtl"===a("body").css("direction");var d=!1;c.element=a("<ul class='vakata-context'></ul>"),c.element.on("mouseenter","li",function(b){b.stopImmediatePropagation(),a.contains(this,b.relatedTarget)||(d&&clearTimeout(d),c.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),a(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),a.vakata.context._show_submenu(this))}).on("mouseleave","li",function(b){a.contains(this,b.relatedTarget)||a(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(b){a(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),a.vakata.context.settings.hide_onmouseleave&&(d=setTimeout(function(b){return function(){a.vakata.context.hide()}}(),a.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(b){b.preventDefault(),a(this).blur().parent().hasClass("vakata-context-disabled")||!1===a.vakata.context._execute(a(this).attr("rel"))||a.vakata.context.hide()}).on("keydown","a",function(b){var d=null;switch(b.which){case 13:case 32:b.type="mouseup",b.preventDefault(),a(b.currentTarget).trigger(b);break;case 37:c.is_visible&&(c.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 38:c.is_visible&&(d=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),d.length||(d=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),d.addClass("vakata-context-hover").children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 39:c.is_visible&&(c.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 40:c.is_visible&&(d=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),d.length||(d=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),d.addClass("vakata-context-hover").children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 27:a.vakata.context.hide(),b.preventDefault()}}).on("keydown",function(a){a.preventDefault();var b=c.element.find(".vakata-contextmenu-shortcut-"+a.which).parent();b.parent().not(".vakata-context-disabled")&&b.click()}),a(k).on("mousedown.vakata.jstree",function(b){c.is_visible&&!a.contains(c.element[0],b.target)&&a.vakata.context.hide()}).on("context_show.vakata.jstree",function(a,d){c.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),b&&c.element.addClass("vakata-context-rtl").css("direction","rtl"),c.element.find("ul").hide().end()})})}(a),a.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1},a.jstree.plugins.dnd=function(b,c){this.bind=function(){c.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",a.proxy(function(b){if(this.settings.dnd.large_drag_target&&a(b.target).closest(".jstree-node")[0]!==b.currentTarget)return!0;if("touchstart"===b.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var c=this.get_node(b.target),d=this.is_selected(c)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,e=d>1?d+" "+this.get_string("nodes"):this.get_text(b.currentTarget);return this.settings.core.force_text&&(e=a.vakata.html.escape(e)),c&&c.id&&"#"!==c.id&&(1===b.which||"touchstart"===b.type)&&(!0===this.settings.dnd.is_draggable||a.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,d>1?this.get_top_selected(!0):[c],b))?(this.element.trigger("mousedown.jstree"),a.vakata.dnd.start(b,{jstree:!0,origin:this,obj:this.get_node(c,!0),nodes:d>1?this.get_top_selected():[c.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+e+'<ins class="jstree-copy" style="display:none;">+</ins></div>')):void 0},this))}},a(function(){var b=!1,c=!1,d=!1,e=!1,f=a('<div id="jstree-marker">&#160;</div>').hide();a(k).on("dnd_start.vakata.jstree",function(a,c){b=!1,d=!1,c&&c.data&&c.data.jstree&&f.appendTo("body")}).on("dnd_move.vakata.jstree",function(g,h){if(e&&clearTimeout(e),h&&h.data&&h.data.jstree&&(!h.event.target.id||"jstree-marker"!==h.event.target.id)){d=h.event;var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.jstree.reference(h.event.target),x=!1,y=!1,z=!1;if(w&&w._data&&w._data.dnd)if(f.attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")),h.helper.children().attr("class","jstree-"+w.get_theme()+" jstree-"+w.get_theme()+"-"+w.get_theme_variant()+" "+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"show":"hide"](),h.event.target!==w.element[0]&&h.event.target!==w.get_container_ul()[0]||0!==w.get_container_ul().children().length){if((x=w.settings.dnd.large_drop_target?a(h.event.target).closest(".jstree-node").children(".jstree-anchor"):a(h.event.target).closest(".jstree-anchor"))&&x.length&&x.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(y=x.offset(),z=h.event.pageY-y.top,k=x.outerHeight(),n=z<k/3?["b","i","a"]:z>k-k/3?["a","i","b"]:z>k/2?["i","a","b"]:["i","b","a"],a.each(n,function(d,g){switch(g){case"b":i=y.left-6,j=y.top,l=w.get_parent(x),m=x.parent().index();break;case"i":u=w.settings.dnd.inside_pos,v=w.get_node(x.parent()),i=y.left-2,j=y.top+k/2+1,l=v.id,m="first"===u?0:"last"===u?v.children.length:Math.min(u,v.children.length);break;case"a":i=y.left-6,j=y.top+k,l=w.get_parent(x),m=x.parent().index()+1}for(o=!0,p=0,q=h.data.nodes.length;p<q;p++)if(r=h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node",s=m,"move_node"===r&&"a"===g&&h.data.origin&&h.data.origin===w&&l===w.get_parent(h.data.nodes[p])&&(t=w.get_node(l),s>a.inArray(h.data.nodes[p],t.children)&&(s-=1)),!(o=o&&(w&&w.settings&&w.settings.dnd&&!1===w.settings.dnd.check_while_dragging||w.check(r,h.data.origin&&h.data.origin!==w?h.data.origin.get_node(h.data.nodes[p]):h.data.nodes[p],l,s,{dnd:!0,ref:w.get_node(x.parent()),pos:g,origin:h.data.origin,is_multi:h.data.origin&&h.data.origin!==w,is_foreign:!h.data.origin})))){w&&w.last_error&&(c=w.last_error());break}if("i"===g&&x.parent().is(".jstree-closed")&&w.settings.dnd.open_timeout&&(e=setTimeout(function(a,b){return function(){a.open_node(b)}}(w,x),w.settings.dnd.open_timeout)),o)return b={ins:w,par:l,pos:"i"!==g||"last"!==u||0!==m||w.is_loaded(v)?m:"last"},f.css({left:i+"px",top:j+"px"}).show(),h.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),c={},n=!0,!1}),!0===n))return}else{for(o=!0,p=0,q=h.data.nodes.length;p<q&&(o=o&&w.check(h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node",h.data.origin&&h.data.origin!==w?h.data.origin.get_node(h.data.nodes[p]):h.data.nodes[p],"#","last",{dnd:!0,ref:w.get_node("#"),pos:"i",origin:h.data.origin,is_multi:h.data.origin&&h.data.origin!==w,is_foreign:!h.data.origin}));p++);if(o)return b={ins:w,par:"#",pos:"last"},f.hide(),void h.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok")}b=!1,h.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),f.hide()}}).on("dnd_scroll.vakata.jstree",function(a,c){c&&c.data&&c.data.jstree&&(f.hide(),b=!1,d=!1,c.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(g,h){if(e&&clearTimeout(e),h&&h.data&&h.data.jstree){f.hide().detach();var i,j,k=[];if(b){for(i=0,j=h.data.nodes.length;i<j;i++)k[i]=h.data.origin?h.data.origin.get_node(h.data.nodes[i]):h.data.nodes[i];b.ins[h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node"](k,b.par,b.pos,!1,!1,!1,h.data.origin)}else i=a(h.event.target).closest(".jstree"),i.length&&c&&c.error&&"check"===c.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,c);d=!1,b=!1}}).on("keyup.jstree keydown.jstree",function(b,c){(c=a.vakata.dnd._get())&&c.data&&c.data.jstree&&(c.helper.find(".jstree-copy").first()[c.data.origin&&(c.data.origin.settings.dnd.always_copy||c.data.origin.settings.dnd.copy&&(b.metaKey||b.ctrlKey))?"show":"hide"](),d&&(d.metaKey=b.metaKey,d.ctrlKey=b.ctrlKey,a.vakata.dnd._trigger("move",d)))})}),function(a){a.vakata.html={div:a("<div />"),escape:function(b){return a.vakata.html.div.text(b).html()},strip:function(b){return a.vakata.html.div.empty().append(a.parseHTML(b)).text()}};var b={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};a.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(b,c){var d=a.vakata.dnd._get();d.event=c,a(k).triggerHandler("dnd_"+b+".vakata",d)},_get:function(){return{data:b.data,element:b.element,helper:b.helper}},_clean:function(){b.helper&&b.helper.remove(),b.scroll_i&&(clearInterval(b.scroll_i),b.scroll_i=!1),b={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},a(k).off("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag),a(k).off("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop)},_scroll:function(c){if(!b.scroll_e||!b.scroll_l&&!b.scroll_t)return b.scroll_i&&(clearInterval(b.scroll_i),b.scroll_i=!1),!1;if(!b.scroll_i)return b.scroll_i=setInterval(a.vakata.dnd._scroll,100),!1;if(!0===c)return!1;var d=b.scroll_e.scrollTop(),e=b.scroll_e.scrollLeft();b.scroll_e.scrollTop(d+b.scroll_t*a.vakata.dnd.settings.scroll_speed),b.scroll_e.scrollLeft(e+b.scroll_l*a.vakata.dnd.settings.scroll_speed),d===b.scroll_e.scrollTop()&&e===b.scroll_e.scrollLeft()||a.vakata.dnd._trigger("scroll",b.scroll_e)},start:function(c,d,e){"touchstart"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=k.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset)),b.is_drag&&a.vakata.dnd.stop({});try{c.currentTarget.unselectable="on",c.currentTarget.onselectstart=function(){return!1},c.currentTarget.style&&(c.currentTarget.style.MozUserSelect="none")}catch(a){}return b.init_x=c.pageX,b.init_y=c.pageY,b.data=d,b.is_down=!0,b.element=c.currentTarget,b.target=c.target,b.is_touch="touchstart"===c.type,!1!==e&&(b.helper=a("<div id='vakata-dnd'></div>").html(e).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),a(k).on("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag),a(k).on("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop),!1},drag:function(c){if("touchmove"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=k.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset)),b.is_down){if(!b.is_drag){if(!(Math.abs(c.pageX-b.init_x)>(b.is_touch?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)||Math.abs(c.pageY-b.init_y)>(b.is_touch?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)))return;b.helper&&(b.helper.appendTo("body"),b.helper_w=b.helper.outerWidth()),b.is_drag=!0,a.vakata.dnd._trigger("start",c)}var d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,l=!1,m=!1,n=!1;return b.scroll_t=0,b.scroll_l=0,b.scroll_e=!1,a(a(c.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(a(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var d=a(this),e=d.offset();if(this.scrollHeight>this.offsetHeight&&(e.top+d.height()-c.pageY<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=1),c.pageY-e.top<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(e.left+d.width()-c.pageX<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=1),c.pageX-e.left<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=-1)),b.scroll_t||b.scroll_l)return b.scroll_e=a(this),!1}),b.scroll_e||(d=a(k),e=a(window),f=d.height(),g=e.height(),h=d.width(),i=e.width(),j=d.scrollTop(),l=d.scrollLeft(),f>g&&c.pageY-j<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=-1),f>g&&g-(c.pageY-j)<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=1),h>i&&c.pageX-l<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=-1),h>i&&i-(c.pageX-l)<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=1),(b.scroll_t||b.scroll_l)&&(b.scroll_e=d)),b.scroll_e&&a.vakata.dnd._scroll(!0),b.helper&&(m=parseInt(c.pageY+a.vakata.dnd.settings.helper_top,10),n=parseInt(c.pageX+a.vakata.dnd.settings.helper_left,10),f&&m+25>f&&(m=f-50),h&&n+b.helper_w>h&&(n=h-(b.helper_w+2)),b.helper.css({left:n+"px",top:m+"px"})),a.vakata.dnd._trigger("move",c),!1}},stop:function(c){if("touchend"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=k.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset)),b.is_drag)a.vakata.dnd._trigger("stop",c);else if("touchend"===c.type&&c.target===b.target){var d=setTimeout(function(){a(c.target).click()},100);a(c.target).one("click",function(){d&&clearTimeout(d)})}return a.vakata.dnd._clean(),!1}}}(a),a.jstree.defaults.massload=null,a.jstree.plugins.massload=function(b,c){this.init=function(a,b){c.init.call(this,a,b),this._data.massload={}},this._load_nodes=function(b,d,e){var f=this.settings.massload;return e&&!a.isEmptyObject(this._data.massload)?c._load_nodes.call(this,b,d,e):a.isFunction(f)?f.call(this,b,a.proxy(function(a){if(a)for(var f in a)a.hasOwnProperty(f)&&(this._data.massload[f]=a[f]);c._load_nodes.call(this,b,d,e)},this)):"object"==typeof f&&f&&f.url?(f=a.extend(!0,{},f),a.isFunction(f.url)&&(f.url=f.url.call(this,b)),a.isFunction(f.data)&&(f.data=f.data.call(this,b)),a.ajax(f).done(a.proxy(function(a,f,g){if(a)for(var h in a)a.hasOwnProperty(h)&&(this._data.massload[h]=a[h]);c._load_nodes.call(this,b,d,e)},this)).fail(a.proxy(function(a){c._load_nodes.call(this,b,d,e)},this))):c._load_nodes.call(this,b,d,e)},this._load_node=function(b,d){var e=this._data.massload[b.id];return e?this["string"==typeof e?"_append_html_data":"_append_json_data"](b,"string"==typeof e?a(a.parseHTML(e)).filter(function(){return 3!==this.nodeType}):e,function(a){d.call(this,a),delete this._data.massload[b.id]}):c._load_node.call(this,b,d)}},a.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},a.jstree.plugins.search=function(c,d){this.bind=function(){d.bind.call(this),this._data.search.str="",this._data.search.dom=a(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this.element.on("before_open.jstree",a.proxy(function(b,c){var d,e,f=this._data.search.res,g=[],h=a();if(f&&f.length&&(this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(f,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this._data.search.som&&this._data.search.res.length)){for(d=0,e=f.length;d<e;d++)g=g.concat(this.get_node(f[d]).parents);g=a.vakata.array_remove_item(a.vakata.array_unique(g),"#"),h=g.length?a(this.element[0].querySelectorAll("#"+a.map(g,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))):a(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),h=h.add(this._data.search.dom),this._data.search.smc&&this._data.search.dom.children(".jstree-children").find(".jstree-node").show(),h.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){a(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)).on("search.jstree",a.proxy(function(b,c){this._data.search.som&&c.nodes.length&&(this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),this._data.search.smc&&c.nodes.children(".jstree-children").find(".jstree-node").show(),c.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){a(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))},this)).on("clear_search.jstree",a.proxy(function(a,b){this._data.search.som&&b.nodes.length&&this.element.find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")},this))},this.search=function(c,d,e,f,g,h){if(!1===c||""===a.trim(c.toString()))return this.clear_search();f=this.get_node(f),f=f&&f.id?f.id:null,c=c.toString();var i=this.settings.search,j=!!i.ajax&&i.ajax,k=this._model.data,l=null,m=[],n=[];if(this._data.search.res.length&&!g&&this.clear_search(),e===b&&(e=i.show_only_matches),h===b&&(h=i.show_only_matches_children),!d&&!1!==j)return a.isFunction(j)?j.call(this,c,a.proxy(function(b){b&&b.d&&(b=b.d),this._load_nodes(a.isArray(b)?a.vakata.array_unique(b):[],function(){this.search(c,!0,e,f,g)},!0)},this),f):(j=a.extend({},j),j.data||(j.data={}),j.data.str=c,f&&(j.data.inside=f),a.ajax(j).fail(a.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(j)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(a.proxy(function(b){b&&b.d&&(b=b.d),this._load_nodes(a.isArray(b)?a.vakata.array_unique(b):[],function(){this.search(c,!0,e,f,g)},!0)},this)));g||(this._data.search.str=c,this._data.search.dom=a(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=e,this._data.search.smc=h),l=new a.vakata.search(c,!0,{caseSensitive:i.case_sensitive,fuzzy:i.fuzzy}),a.each(k[f||"#"].children_d,function(a,b){var d=k[b];d.text&&(i.search_callback&&i.search_callback.call(this,c,d)||!i.search_callback&&l.search(d.text).isMatch)&&(!i.search_leaves_only||d.state.loaded&&0===d.children.length)&&(m.push(b),n=n.concat(d.parents))}),m.length&&(n=a.vakata.array_unique(n),this._search_open(n),g?(this._data.search.dom=this._data.search.dom.add(a(this.element[0].querySelectorAll("#"+a.map(m,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=a.vakata.array_unique(this._data.search.res.concat(m))):(this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(m,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=m),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),this.trigger("search",{nodes:this._data.search.dom,str:c,res:this._data.search.res,show_only_matches:e})},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=a()},this._search_open=function(b){var c=this;a.each(b.concat([]),function(d,e){if("#"===e)return!0;try{e=a("#"+e.replace(a.jstree.idregex,"\\$&"),c.element)}catch(a){}e&&e.length&&c.is_closed(e)&&(c._data.search.opn.push(e[0].id),c.open_node(e,function(){c._search_open(b)},0))})}},function(a){a.vakata.search=function(b,c,d){d=d||{},d=a.extend({},a.vakata.search.defaults,d),!1!==d.fuzzy&&(d.fuzzy=!0),b=d.caseSensitive?b:b.toLowerCase();var e,f,g,h,i=d.location,j=d.distance,k=d.threshold,l=b.length;return l>32&&(d.fuzzy=!1),d.fuzzy&&(e=1<<l-1,f=function(){var a={},c=0;for(c=0;c<l;c++)a[b.charAt(c)]=0;for(c=0;c<l;c++)a[b.charAt(c)]|=1<<l-c-1;return a}(),g=function(a,b){var c=a/l,d=Math.abs(i-b);return j?c+d/j:d?1:c}),h=function(a){if(a=d.caseSensitive?a:a.toLowerCase(),b===a||-1!==a.indexOf(b))return{isMatch:!0,score:0};if(!d.fuzzy)return{isMatch:!1,score:1};var c,h,j,m,n,o,p,q,r,s=a.length,t=k,u=a.indexOf(b,i),v=l+s,w=1,x=[];for(-1!==u&&(t=Math.min(g(0,u),t),-1!==(u=a.lastIndexOf(b,i+l))&&(t=Math.min(g(0,u),t))),u=-1,c=0;c<l;c++){for(j=0,m=v;j<m;)g(c,i+m)<=t?j=m:v=m,m=Math.floor((v-j)/2+j);for(v=m,o=Math.max(1,i-m+1),p=Math.min(i+m,s)+l,q=new Array(p+2),q[p+1]=(1<<c)-1,h=p;h>=o;h--)if(r=f[a.charAt(h-1)],q[h]=0===c?(q[h+1]<<1|1)&r:(q[h+1]<<1|1)&r|(n[h+1]|n[h])<<1|1|n[h+1],q[h]&e&&(w=g(c,h-1))<=t){if(t=w,u=h-1,x.push(u),!(u>i))break;o=Math.max(1,2*i-u)}if(g(c+1,i)>t)break;n=q}return{isMatch:u>=0,score:w}},!0===c?{search:h}:h(c)},a.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(a),a.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},a.jstree.plugins.sort=function(b,c){this.bind=function(){c.bind.call(this),this.element.on("model.jstree",a.proxy(function(a,b){this.sort(b.parent,!0)},this)).on("rename_node.jstree create_node.jstree",a.proxy(function(a,b){this.sort(b.parent||b.node.parent,!1),this.redraw_node(b.parent||b.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",a.proxy(function(a,b){this.sort(b.parent,!1),this.redraw_node(b.parent,!0)},this))},this.sort=function(b,c){var d,e;if((b=this.get_node(b))&&b.children&&b.children.length&&(b.children.sort(a.proxy(this.settings.sort,this)),c))for(d=0,e=b.children_d.length;d<e;d++)this.sort(b.children_d[d],!1)}};var n=!1;a.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},a.jstree.plugins.state=function(b,c){this.bind=function(){c.bind.call(this);var b=a.proxy(function(){this.element.on(this.settings.state.events,a.proxy(function(){n&&clearTimeout(n),n=setTimeout(a.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",a.proxy(function(a,c){this.element.one("restore_state.jstree",b),this.restore_state()||b()},this))},this.save_state=function(){var b={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};a.vakata.storage.set(this.settings.state.key,JSON.stringify(b))},this.restore_state=function(){var b=a.vakata.storage.get(this.settings.state.key);if(b)try{b=JSON.parse(b)}catch(a){return!1}return!(b&&b.ttl&&b.sec&&+new Date-b.sec>b.ttl)&&(b&&b.state&&(b=b.state),b&&a.isFunction(this.settings.state.filter)&&(b=this.settings.state.filter.call(this,b)),!!b&&(this.element.one("set_state.jstree",function(c,d){d.instance.trigger("restore_state",{state:a.extend(!0,{},b)})}),this.set_state(b),!0))},this.clear_state=function(){return a.vakata.storage.del(this.settings.state.key)}},function(a,b){a.vakata.storage={set:function(a,b){return window.localStorage.setItem(a,b)},get:function(a){return window.localStorage.getItem(a)},del:function(a){return window.localStorage.removeItem(a)}}}(a),a.jstree.defaults.types={"#":{},default:{}},a.jstree.plugins.types=function(c,d){this.init=function(a,c){var e,f;if(c&&c.types&&c.types.default)for(e in c.types)if("default"!==e&&"#"!==e&&c.types.hasOwnProperty(e))for(f in c.types.default)c.types.default.hasOwnProperty(f)&&c.types[e][f]===b&&(c.types[e][f]=c.types.default[f]);d.init.call(this,a,c),this._model.data["#"].type="#"},this.refresh=function(a,b){d.refresh.call(this,a,b),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",a.proxy(function(a,c){var d,e,f=this._model.data,g=c.nodes,h=this.settings.types,i="default";for(d=0,e=g.length;d<e;d++)i="default",f[g[d]].original&&f[g[d]].original.type&&h[f[g[d]].original.type]&&(i=f[g[d]].original.type),f[g[d]].data&&f[g[d]].data.jstree&&f[g[d]].data.jstree.type&&h[f[g[d]].data.jstree.type]&&(i=f[g[d]].data.jstree.type),f[g[d]].type=i,!0===f[g[d]].icon&&h[i].icon!==b&&(f[g[d]].icon=h[i].icon);f["#"].type="#"},this)),d.bind.call(this)},this.get_json=function(b,c,e){var f,g,h=this._model.data,i=c?a.extend(!0,{},c,{no_id:!1}):{},j=d.get_json.call(this,b,i,e);if(!1===j)return!1;if(a.isArray(j))for(f=0,g=j.length;f<g;f++)j[f].type=j[f].id&&h[j[f].id]&&h[j[f].id].type?h[j[f].id].type:"default",c&&c.no_id&&(delete j[f].id,j[f].li_attr&&j[f].li_attr.id&&delete j[f].li_attr.id,j[f].a_attr&&j[f].a_attr.id&&delete j[f].a_attr.id);else j.type=j.id&&h[j.id]&&h[j.id].type?h[j.id].type:"default",c&&c.no_id&&(j=this._delete_ids(j));return j},this._delete_ids=function(b){if(a.isArray(b)){for(var c=0,d=b.length;c<d;c++)b[c]=this._delete_ids(b[c]);return b}return delete b.id,b.li_attr&&b.li_attr.id&&delete b.li_attr.id,b.a_attr&&b.a_attr.id&&delete b.a_attr.id,b.children&&a.isArray(b.children)&&(b.children=this._delete_ids(b.children)),b},this.check=function(c,e,f,g,h){if(!1===d.check.call(this,c,e,f,g,h))return!1;e=e&&e.id?e:this.get_node(e),f=f&&f.id?f:this.get_node(f);var i,j,k,l,m=e&&e.id?h&&h.origin?h.origin:a.jstree.reference(e.id):null;switch(m=m&&m._model&&m._model.data?m._model.data:null,c){case"create_node":case"move_node":case"copy_node":if("move_node"!==c||-1===a.inArray(e.id,f.children)){if(i=this.get_rules(f),i.max_children!==b&&-1!==i.max_children&&i.max_children===f.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+c,data:JSON.stringify({chk:c,pos:g,obj:!(!e||!e.id)&&e.id,par:!(!f||!f.id)&&f.id})},!1;if(i.valid_children!==b&&-1!==i.valid_children&&-1===a.inArray(e.type||"default",i.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+c,data:JSON.stringify({chk:c,pos:g,obj:!(!e||!e.id)&&e.id,par:!(!f||!f.id)&&f.id})},!1;if(m&&e.children_d&&e.parents){for(j=0,k=0,l=e.children_d.length;k<l;k++)j=Math.max(j,m[e.children_d[k]].parents.length);j=j-e.parents.length+1}(j<=0||j===b)&&(j=1);do{if(i.max_depth!==b&&-1!==i.max_depth&&i.max_depth<j)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+c,data:JSON.stringify({chk:c,pos:g,obj:!(!e||!e.id)&&e.id,par:!(!f||!f.id)&&f.id})},!1;f=this.get_node(f.parent),i=this.get_rules(f),j++}while(f)}}return!0},this.get_rules=function(a){if(!(a=this.get_node(a)))return!1;var c=this.get_type(a,!0);return c.max_depth===b&&(c.max_depth=-1),c.max_children===b&&(c.max_children=-1),c.valid_children===b&&(c.valid_children=-1),c},this.get_type=function(b,c){return!!(b=this.get_node(b))&&(c?a.extend({type:b.type},this.settings.types[b.type]):b.type)},this.set_type=function(c,d){var e,f,g,h,i;if(a.isArray(c)){for(c=c.slice(),f=0,g=c.length;f<g;f++)this.set_type(c[f],d);return!0}return e=this.settings.types,c=this.get_node(c),!(!e[d]||!c)&&(h=c.type,i=this.get_icon(c),c.type=d,(!0===i||e[h]&&e[h].icon!==b&&i===e[h].icon)&&this.set_icon(c,e[d].icon===b||e[d].icon),!0)}},a.jstree.defaults.unique={case_sensitive:!1,duplicate:function(a,b){return a+" ("+b+")"}},a.jstree.plugins.unique=function(c,d){this.check=function(b,c,e,f,g){if(!1===d.check.call(this,b,c,e,f,g))return!1;if(c=c&&c.id?c:this.get_node(c),!(e=e&&e.id?e:this.get_node(e))||!e.children)return!0;var h,i,j="rename_node"===b?f:c.text,k=[],l=this.settings.unique.case_sensitive,m=this._model.data;for(h=0,i=e.children.length;h<i;h++)k.push(l?m[e.children[h]].text:m[e.children[h]].text.toLowerCase());switch(l||(j=j.toLowerCase()),b){case"delete_node":return!0;case"rename_node":return h=-1===a.inArray(j,k)||c.text&&c.text[l?"toString":"toLowerCase"]()===j,h||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+j+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:!(!c||!c.id)&&c.id,par:!(!e||!e.id)&&e.id})}),h;case"create_node":return h=-1===a.inArray(j,k),h||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+j+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:!(!c||!c.id)&&c.id,par:!(!e||!e.id)&&e.id})}),h;case"copy_node":return h=-1===a.inArray(j,k),h||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+j+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:!(!c||!c.id)&&c.id,par:!(!e||!e.id)&&e.id})}),h;case"move_node":return h=c.parent===e.id&&(!g||!g.is_multi)||-1===a.inArray(j,k),h||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+j+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:!(!c||!c.id)&&c.id,par:!(!e||!e.id)&&e.id})}),h}return!0},this.create_node=function(c,e,f,g,h){if(!e||e.text===b){if(null===c&&(c="#"),!(c=this.get_node(c)))return d.create_node.call(this,c,e,f,g,h);if(f=f===b?"last":f,!f.toString().match(/^(before|after)$/)&&!h&&!this.is_loaded(c))return d.create_node.call(this,c,e,f,g,h);e||(e={});var i,j,k,l,m,n=this._model.data,o=this.settings.unique.case_sensitive,p=this.settings.unique.duplicate;for(j=i=this.get_string("New node"),k=[],l=0,m=c.children.length;l<m;l++)k.push(o?n[c.children[l]].text:n[c.children[l]].text.toLowerCase());for(l=1;-1!==a.inArray(o?j:j.toLowerCase(),k);)j=p.call(this,i,++l).toString();e.text=j}return d.create_node.call(this,c,e,f,g,h)}};var o=k.createElement("DIV");return o.setAttribute("unselectable","on"),o.setAttribute("role","presentation"),o.className="jstree-wholerow",o.innerHTML="&#160;",a.jstree.plugins.wholerow=function(b,c){this.bind=function(){c.bind.call(this),this.element.on("ready.jstree set_state.jstree",a.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",a.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",a.proxy(function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",a.proxy(function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var c,d,e=!1;for(c=0,d=b.selected.length;c<d;c++)(e=this.get_node(b.selected[c],!0))&&e.length&&e.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",a.proxy(function(a,b){this.get_node(b.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",a.proxy(function(a,b){"hover_node"===a.type&&this.is_disabled(b.node)||this.get_node(b.node,!0).children(".jstree-wholerow")["hover_node"===a.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",a.proxy(function(b){b.preventDefault();var c=a.Event("contextmenu",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey,pageX:b.pageX,pageY:b.pageY});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c)},this)).on("click.jstree",".jstree-wholerow",function(b){b.stopImmediatePropagation();var c=a.Event("click",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",a.proxy(function(b){b.stopImmediatePropagation();var c=a.Event("click",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",a.proxy(function(a){return a.stopImmediatePropagation(),this.is_disabled(a.currentTarget)||this.hover_node(a.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",a.proxy(function(a){this.dehover_node(a.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),c.teardown.call(this)},this.redraw_node=function(b,d,e,f){if(b=c.redraw_node.apply(this,arguments)){var g=o.cloneNode(!0);-1!==a.inArray(b.id,this._data.core.selected)&&(g.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===b.id&&(g.className+=" jstree-wholerow-hovered"),b.insertBefore(g,b.childNodes[0])}return b}},a.fn.jstree}),function(a,b){"use strict";var c={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:'<svg class="feather feather-arrow-left sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="121"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',nextHtml:'<svg class="feather feather-arrow-right sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="131"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>',rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:10,responsive:[],onBeforeStart:function(a){},onSliderLoad:function(a){},onBeforeSlide:function(a,b){},onAfterSlide:function(a,b){},onBeforeNextSlide:function(a,b){},onBeforePrevSlide:function(a,b){}};a.fn.lightSlider=function(b){if(0===this.length)return this;if(this.length>1)return this.each(function(){a(this).lightSlider(b)}),this;var d={},e=a.extend(!0,{},c,b),f={},g=this;d.$el=this,"fade"===e.mode&&(e.vertical=!1),e.vertical&&(e.prevHtml='<svg class="feather feather-arrow-up sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="151"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>',e.nextHtml='<svg class="feather feather-arrow-down sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="111"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>');var h=g.children(),i=a(window).width(),j=null,k=null,l=0,m=0,n=!1,o=0,p="",q=0,r=!0===e.vertical?"height":"width",s=!0===e.vertical?"margin-bottom":"margin-right",t=0,u=0,v=0,w=0,x=null,y="ontouchstart"in document.documentElement,z={};return z.chbreakpoint=function(){if(i=a(window).width(),e.responsive.length){var b;if(!1===e.autoWidth&&(b=e.item),i<e.responsive[0].breakpoint)for(var c=0;c<e.responsive.length;c++)i<e.responsive[c].breakpoint&&(j=e.responsive[c].breakpoint,k=e.responsive[c]);if(void 0!==k&&null!==k)for(var d in k.settings)k.settings.hasOwnProperty(d)&&(void 0!==f[d]&&null!==f[d]||(f[d]=e[d]),e[d]=k.settings[d]);if(!a.isEmptyObject(f)&&i>e.responsive[0].breakpoint)for(var g in f)f.hasOwnProperty(g)&&(e[g]=f[g]);!1===e.autoWidth&&t>0&&v>0&&b!==e.item&&(q=Math.round(t/((v+e.slideMargin)*e.slideMove)))}},z.calSW=function(){!1===e.autoWidth&&(v=(o-(e.item*e.slideMargin-e.slideMargin))/e.item)},z.calWidth=function(a){var b=!0===a?p.find(".lslide").length:h.length;if(!1===e.autoWidth)m=b*(v+e.slideMargin);else{m=0;for(var c=0;c<b;c++)m+=parseInt(h.eq(c).width())+e.slideMargin}return m+2},d={doCss:function(){var a=function(){for(var a=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],b=document.documentElement,c=0;c<a.length;c++)if(a[c]in b.style)return!0};return!(!e.useCSS||!a())},keyPress:function(){e.keyPress&&a(document).on("keyup.lightslider",function(b){a(":focus").is("input, textarea")||(b.preventDefault?b.preventDefault():b.returnValue=!1,37===b.keyCode?g.goToPrevSlide():39===b.keyCode&&g.goToNextSlide())})},controls:function(){if(e.controls){var b=g.parents(".lSSlideOuter");e.vertical,b.append('<div class="lSAction"><a class="lSPrev">'+e.prevHtml+'</a><a class="lSNext">'+e.nextHtml+"</a></div>"),e.autoWidth?z.calWidth(!1)<o&&b.find(".lSAction").hide():l<=e.item&&b.find(".lSAction").hide(),b.find(".lSAction a").on("click",function(b){return b.preventDefault?b.preventDefault():b.returnValue=!1,a(this).hasClass("lSPrev")?g.goToPrevSlide():g.goToNextSlide(),!1})}},initialStyle:function(){var a=this;"fade"===e.mode&&(e.autoWidth=!1,e.slideEndAnimation=!1),e.auto&&(e.slideEndAnimation=!1),e.autoWidth&&(e.slideMove=1,e.item=1),e.loop&&(e.slideMove=1,e.freeMove=!1),e.onBeforeStart.call(this,g),z.chbreakpoint(),g.addClass("lightSlider").wrap('<div class="lSSlideOuter '+e.addClass+'"><div class="lSSlideWrapper"></div></div>'),p=g.parent(".lSSlideWrapper"),!0===e.rtl&&p.parent().addClass("lSrtl"),e.vertical?(p.parent().addClass("vertical"),o=e.verticalHeight,p.css("height",o+"px")):o=g.width(),h.addClass("lslide"),!0===e.loop&&"slide"===e.mode&&(z.calSW(),z.clone=function(){if(z.calWidth(!0)>o){for(var b=0,c=0,d=0;d<h.length&&(b+=parseInt(g.find(".lslide").eq(d).width())+e.slideMargin,c++,!(b>=o+e.slideMargin));d++);var f=!0===e.autoWidth?c:e.item;if(f<g.find(".clone.left").length)for(var i=0;i<g.find(".clone.left").length-f;i++)h.eq(i).remove();if(f<g.find(".clone.right").length)for(var j=h.length-1;j>h.length-1-g.find(".clone.right").length;j--)q--,h.eq(j).remove();for(var k=g.find(".clone.right").length;k<f;k++)g.find(".lslide").eq(k).clone().removeClass("lslide").addClass("clone right").appendTo(g),q++;for(var l=g.find(".lslide").length-g.find(".clone.left").length;l>g.find(".lslide").length-f;l--)g.find(".lslide").eq(l-1).clone().removeClass("lslide").addClass("clone left").prependTo(g);h=g.children()}else h.hasClass("clone")&&(g.find(".clone").remove(),a.move(g,0))},z.clone()),z.sSW=function(){l=h.length,!0===e.rtl&&!1===e.vertical&&(s="margin-left"),!1===e.autoWidth&&h.css(r,v+"px"),h.css(s,e.slideMargin+"px"),m=z.calWidth(!1),g.css(r,m+"px"),!0===e.loop&&"slide"===e.mode&&!1===n&&(q=g.find(".clone.left").length)},z.calL=function(){h=g.children(),l=h.length},this.doCss()&&p.addClass("usingCss"),z.calL(),"slide"===e.mode?(z.calSW(),z.sSW(),!0===e.loop&&(t=a.slideValue(),this.move(g,t)),!1===e.vertical&&this.setHeight(g,!1)):(this.setHeight(g,!0),g.addClass("lSFade"),this.doCss()||(h.fadeOut(0),h.eq(q).fadeIn(0))),!0===e.loop&&"slide"===e.mode?h.eq(q).addClass("active"):h.first().addClass("active")},pager:function(){var a=this;if(z.createPager=function(){w=(o-(e.thumbItem*e.thumbMargin-e.thumbMargin))/e.thumbItem;var b=p.find(".lslide"),c=p.find(".lslide").length,d=0,f="",h=0;for(d=0;d<c;d++){"slide"===e.mode&&(e.autoWidth?h+=(parseInt(b.eq(d).width())+e.slideMargin)*e.slideMove:h=d*((v+e.slideMargin)*e.slideMove));var i=b.eq(d*e.slideMove).attr("data-thumb");if(!0===e.gallery?f+='<li style="width:100%;'+r+":"+w+"px;"+s+":"+e.thumbMargin+'px"><a href="#"><img src="'+i+'" /></a></li>':f+='<li><a href="#">'+(d+1)+"</a></li>","slide"===e.mode&&h>=m-o-e.slideMargin){d+=1;var j=2;e.autoWidth&&(f+='<li><a href="#">'+(d+1)+"</a></li>",j=1),d<j?(f=null,p.parent().addClass("noPager")):p.parent().removeClass("noPager");break}}var k=p.parent();k.find(".lSPager").html(f),!0===e.gallery&&(!0===e.vertical&&k.find(".lSPager").css("width",e.vThumbWidth+"px"),u=d*(e.thumbMargin+w)+.5,k.find(".lSPager").css({property:u+"px","transition-duration":e.speed+"ms"}),!0===e.vertical&&p.parent().css("padding-right",e.vThumbWidth+e.galleryMargin+"px"),k.find(".lSPager").css(r,u+"px"));var l=k.find(".lSPager").find("li");l.first().addClass("active"),l.on("click",function(){return!0===e.loop&&"slide"===e.mode?q+=l.index(this)-k.find(".lSPager").find("li.active").index():q=l.index(this),g.mode(!1),!0===e.gallery&&a.slideThumb(),!1})},e.pager){var b="lSpg";e.gallery&&(b="lSGallery"),p.after('<ul class="lSPager '+b+'"></ul>');var c=e.vertical?"margin-left":"margin-top";p.parent().find(".lSPager").css(c,e.galleryMargin+"px"),z.createPager()}setTimeout(function(){z.init()},0)},setHeight:function(a,b){var c=null,d=this;c=e.loop?a.children(".lslide ").first():a.children().first();var f=function(){var d=c.outerHeight(),e=0,f=d;b&&(d=0,e=100*f/o),a.css({height:d+"px","padding-bottom":e+"%"})};f(),c.find("img").length?c.find("img")[0].complete?(f(),x||d.auto()):c.find("img").load(function(){setTimeout(function(){f(),x||d.auto()},100)}):x||d.auto()},active:function(a,b){this.doCss()&&"fade"===e.mode&&p.addClass("on");var c=0;if(q*e.slideMove<l){a.removeClass("active"),this.doCss()||"fade"!==e.mode||!1!==b||a.fadeOut(e.speed),c=!0===b?q:q*e.slideMove;var d,f;!0===b&&(d=a.length,f=d-1,c+1>=d&&(c=f)),!0===e.loop&&"slide"===e.mode&&(c=!0===b?q-g.find(".clone.left").length:q*e.slideMove,!0===b&&(d=a.length,f=d-1,c+1===d?c=f:c+1>d&&(c=0))),this.doCss()||"fade"!==e.mode||!1!==b||a.eq(c).fadeIn(e.speed),a.eq(c).addClass("active")}else a.removeClass("active"),a.eq(a.length-1).addClass("active"),this.doCss()||"fade"!==e.mode||!1!==b||(a.fadeOut(e.speed),a.eq(c).fadeIn(e.speed))},move:function(a,b){!0===e.rtl&&(b=-b),this.doCss()?!0===e.vertical?a.css({transform:"translate(0px, "+-b+"px)","-webkit-transform":"translate(0px, "+-b+"px)"}):a.css({transform:"translate("+-b+"px, 0px)","-webkit-transform":"translate("+-b+"px, 0px)"}):!0===e.vertical?a.css("position","relative").animate({top:-b+"px"},e.speed,e.easing):a.css("position","relative").animate({left:-b+"px"},e.speed,e.easing);var c=p.parent().find(".lSPager"),d=c.find("li");d.find("a").css("backgroundColor",c.attr("data-dot-color")),this.active(d,!0),c.find("li.active > a").css("backgroundColor",c.attr("data-current-dot-color"))},fade:function(){this.active(h,!1);var a=p.parent().find(".lSPager").find("li");this.active(a,!0)},slide:function(){var a=this;z.calSlide=function(){t=a.slideValue(),a.active(h,!1),t>m-o-e.slideMargin?t=m-o-e.slideMargin:t<0&&(t=0),a.move(g,t),!0===e.loop&&"slide"===e.mode&&(q>=l-g.find(".clone.left").length/e.slideMove&&a.resetSlide(g.find(".clone.left").length),0===q&&a.resetSlide(p.find(".lslide").length))},z.calSlide()},resetSlide:function(a){var b=this,c=g.parents(".lSSlideOuter");c.find(".lSAction a").addClass("disabled"),setTimeout(function(){q=a,p.css("transition-duration","0ms"),t=b.slideValue(),b.active(h,!1),d.move(g,t),setTimeout(function(){p.css("transition-duration",e.speed+"ms"),c.find(".lSAction a").removeClass("disabled")},50)},e.speed+100)},slideValue:function(){var a=0;if(!1===e.autoWidth)a=q*((v+e.slideMargin)*e.slideMove);else{a=0;for(var b=0;b<q;b++)a+=parseInt(h.eq(b).width())+e.slideMargin}return a},slideThumb:function(){var a;switch(e.currentPagerPosition){case"left":a=0;break;case"middle":a=o/2-w/2;break;case"right":a=o-w}var b=q-g.find(".clone.left").length,c=p.parent().find(".lSPager");"slide"===e.mode&&!0===e.loop&&(b>=c.children().length?b=0:b<0&&(b=c.children().length));var d=b*(w+e.thumbMargin)-a;d+o>u&&(d=u-o-e.thumbMargin),d<0&&(d=0),this.move(c,d)},auto:function(){e.auto&&(clearInterval(x),x=setInterval(function(){g.goToNextSlide()},e.pause))},pauseOnHover:function(){var b=this;e.auto&&e.pauseOnHover&&(p.on("mouseenter",function(){a(this).addClass("ls-hover"),g.pause(),e.auto=!0}),p.on("mouseleave",function(){a(this).removeClass("ls-hover"),p.find(".lightSlider").hasClass("lsGrabbing")||b.auto()}))},touchMove:function(a,b){if(p.css("transition-duration","0ms"),"slide"===e.mode){var c=a-b,d=t-c;if(d>=m-o-e.slideMargin)if(!1===e.freeMove)d=m-o-e.slideMargin;else{var f=m-o-e.slideMargin;d=f+(d-f)/5}else d<0&&(!1===e.freeMove?d=0:d/=5);this.move(g,d)}},touchEnd:function(a){if(p.css("transition-duration",e.speed+"ms"),"slide"===e.mode){var b=!1,c=!0;t-=a,t>m-o-e.slideMargin?(t=m-o-e.slideMargin,!1===e.autoWidth&&(b=!0)):t<0&&(t=0);var d=function(a){var c=0;if(b||a&&(c=1),e.autoWidth)for(var d=0,f=0;f<h.length&&(d+=parseInt(h.eq(f).width())+e.slideMargin,q=f+c,!(d>=t));f++);else{var g=t/((v+e.slideMargin)*e.slideMove);q=parseInt(g)+c,t>=m-o-e.slideMargin&&g%1!=0&&q++}};a>=e.swipeThreshold?(d(!1),c=!1):a<=-e.swipeThreshold&&(d(!0),c=!1),g.mode(c),this.slideThumb(),1===h.length&&this.move(g,0)}else a>=e.swipeThreshold?g.goToPrevSlide():a<=-e.swipeThreshold&&g.goToNextSlide()},enableDrag:function(){var b=this;if(!y){var c=0,d=0,f=!1;p.find(".lightSlider").addClass("lsGrab"),p.on("mousedown",function(b){var d=b.target.tagName;if(!e.__disableDrag__&&"INPUT"!==d&&"TEXTAREA"!==d)return!(m<o&&0!==m)&&void(a(b.target).hasClass("lSPrev")||a(b.target).hasClass("lSNext")||(c=!0===e.vertical?b.pageY:b.pageX,f=!0,b.preventDefault?b.preventDefault():b.returnValue=!1,p.scrollLeft+=1,p.scrollLeft-=1,p.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(x)))}),a(window).on("mousemove",function(a){f&&(d=!0===e.vertical?a.pageY:a.pageX,b.touchMove(d,c))}),a(window).on("mouseup",function(g){if(f){p.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab"),f=!1,d=!0===e.vertical?g.pageY:g.pageX;var h=d-c;Math.abs(h)>=e.swipeThreshold&&a(window).on("click.ls",function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopImmediatePropagation(),b.stopPropagation(),a(window).off("click.ls")}),b.touchEnd(h)}})}},enableTouch:function(){var a=this;if(y){var b={},c={};p.on("touchstart",function(a){e.__disableDrag__||(c=a.originalEvent.targetTouches[0],b.pageX=a.originalEvent.targetTouches[0].pageX,b.pageY=a.originalEvent.targetTouches[0].pageY,clearInterval(x))}),p.on("touchmove",function(d){if(!e.__disableDrag__){if(m<o&&0!==m)return!1;var f=d.originalEvent;c=f.targetTouches[0];var g=Math.abs(c.pageX-b.pageX),h=Math.abs(c.pageY-b.pageY);!0===e.vertical?(3*h>g&&d.preventDefault(),a.touchMove(c.pageY,b.pageY)):(3*g>h&&d.preventDefault(),a.touchMove(c.pageX,b.pageX))}}),p.on("touchend",function(){if(!e.__disableDrag__){if(m<o&&0!==m)return!1;var d;d=!0===e.vertical?c.pageY-b.pageY:c.pageX-b.pageX,a.touchEnd(d)}})}},build:function(){var b=this;b.initialStyle(),this.doCss()&&(!0===e.enableTouch&&b.enableTouch(),!0===e.enableDrag&&b.enableDrag()),a(window).on("focus",function(){b.auto()}),a(window).on("blur",function(){clearInterval(x)}),b.pager(),b.pauseOnHover(),b.controls(),b.keyPress()}},d.build(),z.init=function(){z.chbreakpoint(),!0===e.vertical?(o=e.item>1?e.verticalHeight:h.outerHeight(),e.itemFixedHeight&&(o=e.itemFixedHeight),p.css("height",o+"px")):(o=p.width(),e.itemFixedWidth&&(o=e.itemFixedWidth)),!0===e.loop&&"slide"===e.mode&&z.clone(),z.calL(),"slide"===e.mode&&g.removeClass("lSSlide"),"slide"===e.mode&&(z.calSW(),z.sSW()),setTimeout(function(){"slide"===e.mode&&g.addClass("lSSlide")},1e3),e.pager&&z.createPager(),!0===e.adaptiveHeight&&!1===e.vertical&&g.css("height",h.eq(q).outerHeight(!0)),!1===e.adaptiveHeight&&("slide"===e.mode?!1===e.vertical?d.setHeight(g,!1):d.auto():d.setHeight(g,!0)),!0===e.gallery&&d.slideThumb(),"slide"===e.mode&&d.slide();var a=g.parents(".lSSlideOuter");!1===e.autoWidth?h.length<=e.item?a.find(".lSAction").hide():a.find(".lSAction").show():z.calWidth(!1)<o&&0!==m?a.find(".lSAction").hide():a.find(".lSAction").show()},g.goToPrevSlide=function(){if(q>0)e.onBeforePrevSlide.call(this,g,q),q--,g.mode(!1),!0===e.gallery&&d.slideThumb();else if(!0===e.loop){if(e.onBeforePrevSlide.call(this,g,q),"fade"===e.mode){var a=l-1;q=parseInt(a/e.slideMove)}g.mode(!1),!0===e.gallery&&d.slideThumb()}else!0===e.slideEndAnimation&&(g.addClass("leftEnd"),setTimeout(function(){g.removeClass("leftEnd")},400))},g.goToNextSlide=function(){var a=!0;if("slide"===e.mode){a=d.slideValue()<m-o-e.slideMargin}q*e.slideMove<l-e.slideMove&&a?(e.onBeforeNextSlide.call(this,g,q),q++,g.mode(!1),!0===e.gallery&&d.slideThumb()):!0===e.loop?(e.onBeforeNextSlide.call(this,g,q),q=0,g.mode(!1),!0===e.gallery&&d.slideThumb()):!0===e.slideEndAnimation&&(g.addClass("rightEnd"),setTimeout(function(){g.removeClass("rightEnd")},400))},g.mode=function(a){!0===e.adaptiveHeight&&!1===e.vertical&&g.css("height",h.eq(q).outerHeight(!0)),!1===n&&("slide"===e.mode?d.doCss()&&(g.addClass("lSSlide"),""!==e.speed&&p.css("transition-duration",e.speed+"ms"),""!==e.cssEasing&&p.css("transition-timing-function",e.cssEasing)):d.doCss()&&(""!==e.speed&&g.css("transition-duration",e.speed+"ms"),""!==e.cssEasing&&g.css("transition-timing-function",e.cssEasing))),a||e.onBeforeSlide.call(this,g,q),"slide"===e.mode?d.slide():d.fade(),p.hasClass("ls-hover")||d.auto(),setTimeout(function(){a||e.onAfterSlide.call(this,g,q)},e.speed),n=!0},g.play=function(){g.goToNextSlide(),e.auto=!0,d.auto()},g.pause=function(){e.auto=!1,clearInterval(x)},g.refresh=function(){z.init()},g.getCurrentSlideCount=function(){var a=q;if(e.loop){var b=p.find(".lslide").length,c=g.find(".clone.left").length;a=q<=c-1?b+(q-c):q>=b+c?q-b-c:q-c}return a+1},g.getTotalSlideCount=function(){return p.find(".lslide").length},g.goToSlide=function(a){q=e.loop?a+g.find(".clone.left").length-1:a,g.mode(!1),!0===e.gallery&&d.slideThumb()},g.disableDrag=function(a){e.__disableDrag__=a},g.isDisableDrag=function(a){return e.__disableDrag__},g.settings=function(){return e},g.destroy=function(){g.lightSlider&&(g.goToPrevSlide=function(){},g.goToNextSlide=function(){},g.mode=function(){},g.play=function(){},g.pause=function(){},g.refresh=function(){},g.getCurrentSlideCount=function(){},g.getTotalSlideCount=function(){},g.goToSlide=function(){},g.lightSlider=null,z={init:function(){}},g.parents(".lSSlideOuter").find(".lSAction, .lSPager").remove(),g.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),g.children().removeAttr("style"),h.removeClass("lslide active"),g.find(".clone").remove(),h=null,x=null,n=!1,q=0)},setTimeout(function(){e.onSliderLoad.call(this,g)},10),a(window).on("resize orientationchange",function(a){setTimeout(function(){a.preventDefault?a.preventDefault():a.returnValue=!1,z.init()},200)}),this}}(jQuery);var swfobject=function(){function a(){if(!T&&document.getElementsByTagName("body")[0]){try{var a,b=r("span");b.style.display="none",a=M.getElementsByTagName("body")[0].appendChild(b),a.parentNode.removeChild(a),a=null,b=null}catch(a){return}T=!0;for(var c=P.length,d=0;d<c;d++)P[d]()}}function b(a){T?a():P[P.length]=a}function c(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function d(){var a=M.getElementsByTagName("body")[0],b=r(F);b.setAttribute("style","visibility: hidden;"),b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function f(){if(typeof c.GetVariable!=E)try{var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),X.pv=[s(g[0]),s(g[1]),s(g[2])])}catch(a){X.pv=[8,0,0]}else if(d<10)return d++,void setTimeout(f,10);a.removeChild(b),c=null,e()}()}else e()}function e(){var a=Q.length;if(a>0)for(var b=0;b<a;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(X.pv[0]>0){var j=q(c);if(j)if(!u(Q[b].swfVersion)||X.wk&&X.wk<312)if(Q[b].expressInstall&&g()){var k={};k.data=Q[b].expressInstall,k.width=j.getAttribute("width")||"0",k.height=j.getAttribute("height")||"0",j.getAttribute("class")&&(k.styleclass=j.getAttribute("class")),j.getAttribute("align")&&(k.align=j.getAttribute("align"));for(var l={},m=j.getElementsByTagName("param"),n=m.length,o=0;o<n;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));h(k,l,c,d)}else i(j),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=f(c),e.id=c,d(e))}else if(w(c,!0),d){var p=f(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p,e.id=p.id),d(e)}}}function f(a){var b=null,c=q(a);return c&&"OBJECT"===c.nodeName.toUpperCase()&&(b=typeof c.SetVariable!==E?c:c.getElementsByTagName(F)[0]||c),b}function g(){return!U&&u("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function h(a,b,c,d){var e=q(c);if(c=p(c),U=!0,A=d||null,B={success:!1,id:c},e){"OBJECT"==e.nodeName.toUpperCase()?(y=j(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&s(a.width)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&s(a.height)<137)&&(a.height="137");var f=X.ie?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(M.title.slice(0,47)+" - Flash Player Installation");if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,X.ie&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",n(e)}l(a,b,c)}}function i(a){if(X.ie&&4!=a.readyState){a.style.display="none";var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(j(a),b),n(a)}else a.parentNode.replaceChild(j(a),a)}function j(a){var b=r("div");if(X.win&&X.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;f<e;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function k(a,b){var c=r("div");return c.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+b+"</object>",c.firstChild}function l(a,b,c){var d,e=q(c);if(c=p(c),X.wk&&X.wk<312)return d;if(e){var f,g,h,i=r(X.ie?"div":F);typeof a.id==E&&(a.id=c);for(h in b)b.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&m(i,h,b[h]);X.ie&&(i=k(a.data,i.innerHTML));for(f in a)a.hasOwnProperty(f)&&(g=f.toLowerCase(),"styleclass"===g?i.setAttribute("class",a[f]):"classid"!==g&&"data"!==g&&i.setAttribute(f,a[f]));X.ie?R[R.length]=a.id:(i.setAttribute("type",I),i.setAttribute("data",a.data)),e.parentNode.replaceChild(i,e),d=i}return d}function m(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=q(a);b&&"OBJECT"==b.nodeName.toUpperCase()&&(X.ie?(b.style.display="none",function a(){if(4==b.readyState){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}else setTimeout(a,10)}()):b.parentNode.removeChild(b))}function o(a){return a&&a.nodeType&&1===a.nodeType}function p(a){return o(a)?a.id:a}function q(a){if(o(a))return a;var b=null;try{b=M.getElementById(a)}catch(a){}return b}function r(a){return M.createElement(a)}function s(a){return parseInt(a,10)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){a+="";var b=X.pv,c=a.split(".");return c[0]=s(c[0]),c[1]=s(c[1])||0,c[2]=s(c[2])||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]}function v(a,b,c,d){var e=M.getElementsByTagName("head")[0];if(e){var f="string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),X.ie&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}C&&(typeof C.addRule!=E?C.addRule(a,b):typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}")))}}function w(a,b){if(V){var c=b?"visible":"hidden",d=q(a);T&&d?d.style.visibility=c:"string"==typeof a&&v("#"+a,"visibility:"+c)}}function x(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=window,M=document,N=navigator,O=!1,P=[],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=!1,X=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),g="Microsoft Internet Explorer"===N.appName,h=[0,0,0],i=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)(i=N.plugins[G].description)&&typeof N.mimeTypes!=E&&N.mimeTypes[I]&&N.mimeTypes[I].enabledPlugin&&(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=s(i.replace(/^(.*)\..*$/,"$1")),h[1]=s(i.replace(/^.*\.(.*)\s.*$/,"$1")),h[2]=/[a-zA-Z]/.test(i)?s(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!=E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"))&&(g=!0,i=i.split(" ")[1].split(","),h=[s(i[0]),s(i[1]),s(i[2])])}catch(a){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){X.w3&&((typeof M.readyState!=E&&("complete"===M.readyState||"interactive"===M.readyState)||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&a(),T||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",a,!1),X.ie&&(M.attachEvent(K,function b(){"complete"==M.readyState&&(M.detachEvent(K,b),a())}),L==top&&function b(){if(!T){try{M.documentElement.doScroll("left")}catch(a){return void setTimeout(b,0)}a()}}()),X.wk&&function b(){if(!T)return/loaded|complete/.test(M.readyState)?void a():void setTimeout(b,0)}()))}();P[0]=function(){O?d():e()};!function(){X.ie&&window.attachEvent("onunload",function(){for(var a=S.length,b=0;b<a;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var c=R.length,d=0;d<c;d++)n(R[d]);for(var e in X)X[e]=null;X=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(X.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(X.w3)return f(a)},embedSWF:function(a,c,d,e,f,i,j,k,m,n){var o=p(c),q={success:!1,id:o};X.w3&&!(X.wk&&X.wk<312)&&a&&c&&d&&e&&f?(w(o,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===F)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var r={};if(k&&typeof k===F)for(var s in k)r[s]=k[s];if(j&&typeof j===F)for(var t in j)if(j.hasOwnProperty(t)){var v=W?encodeURIComponent(t):t,x=W?encodeURIComponent(j[t]):j[t];typeof r.flashvars!=E?r.flashvars+="&"+v+"="+x:r.flashvars=v+"="+x}if(u(f)){var y=l(b,r,c);b.id==o&&w(o,!0),q.success=!0,q.ref=y,q.id=y.id}else{if(i&&g())return b.data=i,void h(b,r,c,n);w(o,!0)}n&&n(q)})):n&&n(q)},switchOffAutoHideShow:function(){V=!1},enableUriEncoding:function(a){W=typeof a===E||a},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return X.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){X.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){X.w3&&n(a)},createCSS:function(a,b,c,d){X.w3&&v(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=q(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),X.ie&&(y.style.display="block")),A&&A(B)),U=!1}},version:"2.3"}}();!function(a){"function"==typeof define&&define.amd?define(a):a(jQuery)}(function(){Toast.STATUS_NONE=0,Toast.STATUS_LOADING=1,Toast.STATUS_LOADED=2,Toast.CURRENT_PAGE="current",Toast.IS_ZOOM=!1,Toast.IS_ZOOM_LOCKED=!1,Toast.IS_PANNING=!1,Toast.IS_PINCHING=!1,Toast.IS_ZOOM_DRAG_MODE=!1,Toast.IS_DRAGGING=!1,Toast.IS_DRAWING=!1,Toast.IS_SCROLLING=!1,Toast.IS_VERTICAL_SCROLLING=!1,Toast.IS_SLIDING=!1;var a=Toast.urlParams.get("moduleBaseUrl");a&&(a.lastIndexOf("/")!==a.length-1&&(a+="/"),Toast.config.moduleBaseUrl=a);var b=Toast.urlParams.get("dataBaseUrl");b&&(b.lastIndexOf("/")!==b.length-1&&(b+="/"),Toast.config.dataBaseUrl=b);var c=Toast.urlParams.get("movieBaseUrl");c&&(c.lastIndexOf("/")!==c.length-1&&(c+="/"),Toast.config.movieBaseUrl=c),Toast.data=new Backbone.Model({}),Toast.__eventTypes__="ontouchstart"in window?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},Toast.UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},Toast.UUID16=function(){return"xxxxxxxx-xxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},Toast.UUID8=function(){return"xxxx-xxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},Toast.UUID6=function(){return"xxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},Toast.UUID4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},Toast.dateUUID=function(){var a=new Date,b=a.getFullYear();return(b=b.toString().substr(2,2))+(a.getMonth()+1)+a.getDate()+a.getHours()+a.getMinutes()+"-"+Toast.UUID4()},Toast.date=function(){var a=new Date,b=a.getFullYear(),c=""+(a.getMonth()+1),d=""+a.getDate(),e=""+a.getHours(),f=""+a.getMinutes(),g=""+a.getSeconds();return c.length<2&&(c="0"+c),d.length<2&&(d="0"+d),e.length<2&&(e="0"+e),f.length<2&&(f="0"+f),g.length<2&&(g="0"+g),b+"-"+c+"-"+d+" "+e+":"+f+":"+g},Toast.isLocaleDefault=function(){return!Toast.LocalStorage.get("locale")},Toast.getLocale=function(){return Toast.urlParams.get("testEnvironment")?"en":Toast.LocalStorage.get("locale")||window.require.s.contexts._.config.locale},Toast.setLocale=function(a){a?Toast.LocalStorage.set("locale",a):Toast.LocalStorage.remove("locale")},Toast.isInputBoxFocused=function(){return $("input:focus").get(0)||$("textarea:focus").get(0)},Toast.getModuleBaseUrl=function(a){var b=a.uri;return b.substring(0,b.lastIndexOf("/",b.length-2)+1)},Toast.lazy=function(a,b,c){void 0===c?setTimeout(a,b):setTimeout(a.bind(c),b)},Toast.lazyOnce=function(a,b,c,d){c.id&&clearTimeout(c.id),c.id=void 0===d?setTimeout(a,b):setTimeout(a.bind(d),b)},Toast.executeFunctionByName=function(a,b){for(var c=[].slice.call(arguments).splice(2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(b,c)},Toast.hasFunctionByName=function(a,b){for(var c=a.split("."),d=c.pop(),e=0;e<c.length;e++)b=b[c[e]];return!!b[d]},Toast.isUrlValid=function(a){return null!=a.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)},Toast.saveToDisk=function(a,b){if(b||(b=a.substring(a.lastIndexOf("/")+1).split("?")[0]),Toast.isIE){var c=document.createElement("a");c.href=a,c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),document.body.removeChild(c)}else{var d=new XMLHttpRequest;d.responseType="blob",d.onload=function(){var a=document.createElement("a");a.href=window.URL.createObjectURL(d.response),a.download=b,a.style.display="none",document.body.appendChild(a),a.click(),delete a},d.open("GET",a),d.send()}},Toast.topWindow=function(){try{if(!parent)return window;for(var a=parent;;){if(a===a.parent)break;a=a.parent}return a.window.innerWidth,a.window}catch(a){return Toast.parentAccessDenied=!0,window}},Toast.topDocument=function(){try{if(!parent)return document;for(var a=parent;;){if(a===a.parent)break;a=a.parent}return a.document}catch(a){return Toast.parentAccessDenied=!0,document}},Toast._destroy=function(){Toast.__destroy__=!0,$(document.body).remove()},_.extend(Toast,Backbone.Events,{}),Toast.dispatch=Toast.send=Toast.trigger.bind(Toast);Toast.extend=function(a,b){var c,d=this;c=a&&_.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},_.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&_.extend(c.prototype,a),c.__super__=d.prototype,c};Toast.RUNENV_ERROR===Toast.RUNENV_ERROR_NO&&$(document).ready(function(){Toast.showLoading(!0)})});